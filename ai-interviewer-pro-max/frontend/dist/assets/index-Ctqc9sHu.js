var OP=Object.defineProperty;var jP=(n,e,t)=>e in n?OP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Hu=(n,e,t)=>jP(n,typeof e!="symbol"?e+"":e,t);function zP(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var x5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function IC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var BC={exports:{}},Zm={},LC={exports:{}},Lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vh=Symbol.for("react.element"),GP=Symbol.for("react.portal"),HP=Symbol.for("react.fragment"),VP=Symbol.for("react.strict_mode"),WP=Symbol.for("react.profiler"),XP=Symbol.for("react.provider"),JP=Symbol.for("react.context"),YP=Symbol.for("react.forward_ref"),KP=Symbol.for("react.suspense"),qP=Symbol.for("react.memo"),QP=Symbol.for("react.lazy"),Q1=Symbol.iterator;function ZP(n){return n===null||typeof n!="object"?null:(n=Q1&&n[Q1]||n["@@iterator"],typeof n=="function"?n:null)}var DC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kC=Object.assign,FC={};function gu(n,e,t){this.props=n,this.context=e,this.refs=FC,this.updater=t||DC}gu.prototype.isReactComponent={};gu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};gu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function UC(){}UC.prototype=gu.prototype;function v_(n,e,t){this.props=n,this.context=e,this.refs=FC,this.updater=t||DC}var y_=v_.prototype=new UC;y_.constructor=v_;kC(y_,gu.prototype);y_.isPureReactComponent=!0;var Z1=Array.isArray,OC=Object.prototype.hasOwnProperty,x_={current:null},jC={key:!0,ref:!0,__self:!0,__source:!0};function zC(n,e,t){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)OC.call(e,i)&&!jC.hasOwnProperty(i)&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=t;else if(1<o){for(var l=Array(o),h=0;h<o;h++)l[h]=arguments[h+2];r.children=l}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:vh,type:n,key:s,ref:a,props:r,_owner:x_.current}}function $P(n,e){return{$$typeof:vh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function __(n){return typeof n=="object"&&n!==null&&n.$$typeof===vh}function eI(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var $1=/\/+/g;function Hv(n,e){return typeof n=="object"&&n!==null&&n.key!=null?eI(""+n.key):e.toString(36)}function Zp(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case vh:case GP:a=!0}}if(a)return a=n,r=r(a),n=i===""?"."+Hv(a,0):i,Z1(r)?(t="",n!=null&&(t=n.replace($1,"$&/")+"/"),Zp(r,e,t,"",function(h){return h})):r!=null&&(__(r)&&(r=$P(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace($1,"$&/")+"/")+n)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Z1(n))for(var o=0;o<n.length;o++){s=n[o];var l=i+Hv(s,o);a+=Zp(s,e,t,l,r)}else if(l=ZP(n),typeof l=="function")for(n=l.call(n),o=0;!(s=n.next()).done;)s=s.value,l=i+Hv(s,o++),a+=Zp(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function kf(n,e,t){if(n==null)return n;var i=[],r=0;return Zp(n,i,"","",function(s){return e.call(t,s,r++)}),i}function tI(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Fi={current:null},$p={transition:null},nI={ReactCurrentDispatcher:Fi,ReactCurrentBatchConfig:$p,ReactCurrentOwner:x_};function GC(){throw Error("act(...) is not supported in production builds of React.")}Lt.Children={map:kf,forEach:function(n,e,t){kf(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return kf(n,function(){e++}),e},toArray:function(n){return kf(n,function(e){return e})||[]},only:function(n){if(!__(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Lt.Component=gu;Lt.Fragment=HP;Lt.Profiler=WP;Lt.PureComponent=v_;Lt.StrictMode=VP;Lt.Suspense=KP;Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nI;Lt.act=GC;Lt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=kC({},n.props),r=n.key,s=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=x_.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)OC.call(e,l)&&!jC.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){o=Array(l);for(var h=0;h<l;h++)o[h]=arguments[h+2];i.children=o}return{$$typeof:vh,type:n.type,key:r,ref:s,props:i,_owner:a}};Lt.createContext=function(n){return n={$$typeof:JP,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:XP,_context:n},n.Consumer=n};Lt.createElement=zC;Lt.createFactory=function(n){var e=zC.bind(null,n);return e.type=n,e};Lt.createRef=function(){return{current:null}};Lt.forwardRef=function(n){return{$$typeof:YP,render:n}};Lt.isValidElement=__;Lt.lazy=function(n){return{$$typeof:QP,_payload:{_status:-1,_result:n},_init:tI}};Lt.memo=function(n,e){return{$$typeof:qP,type:n,compare:e===void 0?null:e}};Lt.startTransition=function(n){var e=$p.transition;$p.transition={};try{n()}finally{$p.transition=e}};Lt.unstable_act=GC;Lt.useCallback=function(n,e){return Fi.current.useCallback(n,e)};Lt.useContext=function(n){return Fi.current.useContext(n)};Lt.useDebugValue=function(){};Lt.useDeferredValue=function(n){return Fi.current.useDeferredValue(n)};Lt.useEffect=function(n,e){return Fi.current.useEffect(n,e)};Lt.useId=function(){return Fi.current.useId()};Lt.useImperativeHandle=function(n,e,t){return Fi.current.useImperativeHandle(n,e,t)};Lt.useInsertionEffect=function(n,e){return Fi.current.useInsertionEffect(n,e)};Lt.useLayoutEffect=function(n,e){return Fi.current.useLayoutEffect(n,e)};Lt.useMemo=function(n,e){return Fi.current.useMemo(n,e)};Lt.useReducer=function(n,e,t){return Fi.current.useReducer(n,e,t)};Lt.useRef=function(n){return Fi.current.useRef(n)};Lt.useState=function(n){return Fi.current.useState(n)};Lt.useSyncExternalStore=function(n,e,t){return Fi.current.useSyncExternalStore(n,e,t)};Lt.useTransition=function(){return Fi.current.useTransition()};Lt.version="18.3.1";LC.exports=Lt;var B=LC.exports;const S_=IC(B),iI=zP({__proto__:null,default:S_},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rI=B,sI=Symbol.for("react.element"),aI=Symbol.for("react.fragment"),oI=Object.prototype.hasOwnProperty,lI=rI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cI={key:!0,ref:!0,__self:!0,__source:!0};function HC(n,e,t){var i,r={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)oI.call(e,i)&&!cI.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:sI,type:n,key:s,ref:a,props:r,_owner:lI.current}}Zm.Fragment=aI;Zm.jsx=HC;Zm.jsxs=HC;BC.exports=Zm;var c=BC.exports,vy={},VC={exports:{}},fr={},WC={exports:{}},XC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,j){var W=U.length;U.push(j);e:for(;0<W;){var Y=W-1>>>1,re=U[Y];if(0<r(re,j))U[Y]=j,U[W]=re,W=Y;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var j=U[0],W=U.pop();if(W!==j){U[0]=W;e:for(var Y=0,re=U.length,Q=re>>>1;Y<Q;){var oe=2*(Y+1)-1,ge=U[oe],Te=oe+1,ce=U[Te];if(0>r(ge,W))Te<re&&0>r(ce,ge)?(U[Y]=ce,U[Te]=W,Y=Te):(U[Y]=ge,U[oe]=W,Y=oe);else if(Te<re&&0>r(ce,W))U[Y]=ce,U[Te]=W,Y=Te;else break e}}return j}function r(U,j){var W=U.sortIndex-j.sortIndex;return W!==0?W:U.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],h=[],f=1,p=null,m=3,g=!1,y=!1,M=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(U){for(var j=t(h);j!==null;){if(j.callback===null)i(h);else if(j.startTime<=U)i(h),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(h)}}function E(U){if(M=!1,A(U),!y)if(t(l)!==null)y=!0,q(N);else{var j=t(h);j!==null&&ue(E,j.startTime-U)}}function N(U,j){y=!1,M&&(M=!1,v(L),L=-1),g=!0;var W=m;try{for(A(j),p=t(l);p!==null&&(!(p.expirationTime>j)||U&&!D());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,m=p.priorityLevel;var re=Y(p.expirationTime<=j);j=n.unstable_now(),typeof re=="function"?p.callback=re:p===t(l)&&i(l),A(j)}else i(l);p=t(l)}if(p!==null)var Q=!0;else{var oe=t(h);oe!==null&&ue(E,oe.startTime-j),Q=!1}return Q}finally{p=null,m=W,g=!1}}var T=!1,P=null,L=-1,R=5,b=-1;function D(){return!(n.unstable_now()-b<R)}function X(){if(P!==null){var U=n.unstable_now();b=U;var j=!0;try{j=P(!0,U)}finally{j?$():(T=!1,P=null)}}else T=!1}var $;if(typeof S=="function")$=function(){S(X)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,K=V.port2;V.port1.onmessage=X,$=function(){K.postMessage(null)}}else $=function(){_(X,0)};function q(U){P=U,T||(T=!0,$())}function ue(U,j){L=_(function(){U(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){y||g||(y=!0,q(N))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(m){case 1:case 2:case 3:var j=3;break;default:j=m}var W=m;m=j;try{return U()}finally{m=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,j){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var W=m;m=U;try{return j()}finally{m=W}},n.unstable_scheduleCallback=function(U,j,W){var Y=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Y+W:Y):W=Y,U){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=W+re,U={id:f++,callback:j,priorityLevel:U,startTime:W,expirationTime:re,sortIndex:-1},W>Y?(U.sortIndex=W,e(h,U),t(l)===null&&U===t(h)&&(M?(v(L),L=-1):M=!0,ue(E,W-Y))):(U.sortIndex=re,e(l,U),y||g||(y=!0,q(N))),U},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(U){var j=m;return function(){var W=m;m=j;try{return U.apply(this,arguments)}finally{m=W}}}})(XC);WC.exports=XC;var uI=WC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dI=B,dr=uI;function Ne(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JC=new Set,Ld={};function bl(n,e){$c(n,e),$c(n+"Capture",e)}function $c(n,e){for(Ld[n]=e,n=0;n<e.length;n++)JC.add(e[n])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yy=Object.prototype.hasOwnProperty,hI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ew={},tw={};function fI(n){return yy.call(tw,n)?!0:yy.call(ew,n)?!1:hI.test(n)?tw[n]=!0:(ew[n]=!0,!1)}function pI(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function mI(n,e,t,i){if(e===null||typeof e>"u"||pI(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ui(n,e,t,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ui={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ui[n]=new Ui(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ui[e]=new Ui(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ui[n]=new Ui(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ui[n]=new Ui(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ui[n]=new Ui(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ui[n]=new Ui(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ui[n]=new Ui(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ui[n]=new Ui(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ui[n]=new Ui(n,5,!1,n.toLowerCase(),null,!1,!1)});var A_=/[\-:]([a-z])/g;function w_(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(A_,w_);ui[e]=new Ui(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(A_,w_);ui[e]=new Ui(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(A_,w_);ui[e]=new Ui(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ui[n]=new Ui(n,1,!1,n.toLowerCase(),null,!1,!1)});ui.xlinkHref=new Ui("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ui[n]=new Ui(n,1,!1,n.toLowerCase(),null,!0,!0)});function M_(n,e,t,i){var r=ui.hasOwnProperty(e)?ui[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mI(e,t,r,i)&&(t=null),i||r===null?fI(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var ca=dI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ff=Symbol.for("react.element"),Ec=Symbol.for("react.portal"),Cc=Symbol.for("react.fragment"),E_=Symbol.for("react.strict_mode"),xy=Symbol.for("react.profiler"),YC=Symbol.for("react.provider"),KC=Symbol.for("react.context"),C_=Symbol.for("react.forward_ref"),_y=Symbol.for("react.suspense"),Sy=Symbol.for("react.suspense_list"),T_=Symbol.for("react.memo"),ka=Symbol.for("react.lazy"),qC=Symbol.for("react.offscreen"),nw=Symbol.iterator;function Vu(n){return n===null||typeof n!="object"?null:(n=nw&&n[nw]||n["@@iterator"],typeof n=="function"?n:null)}var xn=Object.assign,Vv;function pd(n){if(Vv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Vv=e&&e[1]||""}return`
`+Vv+n}var Wv=!1;function Xv(n,e){if(!n||Wv)return"";Wv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(n,[],e)}else{try{e.call()}catch(h){i=h}n.call(e.prototype)}else{try{throw Error()}catch(h){i=h}n()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var l=`
`+r[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{Wv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?pd(n):""}function gI(n){switch(n.tag){case 5:return pd(n.type);case 16:return pd("Lazy");case 13:return pd("Suspense");case 19:return pd("SuspenseList");case 0:case 2:case 15:return n=Xv(n.type,!1),n;case 11:return n=Xv(n.type.render,!1),n;case 1:return n=Xv(n.type,!0),n;default:return""}}function Ay(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Cc:return"Fragment";case Ec:return"Portal";case xy:return"Profiler";case E_:return"StrictMode";case _y:return"Suspense";case Sy:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case KC:return(n.displayName||"Context")+".Consumer";case YC:return(n._context.displayName||"Context")+".Provider";case C_:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case T_:return e=n.displayName||null,e!==null?e:Ay(n.type)||"Memo";case ka:e=n._payload,n=n._init;try{return Ay(n(e))}catch{}}return null}function vI(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ay(e);case 8:return e===E_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function io(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function QC(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yI(n){var e=QC(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Uf(n){n._valueTracker||(n._valueTracker=yI(n))}function ZC(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=QC(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function xm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function wy(n,e){var t=e.checked;return xn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function iw(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=io(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $C(n,e){e=e.checked,e!=null&&M_(n,"checked",e,!1)}function My(n,e){$C(n,e);var t=io(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Ey(n,e.type,t):e.hasOwnProperty("defaultValue")&&Ey(n,e.type,io(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function rw(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Ey(n,e,t){(e!=="number"||xm(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var md=Array.isArray;function Gc(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+io(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function Cy(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return xn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function sw(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ne(92));if(md(t)){if(1<t.length)throw Error(Ne(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:io(t)}}function eT(n,e){var t=io(e.value),i=io(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function aw(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function tT(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ty(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?tT(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Of,nT=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Of=Of||document.createElement("div"),Of.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Of.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Dd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var xd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xI=["Webkit","ms","Moz","O"];Object.keys(xd).forEach(function(n){xI.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),xd[e]=xd[n]})});function iT(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||xd.hasOwnProperty(n)&&xd[n]?(""+e).trim():e+"px"}function rT(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=iT(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var _I=xn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function by(n,e){if(e){if(_I[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ne(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ne(62))}}function Ry(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ny=null;function b_(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Py=null,Hc=null,Vc=null;function ow(n){if(n=_h(n)){if(typeof Py!="function")throw Error(Ne(280));var e=n.stateNode;e&&(e=ig(e),Py(n.stateNode,n.type,e))}}function sT(n){Hc?Vc?Vc.push(n):Vc=[n]:Hc=n}function aT(){if(Hc){var n=Hc,e=Vc;if(Vc=Hc=null,ow(n),e)for(n=0;n<e.length;n++)ow(e[n])}}function oT(n,e){return n(e)}function lT(){}var Jv=!1;function cT(n,e,t){if(Jv)return n(e,t);Jv=!0;try{return oT(n,e,t)}finally{Jv=!1,(Hc!==null||Vc!==null)&&(lT(),aT())}}function kd(n,e){var t=n.stateNode;if(t===null)return null;var i=ig(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ne(231,e,typeof t));return t}var Iy=!1;if(ia)try{var Wu={};Object.defineProperty(Wu,"passive",{get:function(){Iy=!0}}),window.addEventListener("test",Wu,Wu),window.removeEventListener("test",Wu,Wu)}catch{Iy=!1}function SI(n,e,t,i,r,s,a,o,l){var h=Array.prototype.slice.call(arguments,3);try{e.apply(t,h)}catch(f){this.onError(f)}}var _d=!1,_m=null,Sm=!1,By=null,AI={onError:function(n){_d=!0,_m=n}};function wI(n,e,t,i,r,s,a,o,l){_d=!1,_m=null,SI.apply(AI,arguments)}function MI(n,e,t,i,r,s,a,o,l){if(wI.apply(this,arguments),_d){if(_d){var h=_m;_d=!1,_m=null}else throw Error(Ne(198));Sm||(Sm=!0,By=h)}}function Rl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function uT(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function lw(n){if(Rl(n)!==n)throw Error(Ne(188))}function EI(n){var e=n.alternate;if(!e){if(e=Rl(n),e===null)throw Error(Ne(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return lw(r),n;if(s===i)return lw(r),e;s=s.sibling}throw Error(Ne(188))}if(t.return!==i.return)t=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a)throw Error(Ne(189))}}if(t.alternate!==i)throw Error(Ne(190))}if(t.tag!==3)throw Error(Ne(188));return t.stateNode.current===t?n:e}function dT(n){return n=EI(n),n!==null?hT(n):null}function hT(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=hT(n);if(e!==null)return e;n=n.sibling}return null}var fT=dr.unstable_scheduleCallback,cw=dr.unstable_cancelCallback,CI=dr.unstable_shouldYield,TI=dr.unstable_requestPaint,Pn=dr.unstable_now,bI=dr.unstable_getCurrentPriorityLevel,R_=dr.unstable_ImmediatePriority,pT=dr.unstable_UserBlockingPriority,Am=dr.unstable_NormalPriority,RI=dr.unstable_LowPriority,mT=dr.unstable_IdlePriority,$m=null,_s=null;function NI(n){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot($m,n,void 0,(n.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:BI,PI=Math.log,II=Math.LN2;function BI(n){return n>>>=0,n===0?32:31-(PI(n)/II|0)|0}var jf=64,zf=4194304;function gd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function wm(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~r;o!==0?i=gd(o):(s&=a,s!==0&&(i=gd(s)))}else a=t&~r,a!==0?i=gd(a):s!==0&&(i=gd(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Zr(e),r=1<<t,i|=n[t],e&=~r;return i}function LI(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DI(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-Zr(s),o=1<<a,l=r[a];l===-1?(!(o&t)||o&i)&&(r[a]=LI(o,e)):l<=e&&(n.expiredLanes|=o),s&=~o}}function Ly(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function gT(){var n=jf;return jf<<=1,!(jf&4194240)&&(jf=64),n}function Yv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function yh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Zr(e),n[e]=t}function kI(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Zr(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function N_(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Zr(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Kt=0;function vT(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var yT,P_,xT,_T,ST,Dy=!1,Gf=[],Wa=null,Xa=null,Ja=null,Fd=new Map,Ud=new Map,Oa=[],FI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uw(n,e){switch(n){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Xa=null;break;case"mouseover":case"mouseout":Ja=null;break;case"pointerover":case"pointerout":Fd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ud.delete(e.pointerId)}}function Xu(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=_h(e),e!==null&&P_(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function UI(n,e,t,i,r){switch(e){case"focusin":return Wa=Xu(Wa,n,e,t,i,r),!0;case"dragenter":return Xa=Xu(Xa,n,e,t,i,r),!0;case"mouseover":return Ja=Xu(Ja,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Fd.set(s,Xu(Fd.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ud.set(s,Xu(Ud.get(s)||null,n,e,t,i,r)),!0}return!1}function AT(n){var e=Qo(n.target);if(e!==null){var t=Rl(e);if(t!==null){if(e=t.tag,e===13){if(e=uT(t),e!==null){n.blockedOn=e,ST(n.priority,function(){xT(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function em(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=ky(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);Ny=i,t.target.dispatchEvent(i),Ny=null}else return e=_h(t),e!==null&&P_(e),n.blockedOn=t,!1;e.shift()}return!0}function dw(n,e,t){em(n)&&t.delete(e)}function OI(){Dy=!1,Wa!==null&&em(Wa)&&(Wa=null),Xa!==null&&em(Xa)&&(Xa=null),Ja!==null&&em(Ja)&&(Ja=null),Fd.forEach(dw),Ud.forEach(dw)}function Ju(n,e){n.blockedOn===e&&(n.blockedOn=null,Dy||(Dy=!0,dr.unstable_scheduleCallback(dr.unstable_NormalPriority,OI)))}function Od(n){function e(r){return Ju(r,n)}if(0<Gf.length){Ju(Gf[0],n);for(var t=1;t<Gf.length;t++){var i=Gf[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Wa!==null&&Ju(Wa,n),Xa!==null&&Ju(Xa,n),Ja!==null&&Ju(Ja,n),Fd.forEach(e),Ud.forEach(e),t=0;t<Oa.length;t++)i=Oa[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Oa.length&&(t=Oa[0],t.blockedOn===null);)AT(t),t.blockedOn===null&&Oa.shift()}var Wc=ca.ReactCurrentBatchConfig,Mm=!0;function jI(n,e,t,i){var r=Kt,s=Wc.transition;Wc.transition=null;try{Kt=1,I_(n,e,t,i)}finally{Kt=r,Wc.transition=s}}function zI(n,e,t,i){var r=Kt,s=Wc.transition;Wc.transition=null;try{Kt=4,I_(n,e,t,i)}finally{Kt=r,Wc.transition=s}}function I_(n,e,t,i){if(Mm){var r=ky(n,e,t,i);if(r===null)r0(n,e,i,Em,t),uw(n,i);else if(UI(r,n,e,t,i))i.stopPropagation();else if(uw(n,i),e&4&&-1<FI.indexOf(n)){for(;r!==null;){var s=_h(r);if(s!==null&&yT(s),s=ky(n,e,t,i),s===null&&r0(n,e,i,Em,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else r0(n,e,i,null,t)}}var Em=null;function ky(n,e,t,i){if(Em=null,n=b_(i),n=Qo(n),n!==null)if(e=Rl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=uT(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Em=n,null}function wT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bI()){case R_:return 1;case pT:return 4;case Am:case RI:return 16;case mT:return 536870912;default:return 16}default:return 16}}var Ga=null,B_=null,tm=null;function MT(){if(tm)return tm;var n,e=B_,t=e.length,i,r="value"in Ga?Ga.value:Ga.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===r[s-i];i++);return tm=r.slice(n,1<i?1-i:void 0)}function nm(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Hf(){return!0}function hw(){return!1}function pr(n){function e(t,i,r,s,a){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Hf:hw,this.isPropagationStopped=hw,this}return xn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Hf)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Hf)},persist:function(){},isPersistent:Hf}),e}var vu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L_=pr(vu),xh=xn({},vu,{view:0,detail:0}),GI=pr(xh),Kv,qv,Yu,eg=xn({},xh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:D_,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Yu&&(Yu&&n.type==="mousemove"?(Kv=n.screenX-Yu.screenX,qv=n.screenY-Yu.screenY):qv=Kv=0,Yu=n),Kv)},movementY:function(n){return"movementY"in n?n.movementY:qv}}),fw=pr(eg),HI=xn({},eg,{dataTransfer:0}),VI=pr(HI),WI=xn({},xh,{relatedTarget:0}),Qv=pr(WI),XI=xn({},vu,{animationName:0,elapsedTime:0,pseudoElement:0}),JI=pr(XI),YI=xn({},vu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),KI=pr(YI),qI=xn({},vu,{data:0}),pw=pr(qI),QI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$I={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eB(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=$I[n])?!!e[n]:!1}function D_(){return eB}var tB=xn({},xh,{key:function(n){if(n.key){var e=QI[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=nm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ZI[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:D_,charCode:function(n){return n.type==="keypress"?nm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?nm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),nB=pr(tB),iB=xn({},eg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mw=pr(iB),rB=xn({},xh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:D_}),sB=pr(rB),aB=xn({},vu,{propertyName:0,elapsedTime:0,pseudoElement:0}),oB=pr(aB),lB=xn({},eg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),cB=pr(lB),uB=[9,13,27,32],k_=ia&&"CompositionEvent"in window,Sd=null;ia&&"documentMode"in document&&(Sd=document.documentMode);var dB=ia&&"TextEvent"in window&&!Sd,ET=ia&&(!k_||Sd&&8<Sd&&11>=Sd),gw=" ",vw=!1;function CT(n,e){switch(n){case"keyup":return uB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Tc=!1;function hB(n,e){switch(n){case"compositionend":return TT(e);case"keypress":return e.which!==32?null:(vw=!0,gw);case"textInput":return n=e.data,n===gw&&vw?null:n;default:return null}}function fB(n,e){if(Tc)return n==="compositionend"||!k_&&CT(n,e)?(n=MT(),tm=B_=Ga=null,Tc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ET&&e.locale!=="ko"?null:e.data;default:return null}}var pB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!pB[n.type]:e==="textarea"}function bT(n,e,t,i){sT(i),e=Cm(e,"onChange"),0<e.length&&(t=new L_("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Ad=null,jd=null;function mB(n){OT(n,0)}function tg(n){var e=Nc(n);if(ZC(e))return n}function gB(n,e){if(n==="change")return e}var RT=!1;if(ia){var Zv;if(ia){var $v="oninput"in document;if(!$v){var xw=document.createElement("div");xw.setAttribute("oninput","return;"),$v=typeof xw.oninput=="function"}Zv=$v}else Zv=!1;RT=Zv&&(!document.documentMode||9<document.documentMode)}function _w(){Ad&&(Ad.detachEvent("onpropertychange",NT),jd=Ad=null)}function NT(n){if(n.propertyName==="value"&&tg(jd)){var e=[];bT(e,jd,n,b_(n)),cT(mB,e)}}function vB(n,e,t){n==="focusin"?(_w(),Ad=e,jd=t,Ad.attachEvent("onpropertychange",NT)):n==="focusout"&&_w()}function yB(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return tg(jd)}function xB(n,e){if(n==="click")return tg(e)}function _B(n,e){if(n==="input"||n==="change")return tg(e)}function SB(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var es=typeof Object.is=="function"?Object.is:SB;function zd(n,e){if(es(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!yy.call(e,r)||!es(n[r],e[r]))return!1}return!0}function Sw(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Aw(n,e){var t=Sw(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Sw(t)}}function PT(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?PT(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function IT(){for(var n=window,e=xm();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=xm(n.document)}return e}function F_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function AB(n){var e=IT(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&PT(t.ownerDocument.documentElement,t)){if(i!==null&&F_(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=Aw(t,s);var a=Aw(t,i);r&&a&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var wB=ia&&"documentMode"in document&&11>=document.documentMode,bc=null,Fy=null,wd=null,Uy=!1;function ww(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Uy||bc==null||bc!==xm(i)||(i=bc,"selectionStart"in i&&F_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),wd&&zd(wd,i)||(wd=i,i=Cm(Fy,"onSelect"),0<i.length&&(e=new L_("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=bc)))}function Vf(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Rc={animationend:Vf("Animation","AnimationEnd"),animationiteration:Vf("Animation","AnimationIteration"),animationstart:Vf("Animation","AnimationStart"),transitionend:Vf("Transition","TransitionEnd")},e0={},BT={};ia&&(BT=document.createElement("div").style,"AnimationEvent"in window||(delete Rc.animationend.animation,delete Rc.animationiteration.animation,delete Rc.animationstart.animation),"TransitionEvent"in window||delete Rc.transitionend.transition);function ng(n){if(e0[n])return e0[n];if(!Rc[n])return n;var e=Rc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in BT)return e0[n]=e[t];return n}var LT=ng("animationend"),DT=ng("animationiteration"),kT=ng("animationstart"),FT=ng("transitionend"),UT=new Map,Mw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uo(n,e){UT.set(n,e),bl(e,[n])}for(var t0=0;t0<Mw.length;t0++){var n0=Mw[t0],MB=n0.toLowerCase(),EB=n0[0].toUpperCase()+n0.slice(1);uo(MB,"on"+EB)}uo(LT,"onAnimationEnd");uo(DT,"onAnimationIteration");uo(kT,"onAnimationStart");uo("dblclick","onDoubleClick");uo("focusin","onFocus");uo("focusout","onBlur");uo(FT,"onTransitionEnd");$c("onMouseEnter",["mouseout","mouseover"]);$c("onMouseLeave",["mouseout","mouseover"]);$c("onPointerEnter",["pointerout","pointerover"]);$c("onPointerLeave",["pointerout","pointerover"]);bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bl("onBeforeInput",["compositionend","keypress","textInput","paste"]);bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CB=new Set("cancel close invalid load scroll toggle".split(" ").concat(vd));function Ew(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,MI(i,e,void 0,n),n.currentTarget=null}function OT(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,h=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;Ew(r,o,h),s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,h=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;Ew(r,o,h),s=l}}}if(Sm)throw n=By,Sm=!1,By=null,n}function sn(n,e){var t=e[Hy];t===void 0&&(t=e[Hy]=new Set);var i=n+"__bubble";t.has(i)||(jT(e,n,2,!1),t.add(i))}function i0(n,e,t){var i=0;e&&(i|=4),jT(t,n,i,e)}var Wf="_reactListening"+Math.random().toString(36).slice(2);function Gd(n){if(!n[Wf]){n[Wf]=!0,JC.forEach(function(t){t!=="selectionchange"&&(CB.has(t)||i0(t,!1,n),i0(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Wf]||(e[Wf]=!0,i0("selectionchange",!1,e))}}function jT(n,e,t,i){switch(wT(e)){case 1:var r=jI;break;case 4:r=zI;break;default:r=I_}t=r.bind(null,e,t,n),r=void 0,!Iy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function r0(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=Qo(o),a===null)return;if(l=a.tag,l===5||l===6){i=s=a;continue e}o=o.parentNode}}i=i.return}cT(function(){var h=s,f=b_(t),p=[];e:{var m=UT.get(n);if(m!==void 0){var g=L_,y=n;switch(n){case"keypress":if(nm(t)===0)break e;case"keydown":case"keyup":g=nB;break;case"focusin":y="focus",g=Qv;break;case"focusout":y="blur",g=Qv;break;case"beforeblur":case"afterblur":g=Qv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=fw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=VI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=sB;break;case LT:case DT:case kT:g=JI;break;case FT:g=oB;break;case"scroll":g=GI;break;case"wheel":g=cB;break;case"copy":case"cut":case"paste":g=KI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=mw}var M=(e&4)!==0,_=!M&&n==="scroll",v=M?m!==null?m+"Capture":null:m;M=[];for(var S=h,A;S!==null;){A=S;var E=A.stateNode;if(A.tag===5&&E!==null&&(A=E,v!==null&&(E=kd(S,v),E!=null&&M.push(Hd(S,E,A)))),_)break;S=S.return}0<M.length&&(m=new g(m,y,null,t,f),p.push({event:m,listeners:M}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",m&&t!==Ny&&(y=t.relatedTarget||t.fromElement)&&(Qo(y)||y[ra]))break e;if((g||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,g?(y=t.relatedTarget||t.toElement,g=h,y=y?Qo(y):null,y!==null&&(_=Rl(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=h),g!==y)){if(M=fw,E="onMouseLeave",v="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(M=mw,E="onPointerLeave",v="onPointerEnter",S="pointer"),_=g==null?m:Nc(g),A=y==null?m:Nc(y),m=new M(E,S+"leave",g,t,f),m.target=_,m.relatedTarget=A,E=null,Qo(f)===h&&(M=new M(v,S+"enter",y,t,f),M.target=A,M.relatedTarget=_,E=M),_=E,g&&y)t:{for(M=g,v=y,S=0,A=M;A;A=$l(A))S++;for(A=0,E=v;E;E=$l(E))A++;for(;0<S-A;)M=$l(M),S--;for(;0<A-S;)v=$l(v),A--;for(;S--;){if(M===v||v!==null&&M===v.alternate)break t;M=$l(M),v=$l(v)}M=null}else M=null;g!==null&&Cw(p,m,g,M,!1),y!==null&&_!==null&&Cw(p,_,y,M,!0)}}e:{if(m=h?Nc(h):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var N=gB;else if(yw(m))if(RT)N=_B;else{N=yB;var T=vB}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=xB);if(N&&(N=N(n,h))){bT(p,N,t,f);break e}T&&T(n,m,h),n==="focusout"&&(T=m._wrapperState)&&T.controlled&&m.type==="number"&&Ey(m,"number",m.value)}switch(T=h?Nc(h):window,n){case"focusin":(yw(T)||T.contentEditable==="true")&&(bc=T,Fy=h,wd=null);break;case"focusout":wd=Fy=bc=null;break;case"mousedown":Uy=!0;break;case"contextmenu":case"mouseup":case"dragend":Uy=!1,ww(p,t,f);break;case"selectionchange":if(wB)break;case"keydown":case"keyup":ww(p,t,f)}var P;if(k_)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Tc?CT(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(ET&&t.locale!=="ko"&&(Tc||L!=="onCompositionStart"?L==="onCompositionEnd"&&Tc&&(P=MT()):(Ga=f,B_="value"in Ga?Ga.value:Ga.textContent,Tc=!0)),T=Cm(h,L),0<T.length&&(L=new pw(L,n,null,t,f),p.push({event:L,listeners:T}),P?L.data=P:(P=TT(t),P!==null&&(L.data=P)))),(P=dB?hB(n,t):fB(n,t))&&(h=Cm(h,"onBeforeInput"),0<h.length&&(f=new pw("onBeforeInput","beforeinput",null,t,f),p.push({event:f,listeners:h}),f.data=P))}OT(p,e)})}function Hd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Cm(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=kd(n,t),s!=null&&i.unshift(Hd(n,s,r)),s=kd(n,e),s!=null&&i.push(Hd(n,s,r))),n=n.return}return i}function $l(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Cw(n,e,t,i,r){for(var s=e._reactName,a=[];t!==null&&t!==i;){var o=t,l=o.alternate,h=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&h!==null&&(o=h,r?(l=kd(t,s),l!=null&&a.unshift(Hd(t,l,o))):r||(l=kd(t,s),l!=null&&a.push(Hd(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var TB=/\r\n?/g,bB=/\u0000|\uFFFD/g;function Tw(n){return(typeof n=="string"?n:""+n).replace(TB,`
`).replace(bB,"")}function Xf(n,e,t){if(e=Tw(e),Tw(n)!==e&&t)throw Error(Ne(425))}function Tm(){}var Oy=null,jy=null;function zy(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gy=typeof setTimeout=="function"?setTimeout:void 0,RB=typeof clearTimeout=="function"?clearTimeout:void 0,bw=typeof Promise=="function"?Promise:void 0,NB=typeof queueMicrotask=="function"?queueMicrotask:typeof bw<"u"?function(n){return bw.resolve(null).then(n).catch(PB)}:Gy;function PB(n){setTimeout(function(){throw n})}function s0(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Od(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Od(e)}function Ya(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Rw(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var yu=Math.random().toString(36).slice(2),xs="__reactFiber$"+yu,Vd="__reactProps$"+yu,ra="__reactContainer$"+yu,Hy="__reactEvents$"+yu,IB="__reactListeners$"+yu,BB="__reactHandles$"+yu;function Qo(n){var e=n[xs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ra]||t[xs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Rw(n);n!==null;){if(t=n[xs])return t;n=Rw(n)}return e}n=t,t=n.parentNode}return null}function _h(n){return n=n[xs]||n[ra],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Nc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ne(33))}function ig(n){return n[Vd]||null}var Vy=[],Pc=-1;function ho(n){return{current:n}}function an(n){0>Pc||(n.current=Vy[Pc],Vy[Pc]=null,Pc--)}function nn(n,e){Pc++,Vy[Pc]=n.current,n.current=e}var ro={},Ei=ho(ro),Yi=ho(!1),gl=ro;function eu(n,e){var t=n.type.contextTypes;if(!t)return ro;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Ki(n){return n=n.childContextTypes,n!=null}function bm(){an(Yi),an(Ei)}function Nw(n,e,t){if(Ei.current!==ro)throw Error(Ne(168));nn(Ei,e),nn(Yi,t)}function zT(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ne(108,vI(n)||"Unknown",r));return xn({},t,i)}function Rm(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ro,gl=Ei.current,nn(Ei,n),nn(Yi,Yi.current),!0}function Pw(n,e,t){var i=n.stateNode;if(!i)throw Error(Ne(169));t?(n=zT(n,e,gl),i.__reactInternalMemoizedMergedChildContext=n,an(Yi),an(Ei),nn(Ei,n)):an(Yi),nn(Yi,t)}var Ws=null,rg=!1,a0=!1;function GT(n){Ws===null?Ws=[n]:Ws.push(n)}function LB(n){rg=!0,GT(n)}function fo(){if(!a0&&Ws!==null){a0=!0;var n=0,e=Kt;try{var t=Ws;for(Kt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Ws=null,rg=!1}catch(r){throw Ws!==null&&(Ws=Ws.slice(n+1)),fT(R_,fo),r}finally{Kt=e,a0=!1}}return null}var Ic=[],Bc=0,Nm=null,Pm=0,Er=[],Cr=0,vl=null,Js=1,Ys="";function Wo(n,e){Ic[Bc++]=Pm,Ic[Bc++]=Nm,Nm=n,Pm=e}function HT(n,e,t){Er[Cr++]=Js,Er[Cr++]=Ys,Er[Cr++]=vl,vl=n;var i=Js;n=Ys;var r=32-Zr(i)-1;i&=~(1<<r),t+=1;var s=32-Zr(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Js=1<<32-Zr(e)+r|t<<r|i,Ys=s+n}else Js=1<<s|t<<r|i,Ys=n}function U_(n){n.return!==null&&(Wo(n,1),HT(n,1,0))}function O_(n){for(;n===Nm;)Nm=Ic[--Bc],Ic[Bc]=null,Pm=Ic[--Bc],Ic[Bc]=null;for(;n===vl;)vl=Er[--Cr],Er[Cr]=null,Ys=Er[--Cr],Er[Cr]=null,Js=Er[--Cr],Er[Cr]=null}var cr=null,or=null,un=!1,Jr=null;function VT(n,e){var t=Tr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Iw(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,cr=n,or=Ya(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,cr=n,or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=vl!==null?{id:Js,overflow:Ys}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Tr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,cr=n,or=null,!0):!1;default:return!1}}function Wy(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Xy(n){if(un){var e=or;if(e){var t=e;if(!Iw(n,e)){if(Wy(n))throw Error(Ne(418));e=Ya(t.nextSibling);var i=cr;e&&Iw(n,e)?VT(i,t):(n.flags=n.flags&-4097|2,un=!1,cr=n)}}else{if(Wy(n))throw Error(Ne(418));n.flags=n.flags&-4097|2,un=!1,cr=n}}}function Bw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;cr=n}function Jf(n){if(n!==cr)return!1;if(!un)return Bw(n),un=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!zy(n.type,n.memoizedProps)),e&&(e=or)){if(Wy(n))throw WT(),Error(Ne(418));for(;e;)VT(n,e),e=Ya(e.nextSibling)}if(Bw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ne(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){or=Ya(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}or=null}}else or=cr?Ya(n.stateNode.nextSibling):null;return!0}function WT(){for(var n=or;n;)n=Ya(n.nextSibling)}function tu(){or=cr=null,un=!1}function j_(n){Jr===null?Jr=[n]:Jr.push(n)}var DB=ca.ReactCurrentBatchConfig;function Ku(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ne(309));var i=t.stateNode}if(!i)throw Error(Ne(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=r.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ne(284));if(!t._owner)throw Error(Ne(290,n))}return n}function Yf(n,e){throw n=Object.prototype.toString.call(e),Error(Ne(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Lw(n){var e=n._init;return e(n._payload)}function XT(n){function e(v,S){if(n){var A=v.deletions;A===null?(v.deletions=[S],v.flags|=16):A.push(S)}}function t(v,S){if(!n)return null;for(;S!==null;)e(v,S),S=S.sibling;return null}function i(v,S){for(v=new Map;S!==null;)S.key!==null?v.set(S.key,S):v.set(S.index,S),S=S.sibling;return v}function r(v,S){return v=Za(v,S),v.index=0,v.sibling=null,v}function s(v,S,A){return v.index=A,n?(A=v.alternate,A!==null?(A=A.index,A<S?(v.flags|=2,S):A):(v.flags|=2,S)):(v.flags|=1048576,S)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function o(v,S,A,E){return S===null||S.tag!==6?(S=f0(A,v.mode,E),S.return=v,S):(S=r(S,A),S.return=v,S)}function l(v,S,A,E){var N=A.type;return N===Cc?f(v,S,A.props.children,E,A.key):S!==null&&(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ka&&Lw(N)===S.type)?(E=r(S,A.props),E.ref=Ku(v,S,A),E.return=v,E):(E=cm(A.type,A.key,A.props,null,v.mode,E),E.ref=Ku(v,S,A),E.return=v,E)}function h(v,S,A,E){return S===null||S.tag!==4||S.stateNode.containerInfo!==A.containerInfo||S.stateNode.implementation!==A.implementation?(S=p0(A,v.mode,E),S.return=v,S):(S=r(S,A.children||[]),S.return=v,S)}function f(v,S,A,E,N){return S===null||S.tag!==7?(S=ol(A,v.mode,E,N),S.return=v,S):(S=r(S,A),S.return=v,S)}function p(v,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return S=f0(""+S,v.mode,A),S.return=v,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ff:return A=cm(S.type,S.key,S.props,null,v.mode,A),A.ref=Ku(v,null,S),A.return=v,A;case Ec:return S=p0(S,v.mode,A),S.return=v,S;case ka:var E=S._init;return p(v,E(S._payload),A)}if(md(S)||Vu(S))return S=ol(S,v.mode,A,null),S.return=v,S;Yf(v,S)}return null}function m(v,S,A,E){var N=S!==null?S.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return N!==null?null:o(v,S,""+A,E);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ff:return A.key===N?l(v,S,A,E):null;case Ec:return A.key===N?h(v,S,A,E):null;case ka:return N=A._init,m(v,S,N(A._payload),E)}if(md(A)||Vu(A))return N!==null?null:f(v,S,A,E,null);Yf(v,A)}return null}function g(v,S,A,E,N){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(A)||null,o(S,v,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ff:return v=v.get(E.key===null?A:E.key)||null,l(S,v,E,N);case Ec:return v=v.get(E.key===null?A:E.key)||null,h(S,v,E,N);case ka:var T=E._init;return g(v,S,A,T(E._payload),N)}if(md(E)||Vu(E))return v=v.get(A)||null,f(S,v,E,N,null);Yf(S,E)}return null}function y(v,S,A,E){for(var N=null,T=null,P=S,L=S=0,R=null;P!==null&&L<A.length;L++){P.index>L?(R=P,P=null):R=P.sibling;var b=m(v,P,A[L],E);if(b===null){P===null&&(P=R);break}n&&P&&b.alternate===null&&e(v,P),S=s(b,S,L),T===null?N=b:T.sibling=b,T=b,P=R}if(L===A.length)return t(v,P),un&&Wo(v,L),N;if(P===null){for(;L<A.length;L++)P=p(v,A[L],E),P!==null&&(S=s(P,S,L),T===null?N=P:T.sibling=P,T=P);return un&&Wo(v,L),N}for(P=i(v,P);L<A.length;L++)R=g(P,v,L,A[L],E),R!==null&&(n&&R.alternate!==null&&P.delete(R.key===null?L:R.key),S=s(R,S,L),T===null?N=R:T.sibling=R,T=R);return n&&P.forEach(function(D){return e(v,D)}),un&&Wo(v,L),N}function M(v,S,A,E){var N=Vu(A);if(typeof N!="function")throw Error(Ne(150));if(A=N.call(A),A==null)throw Error(Ne(151));for(var T=N=null,P=S,L=S=0,R=null,b=A.next();P!==null&&!b.done;L++,b=A.next()){P.index>L?(R=P,P=null):R=P.sibling;var D=m(v,P,b.value,E);if(D===null){P===null&&(P=R);break}n&&P&&D.alternate===null&&e(v,P),S=s(D,S,L),T===null?N=D:T.sibling=D,T=D,P=R}if(b.done)return t(v,P),un&&Wo(v,L),N;if(P===null){for(;!b.done;L++,b=A.next())b=p(v,b.value,E),b!==null&&(S=s(b,S,L),T===null?N=b:T.sibling=b,T=b);return un&&Wo(v,L),N}for(P=i(v,P);!b.done;L++,b=A.next())b=g(P,v,L,b.value,E),b!==null&&(n&&b.alternate!==null&&P.delete(b.key===null?L:b.key),S=s(b,S,L),T===null?N=b:T.sibling=b,T=b);return n&&P.forEach(function(X){return e(v,X)}),un&&Wo(v,L),N}function _(v,S,A,E){if(typeof A=="object"&&A!==null&&A.type===Cc&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Ff:e:{for(var N=A.key,T=S;T!==null;){if(T.key===N){if(N=A.type,N===Cc){if(T.tag===7){t(v,T.sibling),S=r(T,A.props.children),S.return=v,v=S;break e}}else if(T.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ka&&Lw(N)===T.type){t(v,T.sibling),S=r(T,A.props),S.ref=Ku(v,T,A),S.return=v,v=S;break e}t(v,T);break}else e(v,T);T=T.sibling}A.type===Cc?(S=ol(A.props.children,v.mode,E,A.key),S.return=v,v=S):(E=cm(A.type,A.key,A.props,null,v.mode,E),E.ref=Ku(v,S,A),E.return=v,v=E)}return a(v);case Ec:e:{for(T=A.key;S!==null;){if(S.key===T)if(S.tag===4&&S.stateNode.containerInfo===A.containerInfo&&S.stateNode.implementation===A.implementation){t(v,S.sibling),S=r(S,A.children||[]),S.return=v,v=S;break e}else{t(v,S);break}else e(v,S);S=S.sibling}S=p0(A,v.mode,E),S.return=v,v=S}return a(v);case ka:return T=A._init,_(v,S,T(A._payload),E)}if(md(A))return y(v,S,A,E);if(Vu(A))return M(v,S,A,E);Yf(v,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,S!==null&&S.tag===6?(t(v,S.sibling),S=r(S,A),S.return=v,v=S):(t(v,S),S=f0(A,v.mode,E),S.return=v,v=S),a(v)):t(v,S)}return _}var nu=XT(!0),JT=XT(!1),Im=ho(null),Bm=null,Lc=null,z_=null;function G_(){z_=Lc=Bm=null}function H_(n){var e=Im.current;an(Im),n._currentValue=e}function Jy(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Xc(n,e){Bm=n,z_=Lc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ji=!0),n.firstContext=null)}function Ir(n){var e=n._currentValue;if(z_!==n)if(n={context:n,memoizedValue:e,next:null},Lc===null){if(Bm===null)throw Error(Ne(308));Lc=n,Bm.dependencies={lanes:0,firstContext:n}}else Lc=Lc.next=n;return e}var Zo=null;function V_(n){Zo===null?Zo=[n]:Zo.push(n)}function YT(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,V_(e)):(t.next=r.next,r.next=t),e.interleaved=t,sa(n,i)}function sa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Fa=!1;function W_(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KT(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Zs(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ka(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,jt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,sa(n,t)}return r=i.interleaved,r===null?(e.next=e,V_(i)):(e.next=r.next,r.next=e),i.interleaved=e,sa(n,t)}function im(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,N_(n,t)}}function Dw(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Lm(n,e,t,i){var r=n.updateQueue;Fa=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,h=l.next;l.next=null,a===null?s=h:a.next=h,a=l;var f=n.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==a&&(o===null?f.firstBaseUpdate=h:o.next=h,f.lastBaseUpdate=l))}if(s!==null){var p=r.baseState;a=0,f=h=l=null,o=s;do{var m=o.lane,g=o.eventTime;if((i&m)===m){f!==null&&(f=f.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=n,M=o;switch(m=e,g=t,M.tag){case 1:if(y=M.payload,typeof y=="function"){p=y.call(g,p,m);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=M.payload,m=typeof y=="function"?y.call(g,p,m):y,m==null)break e;p=xn({},p,m);break e;case 2:Fa=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,m=r.effects,m===null?r.effects=[o]:m.push(o))}else g={eventTime:g,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(h=f=g,l=p):f=f.next=g,a|=m;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;m=o,o=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(f===null&&(l=p),r.baseState=l,r.firstBaseUpdate=h,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);xl|=a,n.lanes=a,n.memoizedState=p}}function kw(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Ne(191,r));r.call(i)}}}var Sh={},Ss=ho(Sh),Wd=ho(Sh),Xd=ho(Sh);function $o(n){if(n===Sh)throw Error(Ne(174));return n}function X_(n,e){switch(nn(Xd,e),nn(Wd,n),nn(Ss,Sh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ty(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Ty(e,n)}an(Ss),nn(Ss,e)}function iu(){an(Ss),an(Wd),an(Xd)}function qT(n){$o(Xd.current);var e=$o(Ss.current),t=Ty(e,n.type);e!==t&&(nn(Wd,n),nn(Ss,t))}function J_(n){Wd.current===n&&(an(Ss),an(Wd))}var pn=ho(0);function Dm(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var o0=[];function Y_(){for(var n=0;n<o0.length;n++)o0[n]._workInProgressVersionPrimary=null;o0.length=0}var rm=ca.ReactCurrentDispatcher,l0=ca.ReactCurrentBatchConfig,yl=0,vn=null,Hn=null,ti=null,km=!1,Md=!1,Jd=0,kB=0;function vi(){throw Error(Ne(321))}function K_(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!es(n[t],e[t]))return!1;return!0}function q_(n,e,t,i,r,s){if(yl=s,vn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rm.current=n===null||n.memoizedState===null?jB:zB,n=t(i,r),Md){s=0;do{if(Md=!1,Jd=0,25<=s)throw Error(Ne(301));s+=1,ti=Hn=null,e.updateQueue=null,rm.current=GB,n=t(i,r)}while(Md)}if(rm.current=Fm,e=Hn!==null&&Hn.next!==null,yl=0,ti=Hn=vn=null,km=!1,e)throw Error(Ne(300));return n}function Q_(){var n=Jd!==0;return Jd=0,n}function vs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ti===null?vn.memoizedState=ti=n:ti=ti.next=n,ti}function Br(){if(Hn===null){var n=vn.alternate;n=n!==null?n.memoizedState:null}else n=Hn.next;var e=ti===null?vn.memoizedState:ti.next;if(e!==null)ti=e,Hn=n;else{if(n===null)throw Error(Ne(310));Hn=n,n={memoizedState:Hn.memoizedState,baseState:Hn.baseState,baseQueue:Hn.baseQueue,queue:Hn.queue,next:null},ti===null?vn.memoizedState=ti=n:ti=ti.next=n}return ti}function Yd(n,e){return typeof e=="function"?e(n):e}function c0(n){var e=Br(),t=e.queue;if(t===null)throw Error(Ne(311));t.lastRenderedReducer=n;var i=Hn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var o=a=null,l=null,h=s;do{var f=h.lane;if((yl&f)===f)l!==null&&(l=l.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:n(i,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};l===null?(o=l=p,a=i):l=l.next=p,vn.lanes|=f,xl|=f}h=h.next}while(h!==null&&h!==s);l===null?a=i:l.next=o,es(i,e.memoizedState)||(Ji=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,vn.lanes|=s,xl|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function u0(n){var e=Br(),t=e.queue;if(t===null)throw Error(Ne(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do s=n(s,a.action),a=a.next;while(a!==r);es(s,e.memoizedState)||(Ji=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function QT(){}function ZT(n,e){var t=vn,i=Br(),r=e(),s=!es(i.memoizedState,r);if(s&&(i.memoizedState=r,Ji=!0),i=i.queue,Z_(tb.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||ti!==null&&ti.memoizedState.tag&1){if(t.flags|=2048,Kd(9,eb.bind(null,t,i,r,e),void 0,null),ii===null)throw Error(Ne(349));yl&30||$T(t,e,r)}return r}function $T(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=vn.updateQueue,e===null?(e={lastEffect:null,stores:null},vn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function eb(n,e,t,i){e.value=t,e.getSnapshot=i,nb(e)&&ib(n)}function tb(n,e,t){return t(function(){nb(e)&&ib(n)})}function nb(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!es(n,t)}catch{return!0}}function ib(n){var e=sa(n,1);e!==null&&$r(e,n,1,-1)}function Fw(n){var e=vs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yd,lastRenderedState:n},e.queue=n,n=n.dispatch=OB.bind(null,vn,n),[e.memoizedState,n]}function Kd(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=vn.updateQueue,e===null?(e={lastEffect:null,stores:null},vn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function rb(){return Br().memoizedState}function sm(n,e,t,i){var r=vs();vn.flags|=n,r.memoizedState=Kd(1|e,t,void 0,i===void 0?null:i)}function sg(n,e,t,i){var r=Br();i=i===void 0?null:i;var s=void 0;if(Hn!==null){var a=Hn.memoizedState;if(s=a.destroy,i!==null&&K_(i,a.deps)){r.memoizedState=Kd(e,t,s,i);return}}vn.flags|=n,r.memoizedState=Kd(1|e,t,s,i)}function Uw(n,e){return sm(8390656,8,n,e)}function Z_(n,e){return sg(2048,8,n,e)}function sb(n,e){return sg(4,2,n,e)}function ab(n,e){return sg(4,4,n,e)}function ob(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function lb(n,e,t){return t=t!=null?t.concat([n]):null,sg(4,4,ob.bind(null,e,n),t)}function $_(){}function cb(n,e){var t=Br();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&K_(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function ub(n,e){var t=Br();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&K_(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function db(n,e,t){return yl&21?(es(t,e)||(t=gT(),vn.lanes|=t,xl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ji=!0),n.memoizedState=t)}function FB(n,e){var t=Kt;Kt=t!==0&&4>t?t:4,n(!0);var i=l0.transition;l0.transition={};try{n(!1),e()}finally{Kt=t,l0.transition=i}}function hb(){return Br().memoizedState}function UB(n,e,t){var i=Qa(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},fb(n))pb(e,t);else if(t=YT(n,e,t,i),t!==null){var r=Di();$r(t,n,i,r),mb(t,e,i)}}function OB(n,e,t){var i=Qa(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(fb(n))pb(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(r.hasEagerState=!0,r.eagerState=o,es(o,a)){var l=e.interleaved;l===null?(r.next=r,V_(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=YT(n,e,r,i),t!==null&&(r=Di(),$r(t,n,i,r),mb(t,e,i))}}function fb(n){var e=n.alternate;return n===vn||e!==null&&e===vn}function pb(n,e){Md=km=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function mb(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,N_(n,t)}}var Fm={readContext:Ir,useCallback:vi,useContext:vi,useEffect:vi,useImperativeHandle:vi,useInsertionEffect:vi,useLayoutEffect:vi,useMemo:vi,useReducer:vi,useRef:vi,useState:vi,useDebugValue:vi,useDeferredValue:vi,useTransition:vi,useMutableSource:vi,useSyncExternalStore:vi,useId:vi,unstable_isNewReconciler:!1},jB={readContext:Ir,useCallback:function(n,e){return vs().memoizedState=[n,e===void 0?null:e],n},useContext:Ir,useEffect:Uw,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,sm(4194308,4,ob.bind(null,e,n),t)},useLayoutEffect:function(n,e){return sm(4194308,4,n,e)},useInsertionEffect:function(n,e){return sm(4,2,n,e)},useMemo:function(n,e){var t=vs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=vs();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=UB.bind(null,vn,n),[i.memoizedState,n]},useRef:function(n){var e=vs();return n={current:n},e.memoizedState=n},useState:Fw,useDebugValue:$_,useDeferredValue:function(n){return vs().memoizedState=n},useTransition:function(){var n=Fw(!1),e=n[0];return n=FB.bind(null,n[1]),vs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=vn,r=vs();if(un){if(t===void 0)throw Error(Ne(407));t=t()}else{if(t=e(),ii===null)throw Error(Ne(349));yl&30||$T(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,Uw(tb.bind(null,i,s,n),[n]),i.flags|=2048,Kd(9,eb.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=vs(),e=ii.identifierPrefix;if(un){var t=Ys,i=Js;t=(i&~(1<<32-Zr(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Jd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=kB++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},zB={readContext:Ir,useCallback:cb,useContext:Ir,useEffect:Z_,useImperativeHandle:lb,useInsertionEffect:sb,useLayoutEffect:ab,useMemo:ub,useReducer:c0,useRef:rb,useState:function(){return c0(Yd)},useDebugValue:$_,useDeferredValue:function(n){var e=Br();return db(e,Hn.memoizedState,n)},useTransition:function(){var n=c0(Yd)[0],e=Br().memoizedState;return[n,e]},useMutableSource:QT,useSyncExternalStore:ZT,useId:hb,unstable_isNewReconciler:!1},GB={readContext:Ir,useCallback:cb,useContext:Ir,useEffect:Z_,useImperativeHandle:lb,useInsertionEffect:sb,useLayoutEffect:ab,useMemo:ub,useReducer:u0,useRef:rb,useState:function(){return u0(Yd)},useDebugValue:$_,useDeferredValue:function(n){var e=Br();return Hn===null?e.memoizedState=n:db(e,Hn.memoizedState,n)},useTransition:function(){var n=u0(Yd)[0],e=Br().memoizedState;return[n,e]},useMutableSource:QT,useSyncExternalStore:ZT,useId:hb,unstable_isNewReconciler:!1};function Vr(n,e){if(n&&n.defaultProps){e=xn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Yy(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:xn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var ag={isMounted:function(n){return(n=n._reactInternals)?Rl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Di(),r=Qa(n),s=Zs(i,r);s.payload=e,t!=null&&(s.callback=t),e=Ka(n,s,r),e!==null&&($r(e,n,r,i),im(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Di(),r=Qa(n),s=Zs(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ka(n,s,r),e!==null&&($r(e,n,r,i),im(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Di(),i=Qa(n),r=Zs(t,i);r.tag=2,e!=null&&(r.callback=e),e=Ka(n,r,i),e!==null&&($r(e,n,i,t),im(e,n,i))}};function Ow(n,e,t,i,r,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!zd(t,i)||!zd(r,s):!0}function gb(n,e,t){var i=!1,r=ro,s=e.contextType;return typeof s=="object"&&s!==null?s=Ir(s):(r=Ki(e)?gl:Ei.current,i=e.contextTypes,s=(i=i!=null)?eu(n,r):ro),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ag,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function jw(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&ag.enqueueReplaceState(e,e.state,null)}function Ky(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},W_(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Ir(s):(s=Ki(e)?gl:Ei.current,r.context=eu(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Yy(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ag.enqueueReplaceState(r,r.state,null),Lm(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function ru(n,e){try{var t="",i=e;do t+=gI(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function d0(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function qy(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var HB=typeof WeakMap=="function"?WeakMap:Map;function vb(n,e,t){t=Zs(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Om||(Om=!0,ax=i),qy(n,e)},t}function yb(n,e,t){t=Zs(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){qy(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){qy(n,e),typeof i!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function zw(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new HB;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=iL.bind(null,n,e,t),e.then(n,n))}function Gw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Hw(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Zs(-1,1),e.tag=2,Ka(t,e,1))),t.lanes|=1),n)}var VB=ca.ReactCurrentOwner,Ji=!1;function Bi(n,e,t,i){e.child=n===null?JT(e,null,t,i):nu(e,n.child,t,i)}function Vw(n,e,t,i,r){t=t.render;var s=e.ref;return Xc(e,r),i=q_(n,e,t,i,s,r),t=Q_(),n!==null&&!Ji?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,aa(n,e,r)):(un&&t&&U_(e),e.flags|=1,Bi(n,e,i,r),e.child)}function Ww(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!oS(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,xb(n,e,s,i,r)):(n=cm(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:zd,t(a,i)&&n.ref===e.ref)return aa(n,e,r)}return e.flags|=1,n=Za(s,i),n.ref=e.ref,n.return=e,e.child=n}function xb(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(zd(s,i)&&n.ref===e.ref)if(Ji=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Ji=!0);else return e.lanes=n.lanes,aa(n,e,r)}return Qy(n,e,t,i,r)}function _b(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nn(kc,sr),sr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,nn(kc,sr),sr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,nn(kc,sr),sr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,nn(kc,sr),sr|=i;return Bi(n,e,r,t),e.child}function Sb(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Qy(n,e,t,i,r){var s=Ki(t)?gl:Ei.current;return s=eu(e,s),Xc(e,r),t=q_(n,e,t,i,s,r),i=Q_(),n!==null&&!Ji?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,aa(n,e,r)):(un&&i&&U_(e),e.flags|=1,Bi(n,e,t,r),e.child)}function Xw(n,e,t,i,r){if(Ki(t)){var s=!0;Rm(e)}else s=!1;if(Xc(e,r),e.stateNode===null)am(n,e),gb(e,t,i),Ky(e,t,i,r),i=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,h=t.contextType;typeof h=="object"&&h!==null?h=Ir(h):(h=Ki(t)?gl:Ei.current,h=eu(e,h));var f=t.getDerivedStateFromProps,p=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==h)&&jw(e,a,i,h),Fa=!1;var m=e.memoizedState;a.state=m,Lm(e,i,a,r),l=e.memoizedState,o!==i||m!==l||Yi.current||Fa?(typeof f=="function"&&(Yy(e,t,f,i),l=e.memoizedState),(o=Fa||Ow(e,t,o,i,m,l,h))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=h,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,KT(n,e),o=e.memoizedProps,h=e.type===e.elementType?o:Vr(e.type,o),a.props=h,p=e.pendingProps,m=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ir(l):(l=Ki(t)?gl:Ei.current,l=eu(e,l));var g=t.getDerivedStateFromProps;(f=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||m!==l)&&jw(e,a,i,l),Fa=!1,m=e.memoizedState,a.state=m,Lm(e,i,a,r);var y=e.memoizedState;o!==p||m!==y||Yi.current||Fa?(typeof g=="function"&&(Yy(e,t,g,i),y=e.memoizedState),(h=Fa||Ow(e,t,h,i,m,y,l)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),a.props=i,a.state=y,a.context=l,i=h):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return Zy(n,e,t,i,s,r)}function Zy(n,e,t,i,r,s){Sb(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&Pw(e,t,!1),aa(n,e,s);i=e.stateNode,VB.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=nu(e,n.child,null,s),e.child=nu(e,null,o,s)):Bi(n,e,o,s),e.memoizedState=i.state,r&&Pw(e,t,!0),e.child}function Ab(n){var e=n.stateNode;e.pendingContext?Nw(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Nw(n,e.context,!1),X_(n,e.containerInfo)}function Jw(n,e,t,i,r){return tu(),j_(r),e.flags|=256,Bi(n,e,t,i),e.child}var $y={dehydrated:null,treeContext:null,retryLane:0};function ex(n){return{baseLanes:n,cachePool:null,transitions:null}}function wb(n,e,t){var i=e.pendingProps,r=pn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(r&2)!==0),o?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),nn(pn,r&1),n===null)return Xy(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=cg(a,i,0,null),n=ol(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=ex(t),e.memoizedState=$y,n):eS(e,a));if(r=n.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return WB(n,e,a,i,o,r,t);if(s){s=i.fallback,a=e.mode,r=n.child,o=r.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Za(r,l),i.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=Za(o,s):(s=ol(s,a,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=n.child.memoizedState,a=a===null?ex(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~t,e.memoizedState=$y,i}return s=n.child,n=s.sibling,i=Za(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function eS(n,e){return e=cg({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Kf(n,e,t,i){return i!==null&&j_(i),nu(e,n.child,null,t),n=eS(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function WB(n,e,t,i,r,s,a){if(t)return e.flags&256?(e.flags&=-257,i=d0(Error(Ne(422))),Kf(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=cg({mode:"visible",children:i.children},r,0,null),s=ol(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&nu(e,n.child,null,a),e.child.memoizedState=ex(a),e.memoizedState=$y,s);if(!(e.mode&1))return Kf(n,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error(Ne(419)),i=d0(s,i,void 0),Kf(n,e,a,i)}if(o=(a&n.childLanes)!==0,Ji||o){if(i=ii,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,sa(n,r),$r(i,n,r,-1))}return aS(),i=d0(Error(Ne(421))),Kf(n,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=rL.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,or=Ya(r.nextSibling),cr=e,un=!0,Jr=null,n!==null&&(Er[Cr++]=Js,Er[Cr++]=Ys,Er[Cr++]=vl,Js=n.id,Ys=n.overflow,vl=e),e=eS(e,i.children),e.flags|=4096,e)}function Yw(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Jy(n.return,e,t)}function h0(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function Mb(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Bi(n,e,i.children,t),i=pn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Yw(n,t,e);else if(n.tag===19)Yw(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(nn(pn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Dm(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),h0(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Dm(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}h0(e,!0,t,null,s);break;case"together":h0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function am(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function aa(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),xl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ne(153));if(e.child!==null){for(n=e.child,t=Za(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Za(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function XB(n,e,t){switch(e.tag){case 3:Ab(e),tu();break;case 5:qT(e);break;case 1:Ki(e.type)&&Rm(e);break;case 4:X_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;nn(Im,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(nn(pn,pn.current&1),e.flags|=128,null):t&e.child.childLanes?wb(n,e,t):(nn(pn,pn.current&1),n=aa(n,e,t),n!==null?n.sibling:null);nn(pn,pn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return Mb(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),nn(pn,pn.current),i)break;return null;case 22:case 23:return e.lanes=0,_b(n,e,t)}return aa(n,e,t)}var Eb,tx,Cb,Tb;Eb=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};tx=function(){};Cb=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,$o(Ss.current);var s=null;switch(t){case"input":r=wy(n,r),i=wy(n,i),s=[];break;case"select":r=xn({},r,{value:void 0}),i=xn({},i,{value:void 0}),s=[];break;case"textarea":r=Cy(n,r),i=Cy(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Tm)}by(t,i);var a;t=null;for(h in r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var o=r[h];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ld.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in i){var l=i[h];if(o=r!=null?r[h]:void 0,i.hasOwnProperty(h)&&l!==o&&(l!=null||o!=null))if(h==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(h,t)),t=l;else h==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(h,l)):h==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(h,""+l):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ld.hasOwnProperty(h)?(l!=null&&h==="onScroll"&&sn("scroll",n),s||o===l||(s=[])):(s=s||[]).push(h,l))}t&&(s=s||[]).push("style",t);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Tb=function(n,e,t,i){t!==i&&(e.flags|=4)};function qu(n,e){if(!un)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function yi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function JB(n,e,t){var i=e.pendingProps;switch(O_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(e),null;case 1:return Ki(e.type)&&bm(),yi(e),null;case 3:return i=e.stateNode,iu(),an(Yi),an(Ei),Y_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Jf(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jr!==null&&(cx(Jr),Jr=null))),tx(n,e),yi(e),null;case 5:J_(e);var r=$o(Xd.current);if(t=e.type,n!==null&&e.stateNode!=null)Cb(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ne(166));return yi(e),null}if(n=$o(Ss.current),Jf(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[xs]=e,i[Vd]=s,n=(e.mode&1)!==0,t){case"dialog":sn("cancel",i),sn("close",i);break;case"iframe":case"object":case"embed":sn("load",i);break;case"video":case"audio":for(r=0;r<vd.length;r++)sn(vd[r],i);break;case"source":sn("error",i);break;case"img":case"image":case"link":sn("error",i),sn("load",i);break;case"details":sn("toggle",i);break;case"input":iw(i,s),sn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},sn("invalid",i);break;case"textarea":sw(i,s),sn("invalid",i)}by(t,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&Xf(i.textContent,o,n),r=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Xf(i.textContent,o,n),r=["children",""+o]):Ld.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&sn("scroll",i)}switch(t){case"input":Uf(i),rw(i,s,!0);break;case"textarea":Uf(i),aw(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Tm)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=tT(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(t,{is:i.is}):(n=a.createElement(t),t==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,t),n[xs]=e,n[Vd]=i,Eb(n,e,!1,!1),e.stateNode=n;e:{switch(a=Ry(t,i),t){case"dialog":sn("cancel",n),sn("close",n),r=i;break;case"iframe":case"object":case"embed":sn("load",n),r=i;break;case"video":case"audio":for(r=0;r<vd.length;r++)sn(vd[r],n);r=i;break;case"source":sn("error",n),r=i;break;case"img":case"image":case"link":sn("error",n),sn("load",n),r=i;break;case"details":sn("toggle",n),r=i;break;case"input":iw(n,i),r=wy(n,i),sn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=xn({},i,{value:void 0}),sn("invalid",n);break;case"textarea":sw(n,i),r=Cy(n,i),sn("invalid",n);break;default:r=i}by(t,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?rT(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nT(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Dd(n,l):typeof l=="number"&&Dd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ld.hasOwnProperty(s)?l!=null&&s==="onScroll"&&sn("scroll",n):l!=null&&M_(n,s,l,a))}switch(t){case"input":Uf(n),rw(n,i,!1);break;case"textarea":Uf(n),aw(n);break;case"option":i.value!=null&&n.setAttribute("value",""+io(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Gc(n,!!i.multiple,s,!1):i.defaultValue!=null&&Gc(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Tm)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yi(e),null;case 6:if(n&&e.stateNode!=null)Tb(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ne(166));if(t=$o(Xd.current),$o(Ss.current),Jf(e)){if(i=e.stateNode,t=e.memoizedProps,i[xs]=e,(s=i.nodeValue!==t)&&(n=cr,n!==null))switch(n.tag){case 3:Xf(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Xf(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[xs]=e,e.stateNode=i}return yi(e),null;case 13:if(an(pn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(un&&or!==null&&e.mode&1&&!(e.flags&128))WT(),tu(),e.flags|=98560,s=!1;else if(s=Jf(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Ne(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ne(317));s[xs]=e}else tu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yi(e),s=!1}else Jr!==null&&(cx(Jr),Jr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||pn.current&1?Jn===0&&(Jn=3):aS())),e.updateQueue!==null&&(e.flags|=4),yi(e),null);case 4:return iu(),tx(n,e),n===null&&Gd(e.stateNode.containerInfo),yi(e),null;case 10:return H_(e.type._context),yi(e),null;case 17:return Ki(e.type)&&bm(),yi(e),null;case 19:if(an(pn),s=e.memoizedState,s===null)return yi(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)qu(s,!1);else{if(Jn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=Dm(n),a!==null){for(e.flags|=128,qu(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return nn(pn,pn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Pn()>su&&(e.flags|=128,i=!0,qu(s,!1),e.lanes=4194304)}else{if(!i)if(n=Dm(a),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),qu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!un)return yi(e),null}else 2*Pn()-s.renderingStartTime>su&&t!==1073741824&&(e.flags|=128,i=!0,qu(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Pn(),e.sibling=null,t=pn.current,nn(pn,i?t&1|2:t&1),e):(yi(e),null);case 22:case 23:return sS(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?sr&1073741824&&(yi(e),e.subtreeFlags&6&&(e.flags|=8192)):yi(e),null;case 24:return null;case 25:return null}throw Error(Ne(156,e.tag))}function YB(n,e){switch(O_(e),e.tag){case 1:return Ki(e.type)&&bm(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return iu(),an(Yi),an(Ei),Y_(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return J_(e),null;case 13:if(an(pn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ne(340));tu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return an(pn),null;case 4:return iu(),null;case 10:return H_(e.type._context),null;case 22:case 23:return sS(),null;case 24:return null;default:return null}}var qf=!1,Ai=!1,KB=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Dc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){wn(n,e,i)}else t.current=null}function nx(n,e,t){try{t()}catch(i){wn(n,e,i)}}var Kw=!1;function qB(n,e){if(Oy=Mm,n=IT(),F_(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,h=0,f=0,p=n,m=null;t:for(;;){for(var g;p!==t||r!==0&&p.nodeType!==3||(o=a+r),p!==s||i!==0&&p.nodeType!==3||(l=a+i),p.nodeType===3&&(a+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===n)break t;if(m===t&&++h===r&&(o=a),m===s&&++f===i&&(l=a),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(jy={focusedElem:n,selectionRange:t},Mm=!1,Je=e;Je!==null;)if(e=Je,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Je=n;else for(;Je!==null;){e=Je;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var M=y.memoizedProps,_=y.memoizedState,v=e.stateNode,S=v.getSnapshotBeforeUpdate(e.elementType===e.type?M:Vr(e.type,M),_);v.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(E){wn(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,Je=n;break}Je=e.return}return y=Kw,Kw=!1,y}function Ed(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&nx(e,t,s)}r=r.next}while(r!==i)}}function og(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function ix(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function bb(n){var e=n.alternate;e!==null&&(n.alternate=null,bb(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[xs],delete e[Vd],delete e[Hy],delete e[IB],delete e[BB])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Rb(n){return n.tag===5||n.tag===3||n.tag===4}function qw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Rb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Tm));else if(i!==4&&(n=n.child,n!==null))for(rx(n,e,t),n=n.sibling;n!==null;)rx(n,e,t),n=n.sibling}function sx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(sx(n,e,t),n=n.sibling;n!==null;)sx(n,e,t),n=n.sibling}var ai=null,Xr=!1;function Ea(n,e,t){for(t=t.child;t!==null;)Nb(n,e,t),t=t.sibling}function Nb(n,e,t){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount($m,t)}catch{}switch(t.tag){case 5:Ai||Dc(t,e);case 6:var i=ai,r=Xr;ai=null,Ea(n,e,t),ai=i,Xr=r,ai!==null&&(Xr?(n=ai,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ai.removeChild(t.stateNode));break;case 18:ai!==null&&(Xr?(n=ai,t=t.stateNode,n.nodeType===8?s0(n.parentNode,t):n.nodeType===1&&s0(n,t),Od(n)):s0(ai,t.stateNode));break;case 4:i=ai,r=Xr,ai=t.stateNode.containerInfo,Xr=!0,Ea(n,e,t),ai=i,Xr=r;break;case 0:case 11:case 14:case 15:if(!Ai&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&nx(t,e,a),r=r.next}while(r!==i)}Ea(n,e,t);break;case 1:if(!Ai&&(Dc(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(o){wn(t,e,o)}Ea(n,e,t);break;case 21:Ea(n,e,t);break;case 22:t.mode&1?(Ai=(i=Ai)||t.memoizedState!==null,Ea(n,e,t),Ai=i):Ea(n,e,t);break;default:Ea(n,e,t)}}function Qw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new KB),e.forEach(function(i){var r=sL.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Ur(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ai=o.stateNode,Xr=!1;break e;case 3:ai=o.stateNode.containerInfo,Xr=!0;break e;case 4:ai=o.stateNode.containerInfo,Xr=!0;break e}o=o.return}if(ai===null)throw Error(Ne(160));Nb(s,a,r),ai=null,Xr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(h){wn(r,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Pb(e,n),e=e.sibling}function Pb(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ur(e,n),gs(n),i&4){try{Ed(3,n,n.return),og(3,n)}catch(M){wn(n,n.return,M)}try{Ed(5,n,n.return)}catch(M){wn(n,n.return,M)}}break;case 1:Ur(e,n),gs(n),i&512&&t!==null&&Dc(t,t.return);break;case 5:if(Ur(e,n),gs(n),i&512&&t!==null&&Dc(t,t.return),n.flags&32){var r=n.stateNode;try{Dd(r,"")}catch(M){wn(n,n.return,M)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,a=t!==null?t.memoizedProps:s,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&$C(r,s),Ry(o,a);var h=Ry(o,s);for(a=0;a<l.length;a+=2){var f=l[a],p=l[a+1];f==="style"?rT(r,p):f==="dangerouslySetInnerHTML"?nT(r,p):f==="children"?Dd(r,p):M_(r,f,p,h)}switch(o){case"input":My(r,s);break;case"textarea":eT(r,s);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Gc(r,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?Gc(r,!!s.multiple,s.defaultValue,!0):Gc(r,!!s.multiple,s.multiple?[]:"",!1))}r[Vd]=s}catch(M){wn(n,n.return,M)}}break;case 6:if(Ur(e,n),gs(n),i&4){if(n.stateNode===null)throw Error(Ne(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(M){wn(n,n.return,M)}}break;case 3:if(Ur(e,n),gs(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Od(e.containerInfo)}catch(M){wn(n,n.return,M)}break;case 4:Ur(e,n),gs(n);break;case 13:Ur(e,n),gs(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(iS=Pn())),i&4&&Qw(n);break;case 22:if(f=t!==null&&t.memoizedState!==null,n.mode&1?(Ai=(h=Ai)||f,Ur(e,n),Ai=h):Ur(e,n),gs(n),i&8192){if(h=n.memoizedState!==null,(n.stateNode.isHidden=h)&&!f&&n.mode&1)for(Je=n,f=n.child;f!==null;){for(p=Je=f;Je!==null;){switch(m=Je,g=m.child,m.tag){case 0:case 11:case 14:case 15:Ed(4,m,m.return);break;case 1:Dc(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){i=m,t=m.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(M){wn(i,t,M)}}break;case 5:Dc(m,m.return);break;case 22:if(m.memoizedState!==null){$w(p);continue}}g!==null?(g.return=m,Je=g):$w(p)}f=f.sibling}e:for(f=null,p=n;;){if(p.tag===5){if(f===null){f=p;try{r=p.stateNode,h?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,l=p.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=iT("display",a))}catch(M){wn(n,n.return,M)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(M){wn(n,n.return,M)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===n)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ur(e,n),gs(n),i&4&&Qw(n);break;case 21:break;default:Ur(e,n),gs(n)}}function gs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Rb(t)){var i=t;break e}t=t.return}throw Error(Ne(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Dd(r,""),i.flags&=-33);var s=qw(n);sx(n,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,o=qw(n);rx(n,o,a);break;default:throw Error(Ne(161))}}catch(l){wn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function QB(n,e,t){Je=n,Ib(n)}function Ib(n,e,t){for(var i=(n.mode&1)!==0;Je!==null;){var r=Je,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||qf;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||Ai;o=qf;var h=Ai;if(qf=a,(Ai=l)&&!h)for(Je=r;Je!==null;)a=Je,l=a.child,a.tag===22&&a.memoizedState!==null?eM(r):l!==null?(l.return=a,Je=l):eM(r);for(;s!==null;)Je=s,Ib(s),s=s.sibling;Je=r,qf=o,Ai=h}Zw(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Je=s):Zw(n)}}function Zw(n){for(;Je!==null;){var e=Je;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ai||og(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ai)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Vr(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&kw(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}kw(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Od(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ne(163))}Ai||e.flags&512&&ix(e)}catch(m){wn(e,e.return,m)}}if(e===n){Je=null;break}if(t=e.sibling,t!==null){t.return=e.return,Je=t;break}Je=e.return}}function $w(n){for(;Je!==null;){var e=Je;if(e===n){Je=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Je=t;break}Je=e.return}}function eM(n){for(;Je!==null;){var e=Je;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{og(4,e)}catch(l){wn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){wn(e,r,l)}}var s=e.return;try{ix(e)}catch(l){wn(e,s,l)}break;case 5:var a=e.return;try{ix(e)}catch(l){wn(e,a,l)}}}catch(l){wn(e,e.return,l)}if(e===n){Je=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Je=o;break}Je=e.return}}var ZB=Math.ceil,Um=ca.ReactCurrentDispatcher,tS=ca.ReactCurrentOwner,Rr=ca.ReactCurrentBatchConfig,jt=0,ii=null,Fn=null,li=0,sr=0,kc=ho(0),Jn=0,qd=null,xl=0,lg=0,nS=0,Cd=null,Vi=null,iS=0,su=1/0,Hs=null,Om=!1,ax=null,qa=null,Qf=!1,Ha=null,jm=0,Td=0,ox=null,om=-1,lm=0;function Di(){return jt&6?Pn():om!==-1?om:om=Pn()}function Qa(n){return n.mode&1?jt&2&&li!==0?li&-li:DB.transition!==null?(lm===0&&(lm=gT()),lm):(n=Kt,n!==0||(n=window.event,n=n===void 0?16:wT(n.type)),n):1}function $r(n,e,t,i){if(50<Td)throw Td=0,ox=null,Error(Ne(185));yh(n,t,i),(!(jt&2)||n!==ii)&&(n===ii&&(!(jt&2)&&(lg|=t),Jn===4&&ja(n,li)),qi(n,i),t===1&&jt===0&&!(e.mode&1)&&(su=Pn()+500,rg&&fo()))}function qi(n,e){var t=n.callbackNode;DI(n,e);var i=wm(n,n===ii?li:0);if(i===0)t!==null&&cw(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&cw(t),e===1)n.tag===0?LB(tM.bind(null,n)):GT(tM.bind(null,n)),NB(function(){!(jt&6)&&fo()}),t=null;else{switch(vT(i)){case 1:t=R_;break;case 4:t=pT;break;case 16:t=Am;break;case 536870912:t=mT;break;default:t=Am}t=jb(t,Bb.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Bb(n,e){if(om=-1,lm=0,jt&6)throw Error(Ne(327));var t=n.callbackNode;if(Jc()&&n.callbackNode!==t)return null;var i=wm(n,n===ii?li:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=zm(n,i);else{e=i;var r=jt;jt|=2;var s=Db();(ii!==n||li!==e)&&(Hs=null,su=Pn()+500,al(n,e));do try{tL();break}catch(o){Lb(n,o)}while(!0);G_(),Um.current=s,jt=r,Fn!==null?e=0:(ii=null,li=0,e=Jn)}if(e!==0){if(e===2&&(r=Ly(n),r!==0&&(i=r,e=lx(n,r))),e===1)throw t=qd,al(n,0),ja(n,i),qi(n,Pn()),t;if(e===6)ja(n,i);else{if(r=n.current.alternate,!(i&30)&&!$B(r)&&(e=zm(n,i),e===2&&(s=Ly(n),s!==0&&(i=s,e=lx(n,s))),e===1))throw t=qd,al(n,0),ja(n,i),qi(n,Pn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Ne(345));case 2:Xo(n,Vi,Hs);break;case 3:if(ja(n,i),(i&130023424)===i&&(e=iS+500-Pn(),10<e)){if(wm(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Di(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=Gy(Xo.bind(null,n,Vi,Hs),e);break}Xo(n,Vi,Hs);break;case 4:if(ja(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var a=31-Zr(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=Pn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ZB(i/1960))-i,10<i){n.timeoutHandle=Gy(Xo.bind(null,n,Vi,Hs),i);break}Xo(n,Vi,Hs);break;case 5:Xo(n,Vi,Hs);break;default:throw Error(Ne(329))}}}return qi(n,Pn()),n.callbackNode===t?Bb.bind(null,n):null}function lx(n,e){var t=Cd;return n.current.memoizedState.isDehydrated&&(al(n,e).flags|=256),n=zm(n,e),n!==2&&(e=Vi,Vi=t,e!==null&&cx(e)),n}function cx(n){Vi===null?Vi=n:Vi.push.apply(Vi,n)}function $B(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!es(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ja(n,e){for(e&=~nS,e&=~lg,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Zr(e),i=1<<t;n[t]=-1,e&=~i}}function tM(n){if(jt&6)throw Error(Ne(327));Jc();var e=wm(n,0);if(!(e&1))return qi(n,Pn()),null;var t=zm(n,e);if(n.tag!==0&&t===2){var i=Ly(n);i!==0&&(e=i,t=lx(n,i))}if(t===1)throw t=qd,al(n,0),ja(n,e),qi(n,Pn()),t;if(t===6)throw Error(Ne(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Xo(n,Vi,Hs),qi(n,Pn()),null}function rS(n,e){var t=jt;jt|=1;try{return n(e)}finally{jt=t,jt===0&&(su=Pn()+500,rg&&fo())}}function _l(n){Ha!==null&&Ha.tag===0&&!(jt&6)&&Jc();var e=jt;jt|=1;var t=Rr.transition,i=Kt;try{if(Rr.transition=null,Kt=1,n)return n()}finally{Kt=i,Rr.transition=t,jt=e,!(jt&6)&&fo()}}function sS(){sr=kc.current,an(kc)}function al(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,RB(t)),Fn!==null)for(t=Fn.return;t!==null;){var i=t;switch(O_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&bm();break;case 3:iu(),an(Yi),an(Ei),Y_();break;case 5:J_(i);break;case 4:iu();break;case 13:an(pn);break;case 19:an(pn);break;case 10:H_(i.type._context);break;case 22:case 23:sS()}t=t.return}if(ii=n,Fn=n=Za(n.current,null),li=sr=e,Jn=0,qd=null,nS=lg=xl=0,Vi=Cd=null,Zo!==null){for(e=0;e<Zo.length;e++)if(t=Zo[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}t.pending=i}Zo=null}return n}function Lb(n,e){do{var t=Fn;try{if(G_(),rm.current=Fm,km){for(var i=vn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}km=!1}if(yl=0,ti=Hn=vn=null,Md=!1,Jd=0,tS.current=null,t===null||t.return===null){Jn=1,qd=e,Fn=null;break}e:{var s=n,a=t.return,o=t,l=e;if(e=li,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=l,f=o,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=Gw(a);if(g!==null){g.flags&=-257,Hw(g,a,o,s,e),g.mode&1&&zw(s,h,e),e=g,l=h;var y=e.updateQueue;if(y===null){var M=new Set;M.add(l),e.updateQueue=M}else y.add(l);break e}else{if(!(e&1)){zw(s,h,e),aS();break e}l=Error(Ne(426))}}else if(un&&o.mode&1){var _=Gw(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Hw(_,a,o,s,e),j_(ru(l,o));break e}}s=l=ru(l,o),Jn!==4&&(Jn=2),Cd===null?Cd=[s]:Cd.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=vb(s,l,e);Dw(s,v);break e;case 1:o=l;var S=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(qa===null||!qa.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=yb(s,o,e);Dw(s,E);break e}}s=s.return}while(s!==null)}Fb(t)}catch(N){e=N,Fn===t&&t!==null&&(Fn=t=t.return);continue}break}while(!0)}function Db(){var n=Um.current;return Um.current=Fm,n===null?Fm:n}function aS(){(Jn===0||Jn===3||Jn===2)&&(Jn=4),ii===null||!(xl&268435455)&&!(lg&268435455)||ja(ii,li)}function zm(n,e){var t=jt;jt|=2;var i=Db();(ii!==n||li!==e)&&(Hs=null,al(n,e));do try{eL();break}catch(r){Lb(n,r)}while(!0);if(G_(),jt=t,Um.current=i,Fn!==null)throw Error(Ne(261));return ii=null,li=0,Jn}function eL(){for(;Fn!==null;)kb(Fn)}function tL(){for(;Fn!==null&&!CI();)kb(Fn)}function kb(n){var e=Ob(n.alternate,n,sr);n.memoizedProps=n.pendingProps,e===null?Fb(n):Fn=e,tS.current=null}function Fb(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=YB(t,e),t!==null){t.flags&=32767,Fn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Jn=6,Fn=null;return}}else if(t=JB(t,e,sr),t!==null){Fn=t;return}if(e=e.sibling,e!==null){Fn=e;return}Fn=e=n}while(e!==null);Jn===0&&(Jn=5)}function Xo(n,e,t){var i=Kt,r=Rr.transition;try{Rr.transition=null,Kt=1,nL(n,e,t,i)}finally{Rr.transition=r,Kt=i}return null}function nL(n,e,t,i){do Jc();while(Ha!==null);if(jt&6)throw Error(Ne(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ne(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(kI(n,s),n===ii&&(Fn=ii=null,li=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Qf||(Qf=!0,jb(Am,function(){return Jc(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Rr.transition,Rr.transition=null;var a=Kt;Kt=1;var o=jt;jt|=4,tS.current=null,qB(n,t),Pb(t,n),AB(jy),Mm=!!Oy,jy=Oy=null,n.current=t,QB(t),TI(),jt=o,Kt=a,Rr.transition=s}else n.current=t;if(Qf&&(Qf=!1,Ha=n,jm=r),s=n.pendingLanes,s===0&&(qa=null),NI(t.stateNode),qi(n,Pn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Om)throw Om=!1,n=ax,ax=null,n;return jm&1&&n.tag!==0&&Jc(),s=n.pendingLanes,s&1?n===ox?Td++:(Td=0,ox=n):Td=0,fo(),null}function Jc(){if(Ha!==null){var n=vT(jm),e=Rr.transition,t=Kt;try{if(Rr.transition=null,Kt=16>n?16:n,Ha===null)var i=!1;else{if(n=Ha,Ha=null,jm=0,jt&6)throw Error(Ne(331));var r=jt;for(jt|=4,Je=n.current;Je!==null;){var s=Je,a=s.child;if(Je.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var h=o[l];for(Je=h;Je!==null;){var f=Je;switch(f.tag){case 0:case 11:case 15:Ed(8,f,s)}var p=f.child;if(p!==null)p.return=f,Je=p;else for(;Je!==null;){f=Je;var m=f.sibling,g=f.return;if(bb(f),f===h){Je=null;break}if(m!==null){m.return=g,Je=m;break}Je=g}}}var y=s.alternate;if(y!==null){var M=y.child;if(M!==null){y.child=null;do{var _=M.sibling;M.sibling=null,M=_}while(M!==null)}}Je=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Je=a;else e:for(;Je!==null;){if(s=Je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ed(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Je=v;break e}Je=s.return}}var S=n.current;for(Je=S;Je!==null;){a=Je;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,Je=A;else e:for(a=S;Je!==null;){if(o=Je,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:og(9,o)}}catch(N){wn(o,o.return,N)}if(o===a){Je=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,Je=E;break e}Je=o.return}}if(jt=r,fo(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot($m,n)}catch{}i=!0}return i}finally{Kt=t,Rr.transition=e}}return!1}function nM(n,e,t){e=ru(t,e),e=vb(n,e,1),n=Ka(n,e,1),e=Di(),n!==null&&(yh(n,1,e),qi(n,e))}function wn(n,e,t){if(n.tag===3)nM(n,n,t);else for(;e!==null;){if(e.tag===3){nM(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(qa===null||!qa.has(i))){n=ru(t,n),n=yb(e,n,1),e=Ka(e,n,1),n=Di(),e!==null&&(yh(e,1,n),qi(e,n));break}}e=e.return}}function iL(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Di(),n.pingedLanes|=n.suspendedLanes&t,ii===n&&(li&t)===t&&(Jn===4||Jn===3&&(li&130023424)===li&&500>Pn()-iS?al(n,0):nS|=t),qi(n,e)}function Ub(n,e){e===0&&(n.mode&1?(e=zf,zf<<=1,!(zf&130023424)&&(zf=4194304)):e=1);var t=Di();n=sa(n,e),n!==null&&(yh(n,e,t),qi(n,t))}function rL(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Ub(n,t)}function sL(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Ne(314))}i!==null&&i.delete(e),Ub(n,t)}var Ob;Ob=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Yi.current)Ji=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ji=!1,XB(n,e,t);Ji=!!(n.flags&131072)}else Ji=!1,un&&e.flags&1048576&&HT(e,Pm,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;am(n,e),n=e.pendingProps;var r=eu(e,Ei.current);Xc(e,t),r=q_(null,e,i,n,r,t);var s=Q_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ki(i)?(s=!0,Rm(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,W_(e),r.updater=ag,e.stateNode=r,r._reactInternals=e,Ky(e,i,n,t),e=Zy(null,e,i,!0,s,t)):(e.tag=0,un&&s&&U_(e),Bi(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(am(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=oL(i),n=Vr(i,n),r){case 0:e=Qy(null,e,i,n,t);break e;case 1:e=Xw(null,e,i,n,t);break e;case 11:e=Vw(null,e,i,n,t);break e;case 14:e=Ww(null,e,i,Vr(i.type,n),t);break e}throw Error(Ne(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vr(i,r),Qy(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vr(i,r),Xw(n,e,i,r,t);case 3:e:{if(Ab(e),n===null)throw Error(Ne(387));i=e.pendingProps,s=e.memoizedState,r=s.element,KT(n,e),Lm(e,i,null,t);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=ru(Error(Ne(423)),e),e=Jw(n,e,i,t,r);break e}else if(i!==r){r=ru(Error(Ne(424)),e),e=Jw(n,e,i,t,r);break e}else for(or=Ya(e.stateNode.containerInfo.firstChild),cr=e,un=!0,Jr=null,t=JT(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(tu(),i===r){e=aa(n,e,t);break e}Bi(n,e,i,t)}e=e.child}return e;case 5:return qT(e),n===null&&Xy(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,a=r.children,zy(i,r)?a=null:s!==null&&zy(i,s)&&(e.flags|=32),Sb(n,e),Bi(n,e,a,t),e.child;case 6:return n===null&&Xy(e),null;case 13:return wb(n,e,t);case 4:return X_(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=nu(e,null,i,t):Bi(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vr(i,r),Vw(n,e,i,r,t);case 7:return Bi(n,e,e.pendingProps,t),e.child;case 8:return Bi(n,e,e.pendingProps.children,t),e.child;case 12:return Bi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,nn(Im,i._currentValue),i._currentValue=a,s!==null)if(es(s.value,a)){if(s.children===r.children&&!Yi.current){e=aa(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Zs(-1,t&-t),l.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?l.next=l:(l.next=f.next,f.next=l),h.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Jy(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Ne(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),Jy(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Bi(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Xc(e,t),r=Ir(r),i=i(r),e.flags|=1,Bi(n,e,i,t),e.child;case 14:return i=e.type,r=Vr(i,e.pendingProps),r=Vr(i.type,r),Ww(n,e,i,r,t);case 15:return xb(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vr(i,r),am(n,e),e.tag=1,Ki(i)?(n=!0,Rm(e)):n=!1,Xc(e,t),gb(e,i,r),Ky(e,i,r,t),Zy(null,e,i,!0,n,t);case 19:return Mb(n,e,t);case 22:return _b(n,e,t)}throw Error(Ne(156,e.tag))};function jb(n,e){return fT(n,e)}function aL(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(n,e,t,i){return new aL(n,e,t,i)}function oS(n){return n=n.prototype,!(!n||!n.isReactComponent)}function oL(n){if(typeof n=="function")return oS(n)?1:0;if(n!=null){if(n=n.$$typeof,n===C_)return 11;if(n===T_)return 14}return 2}function Za(n,e){var t=n.alternate;return t===null?(t=Tr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function cm(n,e,t,i,r,s){var a=2;if(i=n,typeof n=="function")oS(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Cc:return ol(t.children,r,s,e);case E_:a=8,r|=8;break;case xy:return n=Tr(12,t,e,r|2),n.elementType=xy,n.lanes=s,n;case _y:return n=Tr(13,t,e,r),n.elementType=_y,n.lanes=s,n;case Sy:return n=Tr(19,t,e,r),n.elementType=Sy,n.lanes=s,n;case qC:return cg(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case YC:a=10;break e;case KC:a=9;break e;case C_:a=11;break e;case T_:a=14;break e;case ka:a=16,i=null;break e}throw Error(Ne(130,n==null?n:typeof n,""))}return e=Tr(a,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function ol(n,e,t,i){return n=Tr(7,n,i,e),n.lanes=t,n}function cg(n,e,t,i){return n=Tr(22,n,i,e),n.elementType=qC,n.lanes=t,n.stateNode={isHidden:!1},n}function f0(n,e,t){return n=Tr(6,n,null,e),n.lanes=t,n}function p0(n,e,t){return e=Tr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function lL(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yv(0),this.expirationTimes=Yv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yv(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function lS(n,e,t,i,r,s,a,o,l){return n=new lL(n,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Tr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},W_(s),n}function cL(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ec,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function zb(n){if(!n)return ro;n=n._reactInternals;e:{if(Rl(n)!==n||n.tag!==1)throw Error(Ne(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ki(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ne(171))}if(n.tag===1){var t=n.type;if(Ki(t))return zT(n,t,e)}return e}function Gb(n,e,t,i,r,s,a,o,l){return n=lS(t,i,!0,n,r,s,a,o,l),n.context=zb(null),t=n.current,i=Di(),r=Qa(t),s=Zs(i,r),s.callback=e??null,Ka(t,s,r),n.current.lanes=r,yh(n,r,i),qi(n,i),n}function ug(n,e,t,i){var r=e.current,s=Di(),a=Qa(r);return t=zb(t),e.context===null?e.context=t:e.pendingContext=t,e=Zs(s,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ka(r,e,a),n!==null&&($r(n,r,a,s),im(n,r,a)),a}function Gm(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function iM(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function cS(n,e){iM(n,e),(n=n.alternate)&&iM(n,e)}function uL(){return null}var Hb=typeof reportError=="function"?reportError:function(n){console.error(n)};function uS(n){this._internalRoot=n}dg.prototype.render=uS.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ne(409));ug(n,e,null,null)};dg.prototype.unmount=uS.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;_l(function(){ug(null,n,null,null)}),e[ra]=null}};function dg(n){this._internalRoot=n}dg.prototype.unstable_scheduleHydration=function(n){if(n){var e=_T();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Oa.length&&e!==0&&e<Oa[t].priority;t++);Oa.splice(t,0,n),t===0&&AT(n)}};function dS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function hg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function rM(){}function dL(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var h=Gm(a);s.call(h)}}var a=Gb(e,i,n,0,null,!1,!1,"",rM);return n._reactRootContainer=a,n[ra]=a.current,Gd(n.nodeType===8?n.parentNode:n),_l(),a}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var o=i;i=function(){var h=Gm(l);o.call(h)}}var l=lS(n,0,!1,null,null,!1,!1,"",rM);return n._reactRootContainer=l,n[ra]=l.current,Gd(n.nodeType===8?n.parentNode:n),_l(function(){ug(e,l,t,i)}),l}function fg(n,e,t,i,r){var s=t._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var l=Gm(a);o.call(l)}}ug(e,a,n,r)}else a=dL(t,e,n,r,i);return Gm(a)}yT=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=gd(e.pendingLanes);t!==0&&(N_(e,t|1),qi(e,Pn()),!(jt&6)&&(su=Pn()+500,fo()))}break;case 13:_l(function(){var i=sa(n,1);if(i!==null){var r=Di();$r(i,n,1,r)}}),cS(n,1)}};P_=function(n){if(n.tag===13){var e=sa(n,134217728);if(e!==null){var t=Di();$r(e,n,134217728,t)}cS(n,134217728)}};xT=function(n){if(n.tag===13){var e=Qa(n),t=sa(n,e);if(t!==null){var i=Di();$r(t,n,e,i)}cS(n,e)}};_T=function(){return Kt};ST=function(n,e){var t=Kt;try{return Kt=n,e()}finally{Kt=t}};Py=function(n,e,t){switch(e){case"input":if(My(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=ig(i);if(!r)throw Error(Ne(90));ZC(i),My(i,r)}}}break;case"textarea":eT(n,t);break;case"select":e=t.value,e!=null&&Gc(n,!!t.multiple,e,!1)}};oT=rS;lT=_l;var hL={usingClientEntryPoint:!1,Events:[_h,Nc,ig,sT,aT,rS]},Qu={findFiberByHostInstance:Qo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fL={bundleType:Qu.bundleType,version:Qu.version,rendererPackageName:Qu.rendererPackageName,rendererConfig:Qu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ca.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=dT(n),n===null?null:n.stateNode},findFiberByHostInstance:Qu.findFiberByHostInstance||uL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zf.isDisabled&&Zf.supportsFiber)try{$m=Zf.inject(fL),_s=Zf}catch{}}fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hL;fr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dS(e))throw Error(Ne(200));return cL(n,e,null,t)};fr.createRoot=function(n,e){if(!dS(n))throw Error(Ne(299));var t=!1,i="",r=Hb;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=lS(n,1,!1,null,null,t,!1,i,r),n[ra]=e.current,Gd(n.nodeType===8?n.parentNode:n),new uS(e)};fr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ne(188)):(n=Object.keys(n).join(","),Error(Ne(268,n)));return n=dT(e),n=n===null?null:n.stateNode,n};fr.flushSync=function(n){return _l(n)};fr.hydrate=function(n,e,t){if(!hg(e))throw Error(Ne(200));return fg(null,n,e,!0,t)};fr.hydrateRoot=function(n,e,t){if(!dS(n))throw Error(Ne(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",a=Hb;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=Gb(e,null,n,1,t??null,r,!1,s,a),n[ra]=e.current,Gd(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new dg(e)};fr.render=function(n,e,t){if(!hg(e))throw Error(Ne(200));return fg(null,n,e,!1,t)};fr.unmountComponentAtNode=function(n){if(!hg(n))throw Error(Ne(40));return n._reactRootContainer?(_l(function(){fg(null,null,n,!1,function(){n._reactRootContainer=null,n[ra]=null})}),!0):!1};fr.unstable_batchedUpdates=rS;fr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!hg(t))throw Error(Ne(200));if(n==null||n._reactInternals===void 0)throw Error(Ne(38));return fg(n,e,t,!1,i)};fr.version="18.3.1-next-f1338f8080-20240426";function Vb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vb)}catch(n){console.error(n)}}Vb(),VC.exports=fr;var pL=VC.exports,sM=pL;vy.createRoot=sM.createRoot,vy.hydrateRoot=sM.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qd(){return Qd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Qd.apply(this,arguments)}var Va;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Va||(Va={}));const aM="popstate";function mL(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:a,hash:o}=i.location;return ux("",{pathname:s,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:Wb(r)}return vL(e,t,null,n)}function On(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function hS(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gL(){return Math.random().toString(36).substr(2,8)}function oM(n,e){return{usr:n.state,key:n.key,idx:e}}function ux(n,e,t,i){return t===void 0&&(t=null),Qd({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?xu(e):e,{state:t,key:e&&e.key||i||gL()})}function Wb(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function xu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function vL(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o=Va.Pop,l=null,h=f();h==null&&(h=0,a.replaceState(Qd({},a.state,{idx:h}),""));function f(){return(a.state||{idx:null}).idx}function p(){o=Va.Pop;let _=f(),v=_==null?null:_-h;h=_,l&&l({action:o,location:M.location,delta:v})}function m(_,v){o=Va.Push;let S=ux(M.location,_,v);h=f()+1;let A=oM(S,h),E=M.createHref(S);try{a.pushState(A,"",E)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(E)}s&&l&&l({action:o,location:M.location,delta:1})}function g(_,v){o=Va.Replace;let S=ux(M.location,_,v);h=f();let A=oM(S,h),E=M.createHref(S);a.replaceState(A,"",E),s&&l&&l({action:o,location:M.location,delta:0})}function y(_){let v=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof _=="string"?_:Wb(_);return S=S.replace(/ $/,"%20"),On(v,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,v)}let M={get action(){return o},get location(){return n(r,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(aM,p),l=_,()=>{r.removeEventListener(aM,p),l=null}},createHref(_){return e(r,_)},createURL:y,encodeLocation(_){let v=y(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:g,go(_){return a.go(_)}};return M}var lM;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(lM||(lM={}));function yL(n,e,t){return t===void 0&&(t="/"),xL(n,e,t)}function xL(n,e,t,i){let r=typeof e=="string"?xu(e):e,s=Yb(r.pathname||"/",t);if(s==null)return null;let a=Xb(n);_L(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let h=IL(s);o=RL(a[l],h)}return o}function Xb(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(On(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let h=ll([i,l.relativePath]),f=t.concat(l);s.children&&s.children.length>0&&(On(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Xb(s.children,e,f,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:TL(h,s.index),routesMeta:f})};return n.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))r(s,a);else for(let l of Jb(s.path))r(s,a,l)}),e}function Jb(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=Jb(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function _L(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:bL(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const SL=/^:[\w-]+$/,AL=3,wL=2,ML=1,EL=10,CL=-2,cM=n=>n==="*";function TL(n,e){let t=n.split("/"),i=t.length;return t.some(cM)&&(i+=CL),e&&(i+=wL),t.filter(r=>!cM(r)).reduce((r,s)=>r+(SL.test(s)?AL:s===""?ML:EL),i)}function bL(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function RL(n,e,t){let{routesMeta:i}=n,r={},s="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],h=o===i.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=NL({path:l.relativePath,caseSensitive:l.caseSensitive,end:h},f),m=l.route;if(!p)return null;Object.assign(r,p.params),a.push({params:r,pathname:ll([s,p.pathname]),pathnameBase:FL(ll([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=ll([s,p.pathnameBase]))}return a}function NL(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=PL(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((h,f,p)=>{let{paramName:m,isOptional:g}=f;if(m==="*"){let M=o[p]||"";a=s.slice(0,s.length-M.length).replace(/(.)\/+$/,"$1")}const y=o[p];return g&&!y?h[m]=void 0:h[m]=(y||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:n}}function PL(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),hS(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function IL(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hS(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Yb(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const BL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LL=n=>BL.test(n);function DL(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?xu(n):n,s;if(t)if(LL(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),hS(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=uM(t.substring(1),"/"):s=uM(t,e)}else s=e;return{pathname:s,search:UL(i),hash:OL(r)}}function uM(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function m0(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kL(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Kb(n,e){let t=kL(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function qb(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=xu(n):(r=Qd({},n),On(!r.pathname||!r.pathname.includes("?"),m0("?","pathname","search",r)),On(!r.pathname||!r.pathname.includes("#"),m0("#","pathname","hash",r)),On(!r.search||!r.search.includes("#"),m0("#","search","hash",r)));let s=n===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=t;else{let p=e.length-1;if(!i&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),p-=1;r.pathname=m.join("/")}o=p>=0?e[p]:"/"}let l=DL(r,o),h=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(h||f)&&(l.pathname+="/"),l}const ll=n=>n.join("/").replace(/\/\/+/g,"/"),FL=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),UL=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,OL=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function jL(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Qb=["post","put","patch","delete"];new Set(Qb);const zL=["get",...Qb];new Set(zL);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zd(){return Zd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Zd.apply(this,arguments)}const fS=B.createContext(null),GL=B.createContext(null),Ah=B.createContext(null),pg=B.createContext(null),po=B.createContext({outlet:null,matches:[],isDataRoute:!1}),Zb=B.createContext(null);function wh(){return B.useContext(pg)!=null}function mo(){return wh()||On(!1),B.useContext(pg).location}function $b(n){B.useContext(Ah).static||B.useLayoutEffect(n)}function di(){let{isDataRoute:n}=B.useContext(po);return n?tD():HL()}function HL(){wh()||On(!1);let n=B.useContext(fS),{basename:e,future:t,navigator:i}=B.useContext(Ah),{matches:r}=B.useContext(po),{pathname:s}=mo(),a=JSON.stringify(Kb(r,t.v7_relativeSplatPath)),o=B.useRef(!1);return $b(()=>{o.current=!0}),B.useCallback(function(h,f){if(f===void 0&&(f={}),!o.current)return;if(typeof h=="number"){i.go(h);return}let p=qb(h,JSON.parse(a),s,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ll([e,p.pathname])),(f.replace?i.replace:i.push)(p,f.state,f)},[e,i,a,s,n])}function mg(){let{matches:n}=B.useContext(po),e=n[n.length-1];return e?e.params:{}}function VL(n,e){return WL(n,e)}function WL(n,e,t,i){wh()||On(!1);let{navigator:r}=B.useContext(Ah),{matches:s}=B.useContext(po),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let h=mo(),f;if(e){var p;let _=typeof e=="string"?xu(e):e;l==="/"||(p=_.pathname)!=null&&p.startsWith(l)||On(!1),f=_}else f=h;let m=f.pathname||"/",g=m;if(l!=="/"){let _=l.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let y=yL(n,{pathname:g}),M=qL(y&&y.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:ll([l,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:ll([l,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,t,i);return e&&M?B.createElement(pg.Provider,{value:{location:Zd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Va.Pop}},M):M}function XL(){let n=eD(),e=jL(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:r},t):null,null)}const JL=B.createElement(XL,null);class YL extends B.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?B.createElement(po.Provider,{value:this.props.routeContext},B.createElement(Zb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KL(n){let{routeContext:e,match:t,children:i}=n,r=B.useContext(fS);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),B.createElement(po.Provider,{value:e},i)}function qL(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=(r=t)==null?void 0:r.errors;if(o!=null){let f=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);f>=0||On(!1),a=a.slice(0,Math.min(a.length,f+1))}let l=!1,h=-1;if(t&&i&&i.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:m,errors:g}=t,y=p.route.loader&&m[p.route.id]===void 0&&(!g||g[p.route.id]===void 0);if(p.route.lazy||y){l=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((f,p,m)=>{let g,y=!1,M=null,_=null;t&&(g=o&&p.route.id?o[p.route.id]:void 0,M=p.route.errorElement||JL,l&&(h<0&&m===0?(nD("route-fallback"),y=!0,_=null):h===m&&(y=!0,_=p.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,m+1)),S=()=>{let A;return g?A=M:y?A=_:p.route.Component?A=B.createElement(p.route.Component,null):p.route.element?A=p.route.element:A=f,B.createElement(KL,{match:p,routeContext:{outlet:f,matches:v,isDataRoute:t!=null},children:A})};return t&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?B.createElement(YL,{location:t.location,revalidation:t.revalidation,component:M,error:g,children:S(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):S()},null)}var eR=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(eR||{}),tR=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(tR||{});function QL(n){let e=B.useContext(fS);return e||On(!1),e}function ZL(n){let e=B.useContext(GL);return e||On(!1),e}function $L(n){let e=B.useContext(po);return e||On(!1),e}function nR(n){let e=$L(),t=e.matches[e.matches.length-1];return t.route.id||On(!1),t.route.id}function eD(){var n;let e=B.useContext(Zb),t=ZL(),i=nR();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function tD(){let{router:n}=QL(eR.UseNavigateStable),e=nR(tR.UseNavigateStable),t=B.useRef(!1);return $b(()=>{t.current=!0}),B.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,Zd({fromRouteId:e},s)))},[n,e])}const dM={};function nD(n,e,t){dM[n]||(dM[n]=!0)}function iD(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function dx(n){let{to:e,replace:t,state:i,relative:r}=n;wh()||On(!1);let{future:s,static:a}=B.useContext(Ah),{matches:o}=B.useContext(po),{pathname:l}=mo(),h=di(),f=qb(e,Kb(o,s.v7_relativeSplatPath),l,r==="path"),p=JSON.stringify(f);return B.useEffect(()=>h(JSON.parse(p),{replace:t,state:i,relative:r}),[h,p,r,t,i]),null}function si(n){On(!1)}function rD(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Va.Pop,navigator:s,static:a=!1,future:o}=n;wh()&&On(!1);let l=e.replace(/^\/*/,"/"),h=B.useMemo(()=>({basename:l,navigator:s,static:a,future:Zd({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof i=="string"&&(i=xu(i));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:y="default"}=i,M=B.useMemo(()=>{let _=Yb(f,l);return _==null?null:{location:{pathname:_,search:p,hash:m,state:g,key:y},navigationType:r}},[l,f,p,m,g,y,r]);return M==null?null:B.createElement(Ah.Provider,{value:h},B.createElement(pg.Provider,{children:t,value:M}))}function sD(n){let{children:e,location:t}=n;return VL(hx(e),t)}new Promise(()=>{});function hx(n,e){e===void 0&&(e=[]);let t=[];return B.Children.forEach(n,(i,r)=>{if(!B.isValidElement(i))return;let s=[...e,r];if(i.type===B.Fragment){t.push.apply(t,hx(i.props.children,s));return}i.type!==si&&On(!1),!i.props.index||!i.props.children||On(!1);let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=hx(i.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const aD="6";try{window.__reactRouterVersion=aD}catch{}const oD="startTransition",hM=iI[oD];function lD(n){let{basename:e,children:t,future:i,window:r}=n,s=B.useRef();s.current==null&&(s.current=mL({window:r,v5Compat:!0}));let a=s.current,[o,l]=B.useState({action:a.action,location:a.location}),{v7_startTransition:h}=i||{},f=B.useCallback(p=>{h&&hM?hM(()=>l(p)):l(p)},[l,h]);return B.useLayoutEffect(()=>a.listen(f),[a,f]),B.useEffect(()=>iD(i),[i]),B.createElement(rD,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:i})}var fM;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(fM||(fM={}));var pM;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(pM||(pM={}));const iR="/api",pS="ai_interviewer_token",mS="ai_interviewer_user",Mh=()=>localStorage.getItem(pS),mM=n=>{localStorage.setItem(pS,n)},As=()=>{localStorage.removeItem(pS),localStorage.removeItem(mS)},ns=()=>{const n=localStorage.getItem(mS);return n?JSON.parse(n):null},bd=n=>{localStorage.setItem(mS,JSON.stringify(n))},cD=()=>{sessionStorage.clear();const n=[];for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&(t.includes("interview")||t.includes("session")||t.includes("ats_")||t.includes("plan_")||t.includes("analytics_")||t.includes("resume_cache")||t.includes("evaluation_"))&&n.push(t)}n.forEach(e=>localStorage.removeItem(e))},uD=()=>{const n=localStorage.getItem("ai_interviewer_theme");localStorage.clear(),sessionStorage.clear(),n&&localStorage.setItem("ai_interviewer_theme",n)},rR=()=>!!Mh();let g0=!1;async function tt(n,e={}){if(g0&&n!=="/health")throw new Error("Backend is unreachable. Please ensure the server is running.");const t=Mh(),i={"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`},...e.headers};try{const r=await fetch(`${iR}${n}`,{...e,headers:i});if(g0=!1,r.status===401)throw As(),window.location.href="/login",new Error("Session expired. Please login again.");const s=await r.json().catch(()=>({}));if(!r.ok)throw new Error(s.detail||s.message||`Request failed: ${r.status}`);return s}catch(r){throw r.message==="Failed to fetch"||r.message.includes("NetworkError")||r.message.includes("ECONNREFUSED")||r.name==="TypeError"&&!r.message.includes("401")?(g0=!0,As(),window.location.pathname!=="/login"&&(console.error("[API] Backend unreachable - redirecting to login"),window.location.href="/login"),new Error("Unable to connect to server. Please check if the backend is running.")):(r.message.includes("Session expired"),r)}}const ys={async signup(n,e,t){const i=await tt("/auth/signup",{method:"POST",body:JSON.stringify({name:n,email:e,password:t})});return i.success&&i.token&&(mM(i.token.access_token),bd(i.user)),i},async login(n,e){const t=await tt("/auth/login",{method:"POST",body:JSON.stringify({email:n,password:e})});return t.success&&t.token&&(mM(t.token.access_token),bd(t.user)),t},async logout(){try{await tt("/auth/logout",{method:"POST"})}catch(n){console.warn("Logout API call failed:",n)}finally{As()}},async getCurrentUser(){return tt("/auth/me")},async verifyToken(){if(!Mh())return console.log("[Auth] No token in storage, skipping verify-token call"),!1;try{return await tt("/auth/verify-token",{method:"POST"}),!0}catch(e){return console.warn("[Auth] Token verification failed:",e.message),!1}}},Hm={async getProfile(){return tt("/users/profile")},async updateProfile(n){const e=new URLSearchParams;return n.name&&e.append("name",n.name),tt(`/users/profile?${e.toString()}`,{method:"PUT"})},async getAnalytics(){return tt("/users/analytics")},async getHistory(n=10,e=0){return tt(`/users/history?limit=${n}&offset=${e}`)},async getResumes(){return tt("/resumes/me")}},Sl={async upload(n){const e=Mh(),t=new FormData;t.append("file",n);const i=await fetch(`${iR}/resumes/upload`,{method:"POST",headers:{...e&&{Authorization:`Bearer ${e}`}},body:t});if(i.status===401)throw As(),window.location.href="/login",new Error("Session expired. Please login again.");const r=await i.json().catch(()=>({}));if(!i.ok)throw new Error(r.detail||r.message||"Failed to upload resume");return r},async getAll(){return tt("/resumes/me")},async getById(n){return tt(`/resumes/${n}`)},async delete(n){return tt(`/resumes/${n}`,{method:"DELETE"})}},dD={async analyze(n,e,t=null){return tt(`/ats/analyze/${n}`,{method:"POST",body:JSON.stringify({target_role:e,target_role_description:t})})},async getResult(n){return tt(`/ats/result/${n}`)},async getResumeAnalysis(n){return tt(`/ats/resume/${n}`)},async getHistory(n=10){return tt(`/ats/history?limit=${n}`)},async getStatus(){return tt("/ats/status")}},gM={async generate(n,e,t={}){return tt(`/interviews/plan/${n}`,{method:"POST",body:JSON.stringify({target_role:e,target_role_description:t.targetDescription||null,session_type:t.sessionType||"mixed",difficulty_level:t.difficultyLevel||"medium",question_count:t.questionCount||10,company_mode:t.companyMode||null,round_config:t.roundConfig||null})})},async getById(n){return tt(`/interviews/plan/${n}`)},async getByResume(n){return tt(`/interviews/plans/resume/${n}`)},async getAll(n=10){return tt(`/interviews/plans/me?limit=${n}`)},async getQuestions(n){return tt(`/interviews/plan/${n}/questions`)}},Zu={async start(n,e="professional"){return tt("/interviews/live/start",{method:"POST",body:JSON.stringify({plan_id:n,persona:e})})},async getState(n){return tt(`/interviews/live/${n}/state`)},async submitAnswer(n,e,t=null){return tt(`/interviews/live/${n}/answer`,{method:"POST",body:JSON.stringify({answer_text:e,response_time_seconds:t})})},async skip(n){return tt(`/interviews/live/${n}/skip`,{method:"POST"})},async pause(n){return tt(`/interviews/live/${n}/pause`,{method:"POST"})},async resume(n){return tt(`/interviews/live/${n}/resume`,{method:"POST"})},async end(n){return tt(`/interviews/live/${n}/end`,{method:"POST"})},async confirmConsent(n){return tt(`/interviews/live/${n}/consent`,{method:"POST"})},async getStatus(){return tt("/interviews/live/status")}},hD={async quick(n,e,t,i,r=null){return tt("/evaluations/quick",{method:"POST",body:JSON.stringify({session_id:n,question_id:e,question_text:t,answer_text:i,question_type:r})})},async deep(n,e,t,i,r={}){return tt("/evaluations/deep",{method:"POST",body:JSON.stringify({session_id:n,question_id:e,question_text:t,answer_text:i,question_type:r.questionType,resume_context:r.resumeContext,expected_topics:r.expectedTopics})})},async batch(n){return tt("/evaluations/batch",{method:"POST",body:JSON.stringify({session_id:n})})},async getSession(n){return tt(`/evaluations/${n}`)},async getSingle(n){return tt(`/evaluations/single/${n}`)},async finalize(n){return tt(`/evaluations/finalize/${n}`,{method:"POST"})},async getStatus(){return tt("/evaluations/status")}},vM={async generate(n,e={}){return tt(`/reports/generate/${n}`,{method:"POST",body:JSON.stringify({include_behavioral:e.includeBehavioral??!0,include_skills:e.includeSkills??!0})})},async get(n){return tt(`/reports/${n}`)},async list(n=10){return tt(`/reports/?limit=${n}`)}},yM={async generate(n,e={}){return tt(`/roadmap/generate/${n}`,{method:"POST",body:JSON.stringify({target_role:e.targetRole,current_level:e.currentLevel,target_level:e.targetLevel,focus_areas:e.focusAreas})})},async generateStandalone(n={}){return tt("/roadmap/generate",{method:"POST",body:JSON.stringify({target_role:n.targetRole||"Software Developer",current_level:n.currentLevel,target_level:n.targetLevel,focus_areas:n.focusAreas})})},async get(n){return tt(`/roadmap/${n}`)},async list(n=10){return tt(`/roadmap/?limit=${n}`)}},fD={async getAll(){return tt("/personalities/")},async getById(n){return tt(`/personalities/${n}`)}},pD={async getDashboard(n=30){return tt(`/analytics/dashboard?days=${n}`)},async getOverview(n=30){return tt(`/analytics/overview?days=${n}`)},async getSkills(){return tt("/analytics/skills")},async getProgress(n=90,e="week"){return tt(`/analytics/progress?days=${n}&interval=${e}`)},async getQuestionTypes(){return tt("/analytics/question-types")},async getRecent(n=5){return tt(`/analytics/recent?limit=${n}`)}},mD={async getProfile(){return tt("/users/profile")},async getInterviewHistory(n=20,e=0){return tt(`/users/history?limit=${n}&offset=${e}`)},async getUserStats(){try{const n=await tt("/analytics/overview?days=90");return{success:!0,stats:{total_interviews:n.total_interviews||0,completed_interviews:n.completed_interviews||0,average_score:n.average_score||0,total_resumes:0}}}catch{return{success:!1,stats:{total_interviews:0,completed_interviews:0,average_score:0,total_resumes:0}}}},async updateProfile(n){const e=new URLSearchParams;return n.name&&e.append("name",n.name),tt(`/users/profile?${e.toString()}`,{method:"PUT"})}},gD=B.createContext(null);function vD({children:n}){const[e,t]=B.useState(null),[i,r]=B.useState(!0),[s,a]=B.useState(!1);B.useEffect(()=>{let g=!0;return(async()=>{try{if(!Mh()){console.log("[Auth] No token found, user not authenticated"),g&&r(!1);return}const _=ns();_&&g&&(t(_),a(!0));try{const v=await ys.verifyToken();if(!g)return;if(v)try{const S=await ys.getCurrentUser();g&&(t(S),bd(S),a(!0))}catch{console.warn("[Auth] Could not fetch fresh user data, using stored"),_&&g&&a(!0)}else console.log("[Auth] Token invalid, clearing auth state"),As(),g&&(t(null),a(!1))}catch(v){console.error("[Auth] Cannot connect to backend:",v.message),!_&&g&&(As(),t(null),a(!1))}}catch(M){console.error("[Auth] Initialization error:",M),As(),g&&(t(null),a(!1))}finally{g&&r(!1)}})(),()=>{g=!1}},[]);const o=B.useCallback(async(g,y)=>{const M=await ys.login(g,y);return M.success&&M.user&&(t(M.user),a(!0)),M},[]),l=B.useCallback(async(g,y,M)=>{const _=await ys.signup(g,y,M);return _.success&&_.user&&(t(_.user),a(!0)),_},[]),h=B.useCallback(async()=>{try{await ys.logout()}catch(g){console.warn("Logout API error:",g)}finally{uD(),t(null),a(!1)}},[]),f=B.useCallback(g=>{t(g),bd(g)},[]),p=B.useCallback(async()=>{try{const g=await ys.getCurrentUser();return t(g),bd(g),g}catch(g){throw console.error("Failed to refresh user:",g),g}},[]),m={user:e,loading:i,isAuthenticated:s,login:o,signup:l,logout:h,updateUser:f,refreshUser:p};return c.jsx(gD.Provider,{value:m,children:n})}const sR=B.createContext(null),xM="ai_interviewer_theme",aR=()=>{const n=B.useContext(sR);if(!n)throw new Error("useTheme must be used within a ThemeProvider");return n};function yD({children:n}){const[e,t]=B.useState(()=>{const o=localStorage.getItem(xM);return o||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});B.useEffect(()=>{const o=document.documentElement;o.setAttribute("data-theme",e),localStorage.setItem(xM,e),e==="dark"?(o.classList.add("dark"),o.classList.remove("light")):(o.classList.add("light"),o.classList.remove("dark"))},[e]);const a={theme:e,isDark:e==="dark",toggleTheme:()=>{t(o=>o==="dark"?"light":"dark")},setTheme:o=>{(o==="dark"||o==="light")&&t(o)}};return c.jsx(sR.Provider,{value:a,children:n})}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),We=(n,e)=>{const t=B.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,...h},f)=>B.createElement("svg",{ref:f,...xD,width:r,height:r,stroke:i,strokeWidth:a?Number(s)*24/Number(r):s,className:["lucide",`lucide-${_D(n)}`,o].join(" "),...h},[...e.map(([p,m])=>B.createElement(p,m)),...Array.isArray(l)?l:[l]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=We("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=We("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=We("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=We("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=We("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=We("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=We("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=We("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=We("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=We("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=We("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=We("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=We("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=We("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=We("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=We("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=We("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=We("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=We("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=We("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=We("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=We("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=We("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=We("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=We("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=We("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=We("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=We("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=We("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=We("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=We("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=We("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=We("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=We("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=We("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=We("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=We("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=We("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=We("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=We("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=We("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=We("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=We("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=We("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=We("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=We("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=We("ScanSearch",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m16 16-1.9-1.9",key:"1dq9hf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=We("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=We("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=We("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=We("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=We("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=We("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=We("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=We("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=We("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=We("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=We("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=We("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=We("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=We("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=We("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=We("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=We("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=We("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=We("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=We("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function zD(){var A;const n=di(),e=mo(),{isDark:t,toggleTheme:i}=aR(),r=((A=e.state)==null?void 0:A.mode)!=="signup",[s,a]=B.useState(r),[o,l]=B.useState({name:"",email:"",password:""}),[h,f]=B.useState(!1),[p,m]=B.useState(""),[g,y]=B.useState("");B.useEffect(()=>{var E,N;if(rR()){const T=((N=(E=e.state)==null?void 0:E.from)==null?void 0:N.pathname)||"/dashboard";n(T,{replace:!0})}},[n,e]);const M=E=>{const{name:N,value:T}=E.target;l(P=>({...P,[N]:T})),m(""),y("")},_=()=>{if(!o.email.trim())return m("Email is required"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email))return m("Please enter a valid email address"),!1;if(!o.password)return m("Password is required"),!1;if(o.password.length<8)return m("Password must be at least 8 characters"),!1;if(!s){if(!o.name.trim())return m("Name is required"),!1;if(o.name.trim().length<2)return m("Name must be at least 2 characters"),!1;if(!/[a-zA-Z]/.test(o.password))return m("Password must contain at least one letter"),!1;if(!/\d/.test(o.password))return m("Password must contain at least one number"),!1}return!0},v=async E=>{var N,T;if(E.preventDefault(),!!_()){f(!0),m(""),y("");try{s?await ys.login(o.email,o.password):await ys.signup(o.name,o.email,o.password);const P=((T=(N=e.state)==null?void 0:N.from)==null?void 0:T.pathname)||"/dashboard";n(P,{replace:!0})}catch(P){const L=P.message||"Authentication failed. Please try again.";m(L)}finally{f(!1)}}},S=()=>{a(!s),m(""),y(""),l({name:"",email:"",password:""})};return c.jsxs("div",{className:"login-container",children:[c.jsx("button",{className:"theme-toggle",onClick:i,style:{position:"absolute",top:"24px",right:"24px",zIndex:10},"aria-label":t?"Switch to light mode":"Switch to dark mode",children:t?c.jsx(Sx,{size:20}):c.jsx(xx,{size:20})}),c.jsxs("div",{className:"login-card",children:[c.jsxs("div",{className:"login-header",children:[c.jsx("div",{className:"login-logo",children:""}),c.jsx("h1",{children:"AI Interviewer"}),c.jsx("p",{children:"Master your interview skills with AI-powered practice"})]}),c.jsxs("div",{className:"login-tabs",children:[c.jsx("button",{type:"button",className:`tab ${s?"active":""}`,onClick:()=>!s&&S(),disabled:h,children:"Sign In"}),c.jsx("button",{type:"button",className:`tab ${s?"":"active"}`,onClick:()=>s&&S(),disabled:h,children:"Sign Up"})]}),p&&c.jsxs("div",{className:"error-message",role:"alert",children:[c.jsx(ni,{size:16}),c.jsx("span",{children:p})]}),g&&c.jsxs("div",{className:"success-message",role:"status",children:[c.jsx(Xn,{size:16}),c.jsx("span",{children:g})]}),c.jsxs("form",{onSubmit:v,className:"login-form",children:[!s&&c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{htmlFor:"name",children:[c.jsx(ou,{size:14,style:{marginRight:"6px",opacity:.7}}),"Full Name"]}),c.jsx("input",{type:"text",id:"name",name:"name",value:o.name,onChange:M,placeholder:"Enter your full name",autoComplete:"name",disabled:h,required:!s})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{htmlFor:"email",children:[c.jsx(dR,{size:14,style:{marginRight:"6px",opacity:.7}}),"Email Address"]}),c.jsx("input",{type:"email",id:"email",name:"email",value:o.email,onChange:M,placeholder:"you@example.com",autoComplete:"email",disabled:h,required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{htmlFor:"password",children:[c.jsx(uR,{size:14,style:{marginRight:"6px",opacity:.7}}),"Password"]}),c.jsx("input",{type:"password",id:"password",name:"password",value:o.password,onChange:M,placeholder:s?"Enter your password":"Create a strong password",autoComplete:s?"current-password":"new-password",disabled:h,required:!0,minLength:8}),!s&&c.jsx("small",{className:"form-hint",children:"Min 8 characters with at least 1 letter and 1 number"})]}),c.jsx("button",{type:"submit",className:"btn btn-primary btn-lg submit-button",disabled:h,children:h?c.jsxs(c.Fragment,{children:[c.jsx(Lr,{size:18,className:"spinner-small",style:{animation:"spin 1s linear infinite"}}),c.jsx("span",{children:s?"Signing in...":"Creating account..."})]}):s?"Sign In":"Create Account"})]}),c.jsxs("p",{className:"login-footer",children:[s?"Don't have an account? ":"Already have an account? ",c.jsx("button",{type:"button",className:"link-button",onClick:S,disabled:h,children:s?"Sign up free":"Sign in"})]}),c.jsxs("div",{className:"login-security",children:[c.jsx(pR,{size:14}),c.jsx("span",{children:"Your data is encrypted and secure"})]})]})]})}function GD(){const n=di();return B.useEffect(()=>{n("/login",{state:{mode:"signup"},replace:!0})},[n]),c.jsx("div",{className:"loading-container",children:c.jsxs("div",{className:"loading-content",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{className:"loading-text",children:"Redirecting to signup..."})]})})}function Yn({user:n,minimal:e=!1}){var M,_;const t=di(),i=mo(),{isDark:r,toggleTheme:s}=aR(),[a,o]=B.useState(!1),[l,h]=B.useState(!1),f=n||ns(),p=v=>i.pathname===v,m=async()=>{h(!0);try{await ys.logout()}catch(v){console.warn("Logout API error:",v.message)}finally{t("/login",{replace:!0})}},g=()=>o(!1),y=v=>{g(),t(v)};return c.jsxs("nav",{className:"navbar",children:[c.jsxs("div",{className:"navbar-brand",onClick:()=>t("/dashboard"),role:"button",tabIndex:0,onKeyPress:v=>v.key==="Enter"&&t("/dashboard"),children:[c.jsx("span",{className:"logo-icon",children:c.jsx(Nr,{size:24,className:"logo-sparkle"})}),c.jsx("span",{className:"brand-text",children:"AI Interviewer"})]}),!e&&c.jsxs("div",{className:"navbar-menu",children:[c.jsxs("button",{className:`nav-link ${p("/dashboard")?"active":""}`,onClick:()=>t("/dashboard"),children:[c.jsx(SM,{size:18}),c.jsx("span",{children:"Dashboard"})]}),c.jsxs("button",{className:`nav-link ${p("/interview-prep")||p("/select-domain")?"active":""}`,onClick:()=>t("/select-domain"),children:[c.jsx(gS,{size:18}),c.jsx("span",{children:"Interview"})]}),c.jsxs("button",{className:`nav-link ${p("/analytics")?"active":""}`,onClick:()=>t("/analytics"),children:[c.jsx(mx,{size:18}),c.jsx("span",{children:"Analytics"})]}),c.jsx("button",{className:"theme-toggle",onClick:s,"aria-label":r?"Switch to light mode":"Switch to dark mode",title:r?"Light Mode":"Dark Mode",children:c.jsx("span",{className:"theme-icon",children:r?c.jsx(Sx,{size:20}):c.jsx(xx,{size:20})})}),c.jsxs("div",{className:"user-menu",children:[c.jsxs("button",{className:"user-button",onClick:()=>o(!a),"aria-expanded":a,"aria-haspopup":"true","aria-label":"User menu",children:[c.jsx("span",{className:"user-avatar",children:((_=(M=f==null?void 0:f.name)==null?void 0:M.charAt(0))==null?void 0:_.toUpperCase())||c.jsx(ou,{size:18})}),c.jsx("span",{className:"user-name",children:(f==null?void 0:f.name)||"User"}),c.jsx(Ko,{size:14,className:`chevron ${a?"open":""}`})]}),a&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"menu-backdrop",onClick:g,"aria-hidden":"true"}),c.jsxs("div",{className:"dropdown-menu",role:"menu",children:[c.jsxs("div",{className:"dropdown-header",children:[c.jsx("strong",{children:(f==null?void 0:f.name)||"User"}),c.jsx("small",{children:(f==null?void 0:f.email)||""})]}),c.jsx("hr",{}),c.jsxs("button",{onClick:()=>y("/profile"),role:"menuitem",children:[c.jsx(ou,{size:16})," My Profile"]}),c.jsxs("button",{onClick:()=>y("/dashboard"),role:"menuitem",children:[c.jsx(SM,{size:16})," Dashboard"]}),c.jsxs("button",{onClick:()=>y("/analytics"),role:"menuitem",children:[c.jsx(mx,{size:16})," Analytics"]}),c.jsxs("button",{onClick:()=>y("/resumes"),role:"menuitem",children:[c.jsx(br,{size:16})," Resumes"]}),c.jsx("hr",{}),c.jsxs("button",{onClick:m,disabled:l,className:"logout-button",role:"menuitem",children:[c.jsx(RD,{size:16}),l?"Logging out...":"Logout"]})]})]})]})]}),e&&c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[c.jsx("button",{className:"theme-toggle",onClick:s,"aria-label":r?"Switch to light mode":"Switch to dark mode",children:r?c.jsx(Sx,{size:18}):c.jsx(xx,{size:18})}),c.jsx("button",{className:"btn btn-secondary btn-sm",onClick:m,disabled:l,children:l?"Exiting...":"Exit"})]})]})}const yS="ai_interviewer_interview_history",yR="ai_interviewer_analytics_cache";function xS(n){var e,t,i;return{interviewId:n.interviewId||n.session_id||n.id,date:n.date||n.completed_at||new Date().toISOString(),score:n.score||((e=n.readiness)==null?void 0:e.score)||0,grade:n.grade||((t=n.readiness)==null?void 0:t.grade)||"C",targetRole:n.targetRole||n.target_role||"Interview",status:"completed",strengths:n.strengths||[],weaknesses:n.weaknesses||[],improvementTips:n.improvementTips||((i=n.improvements)==null?void 0:i.areas)||[],pdfUrl:n.pdfUrl||null,summary:n.summary||n.executive_summary||"",statistics:n.statistics||{total_questions:n.total_questions||0,answered:n.answered||0,skipped:n.skipped||0,duration_minutes:n.duration_minutes||0},skills:n.skills||{},createdAt:new Date().toISOString()}}function so(){try{const n=localStorage.getItem(yS);return n?JSON.parse(n):[]}catch(n){return console.warn("[InterviewStorage] Failed to read from localStorage:",n),[]}}function xR(n){try{const e=so(),t=e.findIndex(r=>r.interviewId===n.interviewId);t>=0?e[t]={...e[t],...n,updatedAt:new Date().toISOString()}:e.unshift(n);const i=e.slice(0,100);return localStorage.setItem(yS,JSON.stringify(i)),_R(i),console.log("[InterviewStorage] Saved interview:",n.interviewId),!0}catch(e){return console.error("[InterviewStorage] Failed to save:",e),!1}}function HD(n){return so().find(t=>t.interviewId===n)||null}function _R(n){try{const e=n.filter(r=>r.status==="completed"),t=e.filter(r=>r.score>0).map(r=>r.score),i={total_interviews:n.length,completed_interviews:e.length,average_score:t.length>0?Math.round(t.reduce((r,s)=>r+s,0)/t.length):null,best_score:t.length>0?Math.max(...t):null,last_interview_at:n.length>0?n[0].date:null,updatedAt:new Date().toISOString()};localStorage.setItem(yR,JSON.stringify(i))}catch(e){console.warn("[InterviewStorage] Failed to update analytics cache:",e)}}function th(){try{const i=localStorage.getItem(yR);if(i)return JSON.parse(i)}catch(i){console.warn("[InterviewStorage] Failed to read analytics cache:",i)}const n=so(),e=n.filter(i=>i.status==="completed"),t=e.filter(i=>i.score>0).map(i=>i.score);return{total_interviews:n.length,completed_interviews:e.length,average_score:t.length>0?Math.round(t.reduce((i,r)=>i+r,0)/t.length):null,best_score:t.length>0?Math.max(...t):null,last_interview_at:n.length>0?n[0].date:null}}function VD(n,e={}){if(!HD(n)){const i=xS({interviewId:n,targetRole:e.targetRole||"Interview",date:e.date||new Date().toISOString(),score:0});xR(i)}}function wM(n,e){var i,r,s;console.log("[InterviewStorage] Updating with report data:",n);const t=xS({interviewId:n,score:((i=e.readiness)==null?void 0:i.score)||e.score,grade:((r=e.readiness)==null?void 0:r.grade)||e.grade,targetRole:e.target_role||e.targetRole,date:e.generated_at||e.date||new Date().toISOString(),strengths:e.strengths||[],weaknesses:e.weaknesses||[],improvementTips:((s=e.improvements)==null?void 0:s.areas)||[],summary:e.executive_summary||"",statistics:e.statistics||{},skills:e.skills||{}});return xR(t),t}function Ax(n=10){return so().slice(0,n).map(t=>({id:t.interviewId,job_role:t.targetRole,score:t.score,status:t.status,created_at:t.date,grade:t.grade}))}function SR(n){if(!n||!Array.isArray(n))return;const e=so(),t=new Map;e.forEach(r=>{t.set(r.interviewId,r)}),n.forEach(r=>{const s=r.id||r.session_id||r.interviewId,a=t.get(s),o=xS({interviewId:s,score:r.score||(a==null?void 0:a.score),grade:r.grade||(a==null?void 0:a.grade),targetRole:r.job_role||r.target_role||(a==null?void 0:a.targetRole),date:r.created_at||r.completed_at||(a==null?void 0:a.date),status:r.status||"completed"});t.set(s,{...a,...o})});const i=Array.from(t.values()).sort((r,s)=>new Date(s.date)-new Date(r.date));localStorage.setItem(yS,JSON.stringify(i.slice(0,100))),_R(i)}function MM(n=[]){const e=n.filter(a=>a.status==="completed"||a.status==="completing"),t=e.filter(a=>a.score!=null&&a.score>0).map(a=>Number(a.score));let i="stable";if(t.length>=6){const a=t.slice(0,3).reduce((l,h)=>l+h,0)/3,o=t.slice(3,6).reduce((l,h)=>l+h,0)/3;a>o+5?i="improving":a<o-5&&(i="declining")}const r=n.length>0?Math.round(e.length/n.length*100):0,s=e.reduce((a,o)=>a+(o.total_questions||o.questions_answered||0),0);return{total_interviews:n.length,completed_interviews:e.length,average_score:t.length>0?Math.round(t.reduce((a,o)=>a+o,0)/t.length):null,best_score:t.length>0?Math.max(...t):null,last_interview_at:n.length>0?n[0].created_at:null,trend:i,completion_rate:r,total_questions_answered:s}}async function WD(){let n=th(),e=[],t=[];try{const[i,r,s]=await Promise.allSettled([Hm.getAnalytics(),mD.getInterviewHistory(50,0),Sl.getAll()]);i.status==="fulfilled"&&i.value.success&&(n=i.value.analytics||n),r.status==="fulfilled"&&r.value.success?(e=r.value.interviews||[],SR(e)):e=so().map(EM),s.status==="fulfilled"&&s.value.success&&(t=s.value.resumes||[]),!n.total_interviews&&e.length>0&&(n=MM(e))}catch(i){console.error("[UserDataService] Failed to load data:",i),e=so().map(EM),n=MM(e)}return{analytics:n,interviews:e,resumes:t}}async function XD(){var t;let n=th(),e=Ax(5);try{const i=await Hm.getAnalytics();i.success&&i.analytics&&(n=i.analytics);const r=await Hm.getHistory(5,0);r.success&&((t=r.interviews)==null?void 0:t.length)>0&&(e=r.interviews,SR(r.interviews))}catch{console.warn("[UserDataService] Dashboard API failed, using cache")}return{analytics:n,recentInterviews:e}}async function JD(){return WD()}function EM(n){var e,t;return{id:n.id||n.interviewId||n.session_id,target_role:n.target_role||n.targetRole||n.job_role||"Interview",score:n.score??null,status:n.status||"completed",created_at:n.created_at||n.date||n.createdAt,session_type:n.session_type||"mixed",difficulty:n.difficulty||n.difficulty_level||"medium",duration:n.duration||n.duration_minutes||0,strengths:n.strengths||[],weaknesses:n.weaknesses||[],has_recording:n.has_recording||!1,total_questions:n.total_questions||((e=n.statistics)==null?void 0:e.total_questions)||0,questions_answered:n.questions_answered||((t=n.statistics)==null?void 0:t.answered)||0}}function CM(n,e=0){return{total_interviews:(n==null?void 0:n.total_interviews)||0,completed_interviews:(n==null?void 0:n.completed_interviews)||0,average_score:(n==null?void 0:n.average_score)||0,total_resumes:e,best_score:(n==null?void 0:n.best_score)||0,completion_rate:(n==null?void 0:n.completion_rate)||0,trend:(n==null?void 0:n.trend)||"stable"}}function YD(){var g;const n=di(),[e,t]=B.useState(!0),[i,r]=B.useState(null),[s,a]=B.useState({total_interviews:0,completed_interviews:0,average_score:null,best_score:null,last_interview_at:null}),[o,l]=B.useState([]),[h,f]=B.useState(null);B.useEffect(()=>{(async()=>{try{const M=ns();M&&r(M);try{const _=await Hm.getProfile();_.success&&_.user&&r(_.user)}catch{console.warn("Profile load failed, using stored user")}try{const _=await XD();a(_.analytics),l(_.recentInterviews)}catch{console.warn("Dashboard data load failed, using cache"),a(th()),l(Ax(5))}}catch(M){f("Failed to load data. Please try again."),console.error("Dashboard load error:",M),a(th()),l(Ax(5))}finally{t(!1)}})()},[]);const p=()=>n("/select-domain"),m=s.average_score?Math.min(5,Math.round(s.average_score/100*5*10)/10):0;return e?c.jsx("div",{className:"cosmic-loading",children:c.jsxs("div",{className:"cosmic-loading-content",children:[c.jsxs("div",{className:"cosmic-spinner",children:[c.jsx("div",{className:"spinner-ring"}),c.jsx("div",{className:"spinner-ring"}),c.jsx("div",{className:"spinner-ring"})]}),c.jsx("p",{children:"Initializing AI Interviewer..."})]})}):c.jsxs("div",{className:"cosmic-dashboard",children:[c.jsxs("div",{className:"cosmic-bg",children:[c.jsx("div",{className:"stars"}),c.jsx("div",{className:"stars2"}),c.jsx("div",{className:"stars3"}),c.jsx("div",{className:"cosmic-gradient"})]}),c.jsx("div",{className:"ai-robot-bg",children:c.jsx("img",{src:"/ai-robot.png",alt:"",className:"ai-robot-bg-image","aria-hidden":"true"})}),c.jsx(Yn,{user:i}),c.jsxs("main",{className:"cosmic-main",children:[h&&c.jsxs("div",{className:"cosmic-error",children:[c.jsx("span",{children:h}),c.jsx("button",{onClick:()=>f(null),children:""})]}),c.jsxs("section",{className:"cosmic-hero",children:[c.jsxs("div",{className:"hero-title-badge",children:[c.jsx(Nr,{size:22}),c.jsx("span",{children:"AI Interviewer"})]}),c.jsxs("button",{className:"cosmic-cta",onClick:p,children:[c.jsx("div",{className:"cta-glow"}),c.jsx(fR,{size:26}),c.jsx("span",{children:"Start Interview"}),c.jsx(ea,{size:22})]}),c.jsxs("div",{className:"quick-action-row",children:[c.jsxs("button",{className:"quick-action-btn",onClick:()=>n("/resumes"),children:[c.jsx(br,{size:20}),c.jsx("span",{children:"Upload Resume"})]}),c.jsxs("button",{className:"quick-action-btn",onClick:()=>n("/analytics"),children:[c.jsx(ul,{size:20}),c.jsx("span",{children:"View Analytics"})]}),c.jsxs("button",{className:"quick-action-btn",onClick:()=>n("/ats"),children:[c.jsx(LD,{size:20}),c.jsx("span",{children:"ATS Analyser"})]})]})]}),c.jsxs("section",{className:"cosmic-stats-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h2",{children:"Interview Overview"}),c.jsx("span",{className:"section-subtitle",children:"Your Performance Stats"})]}),c.jsxs("div",{className:"cosmic-stats-grid",children:[c.jsxs("div",{className:"cosmic-stat-card",children:[c.jsx("div",{className:"stat-icon",children:c.jsx(vS,{size:20})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("span",{className:"stat-label",children:"Total Sessions"}),c.jsx("span",{className:"stat-value",children:s.total_interviews})]})]}),c.jsxs("div",{className:"cosmic-stat-card",children:[c.jsx("div",{className:"stat-icon completed",children:c.jsx(cl,{size:20})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("span",{className:"stat-label",children:"Completed"}),c.jsx("span",{className:"stat-value",children:s.completed_interviews})]}),c.jsx("div",{className:"stat-visual",children:c.jsxs("div",{className:"mini-bars",children:[c.jsx("div",{className:"mini-bar",style:{height:"40%"}}),c.jsx("div",{className:"mini-bar",style:{height:"70%"}}),c.jsx("div",{className:"mini-bar",style:{height:"55%"}}),c.jsx("div",{className:"mini-bar",style:{height:"85%"}}),c.jsx("div",{className:"mini-bar",style:{height:"60%"}})]})})]}),c.jsxs("div",{className:"cosmic-stat-card rating",children:[c.jsx("div",{className:"stat-icon rating",children:c.jsx(_x,{size:20})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("span",{className:"stat-label",children:"Overall Rating"}),c.jsxs("div",{className:"rating-display",children:[c.jsx("span",{className:"stat-value",children:m.toFixed(1)}),c.jsx("div",{className:"star-rating",children:[1,2,3,4,5].map(y=>c.jsx(_x,{size:12,className:y<=Math.round(m)?"filled":""},y))})]})]})]}),c.jsxs("button",{className:"cosmic-stat-card action",onClick:()=>n("/analytics"),children:[c.jsx(eh,{size:20}),c.jsx("span",{children:"Manage"}),c.jsx(ea,{size:16})]})]})]}),c.jsxs("section",{className:"cosmic-recent-section",children:[c.jsx("div",{className:"section-header",children:c.jsx("h2",{children:"Recent Mock Interviews"})}),s.total_interviews===0?c.jsxs("div",{className:"cosmic-empty-state",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsx("h3",{children:"No interviews yet"}),c.jsx("p",{children:"Start your first AI-powered mock interview and track your progress"}),c.jsxs("button",{className:"cosmic-cta small",onClick:p,children:[c.jsx(Pr,{size:18}),c.jsx("span",{children:"Start Your First Interview"})]})]}):o.length>0?c.jsx("div",{className:"cosmic-recent-list",children:o.map(y=>c.jsxs("div",{className:"cosmic-recent-item",onClick:()=>n(`/report/${y.id}`),children:[c.jsx("div",{className:"recent-icon",children:c.jsx(br,{size:18})}),c.jsxs("div",{className:"recent-info",children:[c.jsx("strong",{children:y.job_role||"Mock Interview"}),c.jsxs("span",{className:"recent-date",children:[c.jsx($d,{size:12}),new Date(y.created_at).toLocaleDateString()]})]}),c.jsxs("div",{className:"recent-status",children:[c.jsx("span",{className:`status-badge ${y.score?"completed":"progress"}`,children:y.score?`${Math.round(y.score)}%`:"In Progress"}),c.jsx(ea,{size:16})]})]},y.id))}):c.jsx("p",{className:"cosmic-muted",children:"Loading recent interviews..."})]}),c.jsxs("div",{className:"cosmic-user-card",children:[c.jsx("div",{className:"user-avatar",children:((g=i==null?void 0:i.name)==null?void 0:g.charAt(0))||"U"}),c.jsxs("div",{className:"user-info",children:[c.jsx("strong",{children:(i==null?void 0:i.name)||"User"}),c.jsx("span",{children:(i==null?void 0:i.target_role)||"AI Interviewer"})]})]})]})]})}const KD=[{id:"computer_science",name:"Computer Science",shortName:"CSE",icon:wD,description:"Software Engineering, Data Structures, Algorithms, System Design",color:"#8b5cf6",gradient:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",available:!0,topics:["DSA","System Design","OOP","DBMS","OS","Networking"]},{id:"electronics",name:"Electronics & Communication",shortName:"ECE",icon:MD,description:"Digital Electronics, Signal Processing, VLSI, Communication Systems",color:"#06b6d4",gradient:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",available:!1,topics:["Digital Electronics","Analog Circuits","Signals","VLSI"]},{id:"electrical",name:"Electrical Engineering",shortName:"EEE",icon:vS,description:"Power Systems, Control Systems, Electrical Machines, Power Electronics",color:"#f59e0b",gradient:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",available:!1,topics:["Power Systems","Control Systems","Machines","Electronics"]},{id:"civil",name:"Civil Engineering",shortName:"CE",icon:lR,description:"Structural, Geotechnical, Transportation, Environmental Engineering",color:"#10b981",gradient:"linear-gradient(135deg, #10b981 0%, #059669 100%)",available:!1,topics:["Structures","Geotechnical","Surveying","Construction"]},{id:"mechanical",name:"Mechanical Engineering",shortName:"ME",icon:$s,description:"Thermodynamics, Mechanics, Manufacturing, Design Engineering",color:"#ef4444",gradient:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",available:!1,topics:["Thermodynamics","Fluid Mechanics","Manufacturing","Design"]},{id:"architecture",name:"Architecture",shortName:"ARCH",icon:ID,description:"Design, Urban Planning, Building Technology, Sustainability",color:"#ec4899",gradient:"linear-gradient(135deg, #ec4899 0%, #db2777 100%)",available:!1,topics:["Design","Planning","Technology","Theory"]}];function qD(){const n=di(),e=ns(),[t,i]=B.useState(null),[r,s]=B.useState(!1),a=l=>{l.available&&(i(l.id),s(!0),setTimeout(()=>{n("/interview-prep",{state:{domain:l.id,domainName:l.name,domainTopics:l.topics}})},400))},o=()=>{n("/dashboard")};return c.jsxs("div",{className:"domain-selection-container",children:[c.jsx(Yn,{user:e}),c.jsxs("main",{className:"domain-selection-main",children:[c.jsxs("button",{className:"back-button",onClick:o,children:[c.jsx(SD,{size:20}),c.jsx("span",{children:"Back to Dashboard"})]}),c.jsxs("section",{className:"domain-header",children:[c.jsxs("div",{className:"header-badge",children:[c.jsx(TD,{size:18}),c.jsx("span",{children:"Interview Domain"})]}),c.jsxs("h1",{children:["Choose Your Field",c.jsx(Nr,{size:32,className:"header-sparkle"})]}),c.jsx("p",{className:"header-subtitle",children:"Select your domain to get tailored interview questions based on your expertise"})]}),c.jsx("section",{className:"domain-grid",children:KD.map(l=>{const h=l.icon,f=t===l.id,p=!l.available;return c.jsxs("button",{className:`domain-card ${f?"selected":""} ${p?"locked":""} ${r&&f?"animating":""}`,onClick:()=>a(l),disabled:p,style:{"--domain-color":l.color,"--domain-gradient":l.gradient},children:[c.jsx("div",{className:"card-glow"}),p&&c.jsxs("div",{className:"coming-soon-badge",children:[c.jsx(uR,{size:12}),c.jsx("span",{children:"Coming Soon"})]}),c.jsxs("div",{className:"domain-icon-wrapper",children:[c.jsx("div",{className:"domain-icon-bg"}),c.jsx(h,{size:36,className:"domain-icon"})]}),c.jsxs("div",{className:"domain-content",children:[c.jsxs("div",{className:"domain-name-row",children:[c.jsx("h3",{className:"domain-name",children:l.name}),c.jsx("span",{className:"domain-short",children:l.shortName})]}),c.jsx("p",{className:"domain-description",children:l.description}),c.jsxs("div",{className:"domain-topics",children:[l.topics.slice(0,3).map(m=>c.jsx("span",{className:"topic-tag",children:m},m)),l.topics.length>3&&c.jsxs("span",{className:"topic-more",children:["+",l.topics.length-3]})]})]}),!p&&c.jsxs("div",{className:"domain-action",children:[c.jsx("span",{children:"Select"}),c.jsx(ea,{size:18})]})]},l.id)})}),c.jsx("section",{className:"domain-footer",children:c.jsxs("div",{className:"footer-note",children:[c.jsx(fR,{size:18}),c.jsx("p",{children:"More domains coming soon! We're building specialized interview experiences for every field."})]})})]})]})}const QD="modulepreload",ZD=function(n){return"/"+n},TM={},bM=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=ZD(l),l in TM)return;TM[l]=!0;const h=l.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":QD,h||(p.as="script"),p.crossOrigin="",p.href=l,o&&p.setAttribute("nonce",o),document.head.appendChild(p),h)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Eh="160",$D={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ek={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},AR=0,wx=1,wR=2,tk=3,MR=0,gg=1,Rd=2,Wr=3,Cs=0,ki=1,Kr=2,nk=2,ta=0,dl=1,Mx=2,Ex=3,Cx=4,ER=5,za=100,CR=101,TR=102,Tx=103,bx=104,bR=200,RR=201,NR=202,PR=203,Vm=204,Wm=205,IR=206,BR=207,LR=208,DR=209,kR=210,FR=211,UR=212,OR=213,jR=214,zR=0,GR=1,HR=2,nh=3,VR=4,WR=5,XR=6,JR=7,Ch=0,YR=1,KR=2,ws=0,qR=1,QR=2,ZR=3,_S=4,$R=5,e2=6,Rx="attached",t2="detached",vg=300,oa=301,ao=302,ih=303,rh=304,_u=306,oo=1e3,oi=1001,lu=1002,Mn=1003,sh=1004,ik=1004,qc=1005,rk=1005,mn=1006,yg=1007,sk=1007,Ts=1008,ak=1008,Ms=1009,n2=1010,i2=1011,xg=1012,SS=1013,Ks=1014,qr=1015,cu=1016,AS=1017,wS=1018,$a=1020,r2=1021,Li=1023,s2=1024,a2=1025,eo=1026,Al=1027,o2=1028,MS=1029,l2=1030,ES=1031,CS=1033,dm=33776,hm=33777,fm=33778,pm=33779,Nx=35840,Px=35841,Ix=35842,Bx=35843,TS=36196,Lx=37492,Dx=37496,kx=37808,Fx=37809,Ux=37810,Ox=37811,jx=37812,zx=37813,Gx=37814,Hx=37815,Vx=37816,Wx=37817,Xx=37818,Jx=37819,Yx=37820,Kx=37821,mm=36492,qx=36494,Qx=36495,c2=36283,Zx=36284,$x=36285,e_=36286,u2=2200,d2=2201,h2=2202,uu=2300,wl=2301,gm=2302,el=2400,tl=2401,ah=2402,_g=2500,bS=2501,f2=0,RS=1,Xm=2,NS=3e3,to=3001,p2=3200,m2=3201,go=0,g2=1,ar="",Vn="srgb",bs="srgb-linear",Sg="display-p3",Th="display-p3-linear",oh="linear",en="srgb",lh="rec709",ch="p3",ok=0,Jo=7680,lk=7681,ck=7682,uk=7683,dk=34055,hk=34056,fk=5386,pk=512,mk=513,gk=514,vk=515,yk=516,xk=517,_k=518,t_=519,v2=512,y2=513,x2=514,PS=515,_2=516,S2=517,A2=518,w2=519,uh=35044,Sk=35048,Ak=35040,wk=35045,Mk=35049,Ek=35041,Ck=35046,Tk=35050,bk=35042,Rk="100",n_="300 es",Jm=1035,Qr=2e3,du=2001;class ua{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const xi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let RM=1234567;const hl=Math.PI/180,hu=180/Math.PI;function ur(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(xi[n&255]+xi[n>>8&255]+xi[n>>16&255]+xi[n>>24&255]+"-"+xi[e&255]+xi[e>>8&255]+"-"+xi[e>>16&15|64]+xi[e>>24&255]+"-"+xi[t&63|128]+xi[t>>8&255]+"-"+xi[t>>16&255]+xi[t>>24&255]+xi[i&255]+xi[i>>8&255]+xi[i>>16&255]+xi[i>>24&255]).toLowerCase()}function En(n,e,t){return Math.max(e,Math.min(t,n))}function IS(n,e){return(n%e+e)%e}function Nk(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function Pk(n,e,t){return n!==e?(t-n)/(e-n):0}function Nd(n,e,t){return(1-t)*n+t*e}function Ik(n,e,t,i){return Nd(n,e,1-Math.exp(-t*i))}function Bk(n,e=1){return e-Math.abs(IS(n,e*2)-e)}function Lk(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Dk(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function kk(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Fk(n,e){return n+Math.random()*(e-n)}function Uk(n){return n*(.5-Math.random())}function Ok(n){n!==void 0&&(RM=n);let e=RM+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function jk(n){return n*hl}function zk(n){return n*hu}function i_(n){return(n&n-1)===0&&n!==0}function Gk(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Ym(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Hk(n,e,t,i,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),h=s((e+i)/2),f=a((e+i)/2),p=s((e-i)/2),m=a((e-i)/2),g=s((i-e)/2),y=a((i-e)/2);switch(r){case"XYX":n.set(o*f,l*p,l*m,o*h);break;case"YZY":n.set(l*m,o*f,l*p,o*h);break;case"ZXZ":n.set(l*p,l*m,o*f,o*h);break;case"XZX":n.set(o*f,l*y,l*g,o*h);break;case"YXY":n.set(l*g,o*f,l*y,o*h);break;case"ZYZ":n.set(l*y,l*g,o*f,o*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Xi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Tt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Hr={DEG2RAD:hl,RAD2DEG:hu,generateUUID:ur,clamp:En,euclideanModulo:IS,mapLinear:Nk,inverseLerp:Pk,lerp:Nd,damp:Ik,pingpong:Bk,smoothstep:Lk,smootherstep:Dk,randInt:kk,randFloat:Fk,randFloatSpread:Uk,seededRandom:Ok,degToRad:jk,radToDeg:zk,isPowerOfTwo:i_,ceilPowerOfTwo:Gk,floorPowerOfTwo:Ym,setQuaternionFromProperEuler:Hk,normalize:Tt,denormalize:Xi};class Ae{constructor(e=0,t=0){Ae.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(En(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rt{constructor(e,t,i,r,s,a,o,l,h){Rt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,h)}set(e,t,i,r,s,a,o,l,h){const f=this.elements;return f[0]=e,f[1]=r,f[2]=o,f[3]=t,f[4]=s,f[5]=l,f[6]=i,f[7]=a,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],h=i[1],f=i[4],p=i[7],m=i[2],g=i[5],y=i[8],M=r[0],_=r[3],v=r[6],S=r[1],A=r[4],E=r[7],N=r[2],T=r[5],P=r[8];return s[0]=a*M+o*S+l*N,s[3]=a*_+o*A+l*T,s[6]=a*v+o*E+l*P,s[1]=h*M+f*S+p*N,s[4]=h*_+f*A+p*T,s[7]=h*v+f*E+p*P,s[2]=m*M+g*S+y*N,s[5]=m*_+g*A+y*T,s[8]=m*v+g*E+y*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],h=e[7],f=e[8];return t*a*f-t*o*h-i*s*f+i*o*l+r*s*h-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],h=e[7],f=e[8],p=f*a-o*h,m=o*l-f*s,g=h*s-a*l,y=t*p+i*m+r*g;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/y;return e[0]=p*M,e[1]=(r*h-f*i)*M,e[2]=(o*i-r*a)*M,e[3]=m*M,e[4]=(f*t-r*l)*M,e[5]=(r*s-o*t)*M,e[6]=g*M,e[7]=(i*l-h*t)*M,e[8]=(a*t-i*s)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),h=Math.sin(s);return this.set(i*l,i*h,-i*(l*a+h*o)+a+e,-r*h,r*l,-r*(-h*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(x0.makeScale(e,t)),this}rotate(e){return this.premultiply(x0.makeRotation(-e)),this}translate(e,t){return this.premultiply(x0.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const x0=new Rt;function M2(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Vk={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Fc(n,e){return new Vk[n](e)}function dh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function E2(){const n=dh("canvas");return n.style.display="block",n}const NM={};function Pd(n){n in NM||(NM[n]=!0,console.warn(n))}const PM=new Rt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),IM=new Rt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),ep={[bs]:{transfer:oh,primaries:lh,toReference:n=>n,fromReference:n=>n},[Vn]:{transfer:en,primaries:lh,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Th]:{transfer:oh,primaries:ch,toReference:n=>n.applyMatrix3(IM),fromReference:n=>n.applyMatrix3(PM)},[Sg]:{transfer:en,primaries:ch,toReference:n=>n.convertSRGBToLinear().applyMatrix3(IM),fromReference:n=>n.applyMatrix3(PM).convertLinearToSRGB()}},Wk=new Set([bs,Th]),Jt={enabled:!0,_workingColorSpace:bs,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!Wk.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=ep[e].toReference,r=ep[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return ep[n].primaries},getTransfer:function(n){return n===ar?oh:ep[n].transfer}};function Qc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function _0(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let ec;class BS{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ec===void 0&&(ec=dh("canvas")),ec.width=e.width,ec.height=e.height;const i=ec.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=ec}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=dh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Qc(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Qc(t[i]/255)*255):t[i]=Qc(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Xk=0;class nl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Xk++}),this.uuid=ur(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(S0(r[a].image)):s.push(S0(r[a]))}else s=S0(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function S0(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?BS.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Jk=0;class yn extends ua{constructor(e=yn.DEFAULT_IMAGE,t=yn.DEFAULT_MAPPING,i=oi,r=oi,s=mn,a=Ts,o=Li,l=Ms,h=yn.DEFAULT_ANISOTROPY,f=ar){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Jk++}),this.uuid=ur(),this.name="",this.source=new nl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=h,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Ae(0,0),this.repeat=new Ae(1,1),this.center=new Ae(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof f=="string"?this.colorSpace=f:(Pd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=f===to?Vn:ar),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==vg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case oo:e.x=e.x-Math.floor(e.x);break;case oi:e.x=e.x<0?0:1;break;case lu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case oo:e.y=e.y-Math.floor(e.y);break;case oi:e.y=e.y<0?0:1;break;case lu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Pd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Vn?to:NS}set encoding(e){Pd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===to?Vn:ar}}yn.DEFAULT_IMAGE=null;yn.DEFAULT_MAPPING=vg;yn.DEFAULT_ANISOTROPY=1;class Yt{constructor(e=0,t=0,i=0,r=1){Yt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,h=l[0],f=l[4],p=l[8],m=l[1],g=l[5],y=l[9],M=l[2],_=l[6],v=l[10];if(Math.abs(f-m)<.01&&Math.abs(p-M)<.01&&Math.abs(y-_)<.01){if(Math.abs(f+m)<.1&&Math.abs(p+M)<.1&&Math.abs(y+_)<.1&&Math.abs(h+g+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(h+1)/2,E=(g+1)/2,N=(v+1)/2,T=(f+m)/4,P=(p+M)/4,L=(y+_)/4;return A>E&&A>N?A<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(A),r=T/i,s=P/i):E>N?E<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(E),i=T/r,s=L/r):N<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(N),i=P/s,r=L/s),this.set(i,r,s,t),this}let S=Math.sqrt((_-y)*(_-y)+(p-M)*(p-M)+(m-f)*(m-f));return Math.abs(S)<.001&&(S=1),this.x=(_-y)/S,this.y=(p-M)/S,this.z=(m-f)/S,this.w=Math.acos((h+g+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class C2 extends ua{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Yt(0,0,e,t),this.scissorTest=!1,this.viewport=new Yt(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(Pd("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===to?Vn:ar),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:mn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new yn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new nl(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ts extends C2{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Ag extends yn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Mn,this.minFilter=Mn,this.wrapR=oi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Yk extends ts{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Ag(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class LS extends yn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Mn,this.minFilter=Mn,this.wrapR=oi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Kk extends ts{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new LS(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class qk extends ts{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let a=0;a<i;a++)this.texture[a]=s.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class wi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],h=i[r+1],f=i[r+2],p=i[r+3];const m=s[a+0],g=s[a+1],y=s[a+2],M=s[a+3];if(o===0){e[t+0]=l,e[t+1]=h,e[t+2]=f,e[t+3]=p;return}if(o===1){e[t+0]=m,e[t+1]=g,e[t+2]=y,e[t+3]=M;return}if(p!==M||l!==m||h!==g||f!==y){let _=1-o;const v=l*m+h*g+f*y+p*M,S=v>=0?1:-1,A=1-v*v;if(A>Number.EPSILON){const N=Math.sqrt(A),T=Math.atan2(N,v*S);_=Math.sin(_*T)/N,o=Math.sin(o*T)/N}const E=o*S;if(l=l*_+m*E,h=h*_+g*E,f=f*_+y*E,p=p*_+M*E,_===1-o){const N=1/Math.sqrt(l*l+h*h+f*f+p*p);l*=N,h*=N,f*=N,p*=N}}e[t]=l,e[t+1]=h,e[t+2]=f,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],h=i[r+2],f=i[r+3],p=s[a],m=s[a+1],g=s[a+2],y=s[a+3];return e[t]=o*y+f*p+l*g-h*m,e[t+1]=l*y+f*m+h*p-o*g,e[t+2]=h*y+f*g+o*m-l*p,e[t+3]=f*y-o*p-l*m-h*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,h=o(i/2),f=o(r/2),p=o(s/2),m=l(i/2),g=l(r/2),y=l(s/2);switch(a){case"XYZ":this._x=m*f*p+h*g*y,this._y=h*g*p-m*f*y,this._z=h*f*y+m*g*p,this._w=h*f*p-m*g*y;break;case"YXZ":this._x=m*f*p+h*g*y,this._y=h*g*p-m*f*y,this._z=h*f*y-m*g*p,this._w=h*f*p+m*g*y;break;case"ZXY":this._x=m*f*p-h*g*y,this._y=h*g*p+m*f*y,this._z=h*f*y+m*g*p,this._w=h*f*p-m*g*y;break;case"ZYX":this._x=m*f*p-h*g*y,this._y=h*g*p+m*f*y,this._z=h*f*y-m*g*p,this._w=h*f*p+m*g*y;break;case"YZX":this._x=m*f*p+h*g*y,this._y=h*g*p+m*f*y,this._z=h*f*y-m*g*p,this._w=h*f*p-m*g*y;break;case"XZY":this._x=m*f*p-h*g*y,this._y=h*g*p-m*f*y,this._z=h*f*y+m*g*p,this._w=h*f*p+m*g*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],h=t[2],f=t[6],p=t[10],m=i+o+p;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(f-l)*g,this._y=(s-h)*g,this._z=(a-r)*g}else if(i>o&&i>p){const g=2*Math.sqrt(1+i-o-p);this._w=(f-l)/g,this._x=.25*g,this._y=(r+a)/g,this._z=(s+h)/g}else if(o>p){const g=2*Math.sqrt(1+o-i-p);this._w=(s-h)/g,this._x=(r+a)/g,this._y=.25*g,this._z=(l+f)/g}else{const g=2*Math.sqrt(1+p-i-o);this._w=(a-r)/g,this._x=(s+h)/g,this._y=(l+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(En(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,h=t._z,f=t._w;return this._x=i*f+a*o+r*h-s*l,this._y=r*f+a*l+s*o-i*h,this._z=s*f+a*h+i*l-r*o,this._w=a*f-i*o-r*l-s*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const g=1-t;return this._w=g*a+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this}const h=Math.sqrt(l),f=Math.atan2(h,o),p=Math.sin((1-t)*f)/h,m=Math.sin(t*f)/h;return this._w=a*p+this._w*m,this._x=i*p+this._x*m,this._y=r*p+this._y*m,this._z=s*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class z{constructor(e=0,t=0,i=0){z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(BM.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(BM.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,h=2*(a*r-o*i),f=2*(o*t-s*r),p=2*(s*i-a*t);return this.x=t+l*h+a*p-o*f,this.y=i+l*f+o*h-s*p,this.z=r+l*p+s*f-a*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return A0.copy(this).projectOnVector(e),this.sub(A0)}reflect(e){return this.sub(A0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(En(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const A0=new z,BM=new wi;class Mi{constructor(e=new z(1/0,1/0,1/0),t=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Or.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Or.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Or.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Or):Or.fromBufferAttribute(s,a),Or.applyMatrix4(e.matrixWorld),this.expandByPoint(Or);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),tp.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),tp.copy(i.boundingBox)),tp.applyMatrix4(e.matrixWorld),this.union(tp)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Or),Or.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ed),np.subVectors(this.max,ed),tc.subVectors(e.a,ed),nc.subVectors(e.b,ed),ic.subVectors(e.c,ed),Ca.subVectors(nc,tc),Ta.subVectors(ic,nc),Io.subVectors(tc,ic);let t=[0,-Ca.z,Ca.y,0,-Ta.z,Ta.y,0,-Io.z,Io.y,Ca.z,0,-Ca.x,Ta.z,0,-Ta.x,Io.z,0,-Io.x,-Ca.y,Ca.x,0,-Ta.y,Ta.x,0,-Io.y,Io.x,0];return!w0(t,tc,nc,ic,np)||(t=[1,0,0,0,1,0,0,0,1],!w0(t,tc,nc,ic,np))?!1:(ip.crossVectors(Ca,Ta),t=[ip.x,ip.y,ip.z],w0(t,tc,nc,ic,np))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Or).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Or).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Fs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Fs=[new z,new z,new z,new z,new z,new z,new z,new z],Or=new z,tp=new Mi,tc=new z,nc=new z,ic=new z,Ca=new z,Ta=new z,Io=new z,ed=new z,np=new z,ip=new z,Bo=new z;function w0(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){Bo.fromArray(n,s);const o=r.x*Math.abs(Bo.x)+r.y*Math.abs(Bo.y)+r.z*Math.abs(Bo.z),l=e.dot(Bo),h=t.dot(Bo),f=i.dot(Bo);if(Math.max(-Math.max(l,h,f),Math.min(l,h,f))>o)return!1}return!0}const Qk=new Mi,td=new z,M0=new z;class ci{constructor(e=new z,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Qk.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;td.subVectors(e,this.center);const t=td.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(td,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(M0.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(td.copy(e.center).add(M0)),this.expandByPoint(td.copy(e.center).sub(M0))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Us=new z,E0=new z,rp=new z,ba=new z,C0=new z,sp=new z,T0=new z;class Su{constructor(e=new z,t=new z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Us)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Us.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Us.copy(this.origin).addScaledVector(this.direction,t),Us.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){E0.copy(e).add(t).multiplyScalar(.5),rp.copy(t).sub(e).normalize(),ba.copy(this.origin).sub(E0);const s=e.distanceTo(t)*.5,a=-this.direction.dot(rp),o=ba.dot(this.direction),l=-ba.dot(rp),h=ba.lengthSq(),f=Math.abs(1-a*a);let p,m,g,y;if(f>0)if(p=a*l-o,m=a*o-l,y=s*f,p>=0)if(m>=-y)if(m<=y){const M=1/f;p*=M,m*=M,g=p*(p+a*m+2*o)+m*(a*p+m+2*l)+h}else m=s,p=Math.max(0,-(a*m+o)),g=-p*p+m*(m+2*l)+h;else m=-s,p=Math.max(0,-(a*m+o)),g=-p*p+m*(m+2*l)+h;else m<=-y?(p=Math.max(0,-(-a*s+o)),m=p>0?-s:Math.min(Math.max(-s,-l),s),g=-p*p+m*(m+2*l)+h):m<=y?(p=0,m=Math.min(Math.max(-s,-l),s),g=m*(m+2*l)+h):(p=Math.max(0,-(a*s+o)),m=p>0?s:Math.min(Math.max(-s,-l),s),g=-p*p+m*(m+2*l)+h);else m=a>0?-s:s,p=Math.max(0,-(a*m+o)),g=-p*p+m*(m+2*l)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(E0).addScaledVector(rp,m),g}intersectSphere(e,t){Us.subVectors(e.center,this.origin);const i=Us.dot(this.direction),r=Us.dot(Us)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const h=1/this.direction.x,f=1/this.direction.y,p=1/this.direction.z,m=this.origin;return h>=0?(i=(e.min.x-m.x)*h,r=(e.max.x-m.x)*h):(i=(e.max.x-m.x)*h,r=(e.min.x-m.x)*h),f>=0?(s=(e.min.y-m.y)*f,a=(e.max.y-m.y)*f):(s=(e.max.y-m.y)*f,a=(e.min.y-m.y)*f),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),p>=0?(o=(e.min.z-m.z)*p,l=(e.max.z-m.z)*p):(o=(e.max.z-m.z)*p,l=(e.min.z-m.z)*p),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Us)!==null}intersectTriangle(e,t,i,r,s){C0.subVectors(t,e),sp.subVectors(i,e),T0.crossVectors(C0,sp);let a=this.direction.dot(T0),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;ba.subVectors(this.origin,e);const l=o*this.direction.dot(sp.crossVectors(ba,sp));if(l<0)return null;const h=o*this.direction.dot(C0.cross(ba));if(h<0||l+h>a)return null;const f=-o*ba.dot(T0);return f<0?null:this.at(f/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class dt{constructor(e,t,i,r,s,a,o,l,h,f,p,m,g,y,M,_){dt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,h,f,p,m,g,y,M,_)}set(e,t,i,r,s,a,o,l,h,f,p,m,g,y,M,_){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=a,v[9]=o,v[13]=l,v[2]=h,v[6]=f,v[10]=p,v[14]=m,v[3]=g,v[7]=y,v[11]=M,v[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new dt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/rc.setFromMatrixColumn(e,0).length(),s=1/rc.setFromMatrixColumn(e,1).length(),a=1/rc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),h=Math.sin(r),f=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const m=a*f,g=a*p,y=o*f,M=o*p;t[0]=l*f,t[4]=-l*p,t[8]=h,t[1]=g+y*h,t[5]=m-M*h,t[9]=-o*l,t[2]=M-m*h,t[6]=y+g*h,t[10]=a*l}else if(e.order==="YXZ"){const m=l*f,g=l*p,y=h*f,M=h*p;t[0]=m+M*o,t[4]=y*o-g,t[8]=a*h,t[1]=a*p,t[5]=a*f,t[9]=-o,t[2]=g*o-y,t[6]=M+m*o,t[10]=a*l}else if(e.order==="ZXY"){const m=l*f,g=l*p,y=h*f,M=h*p;t[0]=m-M*o,t[4]=-a*p,t[8]=y+g*o,t[1]=g+y*o,t[5]=a*f,t[9]=M-m*o,t[2]=-a*h,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const m=a*f,g=a*p,y=o*f,M=o*p;t[0]=l*f,t[4]=y*h-g,t[8]=m*h+M,t[1]=l*p,t[5]=M*h+m,t[9]=g*h-y,t[2]=-h,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const m=a*l,g=a*h,y=o*l,M=o*h;t[0]=l*f,t[4]=M-m*p,t[8]=y*p+g,t[1]=p,t[5]=a*f,t[9]=-o*f,t[2]=-h*f,t[6]=g*p+y,t[10]=m-M*p}else if(e.order==="XZY"){const m=a*l,g=a*h,y=o*l,M=o*h;t[0]=l*f,t[4]=-p,t[8]=h*f,t[1]=m*p+M,t[5]=a*f,t[9]=g*p-y,t[2]=y*p-g,t[6]=o*f,t[10]=M*p+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Zk,e,$k)}lookAt(e,t,i){const r=this.elements;return ir.subVectors(e,t),ir.lengthSq()===0&&(ir.z=1),ir.normalize(),Ra.crossVectors(i,ir),Ra.lengthSq()===0&&(Math.abs(i.z)===1?ir.x+=1e-4:ir.z+=1e-4,ir.normalize(),Ra.crossVectors(i,ir)),Ra.normalize(),ap.crossVectors(ir,Ra),r[0]=Ra.x,r[4]=ap.x,r[8]=ir.x,r[1]=Ra.y,r[5]=ap.y,r[9]=ir.y,r[2]=Ra.z,r[6]=ap.z,r[10]=ir.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],h=i[12],f=i[1],p=i[5],m=i[9],g=i[13],y=i[2],M=i[6],_=i[10],v=i[14],S=i[3],A=i[7],E=i[11],N=i[15],T=r[0],P=r[4],L=r[8],R=r[12],b=r[1],D=r[5],X=r[9],$=r[13],V=r[2],K=r[6],q=r[10],ue=r[14],U=r[3],j=r[7],W=r[11],Y=r[15];return s[0]=a*T+o*b+l*V+h*U,s[4]=a*P+o*D+l*K+h*j,s[8]=a*L+o*X+l*q+h*W,s[12]=a*R+o*$+l*ue+h*Y,s[1]=f*T+p*b+m*V+g*U,s[5]=f*P+p*D+m*K+g*j,s[9]=f*L+p*X+m*q+g*W,s[13]=f*R+p*$+m*ue+g*Y,s[2]=y*T+M*b+_*V+v*U,s[6]=y*P+M*D+_*K+v*j,s[10]=y*L+M*X+_*q+v*W,s[14]=y*R+M*$+_*ue+v*Y,s[3]=S*T+A*b+E*V+N*U,s[7]=S*P+A*D+E*K+N*j,s[11]=S*L+A*X+E*q+N*W,s[15]=S*R+A*$+E*ue+N*Y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],h=e[13],f=e[2],p=e[6],m=e[10],g=e[14],y=e[3],M=e[7],_=e[11],v=e[15];return y*(+s*l*p-r*h*p-s*o*m+i*h*m+r*o*g-i*l*g)+M*(+t*l*g-t*h*m+s*a*m-r*a*g+r*h*f-s*l*f)+_*(+t*h*p-t*o*g-s*a*p+i*a*g+s*o*f-i*h*f)+v*(-r*o*f-t*l*p+t*o*m+r*a*p-i*a*m+i*l*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],h=e[7],f=e[8],p=e[9],m=e[10],g=e[11],y=e[12],M=e[13],_=e[14],v=e[15],S=p*_*h-M*m*h+M*l*g-o*_*g-p*l*v+o*m*v,A=y*m*h-f*_*h-y*l*g+a*_*g+f*l*v-a*m*v,E=f*M*h-y*p*h+y*o*g-a*M*g-f*o*v+a*p*v,N=y*p*l-f*M*l-y*o*m+a*M*m+f*o*_-a*p*_,T=t*S+i*A+r*E+s*N;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/T;return e[0]=S*P,e[1]=(M*m*s-p*_*s-M*r*g+i*_*g+p*r*v-i*m*v)*P,e[2]=(o*_*s-M*l*s+M*r*h-i*_*h-o*r*v+i*l*v)*P,e[3]=(p*l*s-o*m*s-p*r*h+i*m*h+o*r*g-i*l*g)*P,e[4]=A*P,e[5]=(f*_*s-y*m*s+y*r*g-t*_*g-f*r*v+t*m*v)*P,e[6]=(y*l*s-a*_*s-y*r*h+t*_*h+a*r*v-t*l*v)*P,e[7]=(a*m*s-f*l*s+f*r*h-t*m*h-a*r*g+t*l*g)*P,e[8]=E*P,e[9]=(y*p*s-f*M*s-y*i*g+t*M*g+f*i*v-t*p*v)*P,e[10]=(a*M*s-y*o*s+y*i*h-t*M*h-a*i*v+t*o*v)*P,e[11]=(f*o*s-a*p*s-f*i*h+t*p*h+a*i*g-t*o*g)*P,e[12]=N*P,e[13]=(f*M*r-y*p*r+y*i*m-t*M*m-f*i*_+t*p*_)*P,e[14]=(y*o*r-a*M*r-y*i*l+t*M*l+a*i*_-t*o*_)*P,e[15]=(a*p*r-f*o*r+f*i*l-t*p*l-a*i*m+t*o*m)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,h=s*a,f=s*o;return this.set(h*a+i,h*o-r*l,h*l+r*o,0,h*o+r*l,f*o+i,f*l-r*a,0,h*l-r*o,f*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,h=s+s,f=a+a,p=o+o,m=s*h,g=s*f,y=s*p,M=a*f,_=a*p,v=o*p,S=l*h,A=l*f,E=l*p,N=i.x,T=i.y,P=i.z;return r[0]=(1-(M+v))*N,r[1]=(g+E)*N,r[2]=(y-A)*N,r[3]=0,r[4]=(g-E)*T,r[5]=(1-(m+v))*T,r[6]=(_+S)*T,r[7]=0,r[8]=(y+A)*P,r[9]=(_-S)*P,r[10]=(1-(m+M))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=rc.set(r[0],r[1],r[2]).length();const a=rc.set(r[4],r[5],r[6]).length(),o=rc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],jr.copy(this);const h=1/s,f=1/a,p=1/o;return jr.elements[0]*=h,jr.elements[1]*=h,jr.elements[2]*=h,jr.elements[4]*=f,jr.elements[5]*=f,jr.elements[6]*=f,jr.elements[8]*=p,jr.elements[9]*=p,jr.elements[10]*=p,t.setFromRotationMatrix(jr),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a,o=Qr){const l=this.elements,h=2*s/(t-e),f=2*s/(i-r),p=(t+e)/(t-e),m=(i+r)/(i-r);let g,y;if(o===Qr)g=-(a+s)/(a-s),y=-2*a*s/(a-s);else if(o===du)g=-a/(a-s),y=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=h,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=f,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,a,o=Qr){const l=this.elements,h=1/(t-e),f=1/(i-r),p=1/(a-s),m=(t+e)*h,g=(i+r)*f;let y,M;if(o===Qr)y=(a+s)*p,M=-2*p;else if(o===du)y=s*p,M=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*h,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=M,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const rc=new z,jr=new dt,Zk=new z(0,0,0),$k=new z(1,1,1),Ra=new z,ap=new z,ir=new z,LM=new dt,DM=new wi;class bh{constructor(e=0,t=0,i=0,r=bh.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],h=r[5],f=r[9],p=r[2],m=r[6],g=r[10];switch(t){case"XYZ":this._y=Math.asin(En(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-f,g),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(m,h),this._z=0);break;case"YXZ":this._x=Math.asin(-En(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(o,g),this._z=Math.atan2(l,h)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(En(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,g),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-En(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,h));break;case"YZX":this._z=Math.asin(En(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(o,g));break;case"XZY":this._z=Math.asin(-En(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,h),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-f,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return LM.makeRotationFromQuaternion(e),this.setFromRotationMatrix(LM,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return DM.setFromEuler(this),this.setFromQuaternion(DM,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}bh.DEFAULT_ORDER="XYZ";class fl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let e3=0;const kM=new z,sc=new wi,Os=new dt,op=new z,nd=new z,t3=new z,n3=new wi,FM=new z(1,0,0),UM=new z(0,1,0),OM=new z(0,0,1),i3={type:"added"},r3={type:"removed"};class Ft extends ua{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:e3++}),this.uuid=ur(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ft.DEFAULT_UP.clone();const e=new z,t=new bh,i=new wi,r=new z(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new dt},normalMatrix:{value:new Rt}}),this.matrix=new dt,this.matrixWorld=new dt,this.matrixAutoUpdate=Ft.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ft.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new fl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return sc.setFromAxisAngle(e,t),this.quaternion.multiply(sc),this}rotateOnWorldAxis(e,t){return sc.setFromAxisAngle(e,t),this.quaternion.premultiply(sc),this}rotateX(e){return this.rotateOnAxis(FM,e)}rotateY(e){return this.rotateOnAxis(UM,e)}rotateZ(e){return this.rotateOnAxis(OM,e)}translateOnAxis(e,t){return kM.copy(e).applyQuaternion(this.quaternion),this.position.add(kM.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(FM,e)}translateY(e){return this.translateOnAxis(UM,e)}translateZ(e){return this.translateOnAxis(OM,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Os.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?op.copy(e):op.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),nd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Os.lookAt(nd,op,this.up):Os.lookAt(op,nd,this.up),this.quaternion.setFromRotationMatrix(Os),r&&(Os.extractRotation(r.matrixWorld),sc.setFromRotationMatrix(Os),this.quaternion.premultiply(sc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(i3)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(r3)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Os.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Os.multiply(e.parent.matrixWorld)),e.applyMatrix4(Os),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nd,e,t3),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nd,n3,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++){const o=r[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let h=0,f=l.length;h<f;h++){const p=l[h];s(e.shapes,p)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,h=this.material.length;l<h;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),h=a(e.textures),f=a(e.images),p=a(e.shapes),m=a(e.skeletons),g=a(e.animations),y=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),h.length>0&&(i.textures=h),f.length>0&&(i.images=f),p.length>0&&(i.shapes=p),m.length>0&&(i.skeletons=m),g.length>0&&(i.animations=g),y.length>0&&(i.nodes=y)}return i.object=r,i;function a(o){const l=[];for(const h in o){const f=o[h];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Ft.DEFAULT_UP=new z(0,1,0);Ft.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ft.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const zr=new z,js=new z,b0=new z,zs=new z,ac=new z,oc=new z,jM=new z,R0=new z,N0=new z,P0=new z;let lp=!1;class Wi{constructor(e=new z,t=new z,i=new z){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),zr.subVectors(e,t),r.cross(zr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){zr.subVectors(r,t),js.subVectors(i,t),b0.subVectors(e,t);const a=zr.dot(zr),o=zr.dot(js),l=zr.dot(b0),h=js.dot(js),f=js.dot(b0),p=a*h-o*o;if(p===0)return s.set(0,0,0),null;const m=1/p,g=(h*l-o*f)*m,y=(a*f-o*l)*m;return s.set(1-g-y,y,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,zs)===null?!1:zs.x>=0&&zs.y>=0&&zs.x+zs.y<=1}static getUV(e,t,i,r,s,a,o,l){return lp===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),lp=!0),this.getInterpolation(e,t,i,r,s,a,o,l)}static getInterpolation(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,zs)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,zs.x),l.addScaledVector(a,zs.y),l.addScaledVector(o,zs.z),l)}static isFrontFacing(e,t,i,r){return zr.subVectors(i,t),js.subVectors(e,t),zr.cross(js).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return zr.subVectors(this.c,this.b),js.subVectors(this.a,this.b),zr.cross(js).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Wi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Wi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return lp===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),lp=!0),Wi.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return Wi.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Wi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Wi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;ac.subVectors(r,i),oc.subVectors(s,i),R0.subVectors(e,i);const l=ac.dot(R0),h=oc.dot(R0);if(l<=0&&h<=0)return t.copy(i);N0.subVectors(e,r);const f=ac.dot(N0),p=oc.dot(N0);if(f>=0&&p<=f)return t.copy(r);const m=l*p-f*h;if(m<=0&&l>=0&&f<=0)return a=l/(l-f),t.copy(i).addScaledVector(ac,a);P0.subVectors(e,s);const g=ac.dot(P0),y=oc.dot(P0);if(y>=0&&g<=y)return t.copy(s);const M=g*h-l*y;if(M<=0&&h>=0&&y<=0)return o=h/(h-y),t.copy(i).addScaledVector(oc,o);const _=f*y-g*p;if(_<=0&&p-f>=0&&g-y>=0)return jM.subVectors(s,r),o=(p-f)/(p-f+(g-y)),t.copy(r).addScaledVector(jM,o);const v=1/(_+M+m);return a=M*v,o=m*v,t.copy(i).addScaledVector(ac,a).addScaledVector(oc,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const T2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Na={h:0,s:0,l:0},cp={h:0,s:0,l:0};function I0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ue{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Vn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Jt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Jt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Jt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Jt.workingColorSpace){if(e=IS(e,1),t=En(t,0,1),i=En(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=I0(a,s,e+1/3),this.g=I0(a,s,e),this.b=I0(a,s,e-1/3)}return Jt.toWorkingColorSpace(this,r),this}setStyle(e,t=Vn){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Vn){const i=T2[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Qc(e.r),this.g=Qc(e.g),this.b=Qc(e.b),this}copyLinearToSRGB(e){return this.r=_0(e.r),this.g=_0(e.g),this.b=_0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Vn){return Jt.fromWorkingColorSpace(_i.copy(this),e),Math.round(En(_i.r*255,0,255))*65536+Math.round(En(_i.g*255,0,255))*256+Math.round(En(_i.b*255,0,255))}getHexString(e=Vn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Jt.workingColorSpace){Jt.fromWorkingColorSpace(_i.copy(this),t);const i=_i.r,r=_i.g,s=_i.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,h;const f=(o+a)/2;if(o===a)l=0,h=0;else{const p=a-o;switch(h=f<=.5?p/(a+o):p/(2-a-o),a){case i:l=(r-s)/p+(r<s?6:0);break;case r:l=(s-i)/p+2;break;case s:l=(i-r)/p+4;break}l/=6}return e.h=l,e.s=h,e.l=f,e}getRGB(e,t=Jt.workingColorSpace){return Jt.fromWorkingColorSpace(_i.copy(this),t),e.r=_i.r,e.g=_i.g,e.b=_i.b,e}getStyle(e=Vn){Jt.fromWorkingColorSpace(_i.copy(this),e);const t=_i.r,i=_i.g,r=_i.b;return e!==Vn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Na),this.setHSL(Na.h+e,Na.s+t,Na.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Na),e.getHSL(cp);const i=Nd(Na.h,cp.h,t),r=Nd(Na.s,cp.s,t),s=Nd(Na.l,cp.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _i=new Ue;Ue.NAMES=T2;let s3=0;class Kn extends ua{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:s3++}),this.uuid=ur(),this.name="",this.type="Material",this.blending=dl,this.side=Cs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Vm,this.blendDst=Wm,this.blendEquation=za,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ue(0,0,0),this.blendAlpha=0,this.depthFunc=nh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=t_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Jo,this.stencilZFail=Jo,this.stencilZPass=Jo,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==dl&&(i.blending=this.blending),this.side!==Cs&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Vm&&(i.blendSrc=this.blendSrc),this.blendDst!==Wm&&(i.blendDst=this.blendDst),this.blendEquation!==za&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==nh&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==t_&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Jo&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Jo&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Jo&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class lr extends Kn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ue(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ch,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Xs=a3();function a3(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const h=l-127;h<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):h<-14?(i[l]=1024>>-h-14,i[l|256]=1024>>-h-14|32768,r[l]=-h-1,r[l|256]=-h-1):h<=15?(i[l]=h+15<<10,i[l|256]=h+15<<10|32768,r[l]=13,r[l|256]=13):h<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let h=l<<13,f=0;for(;!(h&8388608);)h<<=1,f-=8388608;h&=-8388609,f+=947912704,s[l]=h|f}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function Hi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=En(n,-65504,65504),Xs.floatView[0]=n;const e=Xs.uint32View[0],t=e>>23&511;return Xs.baseTable[t]+((e&8388607)>>Xs.shiftTable[t])}function yd(n){const e=n>>10;return Xs.uint32View[0]=Xs.mantissaTable[Xs.offsetTable[e]+(n&1023)]+Xs.exponentTable[e],Xs.floatView[0]}const o3={toHalfFloat:Hi,fromHalfFloat:yd},kn=new z,up=new Ae;class Ut{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=uh,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=qr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)up.fromBufferAttribute(this,t),up.applyMatrix3(e),this.setXY(t,up.x,up.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyMatrix3(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyMatrix4(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyNormalMatrix(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.transformDirection(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Xi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Tt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Xi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Xi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Xi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Xi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array),r=Tt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array),r=Tt(r,this.array),s=Tt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==uh&&(e.usage=this.usage),e}}class l3 extends Ut{constructor(e,t,i){super(new Int8Array(e),t,i)}}class c3 extends Ut{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class u3 extends Ut{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class d3 extends Ut{constructor(e,t,i){super(new Int16Array(e),t,i)}}class DS extends Ut{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class h3 extends Ut{constructor(e,t,i){super(new Int32Array(e),t,i)}}class kS extends Ut{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class f3 extends Ut{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=yd(this.array[e*this.itemSize]);return this.normalized&&(t=Xi(t,this.array)),t}setX(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize]=Hi(t),this}getY(e){let t=yd(this.array[e*this.itemSize+1]);return this.normalized&&(t=Xi(t,this.array)),t}setY(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize+1]=Hi(t),this}getZ(e){let t=yd(this.array[e*this.itemSize+2]);return this.normalized&&(t=Xi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize+2]=Hi(t),this}getW(e){let t=yd(this.array[e*this.itemSize+3]);return this.normalized&&(t=Xi(t,this.array)),t}setW(e,t){return this.normalized&&(t=Tt(t,this.array)),this.array[e*this.itemSize+3]=Hi(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array)),this.array[e+0]=Hi(t),this.array[e+1]=Hi(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array),r=Tt(r,this.array)),this.array[e+0]=Hi(t),this.array[e+1]=Hi(i),this.array[e+2]=Hi(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array),r=Tt(r,this.array),s=Tt(s,this.array)),this.array[e+0]=Hi(t),this.array[e+1]=Hi(i),this.array[e+2]=Hi(r),this.array[e+3]=Hi(s),this}}class Qe extends Ut{constructor(e,t,i){super(new Float32Array(e),t,i)}}class p3 extends Ut{constructor(e,t,i){super(new Float64Array(e),t,i)}}let m3=0;const wr=new dt,B0=new Ft,lc=new z,rr=new Mi,id=new Mi,ei=new z;class Mt extends ua{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:m3++}),this.uuid=ur(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(M2(e)?kS:DS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Rt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return wr.makeRotationFromQuaternion(e),this.applyMatrix4(wr),this}rotateX(e){return wr.makeRotationX(e),this.applyMatrix4(wr),this}rotateY(e){return wr.makeRotationY(e),this.applyMatrix4(wr),this}rotateZ(e){return wr.makeRotationZ(e),this.applyMatrix4(wr),this}translate(e,t,i){return wr.makeTranslation(e,t,i),this.applyMatrix4(wr),this}scale(e,t,i){return wr.makeScale(e,t,i),this.applyMatrix4(wr),this}lookAt(e){return B0.lookAt(e),B0.updateMatrix(),this.applyMatrix4(B0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(lc).negate(),this.translate(lc.x,lc.y,lc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Qe(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Mi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];rr.setFromBufferAttribute(s),this.morphTargetsRelative?(ei.addVectors(this.boundingBox.min,rr.min),this.boundingBox.expandByPoint(ei),ei.addVectors(this.boundingBox.max,rr.max),this.boundingBox.expandByPoint(ei)):(this.boundingBox.expandByPoint(rr.min),this.boundingBox.expandByPoint(rr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ci);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new z,1/0);return}if(e){const i=this.boundingSphere.center;if(rr.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];id.setFromBufferAttribute(o),this.morphTargetsRelative?(ei.addVectors(rr.min,id.min),rr.expandByPoint(ei),ei.addVectors(rr.max,id.max),rr.expandByPoint(ei)):(rr.expandByPoint(id.min),rr.expandByPoint(id.max))}rr.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)ei.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ei));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let h=0,f=o.count;h<f;h++)ei.fromBufferAttribute(o,h),l&&(lc.fromBufferAttribute(e,h),ei.add(lc)),r=Math.max(r,i.distanceToSquared(ei))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,a=t.uv.array,o=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ut(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,h=[],f=[];for(let b=0;b<o;b++)h[b]=new z,f[b]=new z;const p=new z,m=new z,g=new z,y=new Ae,M=new Ae,_=new Ae,v=new z,S=new z;function A(b,D,X){p.fromArray(r,b*3),m.fromArray(r,D*3),g.fromArray(r,X*3),y.fromArray(a,b*2),M.fromArray(a,D*2),_.fromArray(a,X*2),m.sub(p),g.sub(p),M.sub(y),_.sub(y);const $=1/(M.x*_.y-_.x*M.y);isFinite($)&&(v.copy(m).multiplyScalar(_.y).addScaledVector(g,-M.y).multiplyScalar($),S.copy(g).multiplyScalar(M.x).addScaledVector(m,-_.x).multiplyScalar($),h[b].add(v),h[D].add(v),h[X].add(v),f[b].add(S),f[D].add(S),f[X].add(S))}let E=this.groups;E.length===0&&(E=[{start:0,count:i.length}]);for(let b=0,D=E.length;b<D;++b){const X=E[b],$=X.start,V=X.count;for(let K=$,q=$+V;K<q;K+=3)A(i[K+0],i[K+1],i[K+2])}const N=new z,T=new z,P=new z,L=new z;function R(b){P.fromArray(s,b*3),L.copy(P);const D=h[b];N.copy(D),N.sub(P.multiplyScalar(P.dot(D))).normalize(),T.crossVectors(L,D);const $=T.dot(f[b])<0?-1:1;l[b*4]=N.x,l[b*4+1]=N.y,l[b*4+2]=N.z,l[b*4+3]=$}for(let b=0,D=E.length;b<D;++b){const X=E[b],$=X.start,V=X.count;for(let K=$,q=$+V;K<q;K+=3)R(i[K+0]),R(i[K+1]),R(i[K+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ut(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,g=i.count;m<g;m++)i.setXYZ(m,0,0,0);const r=new z,s=new z,a=new z,o=new z,l=new z,h=new z,f=new z,p=new z;if(e)for(let m=0,g=e.count;m<g;m+=3){const y=e.getX(m+0),M=e.getX(m+1),_=e.getX(m+2);r.fromBufferAttribute(t,y),s.fromBufferAttribute(t,M),a.fromBufferAttribute(t,_),f.subVectors(a,s),p.subVectors(r,s),f.cross(p),o.fromBufferAttribute(i,y),l.fromBufferAttribute(i,M),h.fromBufferAttribute(i,_),o.add(f),l.add(f),h.add(f),i.setXYZ(y,o.x,o.y,o.z),i.setXYZ(M,l.x,l.y,l.z),i.setXYZ(_,h.x,h.y,h.z)}else for(let m=0,g=t.count;m<g;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),a.fromBufferAttribute(t,m+2),f.subVectors(a,s),p.subVectors(r,s),f.cross(p),i.setXYZ(m+0,f.x,f.y,f.z),i.setXYZ(m+1,f.x,f.y,f.z),i.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ei.fromBufferAttribute(e,t),ei.normalize(),e.setXYZ(t,ei.x,ei.y,ei.z)}toNonIndexed(){function e(o,l){const h=o.array,f=o.itemSize,p=o.normalized,m=new h.constructor(l.length*f);let g=0,y=0;for(let M=0,_=l.length;M<_;M++){o.isInterleavedBufferAttribute?g=l[M]*o.data.stride+o.offset:g=l[M]*f;for(let v=0;v<f;v++)m[y++]=h[g++]}return new Ut(m,f,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Mt,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],h=e(l,i);t.setAttribute(o,h)}const s=this.morphAttributes;for(const o in s){const l=[],h=s[o];for(let f=0,p=h.length;f<p;f++){const m=h[f],g=e(m,i);l.push(g)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const h=a[o];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const h in l)l[h]!==void 0&&(e[h]=l[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const h=i[l];e.data.attributes[l]=h.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const h=this.morphAttributes[l],f=[];for(let p=0,m=h.length;p<m;p++){const g=h[p];f.push(g.toJSON(e.data))}f.length>0&&(r[l]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const h in r){const f=r[h];this.setAttribute(h,f.clone(t))}const s=e.morphAttributes;for(const h in s){const f=[],p=s[h];for(let m=0,g=p.length;m<g;m++)f.push(p[m].clone(t));this.morphAttributes[h]=f}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let h=0,f=a.length;h<f;h++){const p=a[h];this.addGroup(p.start,p.count,p.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const zM=new dt,Lo=new Su,dp=new ci,GM=new z,cc=new z,uc=new z,dc=new z,L0=new z,hp=new z,fp=new Ae,pp=new Ae,mp=new Ae,HM=new z,VM=new z,WM=new z,gp=new z,vp=new z;class Un extends Ft{constructor(e=new Mt,t=new lr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){hp.set(0,0,0);for(let l=0,h=s.length;l<h;l++){const f=o[l],p=s[l];f!==0&&(L0.fromBufferAttribute(p,e),a?hp.addScaledVector(L0,f):hp.addScaledVector(L0.sub(t),f))}t.add(hp)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),dp.copy(i.boundingSphere),dp.applyMatrix4(s),Lo.copy(e.ray).recast(e.near),!(dp.containsPoint(Lo.origin)===!1&&(Lo.intersectSphere(dp,GM)===null||Lo.origin.distanceToSquared(GM)>(e.far-e.near)**2))&&(zM.copy(s).invert(),Lo.copy(e.ray).applyMatrix4(zM),!(i.boundingBox!==null&&Lo.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Lo)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,h=s.attributes.uv,f=s.attributes.uv1,p=s.attributes.normal,m=s.groups,g=s.drawRange;if(o!==null)if(Array.isArray(a))for(let y=0,M=m.length;y<M;y++){const _=m[y],v=a[_.materialIndex],S=Math.max(_.start,g.start),A=Math.min(o.count,Math.min(_.start+_.count,g.start+g.count));for(let E=S,N=A;E<N;E+=3){const T=o.getX(E),P=o.getX(E+1),L=o.getX(E+2);r=yp(this,v,e,i,h,f,p,T,P,L),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const y=Math.max(0,g.start),M=Math.min(o.count,g.start+g.count);for(let _=y,v=M;_<v;_+=3){const S=o.getX(_),A=o.getX(_+1),E=o.getX(_+2);r=yp(this,a,e,i,h,f,p,S,A,E),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let y=0,M=m.length;y<M;y++){const _=m[y],v=a[_.materialIndex],S=Math.max(_.start,g.start),A=Math.min(l.count,Math.min(_.start+_.count,g.start+g.count));for(let E=S,N=A;E<N;E+=3){const T=E,P=E+1,L=E+2;r=yp(this,v,e,i,h,f,p,T,P,L),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const y=Math.max(0,g.start),M=Math.min(l.count,g.start+g.count);for(let _=y,v=M;_<v;_+=3){const S=_,A=_+1,E=_+2;r=yp(this,a,e,i,h,f,p,S,A,E),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}}}function g3(n,e,t,i,r,s,a,o){let l;if(e.side===ki?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side===Cs,o),l===null)return null;vp.copy(o),vp.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo(vp);return h<t.near||h>t.far?null:{distance:h,point:vp.clone(),object:n}}function yp(n,e,t,i,r,s,a,o,l,h){n.getVertexPosition(o,cc),n.getVertexPosition(l,uc),n.getVertexPosition(h,dc);const f=g3(n,e,t,i,cc,uc,dc,gp);if(f){r&&(fp.fromBufferAttribute(r,o),pp.fromBufferAttribute(r,l),mp.fromBufferAttribute(r,h),f.uv=Wi.getInterpolation(gp,cc,uc,dc,fp,pp,mp,new Ae)),s&&(fp.fromBufferAttribute(s,o),pp.fromBufferAttribute(s,l),mp.fromBufferAttribute(s,h),f.uv1=Wi.getInterpolation(gp,cc,uc,dc,fp,pp,mp,new Ae),f.uv2=f.uv1),a&&(HM.fromBufferAttribute(a,o),VM.fromBufferAttribute(a,l),WM.fromBufferAttribute(a,h),f.normal=Wi.getInterpolation(gp,cc,uc,dc,HM,VM,WM,new z),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));const p={a:o,b:l,c:h,normal:new z,materialIndex:0};Wi.getNormal(cc,uc,dc,p.normal),f.face=p}return f}class Nl extends Mt{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],h=[],f=[],p=[];let m=0,g=0;y("z","y","x",-1,-1,i,t,e,a,s,0),y("z","y","x",1,-1,i,t,-e,a,s,1),y("x","z","y",1,1,e,i,t,r,a,2),y("x","z","y",1,-1,e,i,-t,r,a,3),y("x","y","z",1,-1,e,t,i,r,s,4),y("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Qe(h,3)),this.setAttribute("normal",new Qe(f,3)),this.setAttribute("uv",new Qe(p,2));function y(M,_,v,S,A,E,N,T,P,L,R){const b=E/P,D=N/L,X=E/2,$=N/2,V=T/2,K=P+1,q=L+1;let ue=0,U=0;const j=new z;for(let W=0;W<q;W++){const Y=W*D-$;for(let re=0;re<K;re++){const Q=re*b-X;j[M]=Q*S,j[_]=Y*A,j[v]=V,h.push(j.x,j.y,j.z),j[M]=0,j[_]=0,j[v]=T>0?1:-1,f.push(j.x,j.y,j.z),p.push(re/P),p.push(1-W/L),ue+=1}}for(let W=0;W<L;W++)for(let Y=0;Y<P;Y++){const re=m+Y+K*W,Q=m+Y+K*(W+1),oe=m+(Y+1)+K*(W+1),ge=m+(Y+1)+K*W;l.push(re,Q,ge),l.push(Q,oe,ge),U+=6}o.addGroup(g,U,R),g+=U,m+=ue}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function fu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ii(n){const e={};for(let t=0;t<n.length;t++){const i=fu(n[t]);for(const r in i)e[r]=i[r]}return e}function v3(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function b2(n){return n.getRenderTarget()===null?n.outputColorSpace:Jt.workingColorSpace}const R2={clone:fu,merge:Ii};var y3=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,x3=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Rs extends Kn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=y3,this.fragmentShader=x3,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=fu(e.uniforms),this.uniformsGroups=v3(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Rh extends Ft{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dt,this.projectionMatrix=new dt,this.projectionMatrixInverse=new dt,this.coordinateSystem=Qr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Wn extends Rh{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=hu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(hl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return hu*2*Math.atan(Math.tan(hl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(hl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,h=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/h,r*=a.width/l,i*=a.height/h}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const hc=-90,fc=1;class N2 extends Ft{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Wn(hc,fc,e,t);r.layers=this.layers,this.add(r);const s=new Wn(hc,fc,e,t);s.layers=this.layers,this.add(s);const a=new Wn(hc,fc,e,t);a.layers=this.layers,this.add(a);const o=new Wn(hc,fc,e,t);o.layers=this.layers,this.add(o);const l=new Wn(hc,fc,e,t);l.layers=this.layers,this.add(l);const h=new Wn(hc,fc,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,o,l]=t;for(const h of t)this.remove(h);if(e===Qr)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===du)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,h,f]=this.children,p=e.getRenderTarget(),m=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const M=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,h),i.texture.generateMipmaps=M,e.setRenderTarget(i,5,r),e.render(t,f),e.setRenderTarget(p,m,g),e.xr.enabled=y,i.texture.needsPMREMUpdate=!0}}class Nh extends yn{constructor(e,t,i,r,s,a,o,l,h,f){e=e!==void 0?e:[],t=t!==void 0?t:oa,super(e,t,i,r,s,a,o,l,h,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class P2 extends ts{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(Pd("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===to?Vn:ar),this.texture=new Nh(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:mn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Nl(5,5,5),s=new Rs({name:"CubemapFromEquirect",uniforms:fu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ki,blending:ta});s.uniforms.tEquirect.value=t;const a=new Un(r,s),o=t.minFilter;return t.minFilter===Ts&&(t.minFilter=mn),new N2(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}const D0=new z,_3=new z,S3=new Rt;class Ua{constructor(e=new z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=D0.subVectors(i,t).cross(_3.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(D0),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||S3.getNormalMatrix(e),r=this.coplanarPoint(D0).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Do=new ci,xp=new z;class Ph{constructor(e=new Ua,t=new Ua,i=new Ua,r=new Ua,s=new Ua,a=new Ua){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Qr){const i=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],l=r[3],h=r[4],f=r[5],p=r[6],m=r[7],g=r[8],y=r[9],M=r[10],_=r[11],v=r[12],S=r[13],A=r[14],E=r[15];if(i[0].setComponents(l-s,m-h,_-g,E-v).normalize(),i[1].setComponents(l+s,m+h,_+g,E+v).normalize(),i[2].setComponents(l+a,m+f,_+y,E+S).normalize(),i[3].setComponents(l-a,m-f,_-y,E-S).normalize(),i[4].setComponents(l-o,m-p,_-M,E-A).normalize(),t===Qr)i[5].setComponents(l+o,m+p,_+M,E+A).normalize();else if(t===du)i[5].setComponents(o,p,M,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Do.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Do.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Do)}intersectsSprite(e){return Do.center.set(0,0,0),Do.radius=.7071067811865476,Do.applyMatrix4(e.matrixWorld),this.intersectsSphere(Do)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(xp.x=r.normal.x>0?e.max.x:e.min.x,xp.y=r.normal.y>0?e.max.y:e.min.y,xp.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(xp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function I2(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function A3(n,e){const t=e.isWebGL2,i=new WeakMap;function r(h,f){const p=h.array,m=h.usage,g=p.byteLength,y=n.createBuffer();n.bindBuffer(f,y),n.bufferData(f,p,m),h.onUploadCallback();let M;if(p instanceof Float32Array)M=n.FLOAT;else if(p instanceof Uint16Array)if(h.isFloat16BufferAttribute)if(t)M=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else M=n.UNSIGNED_SHORT;else if(p instanceof Int16Array)M=n.SHORT;else if(p instanceof Uint32Array)M=n.UNSIGNED_INT;else if(p instanceof Int32Array)M=n.INT;else if(p instanceof Int8Array)M=n.BYTE;else if(p instanceof Uint8Array)M=n.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)M=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:y,type:M,bytesPerElement:p.BYTES_PER_ELEMENT,version:h.version,size:g}}function s(h,f,p){const m=f.array,g=f._updateRange,y=f.updateRanges;if(n.bindBuffer(p,h),g.count===-1&&y.length===0&&n.bufferSubData(p,0,m),y.length!==0){for(let M=0,_=y.length;M<_;M++){const v=y[M];t?n.bufferSubData(p,v.start*m.BYTES_PER_ELEMENT,m,v.start,v.count):n.bufferSubData(p,v.start*m.BYTES_PER_ELEMENT,m.subarray(v.start,v.start+v.count))}f.clearUpdateRanges()}g.count!==-1&&(t?n.bufferSubData(p,g.offset*m.BYTES_PER_ELEMENT,m,g.offset,g.count):n.bufferSubData(p,g.offset*m.BYTES_PER_ELEMENT,m.subarray(g.offset,g.offset+g.count)),g.count=-1),f.onUploadCallback()}function a(h){return h.isInterleavedBufferAttribute&&(h=h.data),i.get(h)}function o(h){h.isInterleavedBufferAttribute&&(h=h.data);const f=i.get(h);f&&(n.deleteBuffer(f.buffer),i.delete(h))}function l(h,f){if(h.isGLBufferAttribute){const m=i.get(h);(!m||m.version<h.version)&&i.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const p=i.get(h);if(p===void 0)i.set(h,r(h,f));else if(p.version<h.version){if(p.size!==h.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(p.buffer,h,f),p.version=h.version}}return{get:a,remove:o,update:l}}class Ih extends Mt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),h=o+1,f=l+1,p=e/o,m=t/l,g=[],y=[],M=[],_=[];for(let v=0;v<f;v++){const S=v*m-a;for(let A=0;A<h;A++){const E=A*p-s;y.push(E,-S,0),M.push(0,0,1),_.push(A/o),_.push(1-v/l)}}for(let v=0;v<l;v++)for(let S=0;S<o;S++){const A=S+h*v,E=S+h*(v+1),N=S+1+h*(v+1),T=S+1+h*v;g.push(A,E,T),g.push(E,N,T)}this.setIndex(g),this.setAttribute("position",new Qe(y,3)),this.setAttribute("normal",new Qe(M,3)),this.setAttribute("uv",new Qe(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ih(e.width,e.height,e.widthSegments,e.heightSegments)}}var w3=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,M3=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,E3=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,C3=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,T3=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,b3=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,R3=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,N3=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,P3=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,I3=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,B3=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,L3=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,D3=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,k3=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,F3=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,U3=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,O3=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,j3=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,z3=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,G3=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,H3=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,V3=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,W3=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,X3=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,J3=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Y3=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,K3=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,q3=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Q3=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Z3=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,$3="gl_FragColor = linearToOutputTexel( gl_FragColor );",eF=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,tF=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,nF=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,iF=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,rF=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,sF=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,aF=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,oF=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,lF=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,cF=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,uF=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,dF=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,hF=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,fF=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,pF=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,mF=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,gF=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,vF=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,yF=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,xF=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_F=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,SF=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,AF=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,wF=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,MF=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,EF=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,CF=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,TF=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,bF=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,RF=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,NF=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,PF=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,IF=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,BF=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,LF=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,DF=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kF=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,FF=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,UF=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,OF=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,jF=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,zF=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,GF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,HF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,VF=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,WF=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,XF=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,JF=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,YF=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,KF=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,qF=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,QF=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ZF=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,$F=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,eU=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,tU=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,nU=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,iU=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,rU=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,sU=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,aU=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,oU=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,lU=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,cU=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,uU=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,dU=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hU=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,fU=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,pU=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,mU=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,gU=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,vU=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,yU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,xU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_U=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,SU=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const AU=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,wU=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,MU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,EU=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,CU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,TU=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bU=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,RU=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,NU=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,PU=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,IU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,BU=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,LU=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,DU=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,kU=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,FU=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UU=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OU=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jU=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,zU=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GU=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,HU=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,VU=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WU=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XU=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,JU=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YU=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KU=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qU=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,QU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ZU=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$U=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,eO=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tO=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ct={alphahash_fragment:w3,alphahash_pars_fragment:M3,alphamap_fragment:E3,alphamap_pars_fragment:C3,alphatest_fragment:T3,alphatest_pars_fragment:b3,aomap_fragment:R3,aomap_pars_fragment:N3,batching_pars_vertex:P3,batching_vertex:I3,begin_vertex:B3,beginnormal_vertex:L3,bsdfs:D3,iridescence_fragment:k3,bumpmap_pars_fragment:F3,clipping_planes_fragment:U3,clipping_planes_pars_fragment:O3,clipping_planes_pars_vertex:j3,clipping_planes_vertex:z3,color_fragment:G3,color_pars_fragment:H3,color_pars_vertex:V3,color_vertex:W3,common:X3,cube_uv_reflection_fragment:J3,defaultnormal_vertex:Y3,displacementmap_pars_vertex:K3,displacementmap_vertex:q3,emissivemap_fragment:Q3,emissivemap_pars_fragment:Z3,colorspace_fragment:$3,colorspace_pars_fragment:eF,envmap_fragment:tF,envmap_common_pars_fragment:nF,envmap_pars_fragment:iF,envmap_pars_vertex:rF,envmap_physical_pars_fragment:gF,envmap_vertex:sF,fog_vertex:aF,fog_pars_vertex:oF,fog_fragment:lF,fog_pars_fragment:cF,gradientmap_pars_fragment:uF,lightmap_fragment:dF,lightmap_pars_fragment:hF,lights_lambert_fragment:fF,lights_lambert_pars_fragment:pF,lights_pars_begin:mF,lights_toon_fragment:vF,lights_toon_pars_fragment:yF,lights_phong_fragment:xF,lights_phong_pars_fragment:_F,lights_physical_fragment:SF,lights_physical_pars_fragment:AF,lights_fragment_begin:wF,lights_fragment_maps:MF,lights_fragment_end:EF,logdepthbuf_fragment:CF,logdepthbuf_pars_fragment:TF,logdepthbuf_pars_vertex:bF,logdepthbuf_vertex:RF,map_fragment:NF,map_pars_fragment:PF,map_particle_fragment:IF,map_particle_pars_fragment:BF,metalnessmap_fragment:LF,metalnessmap_pars_fragment:DF,morphcolor_vertex:kF,morphnormal_vertex:FF,morphtarget_pars_vertex:UF,morphtarget_vertex:OF,normal_fragment_begin:jF,normal_fragment_maps:zF,normal_pars_fragment:GF,normal_pars_vertex:HF,normal_vertex:VF,normalmap_pars_fragment:WF,clearcoat_normal_fragment_begin:XF,clearcoat_normal_fragment_maps:JF,clearcoat_pars_fragment:YF,iridescence_pars_fragment:KF,opaque_fragment:qF,packing:QF,premultiplied_alpha_fragment:ZF,project_vertex:$F,dithering_fragment:eU,dithering_pars_fragment:tU,roughnessmap_fragment:nU,roughnessmap_pars_fragment:iU,shadowmap_pars_fragment:rU,shadowmap_pars_vertex:sU,shadowmap_vertex:aU,shadowmask_pars_fragment:oU,skinbase_vertex:lU,skinning_pars_vertex:cU,skinning_vertex:uU,skinnormal_vertex:dU,specularmap_fragment:hU,specularmap_pars_fragment:fU,tonemapping_fragment:pU,tonemapping_pars_fragment:mU,transmission_fragment:gU,transmission_pars_fragment:vU,uv_pars_fragment:yU,uv_pars_vertex:xU,uv_vertex:_U,worldpos_vertex:SU,background_vert:AU,background_frag:wU,backgroundCube_vert:MU,backgroundCube_frag:EU,cube_vert:CU,cube_frag:TU,depth_vert:bU,depth_frag:RU,distanceRGBA_vert:NU,distanceRGBA_frag:PU,equirect_vert:IU,equirect_frag:BU,linedashed_vert:LU,linedashed_frag:DU,meshbasic_vert:kU,meshbasic_frag:FU,meshlambert_vert:UU,meshlambert_frag:OU,meshmatcap_vert:jU,meshmatcap_frag:zU,meshnormal_vert:GU,meshnormal_frag:HU,meshphong_vert:VU,meshphong_frag:WU,meshphysical_vert:XU,meshphysical_frag:JU,meshtoon_vert:YU,meshtoon_frag:KU,points_vert:qU,points_frag:QU,shadow_vert:ZU,shadow_frag:$U,sprite_vert:eO,sprite_frag:tO},De={common:{diffuse:{value:new Ue(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rt},normalScale:{value:new Ae(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ue(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ue(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0},uvTransform:{value:new Rt}},sprite:{diffuse:{value:new Ue(16777215)},opacity:{value:1},center:{value:new Ae(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}}},Yr={basic:{uniforms:Ii([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.fog]),vertexShader:Ct.meshbasic_vert,fragmentShader:Ct.meshbasic_frag},lambert:{uniforms:Ii([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.fog,De.lights,{emissive:{value:new Ue(0)}}]),vertexShader:Ct.meshlambert_vert,fragmentShader:Ct.meshlambert_frag},phong:{uniforms:Ii([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.fog,De.lights,{emissive:{value:new Ue(0)},specular:{value:new Ue(1118481)},shininess:{value:30}}]),vertexShader:Ct.meshphong_vert,fragmentShader:Ct.meshphong_frag},standard:{uniforms:Ii([De.common,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.roughnessmap,De.metalnessmap,De.fog,De.lights,{emissive:{value:new Ue(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ct.meshphysical_vert,fragmentShader:Ct.meshphysical_frag},toon:{uniforms:Ii([De.common,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.gradientmap,De.fog,De.lights,{emissive:{value:new Ue(0)}}]),vertexShader:Ct.meshtoon_vert,fragmentShader:Ct.meshtoon_frag},matcap:{uniforms:Ii([De.common,De.bumpmap,De.normalmap,De.displacementmap,De.fog,{matcap:{value:null}}]),vertexShader:Ct.meshmatcap_vert,fragmentShader:Ct.meshmatcap_frag},points:{uniforms:Ii([De.points,De.fog]),vertexShader:Ct.points_vert,fragmentShader:Ct.points_frag},dashed:{uniforms:Ii([De.common,De.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ct.linedashed_vert,fragmentShader:Ct.linedashed_frag},depth:{uniforms:Ii([De.common,De.displacementmap]),vertexShader:Ct.depth_vert,fragmentShader:Ct.depth_frag},normal:{uniforms:Ii([De.common,De.bumpmap,De.normalmap,De.displacementmap,{opacity:{value:1}}]),vertexShader:Ct.meshnormal_vert,fragmentShader:Ct.meshnormal_frag},sprite:{uniforms:Ii([De.sprite,De.fog]),vertexShader:Ct.sprite_vert,fragmentShader:Ct.sprite_frag},background:{uniforms:{uvTransform:{value:new Rt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ct.background_vert,fragmentShader:Ct.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ct.backgroundCube_vert,fragmentShader:Ct.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ct.cube_vert,fragmentShader:Ct.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ct.equirect_vert,fragmentShader:Ct.equirect_frag},distanceRGBA:{uniforms:Ii([De.common,De.displacementmap,{referencePosition:{value:new z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ct.distanceRGBA_vert,fragmentShader:Ct.distanceRGBA_frag},shadow:{uniforms:Ii([De.lights,De.fog,{color:{value:new Ue(0)},opacity:{value:1}}]),vertexShader:Ct.shadow_vert,fragmentShader:Ct.shadow_frag}};Yr.physical={uniforms:Ii([Yr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rt},clearcoatNormalScale:{value:new Ae(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rt},sheen:{value:0},sheenColor:{value:new Ue(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rt},transmissionSamplerSize:{value:new Ae},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rt},attenuationDistance:{value:0},attenuationColor:{value:new Ue(0)},specularColor:{value:new Ue(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rt},anisotropyVector:{value:new Ae},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Rt}}]),vertexShader:Ct.meshphysical_vert,fragmentShader:Ct.meshphysical_frag};const _p={r:0,b:0,g:0};function nO(n,e,t,i,r,s,a){const o=new Ue(0);let l=s===!0?0:1,h,f,p=null,m=0,g=null;function y(_,v){let S=!1,A=v.isScene===!0?v.background:null;A&&A.isTexture&&(A=(v.backgroundBlurriness>0?t:e).get(A)),A===null?M(o,l):A&&A.isColor&&(M(A,1),S=!0);const E=n.xr.getEnvironmentBlendMode();E==="additive"?i.buffers.color.setClear(0,0,0,1,a):E==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||S)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),A&&(A.isCubeTexture||A.mapping===_u)?(f===void 0&&(f=new Un(new Nl(1,1,1),new Rs({name:"BackgroundCubeMaterial",uniforms:fu(Yr.backgroundCube.uniforms),vertexShader:Yr.backgroundCube.vertexShader,fragmentShader:Yr.backgroundCube.fragmentShader,side:ki,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(N,T,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),f.material.uniforms.envMap.value=A,f.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,f.material.toneMapped=Jt.getTransfer(A.colorSpace)!==en,(p!==A||m!==A.version||g!==n.toneMapping)&&(f.material.needsUpdate=!0,p=A,m=A.version,g=n.toneMapping),f.layers.enableAll(),_.unshift(f,f.geometry,f.material,0,0,null)):A&&A.isTexture&&(h===void 0&&(h=new Un(new Ih(2,2),new Rs({name:"BackgroundMaterial",uniforms:fu(Yr.background.uniforms),vertexShader:Yr.background.vertexShader,fragmentShader:Yr.background.fragmentShader,side:Cs,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=A,h.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,h.material.toneMapped=Jt.getTransfer(A.colorSpace)!==en,A.matrixAutoUpdate===!0&&A.updateMatrix(),h.material.uniforms.uvTransform.value.copy(A.matrix),(p!==A||m!==A.version||g!==n.toneMapping)&&(h.material.needsUpdate=!0,p=A,m=A.version,g=n.toneMapping),h.layers.enableAll(),_.unshift(h,h.geometry,h.material,0,0,null))}function M(_,v){_.getRGB(_p,b2(n)),i.buffers.color.setClear(_p.r,_p.g,_p.b,v,a)}return{getClearColor:function(){return o},setClearColor:function(_,v=1){o.set(_),l=v,M(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,M(o,l)},render:y}}function iO(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},l=_(null);let h=l,f=!1;function p(V,K,q,ue,U){let j=!1;if(a){const W=M(ue,q,K);h!==W&&(h=W,g(h.object)),j=v(V,ue,q,U),j&&S(V,ue,q,U)}else{const W=K.wireframe===!0;(h.geometry!==ue.id||h.program!==q.id||h.wireframe!==W)&&(h.geometry=ue.id,h.program=q.id,h.wireframe=W,j=!0)}U!==null&&t.update(U,n.ELEMENT_ARRAY_BUFFER),(j||f)&&(f=!1,L(V,K,q,ue),U!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(U).buffer))}function m(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function g(V){return i.isWebGL2?n.bindVertexArray(V):s.bindVertexArrayOES(V)}function y(V){return i.isWebGL2?n.deleteVertexArray(V):s.deleteVertexArrayOES(V)}function M(V,K,q){const ue=q.wireframe===!0;let U=o[V.id];U===void 0&&(U={},o[V.id]=U);let j=U[K.id];j===void 0&&(j={},U[K.id]=j);let W=j[ue];return W===void 0&&(W=_(m()),j[ue]=W),W}function _(V){const K=[],q=[],ue=[];for(let U=0;U<r;U++)K[U]=0,q[U]=0,ue[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:K,enabledAttributes:q,attributeDivisors:ue,object:V,attributes:{},index:null}}function v(V,K,q,ue){const U=h.attributes,j=K.attributes;let W=0;const Y=q.getAttributes();for(const re in Y)if(Y[re].location>=0){const oe=U[re];let ge=j[re];if(ge===void 0&&(re==="instanceMatrix"&&V.instanceMatrix&&(ge=V.instanceMatrix),re==="instanceColor"&&V.instanceColor&&(ge=V.instanceColor)),oe===void 0||oe.attribute!==ge||ge&&oe.data!==ge.data)return!0;W++}return h.attributesNum!==W||h.index!==ue}function S(V,K,q,ue){const U={},j=K.attributes;let W=0;const Y=q.getAttributes();for(const re in Y)if(Y[re].location>=0){let oe=j[re];oe===void 0&&(re==="instanceMatrix"&&V.instanceMatrix&&(oe=V.instanceMatrix),re==="instanceColor"&&V.instanceColor&&(oe=V.instanceColor));const ge={};ge.attribute=oe,oe&&oe.data&&(ge.data=oe.data),U[re]=ge,W++}h.attributes=U,h.attributesNum=W,h.index=ue}function A(){const V=h.newAttributes;for(let K=0,q=V.length;K<q;K++)V[K]=0}function E(V){N(V,0)}function N(V,K){const q=h.newAttributes,ue=h.enabledAttributes,U=h.attributeDivisors;q[V]=1,ue[V]===0&&(n.enableVertexAttribArray(V),ue[V]=1),U[V]!==K&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,K),U[V]=K)}function T(){const V=h.newAttributes,K=h.enabledAttributes;for(let q=0,ue=K.length;q<ue;q++)K[q]!==V[q]&&(n.disableVertexAttribArray(q),K[q]=0)}function P(V,K,q,ue,U,j,W){W===!0?n.vertexAttribIPointer(V,K,q,U,j):n.vertexAttribPointer(V,K,q,ue,U,j)}function L(V,K,q,ue){if(i.isWebGL2===!1&&(V.isInstancedMesh||ue.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;A();const U=ue.attributes,j=q.getAttributes(),W=K.defaultAttributeValues;for(const Y in j){const re=j[Y];if(re.location>=0){let Q=U[Y];if(Q===void 0&&(Y==="instanceMatrix"&&V.instanceMatrix&&(Q=V.instanceMatrix),Y==="instanceColor"&&V.instanceColor&&(Q=V.instanceColor)),Q!==void 0){const oe=Q.normalized,ge=Q.itemSize,Te=t.get(Q);if(Te===void 0)continue;const ce=Te.buffer,Se=Te.type,Ce=Te.bytesPerElement,be=i.isWebGL2===!0&&(Se===n.INT||Se===n.UNSIGNED_INT||Q.gpuType===SS);if(Q.isInterleavedBufferAttribute){const Pe=Q.data,H=Pe.stride,ve=Q.offset;if(Pe.isInstancedInterleavedBuffer){for(let pe=0;pe<re.locationSize;pe++)N(re.location+pe,Pe.meshPerAttribute);V.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=Pe.meshPerAttribute*Pe.count)}else for(let pe=0;pe<re.locationSize;pe++)E(re.location+pe);n.bindBuffer(n.ARRAY_BUFFER,ce);for(let pe=0;pe<re.locationSize;pe++)P(re.location+pe,ge/re.locationSize,Se,oe,H*Ce,(ve+ge/re.locationSize*pe)*Ce,be)}else{if(Q.isInstancedBufferAttribute){for(let Pe=0;Pe<re.locationSize;Pe++)N(re.location+Pe,Q.meshPerAttribute);V.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let Pe=0;Pe<re.locationSize;Pe++)E(re.location+Pe);n.bindBuffer(n.ARRAY_BUFFER,ce);for(let Pe=0;Pe<re.locationSize;Pe++)P(re.location+Pe,ge/re.locationSize,Se,oe,ge*Ce,ge/re.locationSize*Pe*Ce,be)}}else if(W!==void 0){const oe=W[Y];if(oe!==void 0)switch(oe.length){case 2:n.vertexAttrib2fv(re.location,oe);break;case 3:n.vertexAttrib3fv(re.location,oe);break;case 4:n.vertexAttrib4fv(re.location,oe);break;default:n.vertexAttrib1fv(re.location,oe)}}}}T()}function R(){X();for(const V in o){const K=o[V];for(const q in K){const ue=K[q];for(const U in ue)y(ue[U].object),delete ue[U];delete K[q]}delete o[V]}}function b(V){if(o[V.id]===void 0)return;const K=o[V.id];for(const q in K){const ue=K[q];for(const U in ue)y(ue[U].object),delete ue[U];delete K[q]}delete o[V.id]}function D(V){for(const K in o){const q=o[K];if(q[V.id]===void 0)continue;const ue=q[V.id];for(const U in ue)y(ue[U].object),delete ue[U];delete q[V.id]}}function X(){$(),f=!0,h!==l&&(h=l,g(h.object))}function $(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:p,reset:X,resetDefaultState:$,dispose:R,releaseStatesOfGeometry:b,releaseStatesOfProgram:D,initAttributes:A,enableAttribute:E,disableUnusedAttributes:T}}function rO(n,e,t,i){const r=i.isWebGL2;let s;function a(f){s=f}function o(f,p){n.drawArrays(s,f,p),t.update(p,s,1)}function l(f,p,m){if(m===0)return;let g,y;if(r)g=n,y="drawArraysInstanced";else if(g=e.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",g===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[y](s,f,p,m),t.update(p,s,m)}function h(f,p,m){if(m===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let y=0;y<m;y++)this.render(f[y],p[y]);else{g.multiDrawArraysWEBGL(s,f,0,p,0,m);let y=0;for(let M=0;M<m;M++)y+=p[M];t.update(y,s,1)}}this.setMode=a,this.render=o,this.renderInstances=l,this.renderMultiDraw=h}function sO(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const h=a||e.has("WEBGL_draw_buffers"),f=t.logarithmicDepthBuffer===!0,p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),M=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),A=m>0,E=a||e.has("OES_texture_float"),N=A&&E,T=a?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:h,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:f,maxTextures:p,maxVertexTextures:m,maxTextureSize:g,maxCubemapSize:y,maxAttributes:M,maxVertexUniforms:_,maxVaryings:v,maxFragmentUniforms:S,vertexTextures:A,floatFragmentTextures:E,floatVertexTextures:N,maxSamples:T}}function aO(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new Ua,o=new Rt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m){const g=p.length!==0||m||i!==0||r;return r=m,i=p.length,g},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,m){t=f(p,m,0)},this.setState=function(p,m,g){const y=p.clippingPlanes,M=p.clipIntersection,_=p.clipShadows,v=n.get(p);if(!r||y===null||y.length===0||s&&!_)s?f(null):h();else{const S=s?0:i,A=S*4;let E=v.clippingState||null;l.value=E,E=f(y,m,A,g);for(let N=0;N!==A;++N)E[N]=t[N];v.clippingState=E,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=S}};function h(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(p,m,g,y){const M=p!==null?p.length:0;let _=null;if(M!==0){if(_=l.value,y!==!0||_===null){const v=g+M*4,S=m.matrixWorldInverse;o.getNormalMatrix(S),(_===null||_.length<v)&&(_=new Float32Array(v));for(let A=0,E=g;A!==M;++A,E+=4)a.copy(p[A]).applyMatrix4(S,o),a.normal.toArray(_,E),_[E+3]=a.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,_}}function oO(n){let e=new WeakMap;function t(a,o){return o===ih?a.mapping=oa:o===rh&&(a.mapping=ao),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===ih||o===rh)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const h=new P2(l.height/2);return h.fromEquirectangularTexture(n,a),e.set(a,h),a.addEventListener("dispose",r),t(h.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Au extends Rh{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,a=s+h*this.view.width,o-=f*this.view.offsetY,l=o-f*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Uc=4,XM=[.125,.215,.35,.446,.526,.582],qo=20,k0=new Au,JM=new Ue;let F0=null,U0=0,O0=0;const Yo=(1+Math.sqrt(5))/2,pc=1/Yo,YM=[new z(1,1,1),new z(-1,1,1),new z(1,1,-1),new z(-1,1,-1),new z(0,Yo,pc),new z(0,Yo,-pc),new z(pc,0,Yo),new z(-pc,0,Yo),new z(Yo,pc,0),new z(-Yo,pc,0)];class r_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){F0=this._renderer.getRenderTarget(),U0=this._renderer.getActiveCubeFace(),O0=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=QM(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=qM(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(F0,U0,O0),e.scissorTest=!1,Sp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===oa||e.mapping===ao?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),F0=this._renderer.getRenderTarget(),U0=this._renderer.getActiveCubeFace(),O0=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:mn,minFilter:mn,generateMipmaps:!1,type:cu,format:Li,colorSpace:bs,depthBuffer:!1},r=KM(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=KM(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=lO(s)),this._blurMaterial=cO(s,e,t)}return r}_compileMaterial(e){const t=new Un(this._lodPlanes[0],e);this._renderer.compile(t,k0)}_sceneToCubeUV(e,t,i,r){const o=new Wn(90,1,t,i),l=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],f=this._renderer,p=f.autoClear,m=f.toneMapping;f.getClearColor(JM),f.toneMapping=ws,f.autoClear=!1;const g=new lr({name:"PMREM.Background",side:ki,depthWrite:!1,depthTest:!1}),y=new Un(new Nl,g);let M=!1;const _=e.background;_?_.isColor&&(g.color.copy(_),e.background=null,M=!0):(g.color.copy(JM),M=!0);for(let v=0;v<6;v++){const S=v%3;S===0?(o.up.set(0,l[v],0),o.lookAt(h[v],0,0)):S===1?(o.up.set(0,0,l[v]),o.lookAt(0,h[v],0)):(o.up.set(0,l[v],0),o.lookAt(0,0,h[v]));const A=this._cubeSize;Sp(r,S*A,v>2?A:0,A,A),f.setRenderTarget(r),M&&f.render(y,o),f.render(e,o)}y.geometry.dispose(),y.material.dispose(),f.toneMapping=m,f.autoClear=p,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===oa||e.mapping===ao;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=QM()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=qM());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Un(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;Sp(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,k0)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=YM[(r-1)%YM.length];this._blur(e,r-1,r,s,a)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,h=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,p=new Un(this._lodPlanes[r],h),m=h.uniforms,g=this._sizeLods[i]-1,y=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*qo-1),M=s/y,_=isFinite(s)?1+Math.floor(f*M):qo;_>qo&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${qo}`);const v=[];let S=0;for(let P=0;P<qo;++P){const L=P/M,R=Math.exp(-L*L/2);v.push(R),P===0?S+=R:P<_&&(S+=2*R)}for(let P=0;P<v.length;P++)v[P]=v[P]/S;m.envMap.value=e.texture,m.samples.value=_,m.weights.value=v,m.latitudinal.value=a==="latitudinal",o&&(m.poleAxis.value=o);const{_lodMax:A}=this;m.dTheta.value=y,m.mipInt.value=A-i;const E=this._sizeLods[r],N=3*E*(r>A-Uc?r-A+Uc:0),T=4*(this._cubeSize-E);Sp(t,N,T,3*E,2*E),l.setRenderTarget(t),l.render(p,k0)}}function lO(n){const e=[],t=[],i=[];let r=n;const s=n-Uc+1+XM.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>n-Uc?l=XM[a-n+Uc-1]:a===0&&(l=0),i.push(l);const h=1/(o-2),f=-h,p=1+h,m=[f,f,p,f,p,p,f,f,p,p,f,p],g=6,y=6,M=3,_=2,v=1,S=new Float32Array(M*y*g),A=new Float32Array(_*y*g),E=new Float32Array(v*y*g);for(let T=0;T<g;T++){const P=T%3*2/3-1,L=T>2?0:-1,R=[P,L,0,P+2/3,L,0,P+2/3,L+1,0,P,L,0,P+2/3,L+1,0,P,L+1,0];S.set(R,M*y*T),A.set(m,_*y*T);const b=[T,T,T,T,T,T];E.set(b,v*y*T)}const N=new Mt;N.setAttribute("position",new Ut(S,M)),N.setAttribute("uv",new Ut(A,_)),N.setAttribute("faceIndex",new Ut(E,v)),e.push(N),r>Uc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function KM(n,e,t){const i=new ts(n,e,t);return i.texture.mapping=_u,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Sp(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function cO(n,e,t){const i=new Float32Array(qo),r=new z(0,1,0);return new Rs({name:"SphericalGaussianBlur",defines:{n:qo,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:FS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ta,depthTest:!1,depthWrite:!1})}function qM(){return new Rs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:FS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ta,depthTest:!1,depthWrite:!1})}function QM(){return new Rs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:FS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ta,depthTest:!1,depthWrite:!1})}function FS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function uO(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,h=l===ih||l===rh,f=l===oa||l===ao;if(h||f)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let p=e.get(o);return t===null&&(t=new r_(n)),p=h?t.fromEquirectangular(o,p):t.fromCubemap(o,p),e.set(o,p),p.texture}else{if(e.has(o))return e.get(o).texture;{const p=o.image;if(h&&p&&p.height>0||f&&p&&r(p)){t===null&&(t=new r_(n));const m=h?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,m),o.addEventListener("dispose",s),m.texture}else return null}}}return o}function r(o){let l=0;const h=6;for(let f=0;f<h;f++)o[f]!==void 0&&l++;return l===h}function s(o){const l=o.target;l.removeEventListener("dispose",s);const h=e.get(l);h!==void 0&&(e.delete(l),h.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function dO(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function hO(n,e,t,i){const r={},s=new WeakMap;function a(p){const m=p.target;m.index!==null&&e.remove(m.index);for(const y in m.attributes)e.remove(m.attributes[y]);for(const y in m.morphAttributes){const M=m.morphAttributes[y];for(let _=0,v=M.length;_<v;_++)e.remove(M[_])}m.removeEventListener("dispose",a),delete r[m.id];const g=s.get(m);g&&(e.remove(g),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function o(p,m){return r[m.id]===!0||(m.addEventListener("dispose",a),r[m.id]=!0,t.memory.geometries++),m}function l(p){const m=p.attributes;for(const y in m)e.update(m[y],n.ARRAY_BUFFER);const g=p.morphAttributes;for(const y in g){const M=g[y];for(let _=0,v=M.length;_<v;_++)e.update(M[_],n.ARRAY_BUFFER)}}function h(p){const m=[],g=p.index,y=p.attributes.position;let M=0;if(g!==null){const S=g.array;M=g.version;for(let A=0,E=S.length;A<E;A+=3){const N=S[A+0],T=S[A+1],P=S[A+2];m.push(N,T,T,P,P,N)}}else if(y!==void 0){const S=y.array;M=y.version;for(let A=0,E=S.length/3-1;A<E;A+=3){const N=A+0,T=A+1,P=A+2;m.push(N,T,T,P,P,N)}}else return;const _=new(M2(m)?kS:DS)(m,1);_.version=M;const v=s.get(p);v&&e.remove(v),s.set(p,_)}function f(p){const m=s.get(p);if(m){const g=p.index;g!==null&&m.version<g.version&&h(p)}else h(p);return s.get(p)}return{get:o,update:l,getWireframeAttribute:f}}function fO(n,e,t,i){const r=i.isWebGL2;let s;function a(g){s=g}let o,l;function h(g){o=g.type,l=g.bytesPerElement}function f(g,y){n.drawElements(s,y,o,g*l),t.update(y,s,1)}function p(g,y,M){if(M===0)return;let _,v;if(r)_=n,v="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[v](s,y,o,g*l,M),t.update(y,s,M)}function m(g,y,M){if(M===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let v=0;v<M;v++)this.render(g[v]/l,y[v]);else{_.multiDrawElementsWEBGL(s,y,0,o,g,0,M);let v=0;for(let S=0;S<M;S++)v+=y[S];t.update(v,s,1)}}this.setMode=a,this.setIndex=h,this.render=f,this.renderInstances=p,this.renderMultiDraw=m}function pO(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function mO(n,e){return n[0]-e[0]}function gO(n,e){return Math.abs(e[1])-Math.abs(n[1])}function vO(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,a=new Yt,o=[];for(let h=0;h<8;h++)o[h]=[h,0];function l(h,f,p){const m=h.morphTargetInfluences;if(e.isWebGL2===!0){const g=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,y=g!==void 0?g.length:0;let M=s.get(f);if(M===void 0||M.count!==y){let V=function(){X.dispose(),s.delete(f),f.removeEventListener("dispose",V)};M!==void 0&&M.texture.dispose();const S=f.morphAttributes.position!==void 0,A=f.morphAttributes.normal!==void 0,E=f.morphAttributes.color!==void 0,N=f.morphAttributes.position||[],T=f.morphAttributes.normal||[],P=f.morphAttributes.color||[];let L=0;S===!0&&(L=1),A===!0&&(L=2),E===!0&&(L=3);let R=f.attributes.position.count*L,b=1;R>e.maxTextureSize&&(b=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const D=new Float32Array(R*b*4*y),X=new Ag(D,R,b,y);X.type=qr,X.needsUpdate=!0;const $=L*4;for(let K=0;K<y;K++){const q=N[K],ue=T[K],U=P[K],j=R*b*4*K;for(let W=0;W<q.count;W++){const Y=W*$;S===!0&&(a.fromBufferAttribute(q,W),D[j+Y+0]=a.x,D[j+Y+1]=a.y,D[j+Y+2]=a.z,D[j+Y+3]=0),A===!0&&(a.fromBufferAttribute(ue,W),D[j+Y+4]=a.x,D[j+Y+5]=a.y,D[j+Y+6]=a.z,D[j+Y+7]=0),E===!0&&(a.fromBufferAttribute(U,W),D[j+Y+8]=a.x,D[j+Y+9]=a.y,D[j+Y+10]=a.z,D[j+Y+11]=U.itemSize===4?a.w:1)}}M={count:y,texture:X,size:new Ae(R,b)},s.set(f,M),f.addEventListener("dispose",V)}let _=0;for(let S=0;S<m.length;S++)_+=m[S];const v=f.morphTargetsRelative?1:1-_;p.getUniforms().setValue(n,"morphTargetBaseInfluence",v),p.getUniforms().setValue(n,"morphTargetInfluences",m),p.getUniforms().setValue(n,"morphTargetsTexture",M.texture,t),p.getUniforms().setValue(n,"morphTargetsTextureSize",M.size)}else{const g=m===void 0?0:m.length;let y=i[f.id];if(y===void 0||y.length!==g){y=[];for(let A=0;A<g;A++)y[A]=[A,0];i[f.id]=y}for(let A=0;A<g;A++){const E=y[A];E[0]=A,E[1]=m[A]}y.sort(gO);for(let A=0;A<8;A++)A<g&&y[A][1]?(o[A][0]=y[A][0],o[A][1]=y[A][1]):(o[A][0]=Number.MAX_SAFE_INTEGER,o[A][1]=0);o.sort(mO);const M=f.morphAttributes.position,_=f.morphAttributes.normal;let v=0;for(let A=0;A<8;A++){const E=o[A],N=E[0],T=E[1];N!==Number.MAX_SAFE_INTEGER&&T?(M&&f.getAttribute("morphTarget"+A)!==M[N]&&f.setAttribute("morphTarget"+A,M[N]),_&&f.getAttribute("morphNormal"+A)!==_[N]&&f.setAttribute("morphNormal"+A,_[N]),r[A]=T,v+=T):(M&&f.hasAttribute("morphTarget"+A)===!0&&f.deleteAttribute("morphTarget"+A),_&&f.hasAttribute("morphNormal"+A)===!0&&f.deleteAttribute("morphNormal"+A),r[A]=0)}const S=f.morphTargetsRelative?1:1-v;p.getUniforms().setValue(n,"morphTargetBaseInfluence",S),p.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function yO(n,e,t,i){let r=new WeakMap;function s(l){const h=i.render.frame,f=l.geometry,p=e.get(l,f);if(r.get(p)!==h&&(e.update(p),r.set(p,h)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==h&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,h))),l.isSkinnedMesh){const m=l.skeleton;r.get(m)!==h&&(m.update(),r.set(m,h))}return p}function a(){r=new WeakMap}function o(l){const h=l.target;h.removeEventListener("dispose",o),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:s,dispose:a}}class US extends yn{constructor(e,t,i,r,s,a,o,l,h,f){if(f=f!==void 0?f:eo,f!==eo&&f!==Al)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===eo&&(i=Ks),i===void 0&&f===Al&&(i=$a),super(null,r,s,a,o,l,f,i,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Mn,this.minFilter=l!==void 0?l:Mn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const B2=new yn,L2=new US(1,1);L2.compareFunction=PS;const D2=new Ag,k2=new LS,F2=new Nh,ZM=[],$M=[],eE=new Float32Array(16),tE=new Float32Array(9),nE=new Float32Array(4);function wu(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=ZM[r];if(s===void 0&&(s=new Float32Array(r),ZM[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function qn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Qn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function wg(n,e){let t=$M[e];t===void 0&&(t=new Int32Array(e),$M[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function xO(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function _O(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qn(t,e))return;n.uniform2fv(this.addr,e),Qn(t,e)}}function SO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(qn(t,e))return;n.uniform3fv(this.addr,e),Qn(t,e)}}function AO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qn(t,e))return;n.uniform4fv(this.addr,e),Qn(t,e)}}function wO(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(qn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Qn(t,e)}else{if(qn(t,i))return;nE.set(i),n.uniformMatrix2fv(this.addr,!1,nE),Qn(t,i)}}function MO(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(qn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Qn(t,e)}else{if(qn(t,i))return;tE.set(i),n.uniformMatrix3fv(this.addr,!1,tE),Qn(t,i)}}function EO(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(qn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Qn(t,e)}else{if(qn(t,i))return;eE.set(i),n.uniformMatrix4fv(this.addr,!1,eE),Qn(t,i)}}function CO(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function TO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qn(t,e))return;n.uniform2iv(this.addr,e),Qn(t,e)}}function bO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(qn(t,e))return;n.uniform3iv(this.addr,e),Qn(t,e)}}function RO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qn(t,e))return;n.uniform4iv(this.addr,e),Qn(t,e)}}function NO(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function PO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(qn(t,e))return;n.uniform2uiv(this.addr,e),Qn(t,e)}}function IO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(qn(t,e))return;n.uniform3uiv(this.addr,e),Qn(t,e)}}function BO(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(qn(t,e))return;n.uniform4uiv(this.addr,e),Qn(t,e)}}function LO(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?L2:B2;t.setTexture2D(e||s,r)}function DO(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||k2,r)}function kO(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||F2,r)}function FO(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||D2,r)}function UO(n){switch(n){case 5126:return xO;case 35664:return _O;case 35665:return SO;case 35666:return AO;case 35674:return wO;case 35675:return MO;case 35676:return EO;case 5124:case 35670:return CO;case 35667:case 35671:return TO;case 35668:case 35672:return bO;case 35669:case 35673:return RO;case 5125:return NO;case 36294:return PO;case 36295:return IO;case 36296:return BO;case 35678:case 36198:case 36298:case 36306:case 35682:return LO;case 35679:case 36299:case 36307:return DO;case 35680:case 36300:case 36308:case 36293:return kO;case 36289:case 36303:case 36311:case 36292:return FO}}function OO(n,e){n.uniform1fv(this.addr,e)}function jO(n,e){const t=wu(e,this.size,2);n.uniform2fv(this.addr,t)}function zO(n,e){const t=wu(e,this.size,3);n.uniform3fv(this.addr,t)}function GO(n,e){const t=wu(e,this.size,4);n.uniform4fv(this.addr,t)}function HO(n,e){const t=wu(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function VO(n,e){const t=wu(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function WO(n,e){const t=wu(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function XO(n,e){n.uniform1iv(this.addr,e)}function JO(n,e){n.uniform2iv(this.addr,e)}function YO(n,e){n.uniform3iv(this.addr,e)}function KO(n,e){n.uniform4iv(this.addr,e)}function qO(n,e){n.uniform1uiv(this.addr,e)}function QO(n,e){n.uniform2uiv(this.addr,e)}function ZO(n,e){n.uniform3uiv(this.addr,e)}function $O(n,e){n.uniform4uiv(this.addr,e)}function ej(n,e,t){const i=this.cache,r=e.length,s=wg(t,r);qn(i,s)||(n.uniform1iv(this.addr,s),Qn(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||B2,s[a])}function tj(n,e,t){const i=this.cache,r=e.length,s=wg(t,r);qn(i,s)||(n.uniform1iv(this.addr,s),Qn(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||k2,s[a])}function nj(n,e,t){const i=this.cache,r=e.length,s=wg(t,r);qn(i,s)||(n.uniform1iv(this.addr,s),Qn(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||F2,s[a])}function ij(n,e,t){const i=this.cache,r=e.length,s=wg(t,r);qn(i,s)||(n.uniform1iv(this.addr,s),Qn(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||D2,s[a])}function rj(n){switch(n){case 5126:return OO;case 35664:return jO;case 35665:return zO;case 35666:return GO;case 35674:return HO;case 35675:return VO;case 35676:return WO;case 5124:case 35670:return XO;case 35667:case 35671:return JO;case 35668:case 35672:return YO;case 35669:case 35673:return KO;case 5125:return qO;case 36294:return QO;case 36295:return ZO;case 36296:return $O;case 35678:case 36198:case 36298:case 36306:case 35682:return ej;case 35679:case 36299:case 36307:return tj;case 35680:case 36300:case 36308:case 36293:return nj;case 36289:case 36303:case 36311:case 36292:return ij}}class sj{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=UO(t.type)}}class aj{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=rj(t.type)}}class oj{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const j0=/(\w+)(\])?(\[|\.)?/g;function iE(n,e){n.seq.push(e),n.map[e.id]=e}function lj(n,e,t){const i=n.name,r=i.length;for(j0.lastIndex=0;;){const s=j0.exec(i),a=j0.lastIndex;let o=s[1];const l=s[2]==="]",h=s[3];if(l&&(o=o|0),h===void 0||h==="["&&a+2===r){iE(t,h===void 0?new sj(o,n,e):new aj(o,n,e));break}else{let p=t.map[o];p===void 0&&(p=new oj(o),iE(t,p)),t=p}}}class vm{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);lj(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function rE(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const cj=37297;let uj=0;function dj(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}function hj(n){const e=Jt.getPrimaries(Jt.workingColorSpace),t=Jt.getPrimaries(n);let i;switch(e===t?i="":e===ch&&t===lh?i="LinearDisplayP3ToLinearSRGB":e===lh&&t===ch&&(i="LinearSRGBToLinearDisplayP3"),n){case bs:case Th:return[i,"LinearTransferOETF"];case Vn:case Sg:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function sE(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+dj(n.getShaderSource(e),a)}else return r}function fj(n,e){const t=hj(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function pj(n,e){let t;switch(e){case qR:t="Linear";break;case QR:t="Reinhard";break;case ZR:t="OptimizedCineon";break;case _S:t="ACESFilmic";break;case e2:t="AgX";break;case $R:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function mj(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Oc).join(`
`)}function gj(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Oc).join(`
`)}function vj(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function yj(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function Oc(n){return n!==""}function aE(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function oE(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const xj=/^[ \t]*#include +<([\w\d./]+)>/gm;function s_(n){return n.replace(xj,Sj)}const _j=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Sj(n,e){let t=Ct[e];if(t===void 0){const i=_j.get(e);if(i!==void 0)t=Ct[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return s_(t)}const Aj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function lE(n){return n.replace(Aj,wj)}function wj(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function cE(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Mj(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===gg?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Rd?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Wr&&(e="SHADOWMAP_TYPE_VSM"),e}function Ej(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case oa:case ao:e="ENVMAP_TYPE_CUBE";break;case _u:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Cj(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ao:e="ENVMAP_MODE_REFRACTION";break}return e}function Tj(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Ch:e="ENVMAP_BLENDING_MULTIPLY";break;case YR:e="ENVMAP_BLENDING_MIX";break;case KR:e="ENVMAP_BLENDING_ADD";break}return e}function bj(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Rj(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=Mj(t),h=Ej(t),f=Cj(t),p=Tj(t),m=bj(t),g=t.isWebGL2?"":mj(t),y=gj(t),M=vj(s),_=r.createProgram();let v,S,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(Oc).join(`
`),v.length>0&&(v+=`
`),S=[g,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(Oc).join(`
`),S.length>0&&(S+=`
`)):(v=[cE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Oc).join(`
`),S=[g,cE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",t.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ws?"#define TONE_MAPPING":"",t.toneMapping!==ws?Ct.tonemapping_pars_fragment:"",t.toneMapping!==ws?pj("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ct.colorspace_pars_fragment,fj("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Oc).join(`
`)),a=s_(a),a=aE(a,t),a=oE(a,t),o=s_(o),o=aE(o,t),o=oE(o,t),a=lE(a),o=lE(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,v=[y,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,S=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===n_?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===n_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const E=A+v+a,N=A+S+o,T=rE(r,r.VERTEX_SHADER,E),P=rE(r,r.FRAGMENT_SHADER,N);r.attachShader(_,T),r.attachShader(_,P),t.index0AttributeName!==void 0?r.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_);function L(X){if(n.debug.checkShaderErrors){const $=r.getProgramInfoLog(_).trim(),V=r.getShaderInfoLog(T).trim(),K=r.getShaderInfoLog(P).trim();let q=!0,ue=!0;if(r.getProgramParameter(_,r.LINK_STATUS)===!1)if(q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,_,T,P);else{const U=sE(r,T,"vertex"),j=sE(r,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+`

Program Info Log: `+$+`
`+U+`
`+j)}else $!==""?console.warn("THREE.WebGLProgram: Program Info Log:",$):(V===""||K==="")&&(ue=!1);ue&&(X.diagnostics={runnable:q,programLog:$,vertexShader:{log:V,prefix:v},fragmentShader:{log:K,prefix:S}})}r.deleteShader(T),r.deleteShader(P),R=new vm(r,_),b=yj(r,_)}let R;this.getUniforms=function(){return R===void 0&&L(this),R};let b;this.getAttributes=function(){return b===void 0&&L(this),b};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=r.getProgramParameter(_,cj)),D},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=uj++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=T,this.fragmentShader=P,this}let Nj=0;class Pj{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new Ij(e),t.set(e,i)),i}}class Ij{constructor(e){this.id=Nj++,this.code=e,this.usedTimes=0}}function Bj(n,e,t,i,r,s,a){const o=new fl,l=new Pj,h=[],f=r.isWebGL2,p=r.logarithmicDepthBuffer,m=r.vertexTextures;let g=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(R){return R===0?"uv":`uv${R}`}function _(R,b,D,X,$){const V=X.fog,K=$.geometry,q=R.isMeshStandardMaterial?X.environment:null,ue=(R.isMeshStandardMaterial?t:e).get(R.envMap||q),U=ue&&ue.mapping===_u?ue.image.height:null,j=y[R.type];R.precision!==null&&(g=r.getMaxPrecision(R.precision),g!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",g,"instead."));const W=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,Y=W!==void 0?W.length:0;let re=0;K.morphAttributes.position!==void 0&&(re=1),K.morphAttributes.normal!==void 0&&(re=2),K.morphAttributes.color!==void 0&&(re=3);let Q,oe,ge,Te;if(j){const In=Yr[j];Q=In.vertexShader,oe=In.fragmentShader}else Q=R.vertexShader,oe=R.fragmentShader,l.update(R),ge=l.getVertexShaderID(R),Te=l.getFragmentShaderID(R);const ce=n.getRenderTarget(),Se=$.isInstancedMesh===!0,Ce=$.isBatchedMesh===!0,be=!!R.map,Pe=!!R.matcap,H=!!ue,ve=!!R.aoMap,pe=!!R.lightMap,Me=!!R.bumpMap,de=!!R.normalMap,ie=!!R.displacementMap,Re=!!R.emissiveMap,F=!!R.metalnessMap,k=!!R.roughnessMap,te=R.anisotropy>0,ye=R.clearcoat>0,Ee=R.iridescence>0,we=R.sheen>0,Ke=R.transmission>0,Be=te&&!!R.anisotropyMap,He=ye&&!!R.clearcoatMap,st=ye&&!!R.clearcoatNormalMap,ft=ye&&!!R.clearcoatRoughnessMap,xe=Ee&&!!R.iridescenceMap,ot=Ee&&!!R.iridescenceThicknessMap,Et=we&&!!R.sheenColorMap,pt=we&&!!R.sheenRoughnessMap,qe=!!R.specularMap,Xe=!!R.specularColorMap,yt=!!R.specularIntensityMap,It=Ke&&!!R.transmissionMap,zt=Ke&&!!R.thicknessMap,gt=!!R.gradientMap,Le=!!R.alphaMap,J=R.alphaTest>0,ke=!!R.alphaHash,Fe=!!R.extensions,nt=!!K.attributes.uv1,rt=!!K.attributes.uv2,Wt=!!K.attributes.uv3;let Dt=ws;return R.toneMapped&&(ce===null||ce.isXRRenderTarget===!0)&&(Dt=n.toneMapping),{isWebGL2:f,shaderID:j,shaderType:R.type,shaderName:R.name,vertexShader:Q,fragmentShader:oe,defines:R.defines,customVertexShaderID:ge,customFragmentShaderID:Te,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:g,batching:Ce,instancing:Se,instancingColor:Se&&$.instanceColor!==null,supportsVertexTextures:m,outputColorSpace:ce===null?n.outputColorSpace:ce.isXRRenderTarget===!0?ce.texture.colorSpace:bs,map:be,matcap:Pe,envMap:H,envMapMode:H&&ue.mapping,envMapCubeUVHeight:U,aoMap:ve,lightMap:pe,bumpMap:Me,normalMap:de,displacementMap:m&&ie,emissiveMap:Re,normalMapObjectSpace:de&&R.normalMapType===g2,normalMapTangentSpace:de&&R.normalMapType===go,metalnessMap:F,roughnessMap:k,anisotropy:te,anisotropyMap:Be,clearcoat:ye,clearcoatMap:He,clearcoatNormalMap:st,clearcoatRoughnessMap:ft,iridescence:Ee,iridescenceMap:xe,iridescenceThicknessMap:ot,sheen:we,sheenColorMap:Et,sheenRoughnessMap:pt,specularMap:qe,specularColorMap:Xe,specularIntensityMap:yt,transmission:Ke,transmissionMap:It,thicknessMap:zt,gradientMap:gt,opaque:R.transparent===!1&&R.blending===dl,alphaMap:Le,alphaTest:J,alphaHash:ke,combine:R.combine,mapUv:be&&M(R.map.channel),aoMapUv:ve&&M(R.aoMap.channel),lightMapUv:pe&&M(R.lightMap.channel),bumpMapUv:Me&&M(R.bumpMap.channel),normalMapUv:de&&M(R.normalMap.channel),displacementMapUv:ie&&M(R.displacementMap.channel),emissiveMapUv:Re&&M(R.emissiveMap.channel),metalnessMapUv:F&&M(R.metalnessMap.channel),roughnessMapUv:k&&M(R.roughnessMap.channel),anisotropyMapUv:Be&&M(R.anisotropyMap.channel),clearcoatMapUv:He&&M(R.clearcoatMap.channel),clearcoatNormalMapUv:st&&M(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ft&&M(R.clearcoatRoughnessMap.channel),iridescenceMapUv:xe&&M(R.iridescenceMap.channel),iridescenceThicknessMapUv:ot&&M(R.iridescenceThicknessMap.channel),sheenColorMapUv:Et&&M(R.sheenColorMap.channel),sheenRoughnessMapUv:pt&&M(R.sheenRoughnessMap.channel),specularMapUv:qe&&M(R.specularMap.channel),specularColorMapUv:Xe&&M(R.specularColorMap.channel),specularIntensityMapUv:yt&&M(R.specularIntensityMap.channel),transmissionMapUv:It&&M(R.transmissionMap.channel),thicknessMapUv:zt&&M(R.thicknessMap.channel),alphaMapUv:Le&&M(R.alphaMap.channel),vertexTangents:!!K.attributes.tangent&&(de||te),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,vertexUv1s:nt,vertexUv2s:rt,vertexUv3s:Wt,pointsUvs:$.isPoints===!0&&!!K.attributes.uv&&(be||Le),fog:!!V,useFog:R.fog===!0,fogExp2:V&&V.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:$.isSkinnedMesh===!0,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:Y,morphTextureStride:re,numDirLights:b.directional.length,numPointLights:b.point.length,numSpotLights:b.spot.length,numSpotLightMaps:b.spotLightMap.length,numRectAreaLights:b.rectArea.length,numHemiLights:b.hemi.length,numDirLightShadows:b.directionalShadowMap.length,numPointLightShadows:b.pointShadowMap.length,numSpotLightShadows:b.spotShadowMap.length,numSpotLightShadowsWithMaps:b.numSpotLightShadowsWithMaps,numLightProbes:b.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&D.length>0,shadowMapType:n.shadowMap.type,toneMapping:Dt,useLegacyLights:n._useLegacyLights,decodeVideoTexture:be&&R.map.isVideoTexture===!0&&Jt.getTransfer(R.map.colorSpace)===en,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===Kr,flipSided:R.side===ki,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:Fe&&R.extensions.derivatives===!0,extensionFragDepth:Fe&&R.extensions.fragDepth===!0,extensionDrawBuffers:Fe&&R.extensions.drawBuffers===!0,extensionShaderTextureLOD:Fe&&R.extensions.shaderTextureLOD===!0,extensionClipCullDistance:Fe&&R.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:f||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()}}function v(R){const b=[];if(R.shaderID?b.push(R.shaderID):(b.push(R.customVertexShaderID),b.push(R.customFragmentShaderID)),R.defines!==void 0)for(const D in R.defines)b.push(D),b.push(R.defines[D]);return R.isRawShaderMaterial===!1&&(S(b,R),A(b,R),b.push(n.outputColorSpace)),b.push(R.customProgramCacheKey),b.join()}function S(R,b){R.push(b.precision),R.push(b.outputColorSpace),R.push(b.envMapMode),R.push(b.envMapCubeUVHeight),R.push(b.mapUv),R.push(b.alphaMapUv),R.push(b.lightMapUv),R.push(b.aoMapUv),R.push(b.bumpMapUv),R.push(b.normalMapUv),R.push(b.displacementMapUv),R.push(b.emissiveMapUv),R.push(b.metalnessMapUv),R.push(b.roughnessMapUv),R.push(b.anisotropyMapUv),R.push(b.clearcoatMapUv),R.push(b.clearcoatNormalMapUv),R.push(b.clearcoatRoughnessMapUv),R.push(b.iridescenceMapUv),R.push(b.iridescenceThicknessMapUv),R.push(b.sheenColorMapUv),R.push(b.sheenRoughnessMapUv),R.push(b.specularMapUv),R.push(b.specularColorMapUv),R.push(b.specularIntensityMapUv),R.push(b.transmissionMapUv),R.push(b.thicknessMapUv),R.push(b.combine),R.push(b.fogExp2),R.push(b.sizeAttenuation),R.push(b.morphTargetsCount),R.push(b.morphAttributeCount),R.push(b.numDirLights),R.push(b.numPointLights),R.push(b.numSpotLights),R.push(b.numSpotLightMaps),R.push(b.numHemiLights),R.push(b.numRectAreaLights),R.push(b.numDirLightShadows),R.push(b.numPointLightShadows),R.push(b.numSpotLightShadows),R.push(b.numSpotLightShadowsWithMaps),R.push(b.numLightProbes),R.push(b.shadowMapType),R.push(b.toneMapping),R.push(b.numClippingPlanes),R.push(b.numClipIntersection),R.push(b.depthPacking)}function A(R,b){o.disableAll(),b.isWebGL2&&o.enable(0),b.supportsVertexTextures&&o.enable(1),b.instancing&&o.enable(2),b.instancingColor&&o.enable(3),b.matcap&&o.enable(4),b.envMap&&o.enable(5),b.normalMapObjectSpace&&o.enable(6),b.normalMapTangentSpace&&o.enable(7),b.clearcoat&&o.enable(8),b.iridescence&&o.enable(9),b.alphaTest&&o.enable(10),b.vertexColors&&o.enable(11),b.vertexAlphas&&o.enable(12),b.vertexUv1s&&o.enable(13),b.vertexUv2s&&o.enable(14),b.vertexUv3s&&o.enable(15),b.vertexTangents&&o.enable(16),b.anisotropy&&o.enable(17),b.alphaHash&&o.enable(18),b.batching&&o.enable(19),R.push(o.mask),o.disableAll(),b.fog&&o.enable(0),b.useFog&&o.enable(1),b.flatShading&&o.enable(2),b.logarithmicDepthBuffer&&o.enable(3),b.skinning&&o.enable(4),b.morphTargets&&o.enable(5),b.morphNormals&&o.enable(6),b.morphColors&&o.enable(7),b.premultipliedAlpha&&o.enable(8),b.shadowMapEnabled&&o.enable(9),b.useLegacyLights&&o.enable(10),b.doubleSided&&o.enable(11),b.flipSided&&o.enable(12),b.useDepthPacking&&o.enable(13),b.dithering&&o.enable(14),b.transmission&&o.enable(15),b.sheen&&o.enable(16),b.opaque&&o.enable(17),b.pointsUvs&&o.enable(18),b.decodeVideoTexture&&o.enable(19),R.push(o.mask)}function E(R){const b=y[R.type];let D;if(b){const X=Yr[b];D=R2.clone(X.uniforms)}else D=R.uniforms;return D}function N(R,b){let D;for(let X=0,$=h.length;X<$;X++){const V=h[X];if(V.cacheKey===b){D=V,++D.usedTimes;break}}return D===void 0&&(D=new Rj(n,b,R,s),h.push(D)),D}function T(R){if(--R.usedTimes===0){const b=h.indexOf(R);h[b]=h[h.length-1],h.pop(),R.destroy()}}function P(R){l.remove(R)}function L(){l.dispose()}return{getParameters:_,getProgramCacheKey:v,getUniforms:E,acquireProgram:N,releaseProgram:T,releaseShaderCache:P,programs:h,dispose:L}}function Lj(){let n=new WeakMap;function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function t(s){n.delete(s)}function i(s,a,o){n.get(s)[a]=o}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function Dj(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function uE(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function dE(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(p,m,g,y,M,_){let v=n[e];return v===void 0?(v={id:p.id,object:p,geometry:m,material:g,groupOrder:y,renderOrder:p.renderOrder,z:M,group:_},n[e]=v):(v.id=p.id,v.object=p,v.geometry=m,v.material=g,v.groupOrder=y,v.renderOrder=p.renderOrder,v.z=M,v.group=_),e++,v}function o(p,m,g,y,M,_){const v=a(p,m,g,y,M,_);g.transmission>0?i.push(v):g.transparent===!0?r.push(v):t.push(v)}function l(p,m,g,y,M,_){const v=a(p,m,g,y,M,_);g.transmission>0?i.unshift(v):g.transparent===!0?r.unshift(v):t.unshift(v)}function h(p,m){t.length>1&&t.sort(p||Dj),i.length>1&&i.sort(m||uE),r.length>1&&r.sort(m||uE)}function f(){for(let p=e,m=n.length;p<m;p++){const g=n[p];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:f,sort:h}}function kj(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new dE,n.set(i,[a])):r>=s.length?(a=new dE,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function Fj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new z,color:new Ue};break;case"SpotLight":t={position:new z,direction:new z,color:new Ue,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new z,color:new Ue,distance:0,decay:0};break;case"HemisphereLight":t={direction:new z,skyColor:new Ue,groundColor:new Ue};break;case"RectAreaLight":t={color:new Ue,position:new z,halfWidth:new z,halfHeight:new z};break}return n[e.id]=t,t}}}function Uj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Oj=0;function jj(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function zj(n,e){const t=new Fj,i=Uj(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)r.probe.push(new z);const s=new z,a=new dt,o=new dt;function l(f,p){let m=0,g=0,y=0;for(let X=0;X<9;X++)r.probe[X].set(0,0,0);let M=0,_=0,v=0,S=0,A=0,E=0,N=0,T=0,P=0,L=0,R=0;f.sort(jj);const b=p===!0?Math.PI:1;for(let X=0,$=f.length;X<$;X++){const V=f[X],K=V.color,q=V.intensity,ue=V.distance,U=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)m+=K.r*q*b,g+=K.g*q*b,y+=K.b*q*b;else if(V.isLightProbe){for(let j=0;j<9;j++)r.probe[j].addScaledVector(V.sh.coefficients[j],q);R++}else if(V.isDirectionalLight){const j=t.get(V);if(j.color.copy(V.color).multiplyScalar(V.intensity*b),V.castShadow){const W=V.shadow,Y=i.get(V);Y.shadowBias=W.bias,Y.shadowNormalBias=W.normalBias,Y.shadowRadius=W.radius,Y.shadowMapSize=W.mapSize,r.directionalShadow[M]=Y,r.directionalShadowMap[M]=U,r.directionalShadowMatrix[M]=V.shadow.matrix,E++}r.directional[M]=j,M++}else if(V.isSpotLight){const j=t.get(V);j.position.setFromMatrixPosition(V.matrixWorld),j.color.copy(K).multiplyScalar(q*b),j.distance=ue,j.coneCos=Math.cos(V.angle),j.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),j.decay=V.decay,r.spot[v]=j;const W=V.shadow;if(V.map&&(r.spotLightMap[P]=V.map,P++,W.updateMatrices(V),V.castShadow&&L++),r.spotLightMatrix[v]=W.matrix,V.castShadow){const Y=i.get(V);Y.shadowBias=W.bias,Y.shadowNormalBias=W.normalBias,Y.shadowRadius=W.radius,Y.shadowMapSize=W.mapSize,r.spotShadow[v]=Y,r.spotShadowMap[v]=U,T++}v++}else if(V.isRectAreaLight){const j=t.get(V);j.color.copy(K).multiplyScalar(q),j.halfWidth.set(V.width*.5,0,0),j.halfHeight.set(0,V.height*.5,0),r.rectArea[S]=j,S++}else if(V.isPointLight){const j=t.get(V);if(j.color.copy(V.color).multiplyScalar(V.intensity*b),j.distance=V.distance,j.decay=V.decay,V.castShadow){const W=V.shadow,Y=i.get(V);Y.shadowBias=W.bias,Y.shadowNormalBias=W.normalBias,Y.shadowRadius=W.radius,Y.shadowMapSize=W.mapSize,Y.shadowCameraNear=W.camera.near,Y.shadowCameraFar=W.camera.far,r.pointShadow[_]=Y,r.pointShadowMap[_]=U,r.pointShadowMatrix[_]=V.shadow.matrix,N++}r.point[_]=j,_++}else if(V.isHemisphereLight){const j=t.get(V);j.skyColor.copy(V.color).multiplyScalar(q*b),j.groundColor.copy(V.groundColor).multiplyScalar(q*b),r.hemi[A]=j,A++}}S>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=De.LTC_FLOAT_1,r.rectAreaLTC2=De.LTC_FLOAT_2):(r.rectAreaLTC1=De.LTC_HALF_1,r.rectAreaLTC2=De.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=De.LTC_FLOAT_1,r.rectAreaLTC2=De.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=De.LTC_HALF_1,r.rectAreaLTC2=De.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=m,r.ambient[1]=g,r.ambient[2]=y;const D=r.hash;(D.directionalLength!==M||D.pointLength!==_||D.spotLength!==v||D.rectAreaLength!==S||D.hemiLength!==A||D.numDirectionalShadows!==E||D.numPointShadows!==N||D.numSpotShadows!==T||D.numSpotMaps!==P||D.numLightProbes!==R)&&(r.directional.length=M,r.spot.length=v,r.rectArea.length=S,r.point.length=_,r.hemi.length=A,r.directionalShadow.length=E,r.directionalShadowMap.length=E,r.pointShadow.length=N,r.pointShadowMap.length=N,r.spotShadow.length=T,r.spotShadowMap.length=T,r.directionalShadowMatrix.length=E,r.pointShadowMatrix.length=N,r.spotLightMatrix.length=T+P-L,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=L,r.numLightProbes=R,D.directionalLength=M,D.pointLength=_,D.spotLength=v,D.rectAreaLength=S,D.hemiLength=A,D.numDirectionalShadows=E,D.numPointShadows=N,D.numSpotShadows=T,D.numSpotMaps=P,D.numLightProbes=R,r.version=Oj++)}function h(f,p){let m=0,g=0,y=0,M=0,_=0;const v=p.matrixWorldInverse;for(let S=0,A=f.length;S<A;S++){const E=f[S];if(E.isDirectionalLight){const N=r.directional[m];N.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),N.direction.sub(s),N.direction.transformDirection(v),m++}else if(E.isSpotLight){const N=r.spot[y];N.position.setFromMatrixPosition(E.matrixWorld),N.position.applyMatrix4(v),N.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),N.direction.sub(s),N.direction.transformDirection(v),y++}else if(E.isRectAreaLight){const N=r.rectArea[M];N.position.setFromMatrixPosition(E.matrixWorld),N.position.applyMatrix4(v),o.identity(),a.copy(E.matrixWorld),a.premultiply(v),o.extractRotation(a),N.halfWidth.set(E.width*.5,0,0),N.halfHeight.set(0,E.height*.5,0),N.halfWidth.applyMatrix4(o),N.halfHeight.applyMatrix4(o),M++}else if(E.isPointLight){const N=r.point[g];N.position.setFromMatrixPosition(E.matrixWorld),N.position.applyMatrix4(v),g++}else if(E.isHemisphereLight){const N=r.hemi[_];N.direction.setFromMatrixPosition(E.matrixWorld),N.direction.transformDirection(v),_++}}}return{setup:l,setupView:h,state:r}}function hE(n,e){const t=new zj(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function a(p){i.push(p)}function o(p){r.push(p)}function l(p){t.setup(i,p)}function h(p){t.setupView(i,p)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:h,pushLight:a,pushShadow:o}}function Gj(n,e){let t=new WeakMap;function i(s,a=0){const o=t.get(s);let l;return o===void 0?(l=new hE(n,e),t.set(s,[l])):a>=o.length?(l=new hE(n,e),o.push(l)):l=o[a],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class OS extends Kn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=p2,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class jS extends Kn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Hj=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Vj=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Wj(n,e,t){let i=new Ph;const r=new Ae,s=new Ae,a=new Yt,o=new OS({depthPacking:m2}),l=new jS,h={},f=t.maxTextureSize,p={[Cs]:ki,[ki]:Cs,[Kr]:Kr},m=new Rs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ae},radius:{value:4}},vertexShader:Hj,fragmentShader:Vj}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const y=new Mt;y.setAttribute("position",new Ut(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new Un(y,m),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=gg;let v=this.type;this.render=function(T,P,L){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||T.length===0)return;const R=n.getRenderTarget(),b=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),X=n.state;X.setBlending(ta),X.buffers.color.setClear(1,1,1,1),X.buffers.depth.setTest(!0),X.setScissorTest(!1);const $=v!==Wr&&this.type===Wr,V=v===Wr&&this.type!==Wr;for(let K=0,q=T.length;K<q;K++){const ue=T[K],U=ue.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",ue,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;r.copy(U.mapSize);const j=U.getFrameExtents();if(r.multiply(j),s.copy(U.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/j.x),r.x=s.x*j.x,U.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/j.y),r.y=s.y*j.y,U.mapSize.y=s.y)),U.map===null||$===!0||V===!0){const Y=this.type!==Wr?{minFilter:Mn,magFilter:Mn}:{};U.map!==null&&U.map.dispose(),U.map=new ts(r.x,r.y,Y),U.map.texture.name=ue.name+".shadowMap",U.camera.updateProjectionMatrix()}n.setRenderTarget(U.map),n.clear();const W=U.getViewportCount();for(let Y=0;Y<W;Y++){const re=U.getViewport(Y);a.set(s.x*re.x,s.y*re.y,s.x*re.z,s.y*re.w),X.viewport(a),U.updateMatrices(ue,Y),i=U.getFrustum(),E(P,L,U.camera,ue,this.type)}U.isPointLightShadow!==!0&&this.type===Wr&&S(U,L),U.needsUpdate=!1}v=this.type,_.needsUpdate=!1,n.setRenderTarget(R,b,D)};function S(T,P){const L=e.update(M);m.defines.VSM_SAMPLES!==T.blurSamples&&(m.defines.VSM_SAMPLES=T.blurSamples,g.defines.VSM_SAMPLES=T.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new ts(r.x,r.y)),m.uniforms.shadow_pass.value=T.map.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(P,null,L,m,M,null),g.uniforms.shadow_pass.value=T.mapPass.texture,g.uniforms.resolution.value=T.mapSize,g.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(P,null,L,g,M,null)}function A(T,P,L,R){let b=null;const D=L.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(D!==void 0)b=D;else if(b=L.isPointLight===!0?l:o,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const X=b.uuid,$=P.uuid;let V=h[X];V===void 0&&(V={},h[X]=V);let K=V[$];K===void 0&&(K=b.clone(),V[$]=K,P.addEventListener("dispose",N)),b=K}if(b.visible=P.visible,b.wireframe=P.wireframe,R===Wr?b.side=P.shadowSide!==null?P.shadowSide:P.side:b.side=P.shadowSide!==null?P.shadowSide:p[P.side],b.alphaMap=P.alphaMap,b.alphaTest=P.alphaTest,b.map=P.map,b.clipShadows=P.clipShadows,b.clippingPlanes=P.clippingPlanes,b.clipIntersection=P.clipIntersection,b.displacementMap=P.displacementMap,b.displacementScale=P.displacementScale,b.displacementBias=P.displacementBias,b.wireframeLinewidth=P.wireframeLinewidth,b.linewidth=P.linewidth,L.isPointLight===!0&&b.isMeshDistanceMaterial===!0){const X=n.properties.get(b);X.light=L}return b}function E(T,P,L,R,b){if(T.visible===!1)return;if(T.layers.test(P.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&b===Wr)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,T.matrixWorld);const $=e.update(T),V=T.material;if(Array.isArray(V)){const K=$.groups;for(let q=0,ue=K.length;q<ue;q++){const U=K[q],j=V[U.materialIndex];if(j&&j.visible){const W=A(T,j,R,b);T.onBeforeShadow(n,T,P,L,$,W,U),n.renderBufferDirect(L,null,$,W,T,U),T.onAfterShadow(n,T,P,L,$,W,U)}}}else if(V.visible){const K=A(T,V,R,b);T.onBeforeShadow(n,T,P,L,$,K,null),n.renderBufferDirect(L,null,$,K,T,null),T.onAfterShadow(n,T,P,L,$,K,null)}}const X=T.children;for(let $=0,V=X.length;$<V;$++)E(X[$],P,L,R,b)}function N(T){T.target.removeEventListener("dispose",N);for(const L in h){const R=h[L],b=T.target.uuid;b in R&&(R[b].dispose(),delete R[b])}}}function Xj(n,e,t){const i=t.isWebGL2;function r(){let J=!1;const ke=new Yt;let Fe=null;const nt=new Yt(0,0,0,0);return{setMask:function(rt){Fe!==rt&&!J&&(n.colorMask(rt,rt,rt,rt),Fe=rt)},setLocked:function(rt){J=rt},setClear:function(rt,Wt,Dt,on,In){In===!0&&(rt*=on,Wt*=on,Dt*=on),ke.set(rt,Wt,Dt,on),nt.equals(ke)===!1&&(n.clearColor(rt,Wt,Dt,on),nt.copy(ke))},reset:function(){J=!1,Fe=null,nt.set(-1,0,0,0)}}}function s(){let J=!1,ke=null,Fe=null,nt=null;return{setTest:function(rt){rt?Ce(n.DEPTH_TEST):be(n.DEPTH_TEST)},setMask:function(rt){ke!==rt&&!J&&(n.depthMask(rt),ke=rt)},setFunc:function(rt){if(Fe!==rt){switch(rt){case zR:n.depthFunc(n.NEVER);break;case GR:n.depthFunc(n.ALWAYS);break;case HR:n.depthFunc(n.LESS);break;case nh:n.depthFunc(n.LEQUAL);break;case VR:n.depthFunc(n.EQUAL);break;case WR:n.depthFunc(n.GEQUAL);break;case XR:n.depthFunc(n.GREATER);break;case JR:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Fe=rt}},setLocked:function(rt){J=rt},setClear:function(rt){nt!==rt&&(n.clearDepth(rt),nt=rt)},reset:function(){J=!1,ke=null,Fe=null,nt=null}}}function a(){let J=!1,ke=null,Fe=null,nt=null,rt=null,Wt=null,Dt=null,on=null,In=null;return{setTest:function(Xt){J||(Xt?Ce(n.STENCIL_TEST):be(n.STENCIL_TEST))},setMask:function(Xt){ke!==Xt&&!J&&(n.stencilMask(Xt),ke=Xt)},setFunc:function(Xt,Bn,Oi){(Fe!==Xt||nt!==Bn||rt!==Oi)&&(n.stencilFunc(Xt,Bn,Oi),Fe=Xt,nt=Bn,rt=Oi)},setOp:function(Xt,Bn,Oi){(Wt!==Xt||Dt!==Bn||on!==Oi)&&(n.stencilOp(Xt,Bn,Oi),Wt=Xt,Dt=Bn,on=Oi)},setLocked:function(Xt){J=Xt},setClear:function(Xt){In!==Xt&&(n.clearStencil(Xt),In=Xt)},reset:function(){J=!1,ke=null,Fe=null,nt=null,rt=null,Wt=null,Dt=null,on=null,In=null}}}const o=new r,l=new s,h=new a,f=new WeakMap,p=new WeakMap;let m={},g={},y=new WeakMap,M=[],_=null,v=!1,S=null,A=null,E=null,N=null,T=null,P=null,L=null,R=new Ue(0,0,0),b=0,D=!1,X=null,$=null,V=null,K=null,q=null;const ue=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let U=!1,j=0;const W=n.getParameter(n.VERSION);W.indexOf("WebGL")!==-1?(j=parseFloat(/^WebGL (\d)/.exec(W)[1]),U=j>=1):W.indexOf("OpenGL ES")!==-1&&(j=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),U=j>=2);let Y=null,re={};const Q=n.getParameter(n.SCISSOR_BOX),oe=n.getParameter(n.VIEWPORT),ge=new Yt().fromArray(Q),Te=new Yt().fromArray(oe);function ce(J,ke,Fe,nt){const rt=new Uint8Array(4),Wt=n.createTexture();n.bindTexture(J,Wt),n.texParameteri(J,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(J,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Dt=0;Dt<Fe;Dt++)i&&(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)?n.texImage3D(ke,0,n.RGBA,1,1,nt,0,n.RGBA,n.UNSIGNED_BYTE,rt):n.texImage2D(ke+Dt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,rt);return Wt}const Se={};Se[n.TEXTURE_2D]=ce(n.TEXTURE_2D,n.TEXTURE_2D,1),Se[n.TEXTURE_CUBE_MAP]=ce(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Se[n.TEXTURE_2D_ARRAY]=ce(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Se[n.TEXTURE_3D]=ce(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),l.setClear(1),h.setClear(0),Ce(n.DEPTH_TEST),l.setFunc(nh),Re(!1),F(wx),Ce(n.CULL_FACE),de(ta);function Ce(J){m[J]!==!0&&(n.enable(J),m[J]=!0)}function be(J){m[J]!==!1&&(n.disable(J),m[J]=!1)}function Pe(J,ke){return g[J]!==ke?(n.bindFramebuffer(J,ke),g[J]=ke,i&&(J===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=ke),J===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=ke)),!0):!1}function H(J,ke){let Fe=M,nt=!1;if(J)if(Fe=y.get(ke),Fe===void 0&&(Fe=[],y.set(ke,Fe)),J.isWebGLMultipleRenderTargets){const rt=J.texture;if(Fe.length!==rt.length||Fe[0]!==n.COLOR_ATTACHMENT0){for(let Wt=0,Dt=rt.length;Wt<Dt;Wt++)Fe[Wt]=n.COLOR_ATTACHMENT0+Wt;Fe.length=rt.length,nt=!0}}else Fe[0]!==n.COLOR_ATTACHMENT0&&(Fe[0]=n.COLOR_ATTACHMENT0,nt=!0);else Fe[0]!==n.BACK&&(Fe[0]=n.BACK,nt=!0);nt&&(t.isWebGL2?n.drawBuffers(Fe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Fe))}function ve(J){return _!==J?(n.useProgram(J),_=J,!0):!1}const pe={[za]:n.FUNC_ADD,[CR]:n.FUNC_SUBTRACT,[TR]:n.FUNC_REVERSE_SUBTRACT};if(i)pe[Tx]=n.MIN,pe[bx]=n.MAX;else{const J=e.get("EXT_blend_minmax");J!==null&&(pe[Tx]=J.MIN_EXT,pe[bx]=J.MAX_EXT)}const Me={[bR]:n.ZERO,[RR]:n.ONE,[NR]:n.SRC_COLOR,[Vm]:n.SRC_ALPHA,[kR]:n.SRC_ALPHA_SATURATE,[LR]:n.DST_COLOR,[IR]:n.DST_ALPHA,[PR]:n.ONE_MINUS_SRC_COLOR,[Wm]:n.ONE_MINUS_SRC_ALPHA,[DR]:n.ONE_MINUS_DST_COLOR,[BR]:n.ONE_MINUS_DST_ALPHA,[FR]:n.CONSTANT_COLOR,[UR]:n.ONE_MINUS_CONSTANT_COLOR,[OR]:n.CONSTANT_ALPHA,[jR]:n.ONE_MINUS_CONSTANT_ALPHA};function de(J,ke,Fe,nt,rt,Wt,Dt,on,In,Xt){if(J===ta){v===!0&&(be(n.BLEND),v=!1);return}if(v===!1&&(Ce(n.BLEND),v=!0),J!==ER){if(J!==S||Xt!==D){if((A!==za||T!==za)&&(n.blendEquation(n.FUNC_ADD),A=za,T=za),Xt)switch(J){case dl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Mx:n.blendFunc(n.ONE,n.ONE);break;case Ex:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Cx:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}else switch(J){case dl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Mx:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Ex:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Cx:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}E=null,N=null,P=null,L=null,R.set(0,0,0),b=0,S=J,D=Xt}return}rt=rt||ke,Wt=Wt||Fe,Dt=Dt||nt,(ke!==A||rt!==T)&&(n.blendEquationSeparate(pe[ke],pe[rt]),A=ke,T=rt),(Fe!==E||nt!==N||Wt!==P||Dt!==L)&&(n.blendFuncSeparate(Me[Fe],Me[nt],Me[Wt],Me[Dt]),E=Fe,N=nt,P=Wt,L=Dt),(on.equals(R)===!1||In!==b)&&(n.blendColor(on.r,on.g,on.b,In),R.copy(on),b=In),S=J,D=!1}function ie(J,ke){J.side===Kr?be(n.CULL_FACE):Ce(n.CULL_FACE);let Fe=J.side===ki;ke&&(Fe=!Fe),Re(Fe),J.blending===dl&&J.transparent===!1?de(ta):de(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.blendColor,J.blendAlpha,J.premultipliedAlpha),l.setFunc(J.depthFunc),l.setTest(J.depthTest),l.setMask(J.depthWrite),o.setMask(J.colorWrite);const nt=J.stencilWrite;h.setTest(nt),nt&&(h.setMask(J.stencilWriteMask),h.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),h.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),te(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?Ce(n.SAMPLE_ALPHA_TO_COVERAGE):be(n.SAMPLE_ALPHA_TO_COVERAGE)}function Re(J){X!==J&&(J?n.frontFace(n.CW):n.frontFace(n.CCW),X=J)}function F(J){J!==AR?(Ce(n.CULL_FACE),J!==$&&(J===wx?n.cullFace(n.BACK):J===wR?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):be(n.CULL_FACE),$=J}function k(J){J!==V&&(U&&n.lineWidth(J),V=J)}function te(J,ke,Fe){J?(Ce(n.POLYGON_OFFSET_FILL),(K!==ke||q!==Fe)&&(n.polygonOffset(ke,Fe),K=ke,q=Fe)):be(n.POLYGON_OFFSET_FILL)}function ye(J){J?Ce(n.SCISSOR_TEST):be(n.SCISSOR_TEST)}function Ee(J){J===void 0&&(J=n.TEXTURE0+ue-1),Y!==J&&(n.activeTexture(J),Y=J)}function we(J,ke,Fe){Fe===void 0&&(Y===null?Fe=n.TEXTURE0+ue-1:Fe=Y);let nt=re[Fe];nt===void 0&&(nt={type:void 0,texture:void 0},re[Fe]=nt),(nt.type!==J||nt.texture!==ke)&&(Y!==Fe&&(n.activeTexture(Fe),Y=Fe),n.bindTexture(J,ke||Se[J]),nt.type=J,nt.texture=ke)}function Ke(){const J=re[Y];J!==void 0&&J.type!==void 0&&(n.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function Be(){try{n.compressedTexImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function He(){try{n.compressedTexImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function st(){try{n.texSubImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function ft(){try{n.texSubImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function xe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function ot(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Et(){try{n.texStorage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function pt(){try{n.texStorage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function qe(){try{n.texImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Xe(){try{n.texImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function yt(J){ge.equals(J)===!1&&(n.scissor(J.x,J.y,J.z,J.w),ge.copy(J))}function It(J){Te.equals(J)===!1&&(n.viewport(J.x,J.y,J.z,J.w),Te.copy(J))}function zt(J,ke){let Fe=p.get(ke);Fe===void 0&&(Fe=new WeakMap,p.set(ke,Fe));let nt=Fe.get(J);nt===void 0&&(nt=n.getUniformBlockIndex(ke,J.name),Fe.set(J,nt))}function gt(J,ke){const nt=p.get(ke).get(J);f.get(ke)!==nt&&(n.uniformBlockBinding(ke,nt,J.__bindingPointIndex),f.set(ke,nt))}function Le(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},Y=null,re={},g={},y=new WeakMap,M=[],_=null,v=!1,S=null,A=null,E=null,N=null,T=null,P=null,L=null,R=new Ue(0,0,0),b=0,D=!1,X=null,$=null,V=null,K=null,q=null,ge.set(0,0,n.canvas.width,n.canvas.height),Te.set(0,0,n.canvas.width,n.canvas.height),o.reset(),l.reset(),h.reset()}return{buffers:{color:o,depth:l,stencil:h},enable:Ce,disable:be,bindFramebuffer:Pe,drawBuffers:H,useProgram:ve,setBlending:de,setMaterial:ie,setFlipSided:Re,setCullFace:F,setLineWidth:k,setPolygonOffset:te,setScissorTest:ye,activeTexture:Ee,bindTexture:we,unbindTexture:Ke,compressedTexImage2D:Be,compressedTexImage3D:He,texImage2D:qe,texImage3D:Xe,updateUBOMapping:zt,uniformBlockBinding:gt,texStorage2D:Et,texStorage3D:pt,texSubImage2D:st,texSubImage3D:ft,compressedTexSubImage2D:xe,compressedTexSubImage3D:ot,scissor:yt,viewport:It,reset:Le}}function Jj(n,e,t,i,r,s,a){const o=r.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let p;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(F,k){return g?new OffscreenCanvas(F,k):dh("canvas")}function M(F,k,te,ye){let Ee=1;if((F.width>ye||F.height>ye)&&(Ee=ye/Math.max(F.width,F.height)),Ee<1||k===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const we=k?Ym:Math.floor,Ke=we(Ee*F.width),Be=we(Ee*F.height);p===void 0&&(p=y(Ke,Be));const He=te?y(Ke,Be):p;return He.width=Ke,He.height=Be,He.getContext("2d").drawImage(F,0,0,Ke,Be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+Ke+"x"+Be+")."),He}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function _(F){return i_(F.width)&&i_(F.height)}function v(F){return o?!1:F.wrapS!==oi||F.wrapT!==oi||F.minFilter!==Mn&&F.minFilter!==mn}function S(F,k){return F.generateMipmaps&&k&&F.minFilter!==Mn&&F.minFilter!==mn}function A(F){n.generateMipmap(F)}function E(F,k,te,ye,Ee=!1){if(o===!1)return k;if(F!==null){if(n[F]!==void 0)return n[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let we=k;if(k===n.RED&&(te===n.FLOAT&&(we=n.R32F),te===n.HALF_FLOAT&&(we=n.R16F),te===n.UNSIGNED_BYTE&&(we=n.R8)),k===n.RED_INTEGER&&(te===n.UNSIGNED_BYTE&&(we=n.R8UI),te===n.UNSIGNED_SHORT&&(we=n.R16UI),te===n.UNSIGNED_INT&&(we=n.R32UI),te===n.BYTE&&(we=n.R8I),te===n.SHORT&&(we=n.R16I),te===n.INT&&(we=n.R32I)),k===n.RG&&(te===n.FLOAT&&(we=n.RG32F),te===n.HALF_FLOAT&&(we=n.RG16F),te===n.UNSIGNED_BYTE&&(we=n.RG8)),k===n.RGBA){const Ke=Ee?oh:Jt.getTransfer(ye);te===n.FLOAT&&(we=n.RGBA32F),te===n.HALF_FLOAT&&(we=n.RGBA16F),te===n.UNSIGNED_BYTE&&(we=Ke===en?n.SRGB8_ALPHA8:n.RGBA8),te===n.UNSIGNED_SHORT_4_4_4_4&&(we=n.RGBA4),te===n.UNSIGNED_SHORT_5_5_5_1&&(we=n.RGB5_A1)}return(we===n.R16F||we===n.R32F||we===n.RG16F||we===n.RG32F||we===n.RGBA16F||we===n.RGBA32F)&&e.get("EXT_color_buffer_float"),we}function N(F,k,te){return S(F,te)===!0||F.isFramebufferTexture&&F.minFilter!==Mn&&F.minFilter!==mn?Math.log2(Math.max(k.width,k.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?k.mipmaps.length:1}function T(F){return F===Mn||F===sh||F===qc?n.NEAREST:n.LINEAR}function P(F){const k=F.target;k.removeEventListener("dispose",P),R(k),k.isVideoTexture&&f.delete(k)}function L(F){const k=F.target;k.removeEventListener("dispose",L),D(k)}function R(F){const k=i.get(F);if(k.__webglInit===void 0)return;const te=F.source,ye=m.get(te);if(ye){const Ee=ye[k.__cacheKey];Ee.usedTimes--,Ee.usedTimes===0&&b(F),Object.keys(ye).length===0&&m.delete(te)}i.remove(F)}function b(F){const k=i.get(F);n.deleteTexture(k.__webglTexture);const te=F.source,ye=m.get(te);delete ye[k.__cacheKey],a.memory.textures--}function D(F){const k=F.texture,te=i.get(F),ye=i.get(k);if(ye.__webglTexture!==void 0&&(n.deleteTexture(ye.__webglTexture),a.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let Ee=0;Ee<6;Ee++){if(Array.isArray(te.__webglFramebuffer[Ee]))for(let we=0;we<te.__webglFramebuffer[Ee].length;we++)n.deleteFramebuffer(te.__webglFramebuffer[Ee][we]);else n.deleteFramebuffer(te.__webglFramebuffer[Ee]);te.__webglDepthbuffer&&n.deleteRenderbuffer(te.__webglDepthbuffer[Ee])}else{if(Array.isArray(te.__webglFramebuffer))for(let Ee=0;Ee<te.__webglFramebuffer.length;Ee++)n.deleteFramebuffer(te.__webglFramebuffer[Ee]);else n.deleteFramebuffer(te.__webglFramebuffer);if(te.__webglDepthbuffer&&n.deleteRenderbuffer(te.__webglDepthbuffer),te.__webglMultisampledFramebuffer&&n.deleteFramebuffer(te.__webglMultisampledFramebuffer),te.__webglColorRenderbuffer)for(let Ee=0;Ee<te.__webglColorRenderbuffer.length;Ee++)te.__webglColorRenderbuffer[Ee]&&n.deleteRenderbuffer(te.__webglColorRenderbuffer[Ee]);te.__webglDepthRenderbuffer&&n.deleteRenderbuffer(te.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let Ee=0,we=k.length;Ee<we;Ee++){const Ke=i.get(k[Ee]);Ke.__webglTexture&&(n.deleteTexture(Ke.__webglTexture),a.memory.textures--),i.remove(k[Ee])}i.remove(k),i.remove(F)}let X=0;function $(){X=0}function V(){const F=X;return F>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+r.maxTextures),X+=1,F}function K(F){const k=[];return k.push(F.wrapS),k.push(F.wrapT),k.push(F.wrapR||0),k.push(F.magFilter),k.push(F.minFilter),k.push(F.anisotropy),k.push(F.internalFormat),k.push(F.format),k.push(F.type),k.push(F.generateMipmaps),k.push(F.premultiplyAlpha),k.push(F.flipY),k.push(F.unpackAlignment),k.push(F.colorSpace),k.join()}function q(F,k){const te=i.get(F);if(F.isVideoTexture&&ie(F),F.isRenderTargetTexture===!1&&F.version>0&&te.__version!==F.version){const ye=F.image;if(ye===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ge(te,F,k);return}}t.bindTexture(n.TEXTURE_2D,te.__webglTexture,n.TEXTURE0+k)}function ue(F,k){const te=i.get(F);if(F.version>0&&te.__version!==F.version){ge(te,F,k);return}t.bindTexture(n.TEXTURE_2D_ARRAY,te.__webglTexture,n.TEXTURE0+k)}function U(F,k){const te=i.get(F);if(F.version>0&&te.__version!==F.version){ge(te,F,k);return}t.bindTexture(n.TEXTURE_3D,te.__webglTexture,n.TEXTURE0+k)}function j(F,k){const te=i.get(F);if(F.version>0&&te.__version!==F.version){Te(te,F,k);return}t.bindTexture(n.TEXTURE_CUBE_MAP,te.__webglTexture,n.TEXTURE0+k)}const W={[oo]:n.REPEAT,[oi]:n.CLAMP_TO_EDGE,[lu]:n.MIRRORED_REPEAT},Y={[Mn]:n.NEAREST,[sh]:n.NEAREST_MIPMAP_NEAREST,[qc]:n.NEAREST_MIPMAP_LINEAR,[mn]:n.LINEAR,[yg]:n.LINEAR_MIPMAP_NEAREST,[Ts]:n.LINEAR_MIPMAP_LINEAR},re={[v2]:n.NEVER,[w2]:n.ALWAYS,[y2]:n.LESS,[PS]:n.LEQUAL,[x2]:n.EQUAL,[A2]:n.GEQUAL,[_2]:n.GREATER,[S2]:n.NOTEQUAL};function Q(F,k,te){if(te?(n.texParameteri(F,n.TEXTURE_WRAP_S,W[k.wrapS]),n.texParameteri(F,n.TEXTURE_WRAP_T,W[k.wrapT]),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,W[k.wrapR]),n.texParameteri(F,n.TEXTURE_MAG_FILTER,Y[k.magFilter]),n.texParameteri(F,n.TEXTURE_MIN_FILTER,Y[k.minFilter])):(n.texParameteri(F,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(F,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(k.wrapS!==oi||k.wrapT!==oi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(F,n.TEXTURE_MAG_FILTER,T(k.magFilter)),n.texParameteri(F,n.TEXTURE_MIN_FILTER,T(k.minFilter)),k.minFilter!==Mn&&k.minFilter!==mn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),k.compareFunction&&(n.texParameteri(F,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(F,n.TEXTURE_COMPARE_FUNC,re[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const ye=e.get("EXT_texture_filter_anisotropic");if(k.magFilter===Mn||k.minFilter!==qc&&k.minFilter!==Ts||k.type===qr&&e.has("OES_texture_float_linear")===!1||o===!1&&k.type===cu&&e.has("OES_texture_half_float_linear")===!1)return;(k.anisotropy>1||i.get(k).__currentAnisotropy)&&(n.texParameterf(F,ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),i.get(k).__currentAnisotropy=k.anisotropy)}}function oe(F,k){let te=!1;F.__webglInit===void 0&&(F.__webglInit=!0,k.addEventListener("dispose",P));const ye=k.source;let Ee=m.get(ye);Ee===void 0&&(Ee={},m.set(ye,Ee));const we=K(k);if(we!==F.__cacheKey){Ee[we]===void 0&&(Ee[we]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,te=!0),Ee[we].usedTimes++;const Ke=Ee[F.__cacheKey];Ke!==void 0&&(Ee[F.__cacheKey].usedTimes--,Ke.usedTimes===0&&b(k)),F.__cacheKey=we,F.__webglTexture=Ee[we].texture}return te}function ge(F,k,te){let ye=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(ye=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(ye=n.TEXTURE_3D);const Ee=oe(F,k),we=k.source;t.bindTexture(ye,F.__webglTexture,n.TEXTURE0+te);const Ke=i.get(we);if(we.version!==Ke.__version||Ee===!0){t.activeTexture(n.TEXTURE0+te);const Be=Jt.getPrimaries(Jt.workingColorSpace),He=k.colorSpace===ar?null:Jt.getPrimaries(k.colorSpace),st=k.colorSpace===ar||Be===He?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,st);const ft=v(k)&&_(k.image)===!1;let xe=M(k.image,ft,!1,r.maxTextureSize);xe=Re(k,xe);const ot=_(xe)||o,Et=s.convert(k.format,k.colorSpace);let pt=s.convert(k.type),qe=E(k.internalFormat,Et,pt,k.colorSpace,k.isVideoTexture);Q(ye,k,ot);let Xe;const yt=k.mipmaps,It=o&&k.isVideoTexture!==!0&&qe!==TS,zt=Ke.__version===void 0||Ee===!0,gt=N(k,xe,ot);if(k.isDepthTexture)qe=n.DEPTH_COMPONENT,o?k.type===qr?qe=n.DEPTH_COMPONENT32F:k.type===Ks?qe=n.DEPTH_COMPONENT24:k.type===$a?qe=n.DEPTH24_STENCIL8:qe=n.DEPTH_COMPONENT16:k.type===qr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),k.format===eo&&qe===n.DEPTH_COMPONENT&&k.type!==xg&&k.type!==Ks&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),k.type=Ks,pt=s.convert(k.type)),k.format===Al&&qe===n.DEPTH_COMPONENT&&(qe=n.DEPTH_STENCIL,k.type!==$a&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),k.type=$a,pt=s.convert(k.type))),zt&&(It?t.texStorage2D(n.TEXTURE_2D,1,qe,xe.width,xe.height):t.texImage2D(n.TEXTURE_2D,0,qe,xe.width,xe.height,0,Et,pt,null));else if(k.isDataTexture)if(yt.length>0&&ot){It&&zt&&t.texStorage2D(n.TEXTURE_2D,gt,qe,yt[0].width,yt[0].height);for(let Le=0,J=yt.length;Le<J;Le++)Xe=yt[Le],It?t.texSubImage2D(n.TEXTURE_2D,Le,0,0,Xe.width,Xe.height,Et,pt,Xe.data):t.texImage2D(n.TEXTURE_2D,Le,qe,Xe.width,Xe.height,0,Et,pt,Xe.data);k.generateMipmaps=!1}else It?(zt&&t.texStorage2D(n.TEXTURE_2D,gt,qe,xe.width,xe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,xe.width,xe.height,Et,pt,xe.data)):t.texImage2D(n.TEXTURE_2D,0,qe,xe.width,xe.height,0,Et,pt,xe.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){It&&zt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,gt,qe,yt[0].width,yt[0].height,xe.depth);for(let Le=0,J=yt.length;Le<J;Le++)Xe=yt[Le],k.format!==Li?Et!==null?It?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Le,0,0,0,Xe.width,Xe.height,xe.depth,Et,Xe.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Le,qe,Xe.width,Xe.height,xe.depth,0,Xe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):It?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Le,0,0,0,Xe.width,Xe.height,xe.depth,Et,pt,Xe.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Le,qe,Xe.width,Xe.height,xe.depth,0,Et,pt,Xe.data)}else{It&&zt&&t.texStorage2D(n.TEXTURE_2D,gt,qe,yt[0].width,yt[0].height);for(let Le=0,J=yt.length;Le<J;Le++)Xe=yt[Le],k.format!==Li?Et!==null?It?t.compressedTexSubImage2D(n.TEXTURE_2D,Le,0,0,Xe.width,Xe.height,Et,Xe.data):t.compressedTexImage2D(n.TEXTURE_2D,Le,qe,Xe.width,Xe.height,0,Xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):It?t.texSubImage2D(n.TEXTURE_2D,Le,0,0,Xe.width,Xe.height,Et,pt,Xe.data):t.texImage2D(n.TEXTURE_2D,Le,qe,Xe.width,Xe.height,0,Et,pt,Xe.data)}else if(k.isDataArrayTexture)It?(zt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,gt,qe,xe.width,xe.height,xe.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,xe.width,xe.height,xe.depth,Et,pt,xe.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,qe,xe.width,xe.height,xe.depth,0,Et,pt,xe.data);else if(k.isData3DTexture)It?(zt&&t.texStorage3D(n.TEXTURE_3D,gt,qe,xe.width,xe.height,xe.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,xe.width,xe.height,xe.depth,Et,pt,xe.data)):t.texImage3D(n.TEXTURE_3D,0,qe,xe.width,xe.height,xe.depth,0,Et,pt,xe.data);else if(k.isFramebufferTexture){if(zt)if(It)t.texStorage2D(n.TEXTURE_2D,gt,qe,xe.width,xe.height);else{let Le=xe.width,J=xe.height;for(let ke=0;ke<gt;ke++)t.texImage2D(n.TEXTURE_2D,ke,qe,Le,J,0,Et,pt,null),Le>>=1,J>>=1}}else if(yt.length>0&&ot){It&&zt&&t.texStorage2D(n.TEXTURE_2D,gt,qe,yt[0].width,yt[0].height);for(let Le=0,J=yt.length;Le<J;Le++)Xe=yt[Le],It?t.texSubImage2D(n.TEXTURE_2D,Le,0,0,Et,pt,Xe):t.texImage2D(n.TEXTURE_2D,Le,qe,Et,pt,Xe);k.generateMipmaps=!1}else It?(zt&&t.texStorage2D(n.TEXTURE_2D,gt,qe,xe.width,xe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Et,pt,xe)):t.texImage2D(n.TEXTURE_2D,0,qe,Et,pt,xe);S(k,ot)&&A(ye),Ke.__version=we.version,k.onUpdate&&k.onUpdate(k)}F.__version=k.version}function Te(F,k,te){if(k.image.length!==6)return;const ye=oe(F,k),Ee=k.source;t.bindTexture(n.TEXTURE_CUBE_MAP,F.__webglTexture,n.TEXTURE0+te);const we=i.get(Ee);if(Ee.version!==we.__version||ye===!0){t.activeTexture(n.TEXTURE0+te);const Ke=Jt.getPrimaries(Jt.workingColorSpace),Be=k.colorSpace===ar?null:Jt.getPrimaries(k.colorSpace),He=k.colorSpace===ar||Ke===Be?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,He);const st=k.isCompressedTexture||k.image[0].isCompressedTexture,ft=k.image[0]&&k.image[0].isDataTexture,xe=[];for(let Le=0;Le<6;Le++)!st&&!ft?xe[Le]=M(k.image[Le],!1,!0,r.maxCubemapSize):xe[Le]=ft?k.image[Le].image:k.image[Le],xe[Le]=Re(k,xe[Le]);const ot=xe[0],Et=_(ot)||o,pt=s.convert(k.format,k.colorSpace),qe=s.convert(k.type),Xe=E(k.internalFormat,pt,qe,k.colorSpace),yt=o&&k.isVideoTexture!==!0,It=we.__version===void 0||ye===!0;let zt=N(k,ot,Et);Q(n.TEXTURE_CUBE_MAP,k,Et);let gt;if(st){yt&&It&&t.texStorage2D(n.TEXTURE_CUBE_MAP,zt,Xe,ot.width,ot.height);for(let Le=0;Le<6;Le++){gt=xe[Le].mipmaps;for(let J=0;J<gt.length;J++){const ke=gt[J];k.format!==Li?pt!==null?yt?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,J,0,0,ke.width,ke.height,pt,ke.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,J,Xe,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):yt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,J,0,0,ke.width,ke.height,pt,qe,ke.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,J,Xe,ke.width,ke.height,0,pt,qe,ke.data)}}}else{gt=k.mipmaps,yt&&It&&(gt.length>0&&zt++,t.texStorage2D(n.TEXTURE_CUBE_MAP,zt,Xe,xe[0].width,xe[0].height));for(let Le=0;Le<6;Le++)if(ft){yt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,xe[Le].width,xe[Le].height,pt,qe,xe[Le].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,Xe,xe[Le].width,xe[Le].height,0,pt,qe,xe[Le].data);for(let J=0;J<gt.length;J++){const Fe=gt[J].image[Le].image;yt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,J+1,0,0,Fe.width,Fe.height,pt,qe,Fe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,J+1,Xe,Fe.width,Fe.height,0,pt,qe,Fe.data)}}else{yt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,pt,qe,xe[Le]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,Xe,pt,qe,xe[Le]);for(let J=0;J<gt.length;J++){const ke=gt[J];yt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,J+1,0,0,pt,qe,ke.image[Le]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,J+1,Xe,pt,qe,ke.image[Le])}}}S(k,Et)&&A(n.TEXTURE_CUBE_MAP),we.__version=Ee.version,k.onUpdate&&k.onUpdate(k)}F.__version=k.version}function ce(F,k,te,ye,Ee,we){const Ke=s.convert(te.format,te.colorSpace),Be=s.convert(te.type),He=E(te.internalFormat,Ke,Be,te.colorSpace);if(!i.get(k).__hasExternalTextures){const ft=Math.max(1,k.width>>we),xe=Math.max(1,k.height>>we);Ee===n.TEXTURE_3D||Ee===n.TEXTURE_2D_ARRAY?t.texImage3D(Ee,we,He,ft,xe,k.depth,0,Ke,Be,null):t.texImage2D(Ee,we,He,ft,xe,0,Ke,Be,null)}t.bindFramebuffer(n.FRAMEBUFFER,F),de(k)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ye,Ee,i.get(te).__webglTexture,0,Me(k)):(Ee===n.TEXTURE_2D||Ee>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ee<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ye,Ee,i.get(te).__webglTexture,we),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Se(F,k,te){if(n.bindRenderbuffer(n.RENDERBUFFER,F),k.depthBuffer&&!k.stencilBuffer){let ye=o===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(te||de(k)){const Ee=k.depthTexture;Ee&&Ee.isDepthTexture&&(Ee.type===qr?ye=n.DEPTH_COMPONENT32F:Ee.type===Ks&&(ye=n.DEPTH_COMPONENT24));const we=Me(k);de(k)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,we,ye,k.width,k.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,we,ye,k.width,k.height)}else n.renderbufferStorage(n.RENDERBUFFER,ye,k.width,k.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,F)}else if(k.depthBuffer&&k.stencilBuffer){const ye=Me(k);te&&de(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ye,n.DEPTH24_STENCIL8,k.width,k.height):de(k)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ye,n.DEPTH24_STENCIL8,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,F)}else{const ye=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let Ee=0;Ee<ye.length;Ee++){const we=ye[Ee],Ke=s.convert(we.format,we.colorSpace),Be=s.convert(we.type),He=E(we.internalFormat,Ke,Be,we.colorSpace),st=Me(k);te&&de(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,st,He,k.width,k.height):de(k)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,st,He,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,He,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ce(F,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,F),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(k.depthTexture).__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),q(k.depthTexture,0);const ye=i.get(k.depthTexture).__webglTexture,Ee=Me(k);if(k.depthTexture.format===eo)de(k)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ye,0,Ee):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ye,0);else if(k.depthTexture.format===Al)de(k)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ye,0,Ee):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ye,0);else throw new Error("Unknown depthTexture format")}function be(F){const k=i.get(F),te=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture&&!k.__autoAllocateDepthBuffer){if(te)throw new Error("target.depthTexture not supported in Cube render targets");Ce(k.__webglFramebuffer,F)}else if(te){k.__webglDepthbuffer=[];for(let ye=0;ye<6;ye++)t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[ye]),k.__webglDepthbuffer[ye]=n.createRenderbuffer(),Se(k.__webglDepthbuffer[ye],F,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer=n.createRenderbuffer(),Se(k.__webglDepthbuffer,F,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Pe(F,k,te){const ye=i.get(F);k!==void 0&&ce(ye.__webglFramebuffer,F,F.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),te!==void 0&&be(F)}function H(F){const k=F.texture,te=i.get(F),ye=i.get(k);F.addEventListener("dispose",L),F.isWebGLMultipleRenderTargets!==!0&&(ye.__webglTexture===void 0&&(ye.__webglTexture=n.createTexture()),ye.__version=k.version,a.memory.textures++);const Ee=F.isWebGLCubeRenderTarget===!0,we=F.isWebGLMultipleRenderTargets===!0,Ke=_(F)||o;if(Ee){te.__webglFramebuffer=[];for(let Be=0;Be<6;Be++)if(o&&k.mipmaps&&k.mipmaps.length>0){te.__webglFramebuffer[Be]=[];for(let He=0;He<k.mipmaps.length;He++)te.__webglFramebuffer[Be][He]=n.createFramebuffer()}else te.__webglFramebuffer[Be]=n.createFramebuffer()}else{if(o&&k.mipmaps&&k.mipmaps.length>0){te.__webglFramebuffer=[];for(let Be=0;Be<k.mipmaps.length;Be++)te.__webglFramebuffer[Be]=n.createFramebuffer()}else te.__webglFramebuffer=n.createFramebuffer();if(we)if(r.drawBuffers){const Be=F.texture;for(let He=0,st=Be.length;He<st;He++){const ft=i.get(Be[He]);ft.__webglTexture===void 0&&(ft.__webglTexture=n.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&F.samples>0&&de(F)===!1){const Be=we?k:[k];te.__webglMultisampledFramebuffer=n.createFramebuffer(),te.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,te.__webglMultisampledFramebuffer);for(let He=0;He<Be.length;He++){const st=Be[He];te.__webglColorRenderbuffer[He]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,te.__webglColorRenderbuffer[He]);const ft=s.convert(st.format,st.colorSpace),xe=s.convert(st.type),ot=E(st.internalFormat,ft,xe,st.colorSpace,F.isXRRenderTarget===!0),Et=Me(F);n.renderbufferStorageMultisample(n.RENDERBUFFER,Et,ot,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+He,n.RENDERBUFFER,te.__webglColorRenderbuffer[He])}n.bindRenderbuffer(n.RENDERBUFFER,null),F.depthBuffer&&(te.__webglDepthRenderbuffer=n.createRenderbuffer(),Se(te.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ee){t.bindTexture(n.TEXTURE_CUBE_MAP,ye.__webglTexture),Q(n.TEXTURE_CUBE_MAP,k,Ke);for(let Be=0;Be<6;Be++)if(o&&k.mipmaps&&k.mipmaps.length>0)for(let He=0;He<k.mipmaps.length;He++)ce(te.__webglFramebuffer[Be][He],F,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,He);else ce(te.__webglFramebuffer[Be],F,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0);S(k,Ke)&&A(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(we){const Be=F.texture;for(let He=0,st=Be.length;He<st;He++){const ft=Be[He],xe=i.get(ft);t.bindTexture(n.TEXTURE_2D,xe.__webglTexture),Q(n.TEXTURE_2D,ft,Ke),ce(te.__webglFramebuffer,F,ft,n.COLOR_ATTACHMENT0+He,n.TEXTURE_2D,0),S(ft,Ke)&&A(n.TEXTURE_2D)}t.unbindTexture()}else{let Be=n.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(o?Be=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Be,ye.__webglTexture),Q(Be,k,Ke),o&&k.mipmaps&&k.mipmaps.length>0)for(let He=0;He<k.mipmaps.length;He++)ce(te.__webglFramebuffer[He],F,k,n.COLOR_ATTACHMENT0,Be,He);else ce(te.__webglFramebuffer,F,k,n.COLOR_ATTACHMENT0,Be,0);S(k,Ke)&&A(Be),t.unbindTexture()}F.depthBuffer&&be(F)}function ve(F){const k=_(F)||o,te=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let ye=0,Ee=te.length;ye<Ee;ye++){const we=te[ye];if(S(we,k)){const Ke=F.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Be=i.get(we).__webglTexture;t.bindTexture(Ke,Be),A(Ke),t.unbindTexture()}}}function pe(F){if(o&&F.samples>0&&de(F)===!1){const k=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],te=F.width,ye=F.height;let Ee=n.COLOR_BUFFER_BIT;const we=[],Ke=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Be=i.get(F),He=F.isWebGLMultipleRenderTargets===!0;if(He)for(let st=0;st<k.length;st++)t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Be.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Be.__webglFramebuffer);for(let st=0;st<k.length;st++){we.push(n.COLOR_ATTACHMENT0+st),F.depthBuffer&&we.push(Ke);const ft=Be.__ignoreDepthValues!==void 0?Be.__ignoreDepthValues:!1;if(ft===!1&&(F.depthBuffer&&(Ee|=n.DEPTH_BUFFER_BIT),F.stencilBuffer&&(Ee|=n.STENCIL_BUFFER_BIT)),He&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Be.__webglColorRenderbuffer[st]),ft===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Ke]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Ke])),He){const xe=i.get(k[st]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,xe,0)}n.blitFramebuffer(0,0,te,ye,0,0,te,ye,Ee,n.NEAREST),h&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,we)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),He)for(let st=0;st<k.length;st++){t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.RENDERBUFFER,Be.__webglColorRenderbuffer[st]);const ft=i.get(k[st]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.TEXTURE_2D,ft,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Be.__webglMultisampledFramebuffer)}}function Me(F){return Math.min(r.maxSamples,F.samples)}function de(F){const k=i.get(F);return o&&F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function ie(F){const k=a.render.frame;f.get(F)!==k&&(f.set(F,k),F.update())}function Re(F,k){const te=F.colorSpace,ye=F.format,Ee=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||F.format===Jm||te!==bs&&te!==ar&&(Jt.getTransfer(te)===en?o===!1?e.has("EXT_sRGB")===!0&&ye===Li?(F.format=Jm,F.minFilter=mn,F.generateMipmaps=!1):k=BS.sRGBToLinear(k):(ye!==Li||Ee!==Ms)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",te)),k}this.allocateTextureUnit=V,this.resetTextureUnits=$,this.setTexture2D=q,this.setTexture2DArray=ue,this.setTexture3D=U,this.setTextureCube=j,this.rebindTextures=Pe,this.setupRenderTarget=H,this.updateRenderTargetMipmap=ve,this.updateMultisampleRenderTarget=pe,this.setupDepthRenderbuffer=be,this.setupFrameBufferTexture=ce,this.useMultisampledRTT=de}function U2(n,e,t){const i=t.isWebGL2;function r(s,a=ar){let o;const l=Jt.getTransfer(a);if(s===Ms)return n.UNSIGNED_BYTE;if(s===AS)return n.UNSIGNED_SHORT_4_4_4_4;if(s===wS)return n.UNSIGNED_SHORT_5_5_5_1;if(s===n2)return n.BYTE;if(s===i2)return n.SHORT;if(s===xg)return n.UNSIGNED_SHORT;if(s===SS)return n.INT;if(s===Ks)return n.UNSIGNED_INT;if(s===qr)return n.FLOAT;if(s===cu)return i?n.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===r2)return n.ALPHA;if(s===Li)return n.RGBA;if(s===s2)return n.LUMINANCE;if(s===a2)return n.LUMINANCE_ALPHA;if(s===eo)return n.DEPTH_COMPONENT;if(s===Al)return n.DEPTH_STENCIL;if(s===Jm)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===o2)return n.RED;if(s===MS)return n.RED_INTEGER;if(s===l2)return n.RG;if(s===ES)return n.RG_INTEGER;if(s===CS)return n.RGBA_INTEGER;if(s===dm||s===hm||s===fm||s===pm)if(l===en)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===dm)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===hm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===fm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===pm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===dm)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===hm)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===fm)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===pm)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Nx||s===Px||s===Ix||s===Bx)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===Nx)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Px)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Ix)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Bx)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===TS)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Lx||s===Dx)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===Lx)return l===en?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===Dx)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===kx||s===Fx||s===Ux||s===Ox||s===jx||s===zx||s===Gx||s===Hx||s===Vx||s===Wx||s===Xx||s===Jx||s===Yx||s===Kx)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===kx)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Fx)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===Ux)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Ox)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===jx)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===zx)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===Gx)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Hx)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Vx)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Wx)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Xx)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Jx)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Yx)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Kx)return l===en?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===mm||s===qx||s===Qx)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===mm)return l===en?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===qx)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===Qx)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===c2||s===Zx||s===$x||s===e_)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(s===mm)return o.COMPRESSED_RED_RGTC1_EXT;if(s===Zx)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===$x)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===e_)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===$a?i?n.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class O2 extends Wn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class qs extends Ft{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Yj={type:"move"};class z0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new qs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new qs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new qs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){a=!0;for(const M of e.hand.values()){const _=t.getJointPose(M,i),v=this._getHandJoint(h,M);_!==null&&(v.matrix.fromArray(_.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=_.radius),v.visible=_!==null}const f=h.joints["index-finger-tip"],p=h.joints["thumb-tip"],m=f.position.distanceTo(p.position),g=.02,y=.005;h.inputState.pinching&&m>g+y?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&m<=g-y&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Yj)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),h!==null&&(h.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new qs;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Kj extends ua{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=1,h=null,f=null,p=null,m=null,g=null,y=null;const M=t.getContextAttributes();let _=null,v=null;const S=[],A=[],E=new Ae;let N=null;const T=new Wn;T.layers.enable(1),T.viewport=new Yt;const P=new Wn;P.layers.enable(2),P.viewport=new Yt;const L=[T,P],R=new O2;R.layers.enable(1),R.layers.enable(2);let b=null,D=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Q){let oe=S[Q];return oe===void 0&&(oe=new z0,S[Q]=oe),oe.getTargetRaySpace()},this.getControllerGrip=function(Q){let oe=S[Q];return oe===void 0&&(oe=new z0,S[Q]=oe),oe.getGripSpace()},this.getHand=function(Q){let oe=S[Q];return oe===void 0&&(oe=new z0,S[Q]=oe),oe.getHandSpace()};function X(Q){const oe=A.indexOf(Q.inputSource);if(oe===-1)return;const ge=S[oe];ge!==void 0&&(ge.update(Q.inputSource,Q.frame,h||a),ge.dispatchEvent({type:Q.type,data:Q.inputSource}))}function $(){r.removeEventListener("select",X),r.removeEventListener("selectstart",X),r.removeEventListener("selectend",X),r.removeEventListener("squeeze",X),r.removeEventListener("squeezestart",X),r.removeEventListener("squeezeend",X),r.removeEventListener("end",$),r.removeEventListener("inputsourceschange",V);for(let Q=0;Q<S.length;Q++){const oe=A[Q];oe!==null&&(A[Q]=null,S[Q].disconnect(oe))}b=null,D=null,e.setRenderTarget(_),g=null,m=null,p=null,r=null,v=null,re.stop(),i.isPresenting=!1,e.setPixelRatio(N),e.setSize(E.width,E.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Q){s=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Q){o=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||a},this.setReferenceSpace=function(Q){h=Q},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return p},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(Q){if(r=Q,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",X),r.addEventListener("selectstart",X),r.addEventListener("selectend",X),r.addEventListener("squeeze",X),r.addEventListener("squeezestart",X),r.addEventListener("squeezeend",X),r.addEventListener("end",$),r.addEventListener("inputsourceschange",V),M.xrCompatible!==!0&&await t.makeXRCompatible(),N=e.getPixelRatio(),e.getSize(E),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const oe={antialias:r.renderState.layers===void 0?M.antialias:!0,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(r,t,oe),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),v=new ts(g.framebufferWidth,g.framebufferHeight,{format:Li,type:Ms,colorSpace:e.outputColorSpace,stencilBuffer:M.stencil})}else{let oe=null,ge=null,Te=null;M.depth&&(Te=M.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,oe=M.stencil?Al:eo,ge=M.stencil?$a:Ks);const ce={colorFormat:t.RGBA8,depthFormat:Te,scaleFactor:s};p=new XRWebGLBinding(r,t),m=p.createProjectionLayer(ce),r.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),v=new ts(m.textureWidth,m.textureHeight,{format:Li,type:Ms,depthTexture:new US(m.textureWidth,m.textureHeight,ge,void 0,void 0,void 0,void 0,void 0,void 0,oe),stencilBuffer:M.stencil,colorSpace:e.outputColorSpace,samples:M.antialias?4:0});const Se=e.properties.get(v);Se.__ignoreDepthValues=m.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),h=null,a=await r.requestReferenceSpace(o),re.setContext(r),re.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function V(Q){for(let oe=0;oe<Q.removed.length;oe++){const ge=Q.removed[oe],Te=A.indexOf(ge);Te>=0&&(A[Te]=null,S[Te].disconnect(ge))}for(let oe=0;oe<Q.added.length;oe++){const ge=Q.added[oe];let Te=A.indexOf(ge);if(Te===-1){for(let Se=0;Se<S.length;Se++)if(Se>=A.length){A.push(ge),Te=Se;break}else if(A[Se]===null){A[Se]=ge,Te=Se;break}if(Te===-1)break}const ce=S[Te];ce&&ce.connect(ge)}}const K=new z,q=new z;function ue(Q,oe,ge){K.setFromMatrixPosition(oe.matrixWorld),q.setFromMatrixPosition(ge.matrixWorld);const Te=K.distanceTo(q),ce=oe.projectionMatrix.elements,Se=ge.projectionMatrix.elements,Ce=ce[14]/(ce[10]-1),be=ce[14]/(ce[10]+1),Pe=(ce[9]+1)/ce[5],H=(ce[9]-1)/ce[5],ve=(ce[8]-1)/ce[0],pe=(Se[8]+1)/Se[0],Me=Ce*ve,de=Ce*pe,ie=Te/(-ve+pe),Re=ie*-ve;oe.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Q.translateX(Re),Q.translateZ(ie),Q.matrixWorld.compose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldInverse.copy(Q.matrixWorld).invert();const F=Ce+ie,k=be+ie,te=Me-Re,ye=de+(Te-Re),Ee=Pe*be/k*F,we=H*be/k*F;Q.projectionMatrix.makePerspective(te,ye,Ee,we,F,k),Q.projectionMatrixInverse.copy(Q.projectionMatrix).invert()}function U(Q,oe){oe===null?Q.matrixWorld.copy(Q.matrix):Q.matrixWorld.multiplyMatrices(oe.matrixWorld,Q.matrix),Q.matrixWorldInverse.copy(Q.matrixWorld).invert()}this.updateCamera=function(Q){if(r===null)return;R.near=P.near=T.near=Q.near,R.far=P.far=T.far=Q.far,(b!==R.near||D!==R.far)&&(r.updateRenderState({depthNear:R.near,depthFar:R.far}),b=R.near,D=R.far);const oe=Q.parent,ge=R.cameras;U(R,oe);for(let Te=0;Te<ge.length;Te++)U(ge[Te],oe);ge.length===2?ue(R,T,P):R.projectionMatrix.copy(T.projectionMatrix),j(Q,R,oe)};function j(Q,oe,ge){ge===null?Q.matrix.copy(oe.matrixWorld):(Q.matrix.copy(ge.matrixWorld),Q.matrix.invert(),Q.matrix.multiply(oe.matrixWorld)),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale),Q.updateMatrixWorld(!0),Q.projectionMatrix.copy(oe.projectionMatrix),Q.projectionMatrixInverse.copy(oe.projectionMatrixInverse),Q.isPerspectiveCamera&&(Q.fov=hu*2*Math.atan(1/Q.projectionMatrix.elements[5]),Q.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(m===null&&g===null))return l},this.setFoveation=function(Q){l=Q,m!==null&&(m.fixedFoveation=Q),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=Q)};let W=null;function Y(Q,oe){if(f=oe.getViewerPose(h||a),y=oe,f!==null){const ge=f.views;g!==null&&(e.setRenderTargetFramebuffer(v,g.framebuffer),e.setRenderTarget(v));let Te=!1;ge.length!==R.cameras.length&&(R.cameras.length=0,Te=!0);for(let ce=0;ce<ge.length;ce++){const Se=ge[ce];let Ce=null;if(g!==null)Ce=g.getViewport(Se);else{const Pe=p.getViewSubImage(m,Se);Ce=Pe.viewport,ce===0&&(e.setRenderTargetTextures(v,Pe.colorTexture,m.ignoreDepthValues?void 0:Pe.depthStencilTexture),e.setRenderTarget(v))}let be=L[ce];be===void 0&&(be=new Wn,be.layers.enable(ce),be.viewport=new Yt,L[ce]=be),be.matrix.fromArray(Se.transform.matrix),be.matrix.decompose(be.position,be.quaternion,be.scale),be.projectionMatrix.fromArray(Se.projectionMatrix),be.projectionMatrixInverse.copy(be.projectionMatrix).invert(),be.viewport.set(Ce.x,Ce.y,Ce.width,Ce.height),ce===0&&(R.matrix.copy(be.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),Te===!0&&R.cameras.push(be)}}for(let ge=0;ge<S.length;ge++){const Te=A[ge],ce=S[ge];Te!==null&&ce!==void 0&&ce.update(Te,oe,h||a)}W&&W(Q,oe),oe.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:oe}),y=null}const re=new I2;re.setAnimationLoop(Y),this.setAnimationLoop=function(Q){W=Q},this.dispose=function(){}}}function qj(n,e){function t(_,v){_.matrixAutoUpdate===!0&&_.updateMatrix(),v.value.copy(_.matrix)}function i(_,v){v.color.getRGB(_.fogColor.value,b2(n)),v.isFog?(_.fogNear.value=v.near,_.fogFar.value=v.far):v.isFogExp2&&(_.fogDensity.value=v.density)}function r(_,v,S,A,E){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(_,v):v.isMeshToonMaterial?(s(_,v),p(_,v)):v.isMeshPhongMaterial?(s(_,v),f(_,v)):v.isMeshStandardMaterial?(s(_,v),m(_,v),v.isMeshPhysicalMaterial&&g(_,v,E)):v.isMeshMatcapMaterial?(s(_,v),y(_,v)):v.isMeshDepthMaterial?s(_,v):v.isMeshDistanceMaterial?(s(_,v),M(_,v)):v.isMeshNormalMaterial?s(_,v):v.isLineBasicMaterial?(a(_,v),v.isLineDashedMaterial&&o(_,v)):v.isPointsMaterial?l(_,v,S,A):v.isSpriteMaterial?h(_,v):v.isShadowMaterial?(_.color.value.copy(v.color),_.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(_,v){_.opacity.value=v.opacity,v.color&&_.diffuse.value.copy(v.color),v.emissive&&_.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(_.map.value=v.map,t(v.map,_.mapTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.bumpMap&&(_.bumpMap.value=v.bumpMap,t(v.bumpMap,_.bumpMapTransform),_.bumpScale.value=v.bumpScale,v.side===ki&&(_.bumpScale.value*=-1)),v.normalMap&&(_.normalMap.value=v.normalMap,t(v.normalMap,_.normalMapTransform),_.normalScale.value.copy(v.normalScale),v.side===ki&&_.normalScale.value.negate()),v.displacementMap&&(_.displacementMap.value=v.displacementMap,t(v.displacementMap,_.displacementMapTransform),_.displacementScale.value=v.displacementScale,_.displacementBias.value=v.displacementBias),v.emissiveMap&&(_.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,_.emissiveMapTransform)),v.specularMap&&(_.specularMap.value=v.specularMap,t(v.specularMap,_.specularMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest);const S=e.get(v).envMap;if(S&&(_.envMap.value=S,_.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=v.reflectivity,_.ior.value=v.ior,_.refractionRatio.value=v.refractionRatio),v.lightMap){_.lightMap.value=v.lightMap;const A=n._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=v.lightMapIntensity*A,t(v.lightMap,_.lightMapTransform)}v.aoMap&&(_.aoMap.value=v.aoMap,_.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,_.aoMapTransform))}function a(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,v.map&&(_.map.value=v.map,t(v.map,_.mapTransform))}function o(_,v){_.dashSize.value=v.dashSize,_.totalSize.value=v.dashSize+v.gapSize,_.scale.value=v.scale}function l(_,v,S,A){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.size.value=v.size*S,_.scale.value=A*.5,v.map&&(_.map.value=v.map,t(v.map,_.uvTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest)}function h(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.rotation.value=v.rotation,v.map&&(_.map.value=v.map,t(v.map,_.mapTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest)}function f(_,v){_.specular.value.copy(v.specular),_.shininess.value=Math.max(v.shininess,1e-4)}function p(_,v){v.gradientMap&&(_.gradientMap.value=v.gradientMap)}function m(_,v){_.metalness.value=v.metalness,v.metalnessMap&&(_.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,_.metalnessMapTransform)),_.roughness.value=v.roughness,v.roughnessMap&&(_.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,_.roughnessMapTransform)),e.get(v).envMap&&(_.envMapIntensity.value=v.envMapIntensity)}function g(_,v,S){_.ior.value=v.ior,v.sheen>0&&(_.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),_.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(_.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,_.sheenColorMapTransform)),v.sheenRoughnessMap&&(_.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,_.sheenRoughnessMapTransform))),v.clearcoat>0&&(_.clearcoat.value=v.clearcoat,_.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(_.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,_.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(_.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===ki&&_.clearcoatNormalScale.value.negate())),v.iridescence>0&&(_.iridescence.value=v.iridescence,_.iridescenceIOR.value=v.iridescenceIOR,_.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(_.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,_.iridescenceMapTransform)),v.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),v.transmission>0&&(_.transmission.value=v.transmission,_.transmissionSamplerMap.value=S.texture,_.transmissionSamplerSize.value.set(S.width,S.height),v.transmissionMap&&(_.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,_.transmissionMapTransform)),_.thickness.value=v.thickness,v.thicknessMap&&(_.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=v.attenuationDistance,_.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(_.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(_.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=v.specularIntensity,_.specularColor.value.copy(v.specularColor),v.specularColorMap&&(_.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,_.specularColorMapTransform)),v.specularIntensityMap&&(_.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,_.specularIntensityMapTransform))}function y(_,v){v.matcap&&(_.matcap.value=v.matcap)}function M(_,v){const S=e.get(v).light;_.referencePosition.value.setFromMatrixPosition(S.matrixWorld),_.nearDistance.value=S.shadow.camera.near,_.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Qj(n,e,t,i){let r={},s={},a=[];const o=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(S,A){const E=A.program;i.uniformBlockBinding(S,E)}function h(S,A){let E=r[S.id];E===void 0&&(y(S),E=f(S),r[S.id]=E,S.addEventListener("dispose",_));const N=A.program;i.updateUBOMapping(S,N);const T=e.render.frame;s[S.id]!==T&&(m(S),s[S.id]=T)}function f(S){const A=p();S.__bindingPointIndex=A;const E=n.createBuffer(),N=S.__size,T=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,N,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,A,E),E}function p(){for(let S=0;S<o;S++)if(a.indexOf(S)===-1)return a.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(S){const A=r[S.id],E=S.uniforms,N=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,A);for(let T=0,P=E.length;T<P;T++){const L=Array.isArray(E[T])?E[T]:[E[T]];for(let R=0,b=L.length;R<b;R++){const D=L[R];if(g(D,T,R,N)===!0){const X=D.__offset,$=Array.isArray(D.value)?D.value:[D.value];let V=0;for(let K=0;K<$.length;K++){const q=$[K],ue=M(q);typeof q=="number"||typeof q=="boolean"?(D.__data[0]=q,n.bufferSubData(n.UNIFORM_BUFFER,X+V,D.__data)):q.isMatrix3?(D.__data[0]=q.elements[0],D.__data[1]=q.elements[1],D.__data[2]=q.elements[2],D.__data[3]=0,D.__data[4]=q.elements[3],D.__data[5]=q.elements[4],D.__data[6]=q.elements[5],D.__data[7]=0,D.__data[8]=q.elements[6],D.__data[9]=q.elements[7],D.__data[10]=q.elements[8],D.__data[11]=0):(q.toArray(D.__data,V),V+=ue.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,X,D.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(S,A,E,N){const T=S.value,P=A+"_"+E;if(N[P]===void 0)return typeof T=="number"||typeof T=="boolean"?N[P]=T:N[P]=T.clone(),!0;{const L=N[P];if(typeof T=="number"||typeof T=="boolean"){if(L!==T)return N[P]=T,!0}else if(L.equals(T)===!1)return L.copy(T),!0}return!1}function y(S){const A=S.uniforms;let E=0;const N=16;for(let P=0,L=A.length;P<L;P++){const R=Array.isArray(A[P])?A[P]:[A[P]];for(let b=0,D=R.length;b<D;b++){const X=R[b],$=Array.isArray(X.value)?X.value:[X.value];for(let V=0,K=$.length;V<K;V++){const q=$[V],ue=M(q),U=E%N;U!==0&&N-U<ue.boundary&&(E+=N-U),X.__data=new Float32Array(ue.storage/Float32Array.BYTES_PER_ELEMENT),X.__offset=E,E+=ue.storage}}}const T=E%N;return T>0&&(E+=N-T),S.__size=E,S.__cache={},this}function M(S){const A={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(A.boundary=4,A.storage=4):S.isVector2?(A.boundary=8,A.storage=8):S.isVector3||S.isColor?(A.boundary=16,A.storage=12):S.isVector4?(A.boundary=16,A.storage=16):S.isMatrix3?(A.boundary=48,A.storage=48):S.isMatrix4?(A.boundary=64,A.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),A}function _(S){const A=S.target;A.removeEventListener("dispose",_);const E=a.indexOf(A.__bindingPointIndex);a.splice(E,1),n.deleteBuffer(r[A.id]),delete r[A.id],delete s[A.id]}function v(){for(const S in r)n.deleteBuffer(r[S]);a=[],r={},s={}}return{bind:l,update:h,dispose:v}}class zS{constructor(e={}){const{canvas:t=E2(),context:i=null,depth:r=!0,stencil:s=!0,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:h=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:p=!1}=e;this.isWebGLRenderer=!0;let m;i!==null?m=i.getContextAttributes().alpha:m=a;const g=new Uint32Array(4),y=new Int32Array(4);let M=null,_=null;const v=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Vn,this._useLegacyLights=!1,this.toneMapping=ws,this.toneMappingExposure=1;const A=this;let E=!1,N=0,T=0,P=null,L=-1,R=null;const b=new Yt,D=new Yt;let X=null;const $=new Ue(0);let V=0,K=t.width,q=t.height,ue=1,U=null,j=null;const W=new Yt(0,0,K,q),Y=new Yt(0,0,K,q);let re=!1;const Q=new Ph;let oe=!1,ge=!1,Te=null;const ce=new dt,Se=new Ae,Ce=new z,be={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Pe(){return P===null?ue:1}let H=i;function ve(O,ne){for(let se=0;se<O.length;se++){const he=O[se],le=t.getContext(he,ne);if(le!==null)return le}return null}try{const O={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:h,powerPreference:f,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Eh}`),t.addEventListener("webglcontextlost",Le,!1),t.addEventListener("webglcontextrestored",J,!1),t.addEventListener("webglcontextcreationerror",ke,!1),H===null){const ne=["webgl2","webgl","experimental-webgl"];if(A.isWebGL1Renderer===!0&&ne.shift(),H=ve(ne,O),H===null)throw ve(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&H instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),H.getShaderPrecisionFormat===void 0&&(H.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}let pe,Me,de,ie,Re,F,k,te,ye,Ee,we,Ke,Be,He,st,ft,xe,ot,Et,pt,qe,Xe,yt,It;function zt(){pe=new dO(H),Me=new sO(H,pe,e),pe.init(Me),Xe=new U2(H,pe,Me),de=new Xj(H,pe,Me),ie=new pO(H),Re=new Lj,F=new Jj(H,pe,de,Re,Me,Xe,ie),k=new oO(A),te=new uO(A),ye=new A3(H,Me),yt=new iO(H,pe,ye,Me),Ee=new hO(H,ye,ie,yt),we=new yO(H,Ee,ye,ie),Et=new vO(H,Me,F),ft=new aO(Re),Ke=new Bj(A,k,te,pe,Me,yt,ft),Be=new qj(A,Re),He=new kj,st=new Gj(pe,Me),ot=new nO(A,k,te,de,we,m,l),xe=new Wj(A,we,Me),It=new Qj(H,ie,Me,de),pt=new rO(H,pe,ie,Me),qe=new fO(H,pe,ie,Me),ie.programs=Ke.programs,A.capabilities=Me,A.extensions=pe,A.properties=Re,A.renderLists=He,A.shadowMap=xe,A.state=de,A.info=ie}zt();const gt=new Kj(A,H);this.xr=gt,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){const O=pe.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){const O=pe.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return ue},this.setPixelRatio=function(O){O!==void 0&&(ue=O,this.setSize(K,q,!1))},this.getSize=function(O){return O.set(K,q)},this.setSize=function(O,ne,se=!0){if(gt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}K=O,q=ne,t.width=Math.floor(O*ue),t.height=Math.floor(ne*ue),se===!0&&(t.style.width=O+"px",t.style.height=ne+"px"),this.setViewport(0,0,O,ne)},this.getDrawingBufferSize=function(O){return O.set(K*ue,q*ue).floor()},this.setDrawingBufferSize=function(O,ne,se){K=O,q=ne,ue=se,t.width=Math.floor(O*se),t.height=Math.floor(ne*se),this.setViewport(0,0,O,ne)},this.getCurrentViewport=function(O){return O.copy(b)},this.getViewport=function(O){return O.copy(W)},this.setViewport=function(O,ne,se,he){O.isVector4?W.set(O.x,O.y,O.z,O.w):W.set(O,ne,se,he),de.viewport(b.copy(W).multiplyScalar(ue).floor())},this.getScissor=function(O){return O.copy(Y)},this.setScissor=function(O,ne,se,he){O.isVector4?Y.set(O.x,O.y,O.z,O.w):Y.set(O,ne,se,he),de.scissor(D.copy(Y).multiplyScalar(ue).floor())},this.getScissorTest=function(){return re},this.setScissorTest=function(O){de.setScissorTest(re=O)},this.setOpaqueSort=function(O){U=O},this.setTransparentSort=function(O){j=O},this.getClearColor=function(O){return O.copy(ot.getClearColor())},this.setClearColor=function(){ot.setClearColor.apply(ot,arguments)},this.getClearAlpha=function(){return ot.getClearAlpha()},this.setClearAlpha=function(){ot.setClearAlpha.apply(ot,arguments)},this.clear=function(O=!0,ne=!0,se=!0){let he=0;if(O){let le=!1;if(P!==null){const ze=P.texture.format;le=ze===CS||ze===ES||ze===MS}if(le){const ze=P.texture.type,Ze=ze===Ms||ze===Ks||ze===xg||ze===$a||ze===AS||ze===wS,at=ot.getClearColor(),ct=ot.getClearAlpha(),mt=at.r,vt=at.g,xt=at.b;Ze?(g[0]=mt,g[1]=vt,g[2]=xt,g[3]=ct,H.clearBufferuiv(H.COLOR,0,g)):(y[0]=mt,y[1]=vt,y[2]=xt,y[3]=ct,H.clearBufferiv(H.COLOR,0,y))}else he|=H.COLOR_BUFFER_BIT}ne&&(he|=H.DEPTH_BUFFER_BIT),se&&(he|=H.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),H.clear(he)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Le,!1),t.removeEventListener("webglcontextrestored",J,!1),t.removeEventListener("webglcontextcreationerror",ke,!1),He.dispose(),st.dispose(),Re.dispose(),k.dispose(),te.dispose(),we.dispose(),yt.dispose(),It.dispose(),Ke.dispose(),gt.dispose(),gt.removeEventListener("sessionstart",In),gt.removeEventListener("sessionend",Xt),Te&&(Te.dispose(),Te=null),Bn.stop()};function Le(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function J(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const O=ie.autoReset,ne=xe.enabled,se=xe.autoUpdate,he=xe.needsUpdate,le=xe.type;zt(),ie.autoReset=O,xe.enabled=ne,xe.autoUpdate=se,xe.needsUpdate=he,xe.type=le}function ke(O){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",O.statusMessage)}function Fe(O){const ne=O.target;ne.removeEventListener("dispose",Fe),nt(ne)}function nt(O){rt(O),Re.remove(O)}function rt(O){const ne=Re.get(O).programs;ne!==void 0&&(ne.forEach(function(se){Ke.releaseProgram(se)}),O.isShaderMaterial&&Ke.releaseShaderCache(O))}this.renderBufferDirect=function(O,ne,se,he,le,ze){ne===null&&(ne=be);const Ze=le.isMesh&&le.matrixWorld.determinant()<0,at=_n(O,ne,se,he,le);de.setMaterial(he,Ze);let ct=se.index,mt=1;if(he.wireframe===!0){if(ct=Ee.getWireframeAttribute(se),ct===void 0)return;mt=2}const vt=se.drawRange,xt=se.attributes.position;let $t=vt.start*mt,jn=(vt.start+vt.count)*mt;ze!==null&&($t=Math.max($t,ze.start*mt),jn=Math.min(jn,(ze.start+ze.count)*mt)),ct!==null?($t=Math.max($t,0),jn=Math.min(jn,ct.count)):xt!=null&&($t=Math.max($t,0),jn=Math.min(jn,xt.count));const qt=jn-$t;if(qt<0||qt===1/0)return;yt.setup(le,he,at,se,ct);let Cn,ut=pt;if(ct!==null&&(Cn=ye.get(ct),ut=qe,ut.setIndex(Cn)),le.isMesh)he.wireframe===!0?(de.setLineWidth(he.wireframeLinewidth*Pe()),ut.setMode(H.LINES)):ut.setMode(H.TRIANGLES);else if(le.isLine){let Ve=he.linewidth;Ve===void 0&&(Ve=1),de.setLineWidth(Ve*Pe()),le.isLineSegments?ut.setMode(H.LINES):le.isLineLoop?ut.setMode(H.LINE_LOOP):ut.setMode(H.LINE_STRIP)}else le.isPoints?ut.setMode(H.POINTS):le.isSprite&&ut.setMode(H.TRIANGLES);if(le.isBatchedMesh)ut.renderMultiDraw(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount);else if(le.isInstancedMesh)ut.renderInstances($t,qt,le.count);else if(se.isInstancedBufferGeometry){const Ve=se._maxInstanceCount!==void 0?se._maxInstanceCount:1/0,hi=Math.min(se.instanceCount,Ve);ut.renderInstances($t,qt,hi)}else ut.render($t,qt)};function Wt(O,ne,se){O.transparent===!0&&O.side===Kr&&O.forceSinglePass===!1?(O.side=ki,O.needsUpdate=!0,fa(O,ne,se),O.side=Cs,O.needsUpdate=!0,fa(O,ne,se),O.side=Kr):fa(O,ne,se)}this.compile=function(O,ne,se=null){se===null&&(se=O),_=st.get(se),_.init(),S.push(_),se.traverseVisible(function(le){le.isLight&&le.layers.test(ne.layers)&&(_.pushLight(le),le.castShadow&&_.pushShadow(le))}),O!==se&&O.traverseVisible(function(le){le.isLight&&le.layers.test(ne.layers)&&(_.pushLight(le),le.castShadow&&_.pushShadow(le))}),_.setupLights(A._useLegacyLights);const he=new Set;return O.traverse(function(le){const ze=le.material;if(ze)if(Array.isArray(ze))for(let Ze=0;Ze<ze.length;Ze++){const at=ze[Ze];Wt(at,se,le),he.add(at)}else Wt(ze,se,le),he.add(ze)}),S.pop(),_=null,he},this.compileAsync=function(O,ne,se=null){const he=this.compile(O,ne,se);return new Promise(le=>{function ze(){if(he.forEach(function(Ze){Re.get(Ze).currentProgram.isReady()&&he.delete(Ze)}),he.size===0){le(O);return}setTimeout(ze,10)}pe.get("KHR_parallel_shader_compile")!==null?ze():setTimeout(ze,10)})};let Dt=null;function on(O){Dt&&Dt(O)}function In(){Bn.stop()}function Xt(){Bn.start()}const Bn=new I2;Bn.setAnimationLoop(on),typeof self<"u"&&Bn.setContext(self),this.setAnimationLoop=function(O){Dt=O,gt.setAnimationLoop(O),O===null?Bn.stop():Bn.start()},gt.addEventListener("sessionstart",In),gt.addEventListener("sessionend",Xt),this.render=function(O,ne){if(ne!==void 0&&ne.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;O.matrixWorldAutoUpdate===!0&&O.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),gt.enabled===!0&&gt.isPresenting===!0&&(gt.cameraAutoUpdate===!0&&gt.updateCamera(ne),ne=gt.getCamera()),O.isScene===!0&&O.onBeforeRender(A,O,ne,P),_=st.get(O,S.length),_.init(),S.push(_),ce.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),Q.setFromProjectionMatrix(ce),ge=this.localClippingEnabled,oe=ft.init(this.clippingPlanes,ge),M=He.get(O,v.length),M.init(),v.push(M),Oi(O,ne,0,A.sortObjects),M.finish(),A.sortObjects===!0&&M.sort(U,j),this.info.render.frame++,oe===!0&&ft.beginShadows();const se=_.state.shadowsArray;if(xe.render(se,O,ne),oe===!0&&ft.endShadows(),this.info.autoReset===!0&&this.info.reset(),ot.render(M,O),_.setupLights(A._useLegacyLights),ne.isArrayCamera){const he=ne.cameras;for(let le=0,ze=he.length;le<ze;le++){const Ze=he[le];da(M,O,Ze,Ze.viewport)}}else da(M,O,ne);P!==null&&(F.updateMultisampleRenderTarget(P),F.updateRenderTargetMipmap(P)),O.isScene===!0&&O.onAfterRender(A,O,ne),yt.resetDefaultState(),L=-1,R=null,S.pop(),S.length>0?_=S[S.length-1]:_=null,v.pop(),v.length>0?M=v[v.length-1]:M=null};function Oi(O,ne,se,he){if(O.visible===!1)return;if(O.layers.test(ne.layers)){if(O.isGroup)se=O.renderOrder;else if(O.isLOD)O.autoUpdate===!0&&O.update(ne);else if(O.isLight)_.pushLight(O),O.castShadow&&_.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||Q.intersectsSprite(O)){he&&Ce.setFromMatrixPosition(O.matrixWorld).applyMatrix4(ce);const Ze=we.update(O),at=O.material;at.visible&&M.push(O,Ze,at,se,Ce.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(!O.frustumCulled||Q.intersectsObject(O))){const Ze=we.update(O),at=O.material;if(he&&(O.boundingSphere!==void 0?(O.boundingSphere===null&&O.computeBoundingSphere(),Ce.copy(O.boundingSphere.center)):(Ze.boundingSphere===null&&Ze.computeBoundingSphere(),Ce.copy(Ze.boundingSphere.center)),Ce.applyMatrix4(O.matrixWorld).applyMatrix4(ce)),Array.isArray(at)){const ct=Ze.groups;for(let mt=0,vt=ct.length;mt<vt;mt++){const xt=ct[mt],$t=at[xt.materialIndex];$t&&$t.visible&&M.push(O,Ze,$t,se,Ce.z,xt)}}else at.visible&&M.push(O,Ze,at,se,Ce.z,null)}}const ze=O.children;for(let Ze=0,at=ze.length;Ze<at;Ze++)Oi(ze[Ze],ne,se,he)}function da(O,ne,se,he){const le=O.opaque,ze=O.transmissive,Ze=O.transparent;_.setupLightsView(se),oe===!0&&ft.setGlobalState(A.clippingPlanes,se),ze.length>0&&xo(le,ze,ne,se),he&&de.viewport(b.copy(he)),le.length>0&&ha(le,ne,se),ze.length>0&&ha(ze,ne,se),Ze.length>0&&ha(Ze,ne,se),de.buffers.depth.setTest(!0),de.buffers.depth.setMask(!0),de.buffers.color.setMask(!0),de.setPolygonOffset(!1)}function xo(O,ne,se,he){if((se.isScene===!0?se.overrideMaterial:null)!==null)return;const ze=Me.isWebGL2;Te===null&&(Te=new ts(1,1,{generateMipmaps:!0,type:pe.has("EXT_color_buffer_half_float")?cu:Ms,minFilter:Ts,samples:ze?4:0})),A.getDrawingBufferSize(Se),ze?Te.setSize(Se.x,Se.y):Te.setSize(Ym(Se.x),Ym(Se.y));const Ze=A.getRenderTarget();A.setRenderTarget(Te),A.getClearColor($),V=A.getClearAlpha(),V<1&&A.setClearColor(16777215,.5),A.clear();const at=A.toneMapping;A.toneMapping=ws,ha(O,se,he),F.updateMultisampleRenderTarget(Te),F.updateRenderTargetMipmap(Te);let ct=!1;for(let mt=0,vt=ne.length;mt<vt;mt++){const xt=ne[mt],$t=xt.object,jn=xt.geometry,qt=xt.material,Cn=xt.group;if(qt.side===Kr&&$t.layers.test(he.layers)){const ut=qt.side;qt.side=ki,qt.needsUpdate=!0,as($t,se,he,jn,qt,Cn),qt.side=ut,qt.needsUpdate=!0,ct=!0}}ct===!0&&(F.updateMultisampleRenderTarget(Te),F.updateRenderTargetMipmap(Te)),A.setRenderTarget(Ze),A.setClearColor($,V),A.toneMapping=at}function ha(O,ne,se){const he=ne.isScene===!0?ne.overrideMaterial:null;for(let le=0,ze=O.length;le<ze;le++){const Ze=O[le],at=Ze.object,ct=Ze.geometry,mt=he===null?Ze.material:he,vt=Ze.group;at.layers.test(se.layers)&&as(at,ne,se,ct,mt,vt)}}function as(O,ne,se,he,le,ze){O.onBeforeRender(A,ne,se,he,le,ze),O.modelViewMatrix.multiplyMatrices(se.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),le.onBeforeRender(A,ne,se,he,O,ze),le.transparent===!0&&le.side===Kr&&le.forceSinglePass===!1?(le.side=ki,le.needsUpdate=!0,A.renderBufferDirect(se,ne,he,le,O,ze),le.side=Cs,le.needsUpdate=!0,A.renderBufferDirect(se,ne,he,le,O,ze),le.side=Kr):A.renderBufferDirect(se,ne,he,le,O,ze),O.onAfterRender(A,ne,se,he,le,ze)}function fa(O,ne,se){ne.isScene!==!0&&(ne=be);const he=Re.get(O),le=_.state.lights,ze=_.state.shadowsArray,Ze=le.state.version,at=Ke.getParameters(O,le.state,ze,ne,se),ct=Ke.getProgramCacheKey(at);let mt=he.programs;he.environment=O.isMeshStandardMaterial?ne.environment:null,he.fog=ne.fog,he.envMap=(O.isMeshStandardMaterial?te:k).get(O.envMap||he.environment),mt===void 0&&(O.addEventListener("dispose",Fe),mt=new Map,he.programs=mt);let vt=mt.get(ct);if(vt!==void 0){if(he.currentProgram===vt&&he.lightsStateVersion===Ze)return Dl(O,at),vt}else at.uniforms=Ke.getUniforms(O),O.onBuild(se,at,A),O.onBeforeCompile(at,A),vt=Ke.acquireProgram(at,ct),mt.set(ct,vt),he.uniforms=at.uniforms;const xt=he.uniforms;return(!O.isShaderMaterial&&!O.isRawShaderMaterial||O.clipping===!0)&&(xt.clippingPlanes=ft.uniform),Dl(O,at),he.needsLights=_o(O),he.lightsStateVersion=Ze,he.needsLights&&(xt.ambientLightColor.value=le.state.ambient,xt.lightProbe.value=le.state.probe,xt.directionalLights.value=le.state.directional,xt.directionalLightShadows.value=le.state.directionalShadow,xt.spotLights.value=le.state.spot,xt.spotLightShadows.value=le.state.spotShadow,xt.rectAreaLights.value=le.state.rectArea,xt.ltc_1.value=le.state.rectAreaLTC1,xt.ltc_2.value=le.state.rectAreaLTC2,xt.pointLights.value=le.state.point,xt.pointLightShadows.value=le.state.pointShadow,xt.hemisphereLights.value=le.state.hemi,xt.directionalShadowMap.value=le.state.directionalShadowMap,xt.directionalShadowMatrix.value=le.state.directionalShadowMatrix,xt.spotShadowMap.value=le.state.spotShadowMap,xt.spotLightMatrix.value=le.state.spotLightMatrix,xt.spotLightMap.value=le.state.spotLightMap,xt.pointShadowMap.value=le.state.pointShadowMap,xt.pointShadowMatrix.value=le.state.pointShadowMatrix),he.currentProgram=vt,he.uniformsList=null,vt}function Ll(O){if(O.uniformsList===null){const ne=O.currentProgram.getUniforms();O.uniformsList=vm.seqWithValue(ne.seq,O.uniforms)}return O.uniformsList}function Dl(O,ne){const se=Re.get(O);se.outputColorSpace=ne.outputColorSpace,se.batching=ne.batching,se.instancing=ne.instancing,se.instancingColor=ne.instancingColor,se.skinning=ne.skinning,se.morphTargets=ne.morphTargets,se.morphNormals=ne.morphNormals,se.morphColors=ne.morphColors,se.morphTargetsCount=ne.morphTargetsCount,se.numClippingPlanes=ne.numClippingPlanes,se.numIntersection=ne.numClipIntersection,se.vertexAlphas=ne.vertexAlphas,se.vertexTangents=ne.vertexTangents,se.toneMapping=ne.toneMapping}function _n(O,ne,se,he,le){ne.isScene!==!0&&(ne=be),F.resetTextureUnits();const ze=ne.fog,Ze=he.isMeshStandardMaterial?ne.environment:null,at=P===null?A.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:bs,ct=(he.isMeshStandardMaterial?te:k).get(he.envMap||Ze),mt=he.vertexColors===!0&&!!se.attributes.color&&se.attributes.color.itemSize===4,vt=!!se.attributes.tangent&&(!!he.normalMap||he.anisotropy>0),xt=!!se.morphAttributes.position,$t=!!se.morphAttributes.normal,jn=!!se.morphAttributes.color;let qt=ws;he.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(qt=A.toneMapping);const Cn=se.morphAttributes.position||se.morphAttributes.normal||se.morphAttributes.color,ut=Cn!==void 0?Cn.length:0,Ve=Re.get(he),hi=_.state.lights;if(oe===!0&&(ge===!0||O!==R)){const zn=O===R&&he.id===L;ft.setState(he,O,zn)}let St=!1;he.version===Ve.__version?(Ve.needsLights&&Ve.lightsStateVersion!==hi.state.version||Ve.outputColorSpace!==at||le.isBatchedMesh&&Ve.batching===!1||!le.isBatchedMesh&&Ve.batching===!0||le.isInstancedMesh&&Ve.instancing===!1||!le.isInstancedMesh&&Ve.instancing===!0||le.isSkinnedMesh&&Ve.skinning===!1||!le.isSkinnedMesh&&Ve.skinning===!0||le.isInstancedMesh&&Ve.instancingColor===!0&&le.instanceColor===null||le.isInstancedMesh&&Ve.instancingColor===!1&&le.instanceColor!==null||Ve.envMap!==ct||he.fog===!0&&Ve.fog!==ze||Ve.numClippingPlanes!==void 0&&(Ve.numClippingPlanes!==ft.numPlanes||Ve.numIntersection!==ft.numIntersection)||Ve.vertexAlphas!==mt||Ve.vertexTangents!==vt||Ve.morphTargets!==xt||Ve.morphNormals!==$t||Ve.morphColors!==jn||Ve.toneMapping!==qt||Me.isWebGL2===!0&&Ve.morphTargetsCount!==ut)&&(St=!0):(St=!0,Ve.__version=he.version);let Nt=Ve.currentProgram;St===!0&&(Nt=fa(he,ne,le));let Qi=!1,dn=!1,hn=!1;const ln=Nt.getUniforms(),Zi=Ve.uniforms;if(de.useProgram(Nt.program)&&(Qi=!0,dn=!0,hn=!0),he.id!==L&&(L=he.id,dn=!0),Qi||R!==O){ln.setValue(H,"projectionMatrix",O.projectionMatrix),ln.setValue(H,"viewMatrix",O.matrixWorldInverse);const zn=ln.map.cameraPosition;zn!==void 0&&zn.setValue(H,Ce.setFromMatrixPosition(O.matrixWorld)),Me.logarithmicDepthBuffer&&ln.setValue(H,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),(he.isMeshPhongMaterial||he.isMeshToonMaterial||he.isMeshLambertMaterial||he.isMeshBasicMaterial||he.isMeshStandardMaterial||he.isShaderMaterial)&&ln.setValue(H,"isOrthographic",O.isOrthographicCamera===!0),R!==O&&(R=O,dn=!0,hn=!0)}if(le.isSkinnedMesh){ln.setOptional(H,le,"bindMatrix"),ln.setOptional(H,le,"bindMatrixInverse");const zn=le.skeleton;zn&&(Me.floatVertexTextures?(zn.boneTexture===null&&zn.computeBoneTexture(),ln.setValue(H,"boneTexture",zn.boneTexture,F)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}le.isBatchedMesh&&(ln.setOptional(H,le,"batchingTexture"),ln.setValue(H,"batchingTexture",le._matricesTexture,F));const Ns=se.morphAttributes;if((Ns.position!==void 0||Ns.normal!==void 0||Ns.color!==void 0&&Me.isWebGL2===!0)&&Et.update(le,se,Nt),(dn||Ve.receiveShadow!==le.receiveShadow)&&(Ve.receiveShadow=le.receiveShadow,ln.setValue(H,"receiveShadow",le.receiveShadow)),he.isMeshGouraudMaterial&&he.envMap!==null&&(Zi.envMap.value=ct,Zi.flipEnvMap.value=ct.isCubeTexture&&ct.isRenderTargetTexture===!1?-1:1),dn&&(ln.setValue(H,"toneMappingExposure",A.toneMappingExposure),Ve.needsLights&&os(Zi,hn),ze&&he.fog===!0&&Be.refreshFogUniforms(Zi,ze),Be.refreshMaterialUniforms(Zi,he,ue,q,Te),vm.upload(H,Ll(Ve),Zi,F)),he.isShaderMaterial&&he.uniformsNeedUpdate===!0&&(vm.upload(H,Ll(Ve),Zi,F),he.uniformsNeedUpdate=!1),he.isSpriteMaterial&&ln.setValue(H,"center",le.center),ln.setValue(H,"modelViewMatrix",le.modelViewMatrix),ln.setValue(H,"normalMatrix",le.normalMatrix),ln.setValue(H,"modelMatrix",le.matrixWorld),he.isShaderMaterial||he.isRawShaderMaterial){const zn=he.uniformsGroups;for(let pa=0,bi=zn.length;pa<bi;pa++)if(Me.isWebGL2){const So=zn[pa];It.update(So,Nt),It.bind(So,Nt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Nt}function os(O,ne){O.ambientLightColor.needsUpdate=ne,O.lightProbe.needsUpdate=ne,O.directionalLights.needsUpdate=ne,O.directionalLightShadows.needsUpdate=ne,O.pointLights.needsUpdate=ne,O.pointLightShadows.needsUpdate=ne,O.spotLights.needsUpdate=ne,O.spotLightShadows.needsUpdate=ne,O.rectAreaLights.needsUpdate=ne,O.hemisphereLights.needsUpdate=ne}function _o(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&O.lights===!0}this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(O,ne,se){Re.get(O.texture).__webglTexture=ne,Re.get(O.depthTexture).__webglTexture=se;const he=Re.get(O);he.__hasExternalTextures=!0,he.__hasExternalTextures&&(he.__autoAllocateDepthBuffer=se===void 0,he.__autoAllocateDepthBuffer||pe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),he.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(O,ne){const se=Re.get(O);se.__webglFramebuffer=ne,se.__useDefaultFramebuffer=ne===void 0},this.setRenderTarget=function(O,ne=0,se=0){P=O,N=ne,T=se;let he=!0,le=null,ze=!1,Ze=!1;if(O){const ct=Re.get(O);ct.__useDefaultFramebuffer!==void 0?(de.bindFramebuffer(H.FRAMEBUFFER,null),he=!1):ct.__webglFramebuffer===void 0?F.setupRenderTarget(O):ct.__hasExternalTextures&&F.rebindTextures(O,Re.get(O.texture).__webglTexture,Re.get(O.depthTexture).__webglTexture);const mt=O.texture;(mt.isData3DTexture||mt.isDataArrayTexture||mt.isCompressedArrayTexture)&&(Ze=!0);const vt=Re.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?(Array.isArray(vt[ne])?le=vt[ne][se]:le=vt[ne],ze=!0):Me.isWebGL2&&O.samples>0&&F.useMultisampledRTT(O)===!1?le=Re.get(O).__webglMultisampledFramebuffer:Array.isArray(vt)?le=vt[se]:le=vt,b.copy(O.viewport),D.copy(O.scissor),X=O.scissorTest}else b.copy(W).multiplyScalar(ue).floor(),D.copy(Y).multiplyScalar(ue).floor(),X=re;if(de.bindFramebuffer(H.FRAMEBUFFER,le)&&Me.drawBuffers&&he&&de.drawBuffers(O,le),de.viewport(b),de.scissor(D),de.setScissorTest(X),ze){const ct=Re.get(O.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_CUBE_MAP_POSITIVE_X+ne,ct.__webglTexture,se)}else if(Ze){const ct=Re.get(O.texture),mt=ne||0;H.framebufferTextureLayer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,ct.__webglTexture,se||0,mt)}L=-1},this.readRenderTargetPixels=function(O,ne,se,he,le,ze,Ze){if(!(O&&O.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let at=Re.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&Ze!==void 0&&(at=at[Ze]),at){de.bindFramebuffer(H.FRAMEBUFFER,at);try{const ct=O.texture,mt=ct.format,vt=ct.type;if(mt!==Li&&Xe.convert(mt)!==H.getParameter(H.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const xt=vt===cu&&(pe.has("EXT_color_buffer_half_float")||Me.isWebGL2&&pe.has("EXT_color_buffer_float"));if(vt!==Ms&&Xe.convert(vt)!==H.getParameter(H.IMPLEMENTATION_COLOR_READ_TYPE)&&!(vt===qr&&(Me.isWebGL2||pe.has("OES_texture_float")||pe.has("WEBGL_color_buffer_float")))&&!xt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=O.width-he&&se>=0&&se<=O.height-le&&H.readPixels(ne,se,he,le,Xe.convert(mt),Xe.convert(vt),ze)}finally{const ct=P!==null?Re.get(P).__webglFramebuffer:null;de.bindFramebuffer(H.FRAMEBUFFER,ct)}}},this.copyFramebufferToTexture=function(O,ne,se=0){const he=Math.pow(2,-se),le=Math.floor(ne.image.width*he),ze=Math.floor(ne.image.height*he);F.setTexture2D(ne,0),H.copyTexSubImage2D(H.TEXTURE_2D,se,0,0,O.x,O.y,le,ze),de.unbindTexture()},this.copyTextureToTexture=function(O,ne,se,he=0){const le=ne.image.width,ze=ne.image.height,Ze=Xe.convert(se.format),at=Xe.convert(se.type);F.setTexture2D(se,0),H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,se.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,se.unpackAlignment),ne.isDataTexture?H.texSubImage2D(H.TEXTURE_2D,he,O.x,O.y,le,ze,Ze,at,ne.image.data):ne.isCompressedTexture?H.compressedTexSubImage2D(H.TEXTURE_2D,he,O.x,O.y,ne.mipmaps[0].width,ne.mipmaps[0].height,Ze,ne.mipmaps[0].data):H.texSubImage2D(H.TEXTURE_2D,he,O.x,O.y,Ze,at,ne.image),he===0&&se.generateMipmaps&&H.generateMipmap(H.TEXTURE_2D),de.unbindTexture()},this.copyTextureToTexture3D=function(O,ne,se,he,le=0){if(A.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ze=O.max.x-O.min.x+1,Ze=O.max.y-O.min.y+1,at=O.max.z-O.min.z+1,ct=Xe.convert(he.format),mt=Xe.convert(he.type);let vt;if(he.isData3DTexture)F.setTexture3D(he,0),vt=H.TEXTURE_3D;else if(he.isDataArrayTexture||he.isCompressedArrayTexture)F.setTexture2DArray(he,0),vt=H.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,he.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,he.unpackAlignment);const xt=H.getParameter(H.UNPACK_ROW_LENGTH),$t=H.getParameter(H.UNPACK_IMAGE_HEIGHT),jn=H.getParameter(H.UNPACK_SKIP_PIXELS),qt=H.getParameter(H.UNPACK_SKIP_ROWS),Cn=H.getParameter(H.UNPACK_SKIP_IMAGES),ut=se.isCompressedTexture?se.mipmaps[le]:se.image;H.pixelStorei(H.UNPACK_ROW_LENGTH,ut.width),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,ut.height),H.pixelStorei(H.UNPACK_SKIP_PIXELS,O.min.x),H.pixelStorei(H.UNPACK_SKIP_ROWS,O.min.y),H.pixelStorei(H.UNPACK_SKIP_IMAGES,O.min.z),se.isDataTexture||se.isData3DTexture?H.texSubImage3D(vt,le,ne.x,ne.y,ne.z,ze,Ze,at,ct,mt,ut.data):se.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),H.compressedTexSubImage3D(vt,le,ne.x,ne.y,ne.z,ze,Ze,at,ct,ut.data)):H.texSubImage3D(vt,le,ne.x,ne.y,ne.z,ze,Ze,at,ct,mt,ut),H.pixelStorei(H.UNPACK_ROW_LENGTH,xt),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,$t),H.pixelStorei(H.UNPACK_SKIP_PIXELS,jn),H.pixelStorei(H.UNPACK_SKIP_ROWS,qt),H.pixelStorei(H.UNPACK_SKIP_IMAGES,Cn),le===0&&he.generateMipmaps&&H.generateMipmap(vt),de.unbindTexture()},this.initTexture=function(O){O.isCubeTexture?F.setTextureCube(O,0):O.isData3DTexture?F.setTexture3D(O,0):O.isDataArrayTexture||O.isCompressedArrayTexture?F.setTexture2DArray(O,0):F.setTexture2D(O,0),de.unbindTexture()},this.resetState=function(){N=0,T=0,P=null,de.reset(),yt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Qr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Sg?"display-p3":"srgb",t.unpackColorSpace=Jt.workingColorSpace===Th?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Vn?to:NS}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===to?Vn:bs}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class j2 extends zS{}j2.prototype.isWebGL1Renderer=!0;class Mg{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ue(e),this.density=t}clone(){return new Mg(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Eg{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ue(e),this.near=t,this.far=i}clone(){return new Eg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class GS extends Ft{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Bh{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=uh,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=ur()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ur()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ur()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Pi=new z;class lo{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Pi.fromBufferAttribute(this,t),Pi.applyMatrix4(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Pi.fromBufferAttribute(this,t),Pi.applyNormalMatrix(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Pi.fromBufferAttribute(this,t),Pi.transformDirection(e),this.setXYZ(t,Pi.x,Pi.y,Pi.z);return this}setX(e,t){return this.normalized&&(t=Tt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Tt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Tt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Tt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Xi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Xi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Xi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Xi(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array),r=Tt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Tt(t,this.array),i=Tt(i,this.array),r=Tt(r,this.array),s=Tt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ut(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new lo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class HS extends Kn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ue(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let mc;const rd=new z,gc=new z,vc=new z,yc=new Ae,sd=new Ae,z2=new dt,Ap=new z,ad=new z,wp=new z,fE=new Ae,G0=new Ae,pE=new Ae;class G2 extends Ft{constructor(e=new HS){if(super(),this.isSprite=!0,this.type="Sprite",mc===void 0){mc=new Mt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Bh(t,5);mc.setIndex([0,1,2,0,2,3]),mc.setAttribute("position",new lo(i,3,0,!1)),mc.setAttribute("uv",new lo(i,2,3,!1))}this.geometry=mc,this.material=e,this.center=new Ae(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),gc.setFromMatrixScale(this.matrixWorld),z2.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),vc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&gc.multiplyScalar(-vc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;Mp(Ap.set(-.5,-.5,0),vc,a,gc,r,s),Mp(ad.set(.5,-.5,0),vc,a,gc,r,s),Mp(wp.set(.5,.5,0),vc,a,gc,r,s),fE.set(0,0),G0.set(1,0),pE.set(1,1);let o=e.ray.intersectTriangle(Ap,ad,wp,!1,rd);if(o===null&&(Mp(ad.set(-.5,.5,0),vc,a,gc,r,s),G0.set(0,1),o=e.ray.intersectTriangle(Ap,wp,ad,!1,rd),o===null))return;const l=e.ray.origin.distanceTo(rd);l<e.near||l>e.far||t.push({distance:l,point:rd.clone(),uv:Wi.getInterpolation(rd,Ap,ad,wp,fE,G0,pE,new Ae),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Mp(n,e,t,i,r,s){yc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(sd.x=s*yc.x-r*yc.y,sd.y=r*yc.x+s*yc.y):sd.copy(yc),n.copy(e),n.x+=sd.x,n.y+=sd.y,n.applyMatrix4(z2)}const Ep=new z,mE=new z;class H2 extends Ft{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Ep.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Ep);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Ep.setFromMatrixPosition(e.matrixWorld),mE.setFromMatrixPosition(this.matrixWorld);const i=Ep.distanceTo(mE)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),i>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const gE=new z,vE=new Yt,yE=new Yt,Zj=new z,xE=new dt,Cp=new z,H0=new ci,_E=new dt,V0=new Su;class VS extends Un{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Rx,this.bindMatrix=new dt,this.bindMatrixInverse=new dt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Mi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Cp),this.boundingBox.expandByPoint(Cp)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ci),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Cp),this.boundingSphere.expandByPoint(Cp)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),H0.copy(this.boundingSphere),H0.applyMatrix4(r),e.ray.intersectsSphere(H0)!==!1&&(_E.copy(r).invert(),V0.copy(e.ray).applyMatrix4(_E),!(this.boundingBox!==null&&V0.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,V0)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Yt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Rx?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===t2?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;vE.fromBufferAttribute(r.attributes.skinIndex,e),yE.fromBufferAttribute(r.attributes.skinWeight,e),gE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=yE.getComponent(s);if(a!==0){const o=vE.getComponent(s);xE.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(Zj.copy(gE).applyMatrix4(xE),a)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Cg extends Ft{constructor(){super(),this.isBone=!0,this.type="Bone"}}class pl extends yn{constructor(e=null,t=1,i=1,r,s,a,o,l,h=Mn,f=Mn,p,m){super(null,a,o,l,h,f,r,s,p,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const SE=new dt,$j=new dt;class Lh{constructor(e=[],t=[]){this.uuid=ur(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new dt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new dt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:$j;SE.multiplyMatrices(o,t[s]),SE.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Lh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new pl(t,e,e,Li,qr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new Cg),this.bones.push(a),this.boneInverses.push(new dt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class Ml extends Ut{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const xc=new dt,AE=new dt,Tp=[],wE=new Mi,ez=new dt,od=new Un,ld=new ci;class WS extends Un{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ml(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,ez)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Mi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,xc),wE.copy(e.boundingBox).applyMatrix4(xc),this.boundingBox.union(wE)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ci),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,xc),ld.copy(e.boundingSphere).applyMatrix4(xc),this.boundingSphere.union(ld)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(od.geometry=this.geometry,od.material=this.material,od.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ld.copy(this.boundingSphere),ld.applyMatrix4(i),e.ray.intersectsSphere(ld)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,xc),AE.multiplyMatrices(i,xc),od.matrixWorld=AE,od.raycast(e,Tp);for(let a=0,o=Tp.length;a<o;a++){const l=Tp[a];l.instanceId=s,l.object=this,t.push(l)}Tp.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ml(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function tz(n,e){return n.z-e.z}function nz(n,e){return e.z-n.z}class iz{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const _c="batchId",Pa=new dt,ME=new dt,rz=new dt,EE=new dt,W0=new Ph,bp=new Mi,ko=new ci,cd=new z,X0=new iz,Si=new Un,Rp=[];function sz(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let a=0;a<i;a++)e.setComponent(s+t,a,n.getComponent(s,a))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class V2 extends Un{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new Mt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new pl(t,e,e,Li,qr);this._matricesTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in e.attributes){const l=e.getAttribute(o),{array:h,itemSize:f,normalized:p}=l,m=new h.constructor(i*f),g=new l.constructor(m,f,p);g.setUsage(l.usage),t.setAttribute(o,g)}if(e.getIndex()!==null){const o=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Ut(o,1))}const a=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(_c,new Ut(a,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(_c))throw new Error(`BatchedMesh: Geometry cannot use attribute "${_c}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===_c)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Mi);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,Pa),this.getBoundingBoxAt(r,bp).applyMatrix4(Pa),t.union(bp))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ci);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,Pa),this.getBoundingSphereAt(r,ko).applyMatrix4(Pa),t.union(ko))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const a=this._reservedRanges,o=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=a[a.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const h=e.getIndex(),f=h!==null;if(f&&(i===-1?r.indexCount=h.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const p=this._visibility,m=this._active,g=this._matricesTexture,y=this._matricesTexture.image.data;p.push(!0),m.push(!0);const M=this._geometryCount;this._geometryCount++,rz.toArray(y,M*16),g.needsUpdate=!0,a.push(r),o.push({start:f?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Mi,sphereInitialized:!1,sphere:new ci});const _=this.geometry.getAttribute(_c);for(let v=0;v<r.vertexCount;v++)_.setX(r.vertexStart+v,M);return _.needsUpdate=!0,this.setGeometryAt(M,e),M}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),a=t.getIndex(),o=this._reservedRanges[e];if(r&&a.count>o.indexCount||t.attributes.position.count>o.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,h=o.vertexCount;for(const g in i.attributes){if(g===_c)continue;const y=t.getAttribute(g),M=i.getAttribute(g);sz(y,M,l);const _=y.itemSize;for(let v=y.count,S=h;v<S;v++){const A=l+v;for(let E=0;E<_;E++)M.setComponent(A,E,0)}M.needsUpdate=!0}if(r){const g=o.indexStart;for(let y=0;y<a.count;y++)s.setX(g+y,l+a.getX(y));for(let y=a.count,M=o.indexCount;y<M;y++)s.setX(g+y,l);s.needsUpdate=!0}const f=this._bounds[e];t.boundingBox!==null?(f.box.copy(t.boundingBox),f.boxInitialized=!0):f.boxInitialized=!1,t.boundingSphere!==null?(f.sphere.copy(t.boundingSphere),f.sphereInitialized=!0):f.sphereInitialized=!1;const p=this._drawRanges[e],m=t.getAttribute("position");return p.count=r?a.count:m.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.box,a=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const o=a.index,l=a.attributes.position,h=this._drawRanges[e];for(let f=h.start,p=h.start+h.count;f<p;f++){let m=f;o&&(m=o.getX(m)),s.expandByPoint(cd.fromBufferAttribute(l,m))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const r=this._bounds[e],s=r.sphere,a=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,bp),bp.getCenter(s.center);const o=a.index,l=a.attributes.position,h=this._drawRanges[e];let f=0;for(let p=h.start,m=h.start+h.count;p<m;p++){let g=p;o&&(g=o.getX(g)),cd.fromBufferAttribute(l,g),f=Math.max(f,s.center.distanceToSquared(cd))}s.radius=Math.sqrt(f),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,a=this._geometryCount,o=this.matrixWorld,l=this.geometry;Si.material=this.material,Si.geometry.index=l.index,Si.geometry.attributes=l.attributes,Si.geometry.boundingBox===null&&(Si.geometry.boundingBox=new Mi),Si.geometry.boundingSphere===null&&(Si.geometry.boundingSphere=new ci);for(let h=0;h<a;h++){if(!i[h]||!r[h])continue;const f=s[h];Si.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(h,Si.matrixWorld).premultiply(o),this.getBoundingBoxAt(h,Si.geometry.boundingBox),this.getBoundingSphereAt(h,Si.geometry.boundingSphere),Si.raycast(e,Rp);for(let p=0,m=Rp.length;p<m;p++){const g=Rp[p];g.object=this,g.batchId=h,t.push(g)}Rp.length=0}Si.material=null,Si.geometry.index=null,Si.geometry.attributes={},Si.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._visibility,h=this._multiDrawStarts,f=this._multiDrawCounts,p=this._drawRanges,m=this.perObjectFrustumCulled;m&&(EE.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),W0.setFromProjectionMatrix(EE,e.isWebGPURenderer?du:Qr));let g=0;if(this.sortObjects){ME.copy(this.matrixWorld).invert(),cd.setFromMatrixPosition(i.matrixWorld).applyMatrix4(ME);for(let _=0,v=l.length;_<v;_++)if(l[_]){this.getMatrixAt(_,Pa),this.getBoundingSphereAt(_,ko).applyMatrix4(Pa);let S=!1;if(m&&(S=!W0.intersectsSphere(ko)),!S){const A=cd.distanceTo(ko.center);X0.push(p[_],A)}}const y=X0.list,M=this.customSort;M===null?y.sort(s.transparent?nz:tz):M.call(this,y,i);for(let _=0,v=y.length;_<v;_++){const S=y[_];h[g]=S.start*o,f[g]=S.count,g++}X0.reset()}else for(let y=0,M=l.length;y<M;y++)if(l[y]){let _=!1;if(m&&(this.getMatrixAt(y,Pa),this.getBoundingSphereAt(y,ko).applyMatrix4(Pa),_=!W0.intersectsSphere(ko)),!_){const v=p[y];h[g]=v.start*o,f[g]=v.count,g++}}this._multiDrawCount=g,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,a){this.onBeforeRender(e,null,r,s,a)}}class Ci extends Kn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ue(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const CE=new z,TE=new z,bE=new dt,J0=new Su,Np=new ci;class la extends Ft{constructor(e=new Mt,t=new Ci){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)CE.fromBufferAttribute(t,r-1),TE.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=CE.distanceTo(TE);e.setAttribute("lineDistance",new Qe(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Np.copy(i.boundingSphere),Np.applyMatrix4(r),Np.radius+=s,e.ray.intersectsSphere(Np)===!1)return;bE.copy(r).invert(),J0.copy(e.ray).applyMatrix4(bE);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,h=new z,f=new z,p=new z,m=new z,g=this.isLineSegments?2:1,y=i.index,_=i.attributes.position;if(y!==null){const v=Math.max(0,a.start),S=Math.min(y.count,a.start+a.count);for(let A=v,E=S-1;A<E;A+=g){const N=y.getX(A),T=y.getX(A+1);if(h.fromBufferAttribute(_,N),f.fromBufferAttribute(_,T),J0.distanceSqToSegment(h,f,m,p)>l)continue;m.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(m);L<e.near||L>e.far||t.push({distance:L,point:p.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,a.start),S=Math.min(_.count,a.start+a.count);for(let A=v,E=S-1;A<E;A+=g){if(h.fromBufferAttribute(_,A),f.fromBufferAttribute(_,A+1),J0.distanceSqToSegment(h,f,m,p)>l)continue;m.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(m);T<e.near||T>e.far||t.push({distance:T,point:p.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}const RE=new z,NE=new z;class is extends la{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)RE.fromBufferAttribute(t,r),NE.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+RE.distanceTo(NE);e.setAttribute("lineDistance",new Qe(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class XS extends la{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Tg extends Kn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ue(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const PE=new dt,a_=new Su,Pp=new ci,Ip=new z;class JS extends Ft{constructor(e=new Mt,t=new Tg){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Pp.copy(i.boundingSphere),Pp.applyMatrix4(r),Pp.radius+=s,e.ray.intersectsSphere(Pp)===!1)return;PE.copy(r).invert(),a_.copy(e.ray).applyMatrix4(PE);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,h=i.index,p=i.attributes.position;if(h!==null){const m=Math.max(0,a.start),g=Math.min(h.count,a.start+a.count);for(let y=m,M=g;y<M;y++){const _=h.getX(y);Ip.fromBufferAttribute(p,_),IE(Ip,_,l,r,e,t,this)}}else{const m=Math.max(0,a.start),g=Math.min(p.count,a.start+a.count);for(let y=m,M=g;y<M;y++)Ip.fromBufferAttribute(p,y),IE(Ip,y,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function IE(n,e,t,i,r,s,a){const o=a_.distanceSqToPoint(n);if(o<t){const l=new z;a_.closestPointToPoint(n,l),l.applyMatrix4(i);const h=r.ray.origin.distanceTo(l);if(h<r.near||h>r.far)return;s.push({distance:h,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class az extends yn{constructor(e,t,i,r,s,a,o,l,h){super(e,t,i,r,s,a,o,l,h),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:mn,this.magFilter=s!==void 0?s:mn,this.generateMipmaps=!1;const f=this;function p(){f.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class oz extends yn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Mn,this.minFilter=Mn,this.generateMipmaps=!1,this.needsUpdate=!0}}class bg extends yn{constructor(e,t,i,r,s,a,o,l,h,f,p,m){super(null,a,o,l,h,f,r,s,p,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class lz extends bg{constructor(e,t,i,r,s,a){super(e,t,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=oi}}class cz extends bg{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,oa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class uz extends yn{constructor(e,t,i,r,s,a,o,l,h){super(e,t,i,r,s,a,o,l,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class rs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let o=0,l=s-1,h;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),h=i[r]-a,h<0)o=r+1;else if(h>0)l=r-1;else{l=r;break}if(r=l,i[r]===a)return r/(s-1);const f=i[r],m=i[r+1]-f,g=(a-f)/m;return(r+g)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=t||(a.isVector2?new Ae:new z);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new z,r=[],s=[],a=[],o=new z,l=new dt;for(let g=0;g<=e;g++){const y=g/e;r[g]=this.getTangentAt(y,new z)}s[0]=new z,a[0]=new z;let h=Number.MAX_VALUE;const f=Math.abs(r[0].x),p=Math.abs(r[0].y),m=Math.abs(r[0].z);f<=h&&(h=f,i.set(1,0,0)),p<=h&&(h=p,i.set(0,1,0)),m<=h&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),a[g]=a[g-1].clone(),o.crossVectors(r[g-1],r[g]),o.length()>Number.EPSILON){o.normalize();const y=Math.acos(En(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(l.makeRotationAxis(o,y))}a[g].crossVectors(r[g],s[g])}if(t===!0){let g=Math.acos(En(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(g=-g);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(r[y],g*y)),a[y].crossVectors(r[y],s[y])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Rg extends rs{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const i=t||new Ae,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),h=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const f=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=l-this.aX,g=h-this.aY;l=m*f-g*p+this.aX,h=m*p+g*f+this.aY}return i.set(l,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class W2 extends Rg{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function YS(){let n=0,e=0,t=0,i=0;function r(s,a,o,l){n=s,e=o,t=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,h){r(a,o,h*(o-s),h*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,h,f,p){let m=(a-s)/h-(o-s)/(h+f)+(o-a)/f,g=(o-a)/f-(l-a)/(f+p)+(l-o)/p;m*=f,g*=f,r(a,o,m,g)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+i*o}}}const Bp=new z,Y0=new YS,K0=new YS,q0=new YS;class X2 extends rs{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new z){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let h,f;this.closed||o>0?h=r[(o-1)%s]:(Bp.subVectors(r[0],r[1]).add(r[0]),h=Bp);const p=r[o%s],m=r[(o+1)%s];if(this.closed||o+2<s?f=r[(o+2)%s]:(Bp.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=Bp),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let y=Math.pow(h.distanceToSquared(p),g),M=Math.pow(p.distanceToSquared(m),g),_=Math.pow(m.distanceToSquared(f),g);M<1e-4&&(M=1),y<1e-4&&(y=M),_<1e-4&&(_=M),Y0.initNonuniformCatmullRom(h.x,p.x,m.x,f.x,y,M,_),K0.initNonuniformCatmullRom(h.y,p.y,m.y,f.y,y,M,_),q0.initNonuniformCatmullRom(h.z,p.z,m.z,f.z,y,M,_)}else this.curveType==="catmullrom"&&(Y0.initCatmullRom(h.x,p.x,m.x,f.x,this.tension),K0.initCatmullRom(h.y,p.y,m.y,f.y,this.tension),q0.initCatmullRom(h.z,p.z,m.z,f.z,this.tension));return i.set(Y0.calc(l),K0.calc(l),q0.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new z().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function BE(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,o=n*n,l=n*o;return(2*t-2*i+s+a)*l+(-3*t+3*i-2*s-a)*o+s*n+t}function dz(n,e){const t=1-n;return t*t*e}function hz(n,e){return 2*(1-n)*n*e}function fz(n,e){return n*n*e}function Id(n,e,t,i){return dz(n,e)+hz(n,t)+fz(n,i)}function pz(n,e){const t=1-n;return t*t*t*e}function mz(n,e){const t=1-n;return 3*t*t*n*e}function gz(n,e){return 3*(1-n)*n*n*e}function vz(n,e){return n*n*n*e}function Bd(n,e,t,i,r){return pz(n,e)+mz(n,t)+gz(n,i)+vz(n,r)}class KS extends rs{constructor(e=new Ae,t=new Ae,i=new Ae,r=new Ae){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ae){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(Bd(e,r.x,s.x,a.x,o.x),Bd(e,r.y,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class J2 extends rs{constructor(e=new z,t=new z,i=new z,r=new z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new z){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(Bd(e,r.x,s.x,a.x,o.x),Bd(e,r.y,s.y,a.y,o.y),Bd(e,r.z,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class qS extends rs{constructor(e=new Ae,t=new Ae){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ae){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ae){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Y2 extends rs{constructor(e=new z,t=new z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new z){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new z){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QS extends rs{constructor(e=new Ae,t=new Ae,i=new Ae){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ae){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(Id(e,r.x,s.x,a.x),Id(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ZS extends rs{constructor(e=new z,t=new z,i=new z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new z){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(Id(e,r.x,s.x,a.x),Id(e,r.y,s.y,a.y),Id(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $S extends rs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ae){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],h=r[a],f=r[a>r.length-2?r.length-1:a+1],p=r[a>r.length-3?r.length-1:a+2];return i.set(BE(o,l.x,h.x,f.x,p.x),BE(o,l.y,h.y,f.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ae().fromArray(r))}return this}}var Km=Object.freeze({__proto__:null,ArcCurve:W2,CatmullRomCurve3:X2,CubicBezierCurve:KS,CubicBezierCurve3:J2,EllipseCurve:Rg,LineCurve:qS,LineCurve3:Y2,QuadraticBezierCurve:QS,QuadraticBezierCurve3:ZS,SplineCurve:$S});class K2 extends rs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Km[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,o=this.curves[s],l=o.getLength(),h=l===0?0:1-a/l;return o.getPointAt(h,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let h=0;h<l.length;h++){const f=l[h];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Km[r.type]().fromJSON(r))}return this}}class hh extends K2{constructor(e){super(),this.type="Path",this.currentPoint=new Ae,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new qS(this.currentPoint.clone(),new Ae(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new QS(this.currentPoint.clone(),new Ae(e,t),new Ae(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const o=new KS(this.currentPoint.clone(),new Ae(e,t),new Ae(i,r),new Ae(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new $S(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,o,l){const h=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+h,t+f,i,r,s,a,o,l),this}absellipse(e,t,i,r,s,a,o,l){const h=new Rg(e,t,i,r,s,a,o,l);if(this.curves.length>0){const p=h.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(h);const f=h.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Dh extends Mt{constructor(e=[new Ae(0,-.5),new Ae(.5,0),new Ae(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=En(r,0,Math.PI*2);const s=[],a=[],o=[],l=[],h=[],f=1/t,p=new z,m=new Ae,g=new z,y=new z,M=new z;let _=0,v=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:_=e[S+1].x-e[S].x,v=e[S+1].y-e[S].y,g.x=v*1,g.y=-_,g.z=v*0,M.copy(g),g.normalize(),l.push(g.x,g.y,g.z);break;case e.length-1:l.push(M.x,M.y,M.z);break;default:_=e[S+1].x-e[S].x,v=e[S+1].y-e[S].y,g.x=v*1,g.y=-_,g.z=v*0,y.copy(g),g.x+=M.x,g.y+=M.y,g.z+=M.z,g.normalize(),l.push(g.x,g.y,g.z),M.copy(y)}for(let S=0;S<=t;S++){const A=i+S*f*r,E=Math.sin(A),N=Math.cos(A);for(let T=0;T<=e.length-1;T++){p.x=e[T].x*E,p.y=e[T].y,p.z=e[T].x*N,a.push(p.x,p.y,p.z),m.x=S/t,m.y=T/(e.length-1),o.push(m.x,m.y);const P=l[3*T+0]*E,L=l[3*T+1],R=l[3*T+0]*N;h.push(P,L,R)}}for(let S=0;S<t;S++)for(let A=0;A<e.length-1;A++){const E=A+S*e.length,N=E,T=E+e.length,P=E+e.length+1,L=E+1;s.push(N,T,L),s.push(P,L,T)}this.setIndex(s),this.setAttribute("position",new Qe(a,3)),this.setAttribute("uv",new Qe(o,2)),this.setAttribute("normal",new Qe(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dh(e.points,e.segments,e.phiStart,e.phiLength)}}class Ng extends Dh{constructor(e=1,t=1,i=4,r=8){const s=new hh;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Ng(e.radius,e.length,e.capSegments,e.radialSegments)}}class Pg extends Mt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],l=[],h=new z,f=new Ae;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let p=0,m=3;p<=t;p++,m+=3){const g=i+p/t*r;h.x=e*Math.cos(g),h.y=e*Math.sin(g),a.push(h.x,h.y,h.z),o.push(0,0,1),f.x=(a[m]/e+1)/2,f.y=(a[m+1]/e+1)/2,l.push(f.x,f.y)}for(let p=1;p<=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new Qe(a,3)),this.setAttribute("normal",new Qe(o,3)),this.setAttribute("uv",new Qe(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pg(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Mu extends Mt{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const h=this;r=Math.floor(r),s=Math.floor(s);const f=[],p=[],m=[],g=[];let y=0;const M=[],_=i/2;let v=0;S(),a===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(f),this.setAttribute("position",new Qe(p,3)),this.setAttribute("normal",new Qe(m,3)),this.setAttribute("uv",new Qe(g,2));function S(){const E=new z,N=new z;let T=0;const P=(t-e)/i;for(let L=0;L<=s;L++){const R=[],b=L/s,D=b*(t-e)+e;for(let X=0;X<=r;X++){const $=X/r,V=$*l+o,K=Math.sin(V),q=Math.cos(V);N.x=D*K,N.y=-b*i+_,N.z=D*q,p.push(N.x,N.y,N.z),E.set(K,P,q).normalize(),m.push(E.x,E.y,E.z),g.push($,1-b),R.push(y++)}M.push(R)}for(let L=0;L<r;L++)for(let R=0;R<s;R++){const b=M[R][L],D=M[R+1][L],X=M[R+1][L+1],$=M[R][L+1];f.push(b,D,$),f.push(D,X,$),T+=6}h.addGroup(v,T,0),v+=T}function A(E){const N=y,T=new Ae,P=new z;let L=0;const R=E===!0?e:t,b=E===!0?1:-1;for(let X=1;X<=r;X++)p.push(0,_*b,0),m.push(0,b,0),g.push(.5,.5),y++;const D=y;for(let X=0;X<=r;X++){const V=X/r*l+o,K=Math.cos(V),q=Math.sin(V);P.x=R*q,P.y=_*b,P.z=R*K,p.push(P.x,P.y,P.z),m.push(0,b,0),T.x=K*.5+.5,T.y=q*.5*b+.5,g.push(T.x,T.y),y++}for(let X=0;X<r;X++){const $=N+X,V=D+X;E===!0?f.push(V,V+1,$):f.push(V+1,V,$),L+=3}h.addGroup(v,L,E===!0?1:2),v+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ig extends Mu{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new Ig(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class vo extends Mt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];o(r),h(i),f(),this.setAttribute("position",new Qe(s,3)),this.setAttribute("normal",new Qe(s.slice(),3)),this.setAttribute("uv",new Qe(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(S){const A=new z,E=new z,N=new z;for(let T=0;T<t.length;T+=3)g(t[T+0],A),g(t[T+1],E),g(t[T+2],N),l(A,E,N,S)}function l(S,A,E,N){const T=N+1,P=[];for(let L=0;L<=T;L++){P[L]=[];const R=S.clone().lerp(E,L/T),b=A.clone().lerp(E,L/T),D=T-L;for(let X=0;X<=D;X++)X===0&&L===T?P[L][X]=R:P[L][X]=R.clone().lerp(b,X/D)}for(let L=0;L<T;L++)for(let R=0;R<2*(T-L)-1;R++){const b=Math.floor(R/2);R%2===0?(m(P[L][b+1]),m(P[L+1][b]),m(P[L][b])):(m(P[L][b+1]),m(P[L+1][b+1]),m(P[L+1][b]))}}function h(S){const A=new z;for(let E=0;E<s.length;E+=3)A.x=s[E+0],A.y=s[E+1],A.z=s[E+2],A.normalize().multiplyScalar(S),s[E+0]=A.x,s[E+1]=A.y,s[E+2]=A.z}function f(){const S=new z;for(let A=0;A<s.length;A+=3){S.x=s[A+0],S.y=s[A+1],S.z=s[A+2];const E=_(S)/2/Math.PI+.5,N=v(S)/Math.PI+.5;a.push(E,1-N)}y(),p()}function p(){for(let S=0;S<a.length;S+=6){const A=a[S+0],E=a[S+2],N=a[S+4],T=Math.max(A,E,N),P=Math.min(A,E,N);T>.9&&P<.1&&(A<.2&&(a[S+0]+=1),E<.2&&(a[S+2]+=1),N<.2&&(a[S+4]+=1))}}function m(S){s.push(S.x,S.y,S.z)}function g(S,A){const E=S*3;A.x=e[E+0],A.y=e[E+1],A.z=e[E+2]}function y(){const S=new z,A=new z,E=new z,N=new z,T=new Ae,P=new Ae,L=new Ae;for(let R=0,b=0;R<s.length;R+=9,b+=6){S.set(s[R+0],s[R+1],s[R+2]),A.set(s[R+3],s[R+4],s[R+5]),E.set(s[R+6],s[R+7],s[R+8]),T.set(a[b+0],a[b+1]),P.set(a[b+2],a[b+3]),L.set(a[b+4],a[b+5]),N.copy(S).add(A).add(E).divideScalar(3);const D=_(N);M(T,b+0,S,D),M(P,b+2,A,D),M(L,b+4,E,D)}}function M(S,A,E,N){N<0&&S.x===1&&(a[A]=S.x-1),E.x===0&&E.z===0&&(a[A]=N/2/Math.PI+.5)}function _(S){return Math.atan2(S.z,-S.x)}function v(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vo(e.vertices,e.indices,e.radius,e.details)}}class Bg extends vo{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Bg(e.radius,e.detail)}}const Lp=new z,Dp=new z,Q0=new z,kp=new Wi;class q2 extends Mt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(hl*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,h=[0,0,0],f=["a","b","c"],p=new Array(3),m={},g=[];for(let y=0;y<l;y+=3){a?(h[0]=a.getX(y),h[1]=a.getX(y+1),h[2]=a.getX(y+2)):(h[0]=y,h[1]=y+1,h[2]=y+2);const{a:M,b:_,c:v}=kp;if(M.fromBufferAttribute(o,h[0]),_.fromBufferAttribute(o,h[1]),v.fromBufferAttribute(o,h[2]),kp.getNormal(Q0),p[0]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,p[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,p[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let S=0;S<3;S++){const A=(S+1)%3,E=p[S],N=p[A],T=kp[f[S]],P=kp[f[A]],L=`${E}_${N}`,R=`${N}_${E}`;R in m&&m[R]?(Q0.dot(m[R].normal)<=s&&(g.push(T.x,T.y,T.z),g.push(P.x,P.y,P.z)),m[R]=null):L in m||(m[L]={index0:h[S],index1:h[A],normal:Q0.clone()})}}for(const y in m)if(m[y]){const{index0:M,index1:_}=m[y];Lp.fromBufferAttribute(o,M),Dp.fromBufferAttribute(o,_),g.push(Lp.x,Lp.y,Lp.z),g.push(Dp.x,Dp.y,Dp.z)}this.setAttribute("position",new Qe(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ml extends hh{constructor(e){super(e),this.uuid=ur(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new hh().fromJSON(r))}return this}}const yz={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=Q2(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,h,f,p,m,g;if(i&&(s=wz(n,e,s,t)),n.length>80*t){o=h=n[0],l=f=n[1];for(let y=t;y<r;y+=t)p=n[y],m=n[y+1],p<o&&(o=p),m<l&&(l=m),p>h&&(h=p),m>f&&(f=m);g=Math.max(h-o,f-l),g=g!==0?32767/g:0}return fh(s,a,t,o,l,g,0),a}};function Q2(n,e,t,i,r){let s,a;if(r===Lz(n,e,t,i)>0)for(s=e;s<t;s+=i)a=LE(s,n[s],n[s+1],a);else for(s=t-i;s>=e;s-=i)a=LE(s,n[s],n[s+1],a);return a&&Lg(a,a.next)&&(mh(a),a=a.next),a}function El(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Lg(t,t.next)||gn(t.prev,t,t.next)===0)){if(mh(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function fh(n,e,t,i,r,s,a){if(!n)return;!a&&s&&bz(n,i,r,s);let o=n,l,h;for(;n.prev!==n.next;){if(l=n.prev,h=n.next,s?_z(n,i,r,s):xz(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(h.i/t|0),mh(n),n=h.next,o=h.next;continue}if(n=h,n===o){a?a===1?(n=Sz(El(n),e,t),fh(n,e,t,i,r,s,2)):a===2&&Az(n,e,t,i,r,s):fh(El(n),e,t,i,r,s,1);break}}}function xz(n){const e=n.prev,t=n,i=n.next;if(gn(e,t,i)>=0)return!1;const r=e.x,s=t.x,a=i.x,o=e.y,l=t.y,h=i.y,f=r<s?r<a?r:a:s<a?s:a,p=o<l?o<h?o:h:l<h?l:h,m=r>s?r>a?r:a:s>a?s:a,g=o>l?o>h?o:h:l>h?l:h;let y=i.next;for(;y!==e;){if(y.x>=f&&y.x<=m&&y.y>=p&&y.y<=g&&jc(r,o,s,l,a,h,y.x,y.y)&&gn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function _z(n,e,t,i){const r=n.prev,s=n,a=n.next;if(gn(r,s,a)>=0)return!1;const o=r.x,l=s.x,h=a.x,f=r.y,p=s.y,m=a.y,g=o<l?o<h?o:h:l<h?l:h,y=f<p?f<m?f:m:p<m?p:m,M=o>l?o>h?o:h:l>h?l:h,_=f>p?f>m?f:m:p>m?p:m,v=o_(g,y,e,t,i),S=o_(M,_,e,t,i);let A=n.prevZ,E=n.nextZ;for(;A&&A.z>=v&&E&&E.z<=S;){if(A.x>=g&&A.x<=M&&A.y>=y&&A.y<=_&&A!==r&&A!==a&&jc(o,f,l,p,h,m,A.x,A.y)&&gn(A.prev,A,A.next)>=0||(A=A.prevZ,E.x>=g&&E.x<=M&&E.y>=y&&E.y<=_&&E!==r&&E!==a&&jc(o,f,l,p,h,m,E.x,E.y)&&gn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;A&&A.z>=v;){if(A.x>=g&&A.x<=M&&A.y>=y&&A.y<=_&&A!==r&&A!==a&&jc(o,f,l,p,h,m,A.x,A.y)&&gn(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;E&&E.z<=S;){if(E.x>=g&&E.x<=M&&E.y>=y&&E.y<=_&&E!==r&&E!==a&&jc(o,f,l,p,h,m,E.x,E.y)&&gn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function Sz(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Lg(r,s)&&Z2(r,i,i.next,s)&&ph(r,s)&&ph(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),mh(i),mh(i.next),i=n=s),i=i.next}while(i!==n);return El(i)}function Az(n,e,t,i,r,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Pz(a,o)){let l=$2(a,o);a=El(a,a.next),l=El(l,l.next),fh(a,e,t,i,r,s,0),fh(l,e,t,i,r,s,0);return}o=o.next}a=a.next}while(a!==n)}function wz(n,e,t,i){const r=[];let s,a,o,l,h;for(s=0,a=e.length;s<a;s++)o=e[s]*i,l=s<a-1?e[s+1]*i:n.length,h=Q2(n,o,l,i,!1),h===h.next&&(h.steiner=!0),r.push(Nz(h));for(r.sort(Mz),s=0;s<r.length;s++)t=Ez(r[s],t);return t}function Mz(n,e){return n.x-e.x}function Ez(n,e){const t=Cz(n,e);if(!t)return e;const i=$2(t,n);return El(i,i.next),El(t,t.next)}function Cz(n,e){let t=e,i=-1/0,r;const s=n.x,a=n.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const m=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=s&&m>i&&(i=m,r=t.x<t.next.x?t:t.next,m===s))return r}t=t.next}while(t!==e);if(!r)return null;const o=r,l=r.x,h=r.y;let f=1/0,p;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&jc(a<h?s:i,a,l,h,a<h?i:s,a,t.x,t.y)&&(p=Math.abs(a-t.y)/(s-t.x),ph(t,n)&&(p<f||p===f&&(t.x>r.x||t.x===r.x&&Tz(r,t)))&&(r=t,f=p)),t=t.next;while(t!==o);return r}function Tz(n,e){return gn(n.prev,n,e.prev)<0&&gn(e.next,n,n.next)<0}function bz(n,e,t,i){let r=n;do r.z===0&&(r.z=o_(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,Rz(r)}function Rz(n){let e,t,i,r,s,a,o,l,h=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,i=t,o=0,e=0;e<h&&(o++,i=i.nextZ,!!i);e++);for(l=h;o>0||l>0&&i;)o!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,h*=2}while(a>1);return n}function o_(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Nz(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function jc(n,e,t,i,r,s,a,o){return(r-a)*(e-o)>=(n-a)*(s-o)&&(n-a)*(i-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(i-o)}function Pz(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Iz(n,e)&&(ph(n,e)&&ph(e,n)&&Bz(n,e)&&(gn(n.prev,n,e.prev)||gn(n,e.prev,e))||Lg(n,e)&&gn(n.prev,n,n.next)>0&&gn(e.prev,e,e.next)>0)}function gn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Lg(n,e){return n.x===e.x&&n.y===e.y}function Z2(n,e,t,i){const r=Up(gn(n,e,t)),s=Up(gn(n,e,i)),a=Up(gn(t,i,n)),o=Up(gn(t,i,e));return!!(r!==s&&a!==o||r===0&&Fp(n,t,e)||s===0&&Fp(n,i,e)||a===0&&Fp(t,n,i)||o===0&&Fp(t,e,i))}function Fp(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Up(n){return n>0?1:n<0?-1:0}function Iz(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Z2(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function ph(n,e){return gn(n.prev,n,n.next)<0?gn(n,e,n.next)>=0&&gn(n,n.prev,e)>=0:gn(n,e,n.prev)<0||gn(n,n.next,e)<0}function Bz(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function $2(n,e){const t=new l_(n.i,n.x,n.y),i=new l_(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function LE(n,e,t,i){const r=new l_(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function mh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function l_(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Lz(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class Es{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Es.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];DE(e),kE(i,e);let a=e.length;t.forEach(DE);for(let l=0;l<t.length;l++)r.push(a),a+=t[l].length,kE(i,t[l]);const o=yz.triangulate(i,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function DE(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function kE(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Dg extends Mt{constructor(e=new ml([new Ae(.5,.5),new Ae(-.5,.5),new Ae(-.5,-.5),new Ae(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const h=e[o];a(h)}this.setAttribute("position",new Qe(r,3)),this.setAttribute("uv",new Qe(s,2)),this.computeVertexNormals();function a(o){const l=[],h=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:g-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:Dz;let A,E=!1,N,T,P,L;v&&(A=v.getSpacedPoints(f),E=!0,m=!1,N=v.computeFrenetFrames(f,!1),T=new z,P=new z,L=new z),m||(_=0,g=0,y=0,M=0);const R=o.extractPoints(h);let b=R.shape;const D=R.holes;if(!Es.isClockWise(b)){b=b.reverse();for(let H=0,ve=D.length;H<ve;H++){const pe=D[H];Es.isClockWise(pe)&&(D[H]=pe.reverse())}}const $=Es.triangulateShape(b,D),V=b;for(let H=0,ve=D.length;H<ve;H++){const pe=D[H];b=b.concat(pe)}function K(H,ve,pe){return ve||console.error("THREE.ExtrudeGeometry: vec does not exist"),H.clone().addScaledVector(ve,pe)}const q=b.length,ue=$.length;function U(H,ve,pe){let Me,de,ie;const Re=H.x-ve.x,F=H.y-ve.y,k=pe.x-H.x,te=pe.y-H.y,ye=Re*Re+F*F,Ee=Re*te-F*k;if(Math.abs(Ee)>Number.EPSILON){const we=Math.sqrt(ye),Ke=Math.sqrt(k*k+te*te),Be=ve.x-F/we,He=ve.y+Re/we,st=pe.x-te/Ke,ft=pe.y+k/Ke,xe=((st-Be)*te-(ft-He)*k)/(Re*te-F*k);Me=Be+Re*xe-H.x,de=He+F*xe-H.y;const ot=Me*Me+de*de;if(ot<=2)return new Ae(Me,de);ie=Math.sqrt(ot/2)}else{let we=!1;Re>Number.EPSILON?k>Number.EPSILON&&(we=!0):Re<-Number.EPSILON?k<-Number.EPSILON&&(we=!0):Math.sign(F)===Math.sign(te)&&(we=!0),we?(Me=-F,de=Re,ie=Math.sqrt(ye)):(Me=Re,de=F,ie=Math.sqrt(ye/2))}return new Ae(Me/ie,de/ie)}const j=[];for(let H=0,ve=V.length,pe=ve-1,Me=H+1;H<ve;H++,pe++,Me++)pe===ve&&(pe=0),Me===ve&&(Me=0),j[H]=U(V[H],V[pe],V[Me]);const W=[];let Y,re=j.concat();for(let H=0,ve=D.length;H<ve;H++){const pe=D[H];Y=[];for(let Me=0,de=pe.length,ie=de-1,Re=Me+1;Me<de;Me++,ie++,Re++)ie===de&&(ie=0),Re===de&&(Re=0),Y[Me]=U(pe[Me],pe[ie],pe[Re]);W.push(Y),re=re.concat(Y)}for(let H=0;H<_;H++){const ve=H/_,pe=g*Math.cos(ve*Math.PI/2),Me=y*Math.sin(ve*Math.PI/2)+M;for(let de=0,ie=V.length;de<ie;de++){const Re=K(V[de],j[de],Me);ce(Re.x,Re.y,-pe)}for(let de=0,ie=D.length;de<ie;de++){const Re=D[de];Y=W[de];for(let F=0,k=Re.length;F<k;F++){const te=K(Re[F],Y[F],Me);ce(te.x,te.y,-pe)}}}const Q=y+M;for(let H=0;H<q;H++){const ve=m?K(b[H],re[H],Q):b[H];E?(P.copy(N.normals[0]).multiplyScalar(ve.x),T.copy(N.binormals[0]).multiplyScalar(ve.y),L.copy(A[0]).add(P).add(T),ce(L.x,L.y,L.z)):ce(ve.x,ve.y,0)}for(let H=1;H<=f;H++)for(let ve=0;ve<q;ve++){const pe=m?K(b[ve],re[ve],Q):b[ve];E?(P.copy(N.normals[H]).multiplyScalar(pe.x),T.copy(N.binormals[H]).multiplyScalar(pe.y),L.copy(A[H]).add(P).add(T),ce(L.x,L.y,L.z)):ce(pe.x,pe.y,p/f*H)}for(let H=_-1;H>=0;H--){const ve=H/_,pe=g*Math.cos(ve*Math.PI/2),Me=y*Math.sin(ve*Math.PI/2)+M;for(let de=0,ie=V.length;de<ie;de++){const Re=K(V[de],j[de],Me);ce(Re.x,Re.y,p+pe)}for(let de=0,ie=D.length;de<ie;de++){const Re=D[de];Y=W[de];for(let F=0,k=Re.length;F<k;F++){const te=K(Re[F],Y[F],Me);E?ce(te.x,te.y+A[f-1].y,A[f-1].x+pe):ce(te.x,te.y,p+pe)}}}oe(),ge();function oe(){const H=r.length/3;if(m){let ve=0,pe=q*ve;for(let Me=0;Me<ue;Me++){const de=$[Me];Se(de[2]+pe,de[1]+pe,de[0]+pe)}ve=f+_*2,pe=q*ve;for(let Me=0;Me<ue;Me++){const de=$[Me];Se(de[0]+pe,de[1]+pe,de[2]+pe)}}else{for(let ve=0;ve<ue;ve++){const pe=$[ve];Se(pe[2],pe[1],pe[0])}for(let ve=0;ve<ue;ve++){const pe=$[ve];Se(pe[0]+q*f,pe[1]+q*f,pe[2]+q*f)}}i.addGroup(H,r.length/3-H,0)}function ge(){const H=r.length/3;let ve=0;Te(V,ve),ve+=V.length;for(let pe=0,Me=D.length;pe<Me;pe++){const de=D[pe];Te(de,ve),ve+=de.length}i.addGroup(H,r.length/3-H,1)}function Te(H,ve){let pe=H.length;for(;--pe>=0;){const Me=pe;let de=pe-1;de<0&&(de=H.length-1);for(let ie=0,Re=f+_*2;ie<Re;ie++){const F=q*ie,k=q*(ie+1),te=ve+Me+F,ye=ve+de+F,Ee=ve+de+k,we=ve+Me+k;Ce(te,ye,Ee,we)}}}function ce(H,ve,pe){l.push(H),l.push(ve),l.push(pe)}function Se(H,ve,pe){be(H),be(ve),be(pe);const Me=r.length/3,de=S.generateTopUV(i,r,Me-3,Me-2,Me-1);Pe(de[0]),Pe(de[1]),Pe(de[2])}function Ce(H,ve,pe,Me){be(H),be(ve),be(Me),be(ve),be(pe),be(Me);const de=r.length/3,ie=S.generateSideWallUV(i,r,de-6,de-3,de-2,de-1);Pe(ie[0]),Pe(ie[1]),Pe(ie[3]),Pe(ie[1]),Pe(ie[2]),Pe(ie[3])}function be(H){r.push(l[H*3+0]),r.push(l[H*3+1]),r.push(l[H*3+2])}function Pe(H){s.push(H.x),s.push(H.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return kz(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Km[r.type]().fromJSON(r)),new Dg(i,e.options)}}const Dz={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],o=e[i*3],l=e[i*3+1],h=e[r*3],f=e[r*3+1];return[new Ae(s,a),new Ae(o,l),new Ae(h,f)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],h=e[i*3],f=e[i*3+1],p=e[i*3+2],m=e[r*3],g=e[r*3+1],y=e[r*3+2],M=e[s*3],_=e[s*3+1],v=e[s*3+2];return Math.abs(o-f)<Math.abs(a-h)?[new Ae(a,1-l),new Ae(h,1-p),new Ae(m,1-y),new Ae(M,1-v)]:[new Ae(o,1-l),new Ae(f,1-p),new Ae(g,1-y),new Ae(_,1-v)]}};function kz(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class kg extends vo{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new kg(e.radius,e.detail)}}class kh extends vo{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new kh(e.radius,e.detail)}}class Fg extends Mt{constructor(e=.5,t=1,i=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const o=[],l=[],h=[],f=[];let p=e;const m=(t-e)/r,g=new z,y=new Ae;for(let M=0;M<=r;M++){for(let _=0;_<=i;_++){const v=s+_/i*a;g.x=p*Math.cos(v),g.y=p*Math.sin(v),l.push(g.x,g.y,g.z),h.push(0,0,1),y.x=(g.x/t+1)/2,y.y=(g.y/t+1)/2,f.push(y.x,y.y)}p+=m}for(let M=0;M<r;M++){const _=M*(i+1);for(let v=0;v<i;v++){const S=v+_,A=S,E=S+i+1,N=S+i+2,T=S+1;o.push(A,E,T),o.push(E,N,T)}}this.setIndex(o),this.setAttribute("position",new Qe(l,3)),this.setAttribute("normal",new Qe(h,3)),this.setAttribute("uv",new Qe(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fg(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ug extends Mt{constructor(e=new ml([new Ae(0,.5),new Ae(-.5,-.5),new Ae(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)h(e);else for(let f=0;f<e.length;f++)h(e[f]),this.addGroup(o,l,f),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new Qe(r,3)),this.setAttribute("normal",new Qe(s,3)),this.setAttribute("uv",new Qe(a,2));function h(f){const p=r.length/3,m=f.extractPoints(t);let g=m.shape;const y=m.holes;Es.isClockWise(g)===!1&&(g=g.reverse());for(let _=0,v=y.length;_<v;_++){const S=y[_];Es.isClockWise(S)===!0&&(y[_]=S.reverse())}const M=Es.triangulateShape(g,y);for(let _=0,v=y.length;_<v;_++){const S=y[_];g=g.concat(S)}for(let _=0,v=g.length;_<v;_++){const S=g[_];r.push(S.x,S.y,0),s.push(0,0,1),a.push(S.x,S.y)}for(let _=0,v=M.length;_<v;_++){const S=M[_],A=S[0]+p,E=S[1]+p,N=S[2]+p;i.push(A,E,N),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Fz(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new Ug(i,e.curveSegments)}}function Fz(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Fh extends Mt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let h=0;const f=[],p=new z,m=new z,g=[],y=[],M=[],_=[];for(let v=0;v<=i;v++){const S=[],A=v/i;let E=0;v===0&&a===0?E=.5/t:v===i&&l===Math.PI&&(E=-.5/t);for(let N=0;N<=t;N++){const T=N/t;p.x=-e*Math.cos(r+T*s)*Math.sin(a+A*o),p.y=e*Math.cos(a+A*o),p.z=e*Math.sin(r+T*s)*Math.sin(a+A*o),y.push(p.x,p.y,p.z),m.copy(p).normalize(),M.push(m.x,m.y,m.z),_.push(T+E,1-A),S.push(h++)}f.push(S)}for(let v=0;v<i;v++)for(let S=0;S<t;S++){const A=f[v][S+1],E=f[v][S],N=f[v+1][S],T=f[v+1][S+1];(v!==0||a>0)&&g.push(A,E,T),(v!==i-1||l<Math.PI)&&g.push(E,N,T)}this.setIndex(g),this.setAttribute("position",new Qe(y,3)),this.setAttribute("normal",new Qe(M,3)),this.setAttribute("uv",new Qe(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Og extends vo{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Og(e.radius,e.detail)}}class jg extends Mt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],o=[],l=[],h=[],f=new z,p=new z,m=new z;for(let g=0;g<=i;g++)for(let y=0;y<=r;y++){const M=y/r*s,_=g/i*Math.PI*2;p.x=(e+t*Math.cos(_))*Math.cos(M),p.y=(e+t*Math.cos(_))*Math.sin(M),p.z=t*Math.sin(_),o.push(p.x,p.y,p.z),f.x=e*Math.cos(M),f.y=e*Math.sin(M),m.subVectors(p,f).normalize(),l.push(m.x,m.y,m.z),h.push(y/r),h.push(g/i)}for(let g=1;g<=i;g++)for(let y=1;y<=r;y++){const M=(r+1)*g+y-1,_=(r+1)*(g-1)+y-1,v=(r+1)*(g-1)+y,S=(r+1)*g+y;a.push(M,_,S),a.push(_,v,S)}this.setIndex(a),this.setAttribute("position",new Qe(o,3)),this.setAttribute("normal",new Qe(l,3)),this.setAttribute("uv",new Qe(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jg(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class zg extends Mt{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],h=[],f=[],p=new z,m=new z,g=new z,y=new z,M=new z,_=new z,v=new z;for(let A=0;A<=i;++A){const E=A/i*s*Math.PI*2;S(E,s,a,e,g),S(E+.01,s,a,e,y),_.subVectors(y,g),v.addVectors(y,g),M.crossVectors(_,v),v.crossVectors(M,_),M.normalize(),v.normalize();for(let N=0;N<=r;++N){const T=N/r*Math.PI*2,P=-t*Math.cos(T),L=t*Math.sin(T);p.x=g.x+(P*v.x+L*M.x),p.y=g.y+(P*v.y+L*M.y),p.z=g.z+(P*v.z+L*M.z),l.push(p.x,p.y,p.z),m.subVectors(p,g).normalize(),h.push(m.x,m.y,m.z),f.push(A/i),f.push(N/r)}}for(let A=1;A<=i;A++)for(let E=1;E<=r;E++){const N=(r+1)*(A-1)+(E-1),T=(r+1)*A+(E-1),P=(r+1)*A+E,L=(r+1)*(A-1)+E;o.push(N,T,L),o.push(T,P,L)}this.setIndex(o),this.setAttribute("position",new Qe(l,3)),this.setAttribute("normal",new Qe(h,3)),this.setAttribute("uv",new Qe(f,2));function S(A,E,N,T,P){const L=Math.cos(A),R=Math.sin(A),b=N/E*A,D=Math.cos(b);P.x=T*(2+D)*.5*L,P.y=T*(2+D)*R*.5,P.z=T*Math.sin(b)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zg(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Gg extends Mt{constructor(e=new ZS(new z(-1,-1,0),new z(-1,1,0),new z(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new z,l=new z,h=new Ae;let f=new z;const p=[],m=[],g=[],y=[];M(),this.setIndex(y),this.setAttribute("position",new Qe(p,3)),this.setAttribute("normal",new Qe(m,3)),this.setAttribute("uv",new Qe(g,2));function M(){for(let A=0;A<t;A++)_(A);_(s===!1?t:0),S(),v()}function _(A){f=e.getPointAt(A/t,f);const E=a.normals[A],N=a.binormals[A];for(let T=0;T<=r;T++){const P=T/r*Math.PI*2,L=Math.sin(P),R=-Math.cos(P);l.x=R*E.x+L*N.x,l.y=R*E.y+L*N.y,l.z=R*E.z+L*N.z,l.normalize(),m.push(l.x,l.y,l.z),o.x=f.x+i*l.x,o.y=f.y+i*l.y,o.z=f.z+i*l.z,p.push(o.x,o.y,o.z)}}function v(){for(let A=1;A<=t;A++)for(let E=1;E<=r;E++){const N=(r+1)*(A-1)+(E-1),T=(r+1)*A+(E-1),P=(r+1)*A+E,L=(r+1)*(A-1)+E;y.push(N,T,L),y.push(T,P,L)}}function S(){for(let A=0;A<=t;A++)for(let E=0;E<=r;E++)h.x=A/t,h.y=E/r,g.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Gg(new Km[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class eN extends Mt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new z,s=new z;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let h=0,f=l.length;h<f;++h){const p=l[h],m=p.start,g=p.count;for(let y=m,M=m+g;y<M;y+=3)for(let _=0;_<3;_++){const v=o.getX(y+_),S=o.getX(y+(_+1)%3);r.fromBufferAttribute(a,v),s.fromBufferAttribute(a,S),FE(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let h=0;h<3;h++){const f=3*o+h,p=3*o+(h+1)%3;r.fromBufferAttribute(a,f),s.fromBufferAttribute(a,p),FE(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Qe(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function FE(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var UE=Object.freeze({__proto__:null,BoxGeometry:Nl,CapsuleGeometry:Ng,CircleGeometry:Pg,ConeGeometry:Ig,CylinderGeometry:Mu,DodecahedronGeometry:Bg,EdgesGeometry:q2,ExtrudeGeometry:Dg,IcosahedronGeometry:kg,LatheGeometry:Dh,OctahedronGeometry:kh,PlaneGeometry:Ih,PolyhedronGeometry:vo,RingGeometry:Fg,ShapeGeometry:Ug,SphereGeometry:Fh,TetrahedronGeometry:Og,TorusGeometry:jg,TorusKnotGeometry:zg,TubeGeometry:Gg,WireframeGeometry:eN});class tN extends Kn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ue(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class nN extends Rs{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Uh extends Kn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ue(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=go,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Dr extends Uh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ae(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return En(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ue(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ue(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ue(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class iN extends Kn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ue(16777215),this.specular=new Ue(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=go,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ch,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rN extends Kn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ue(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=go,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class sN extends Kn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=go,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class aN extends Kn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ue(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=go,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ch,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class oN extends Kn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ue(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=go,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lN extends Ci{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function il(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function cN(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function uN(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function c_(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const o=t[s]*e;for(let l=0;l!==e;++l)r[a++]=n[o+l]}return r}function eA(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)}function Uz(n,e,t,i,r=30){const s=n.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const h=s.tracks[l],f=h.getValueSize(),p=[],m=[];for(let g=0;g<h.times.length;++g){const y=h.times[g]*r;if(!(y<t||y>=i)){p.push(h.times[g]);for(let M=0;M<f;++M)m.push(h.values[g*f+M])}}p.length!==0&&(h.times=il(p,h.times.constructor),h.values=il(m,h.values.constructor),a.push(h))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function Oz(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let a=0;a<r;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const h=n.tracks.find(function(v){return v.name===o.name&&v.ValueTypeName===l});if(h===void 0)continue;let f=0;const p=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=p/3);let m=0;const g=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);const y=o.times.length-1;let M;if(s<=o.times[0]){const v=f,S=p-f;M=o.values.slice(v,S)}else if(s>=o.times[y]){const v=y*p+f,S=v+p-f;M=o.values.slice(v,S)}else{const v=o.createInterpolant(),S=f,A=p-f;v.evaluate(s),M=v.resultBuffer.slice(S,A)}l==="quaternion"&&new wi().fromArray(M).normalize().conjugate().toArray(M);const _=h.times.length;for(let v=0;v<_;++v){const S=v*g+m;if(l==="quaternion")wi.multiplyQuaternionsFlat(h.values,S,M,0,h.values,S);else{const A=g-m*2;for(let E=0;E<A;++E)h.values[S+E]-=M[E]}}}return n.blendMode=bS,n}const jz={convertArray:il,isTypedArray:cN,getKeyframeOrder:uN,sortedArray:c_,flattenJSON:eA,subclip:Uz,makeClipAdditive:Oz};class Eu{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(i=2,s=o);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const o=i+a>>>1;e<t[o]?a=o:i=o+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class dN extends Eu{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:el,endingEnd:el}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case tl:s=e,o=2*t-i;break;case ah:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case tl:a=e,l=2*i-t;break;case ah:a=1,l=i+r[1]-r[0];break;default:a=e-1,l=t}const h=(i-t)*.5,f=this.valueSize;this._weightPrev=h/(t-o),this._weightNext=h/(l-i),this._offsetPrev=s*f,this._offsetNext=a*f}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,h=l-o,f=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,g=this._weightNext,y=(i-t)/(r-t),M=y*y,_=M*y,v=-m*_+2*m*M-m*y,S=(1+m)*_+(-1.5-2*m)*M+(-.5+m)*y+1,A=(-1-g)*_+(1.5+g)*M+.5*y,E=g*_-g*M;for(let N=0;N!==o;++N)s[N]=v*a[f+N]+S*a[h+N]+A*a[l+N]+E*a[p+N];return s}}class tA extends Eu{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,h=l-o,f=(i-t)/(r-t),p=1-f;for(let m=0;m!==o;++m)s[m]=a[h+m]*p+a[l+m]*f;return s}}class hN extends Eu{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ss{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=il(t,this.TimeBufferType),this.values=il(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:il(e.times,Array),values:il(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new hN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new tA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new dN(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case uu:t=this.InterpolantFactoryMethodDiscrete;break;case wl:t=this.InterpolantFactoryMethodLinear;break;case gm:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return uu;case this.InterpolantFactoryMethodLinear:return wl;case this.InterpolantFactoryMethodSmooth:return gm}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=i.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&cN(r))for(let o=0,l=r.length;o!==l;++o){const h=r[o];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===gm,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const h=e[o],f=e[o+1];if(h!==f&&(o!==1||h!==e[0]))if(r)l=!0;else{const p=o*i,m=p-i,g=p+i;for(let y=0;y!==i;++y){const M=t[p+y];if(M!==t[m+y]||M!==t[g+y]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const p=o*i,m=a*i;for(let g=0;g!==i;++g)t[m+g]=t[p+g]}++a}}if(s>0){e[a]=e[s];for(let o=s*i,l=a*i,h=0;h!==i;++h)t[l+h]=t[o+h];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}ss.prototype.TimeBufferType=Float32Array;ss.prototype.ValueBufferType=Float32Array;ss.prototype.DefaultInterpolation=wl;class Pl extends ss{}Pl.prototype.ValueTypeName="bool";Pl.prototype.ValueBufferType=Array;Pl.prototype.DefaultInterpolation=uu;Pl.prototype.InterpolantFactoryMethodLinear=void 0;Pl.prototype.InterpolantFactoryMethodSmooth=void 0;class nA extends ss{}nA.prototype.ValueTypeName="color";class Cl extends ss{}Cl.prototype.ValueTypeName="number";class fN extends Eu{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(i-t)/(r-t);let h=e*o;for(let f=h+o;h!==f;h+=4)wi.slerpFlat(s,0,a,h-o,a,h,l);return s}}class co extends ss{InterpolantFactoryMethodLinear(e){return new fN(this.times,this.values,this.getValueSize(),e)}}co.prototype.ValueTypeName="quaternion";co.prototype.DefaultInterpolation=wl;co.prototype.InterpolantFactoryMethodSmooth=void 0;class Il extends ss{}Il.prototype.ValueTypeName="string";Il.prototype.ValueBufferType=Array;Il.prototype.DefaultInterpolation=uu;Il.prototype.InterpolantFactoryMethodLinear=void 0;Il.prototype.InterpolantFactoryMethodSmooth=void 0;class Tl extends ss{}Tl.prototype.ValueTypeName="vector";class pu{constructor(e,t=-1,i,r=_g){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ur(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)t.push(Gz(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(ss.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],h=[];l.push((o+s-1)%s,o,(o+1)%s),h.push(0,1,0);const f=uN(l);l=c_(l,1,f),h=c_(h,1,f),!r&&l[0]===0&&(l.push(s),h.push(h[0])),a.push(new Cl(".morphTargetInfluences["+t[o].name+"]",l,h).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const h=e[o],f=h.name.match(s);if(f&&f.length>1){const p=f[1];let m=r[p];m||(r[p]=m=[]),m.push(h)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,m,g,y,M){if(g.length!==0){const _=[],v=[];eA(g,_,v,y),_.length!==0&&M.push(new p(m,_,v))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const h=e.hierarchy||[];for(let p=0;p<h.length;p++){const m=h[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let y;for(y=0;y<m.length;y++)if(m[y].morphTargets)for(let M=0;M<m[y].morphTargets.length;M++)g[m[y].morphTargets[M]]=-1;for(const M in g){const _=[],v=[];for(let S=0;S!==m[y].morphTargets.length;++S){const A=m[y];_.push(A.time),v.push(A.morphTarget===M?1:0)}r.push(new Cl(".morphTargetInfluence["+M+"]",_,v))}l=g.length*a}else{const g=".bones["+t[p].name+"]";i(Tl,g+".position",m,"pos",r),i(co,g+".quaternion",m,"rot",r),i(Tl,g+".scale",m,"scl",r)}}return r.length===0?null:new this(s,l,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function zz(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cl;case"vector":case"vector2":case"vector3":case"vector4":return Tl;case"color":return nA;case"quaternion":return co;case"bool":case"boolean":return Pl;case"string":return Il}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Gz(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=zz(n.type);if(n.times===void 0){const t=[],i=[];eA(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Qs={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class iA{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){o++,s===!1&&r.onStart!==void 0&&r.onStart(f,a,o),s=!0},this.itemEnd=function(f){a++,r.onProgress!==void 0&&r.onProgress(f,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,p){return h.push(f,p),this},this.removeHandler=function(f){const p=h.indexOf(f);return p!==-1&&h.splice(p,2),this},this.getHandler=function(f){for(let p=0,m=h.length;p<m;p+=2){const g=h[p],y=h[p+1];if(g.global&&(g.lastIndex=0),g.test(f))return y}return null}}}const pN=new iA;class Ti{constructor(e){this.manager=e!==void 0?e:pN,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ti.DEFAULT_MATERIAL_NAME="__DEFAULT";const Gs={};class Hz extends Error{constructor(e,t){super(e),this.response=t}}class hr extends Ti{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Qs.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Gs[e]!==void 0){Gs[e].push({onLoad:t,onProgress:i,onError:r});return}Gs[e]=[],Gs[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const f=Gs[e],p=h.body.getReader(),m=h.headers.get("Content-Length")||h.headers.get("X-File-Size"),g=m?parseInt(m):0,y=g!==0;let M=0;const _=new ReadableStream({start(v){S();function S(){p.read().then(({done:A,value:E})=>{if(A)v.close();else{M+=E.byteLength;const N=new ProgressEvent("progress",{lengthComputable:y,loaded:M,total:g});for(let T=0,P=f.length;T<P;T++){const L=f[T];L.onProgress&&L.onProgress(N)}v.enqueue(E),S()}})}}});return new Response(_)}else throw new Hz(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(l){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(f=>new DOMParser().parseFromString(f,o));case"json":return h.json();default:if(o===void 0)return h.text();{const p=/charset="?([^;"\s]*)"?/i.exec(o),m=p&&p[1]?p[1].toLowerCase():void 0,g=new TextDecoder(m);return h.arrayBuffer().then(y=>g.decode(y))}}}).then(h=>{Qs.add(e,h);const f=Gs[e];delete Gs[e];for(let p=0,m=f.length;p<m;p++){const g=f[p];g.onLoad&&g.onLoad(h)}}).catch(h=>{const f=Gs[e];if(f===void 0)throw this.manager.itemError(e),h;delete Gs[e];for(let p=0,m=f.length;p<m;p++){const g=f[p];g.onError&&g.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Vz extends Ti{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new hr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=pu.parse(e[i]);t.push(r)}return t}}class Wz extends Ti{constructor(e){super(e)}load(e,t,i,r){const s=this,a=[],o=new bg,l=new hr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let h=0;function f(p){l.load(e[p],function(m){const g=s.parse(m,!0);a[p]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},h+=1,h===6&&(g.mipmapCount===1&&(o.minFilter=mn),o.image=a,o.format=g.format,o.needsUpdate=!0,t&&t(o))},i,r)}if(Array.isArray(e))for(let p=0,m=e.length;p<m;++p)f(p);else l.load(e,function(p){const m=s.parse(p,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let y=0;y<g;y++){a[y]={mipmaps:[]};for(let M=0;M<m.mipmapCount;M++)a[y].mipmaps.push(m.mipmaps[y*m.mipmapCount+M]),a[y].format=m.format,a[y].width=m.width,a[y].height=m.height}o.image=a}else o.image.width=m.width,o.image.height=m.height,o.mipmaps=m.mipmaps;m.mipmapCount===1&&(o.minFilter=mn),o.format=m.format,o.needsUpdate=!0,t&&t(o)},i,r);return o}}class gh extends Ti{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Qs.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=dh("img");function l(){f(),Qs.add(e,this),t&&t(this),s.manager.itemEnd(e)}function h(p){f(),r&&r(p),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){o.removeEventListener("load",l,!1),o.removeEventListener("error",h,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class Xz extends Ti{constructor(e){super(e)}load(e,t,i,r){const s=new Nh;s.colorSpace=Vn;const a=new gh(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(h){a.load(e[h],function(f){s.images[h]=f,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let h=0;h<e.length;++h)l(h);return s}}class Jz extends Ti{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new pl,o=new hr(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){let h;try{h=s.parse(l)}catch(f){if(r!==void 0)r(f);else{console.error(f);return}}h.image!==void 0?a.image=h.image:h.data!==void 0&&(a.image.width=h.width,a.image.height=h.height,a.image.data=h.data),a.wrapS=h.wrapS!==void 0?h.wrapS:oi,a.wrapT=h.wrapT!==void 0?h.wrapT:oi,a.magFilter=h.magFilter!==void 0?h.magFilter:mn,a.minFilter=h.minFilter!==void 0?h.minFilter:mn,a.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0?a.colorSpace=h.colorSpace:h.encoding!==void 0&&(a.encoding=h.encoding),h.flipY!==void 0&&(a.flipY=h.flipY),h.format!==void 0&&(a.format=h.format),h.type!==void 0&&(a.type=h.type),h.mipmaps!==void 0&&(a.mipmaps=h.mipmaps,a.minFilter=Ts),h.mipmapCount===1&&(a.minFilter=mn),h.generateMipmaps!==void 0&&(a.generateMipmaps=h.generateMipmaps),a.needsUpdate=!0,t&&t(a,h)},i,r),a}}class mN extends Ti{constructor(e){super(e)}load(e,t,i,r){const s=new yn,a=new gh(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class yo extends Ft{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ue(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class gN extends yo{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ft.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ue(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Z0=new dt,OE=new z,jE=new z;class rA{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ae(512,512),this.map=null,this.mapPass=null,this.matrix=new dt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ph,this._frameExtents=new Ae(1,1),this._viewportCount=1,this._viewports=[new Yt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;OE.setFromMatrixPosition(e.matrixWorld),t.position.copy(OE),jE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(jE),t.updateMatrixWorld(),Z0.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Z0),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Z0)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Yz extends rA{constructor(){super(new Wn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=hu*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class sA extends yo{constructor(e,t,i=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ft.DEFAULT_UP),this.updateMatrix(),this.target=new Ft,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new Yz}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const zE=new dt,ud=new z,$0=new z;class Kz extends rA{constructor(){super(new Wn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ae(4,2),this._viewportCount=6,this._viewports=[new Yt(2,1,1,1),new Yt(0,1,1,1),new Yt(3,1,1,1),new Yt(1,1,1,1),new Yt(3,0,1,1),new Yt(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),ud.setFromMatrixPosition(e.matrixWorld),i.position.copy(ud),$0.copy(i.position),$0.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt($0),i.updateMatrixWorld(),r.makeTranslation(-ud.x,-ud.y,-ud.z),zE.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zE)}}class aA extends yo{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Kz}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class qz extends rA{constructor(){super(new Au(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class oA extends yo{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ft.DEFAULT_UP),this.updateMatrix(),this.target=new Ft,this.shadow=new qz}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class vN extends yo{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class yN extends yo{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class xN{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new z)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class _N extends yo{constructor(e=new xN,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Hg extends Ti{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,a=new hr(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=Hg.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ue().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new Ue().setHex(a.value);break;case"v2":r.uniforms[s].value=new Ae().fromArray(a.value);break;case"v3":r.uniforms[s].value=new z().fromArray(a.value);break;case"v4":r.uniforms[s].value=new Yt().fromArray(a.value);break;case"m3":r.uniforms[s].value=new Rt().fromArray(a.value);break;case"m4":r.uniforms[s].value=new dt().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ae().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ae().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:tN,SpriteMaterial:HS,RawShaderMaterial:nN,ShaderMaterial:Rs,PointsMaterial:Tg,MeshPhysicalMaterial:Dr,MeshStandardMaterial:Uh,MeshPhongMaterial:iN,MeshToonMaterial:rN,MeshNormalMaterial:sN,MeshLambertMaterial:aN,MeshDepthMaterial:OS,MeshDistanceMaterial:jS,MeshBasicMaterial:lr,MeshMatcapMaterial:oN,LineDashedMaterial:lN,LineBasicMaterial:Ci,Material:Kn};return new t[e]}}class no{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class SN extends Mt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class AN extends Ti{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new hr(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(g,y){if(t[y]!==void 0)return t[y];const _=g.interleavedBuffers[y],v=s(g,_.buffer),S=Fc(_.type,v),A=new Bh(S,_.stride);return A.uuid=_.uuid,t[y]=A,A}function s(g,y){if(i[y]!==void 0)return i[y];const _=g.arrayBuffers[y],v=new Uint32Array(_).buffer;return i[y]=v,v}const a=e.isInstancedBufferGeometry?new SN:new Mt,o=e.data.index;if(o!==void 0){const g=Fc(o.type,o.array);a.setIndex(new Ut(g,1))}const l=e.data.attributes;for(const g in l){const y=l[g];let M;if(y.isInterleavedBufferAttribute){const _=r(e.data,y.data);M=new lo(_,y.itemSize,y.offset,y.normalized)}else{const _=Fc(y.type,y.array),v=y.isInstancedBufferAttribute?Ml:Ut;M=new v(_,y.itemSize,y.normalized)}y.name!==void 0&&(M.name=y.name),y.usage!==void 0&&M.setUsage(y.usage),a.setAttribute(g,M)}const h=e.data.morphAttributes;if(h)for(const g in h){const y=h[g],M=[];for(let _=0,v=y.length;_<v;_++){const S=y[_];let A;if(S.isInterleavedBufferAttribute){const E=r(e.data,S.data);A=new lo(E,S.itemSize,S.offset,S.normalized)}else{const E=Fc(S.type,S.array);A=new Ut(E,S.itemSize,S.normalized)}S.name!==void 0&&(A.name=S.name),M.push(A)}a.morphAttributes[g]=M}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let g=0,y=p.length;g!==y;++g){const M=p[g];a.addGroup(M.start,M.count,M.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const g=new z;m.center!==void 0&&g.fromArray(m.center),a.boundingSphere=new ci(g,m.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class Qz extends Ti{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?no.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new hr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let h=null;try{h=JSON.parse(l)}catch(p){r!==void 0&&r(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const f=h.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(h,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?no.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new hr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(h)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),h=this.parseObject(e.object,s,l,o,i),f=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,f),t!==void 0){let p=!1;for(const m in a)if(a[m].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,t),h=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,h),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new ml().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new Lh().fromJSON(e[s],r);i[o.uuid]=o}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new AN;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in UE?o=UE[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),i[l.uuid]=o}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new Hg;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=pu.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function a(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const h=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h;return a(f)}else return l.data?{data:Fc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new iA(t);s=new gh(l),s.setCrossOrigin(this.crossOrigin);for(let h=0,f=e.length;h<f;h++){const p=e[h],m=p.url;if(Array.isArray(m)){const g=[];for(let y=0,M=m.length;y<M;y++){const _=m[y],v=o(_);v!==null&&(v instanceof HTMLImageElement?g.push(v):g.push(new pl(v.data,v.width,v.height)))}r[p.uuid]=new nl(g)}else{const g=o(p.url);r[p.uuid]=new nl(g)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(l)}else return a.data?{data:Fc(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new gh(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],h=l.url;if(Array.isArray(h)){const f=[];for(let p=0,m=h.length;p<m;p++){const g=h[p],y=await s(g);y!==null&&(y instanceof HTMLImageElement?f.push(y):f.push(new pl(y.data,y.width,y.height)))}i[l.uuid]=new nl(f)}else{const f=await s(l.url);i[l.uuid]=new nl(f)}}}return i}parseTextures(e,t){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],h=l.data;let f;Array.isArray(h)?(f=new Nh,h.length===6&&(f.needsUpdate=!0)):(h&&h.data?f=new pl:f=new yn,h&&(f.needsUpdate=!0)),f.source=l,f.uuid=o.uuid,o.name!==void 0&&(f.name=o.name),o.mapping!==void 0&&(f.mapping=i(o.mapping,Zz)),o.channel!==void 0&&(f.channel=o.channel),o.offset!==void 0&&f.offset.fromArray(o.offset),o.repeat!==void 0&&f.repeat.fromArray(o.repeat),o.center!==void 0&&f.center.fromArray(o.center),o.rotation!==void 0&&(f.rotation=o.rotation),o.wrap!==void 0&&(f.wrapS=i(o.wrap[0],GE),f.wrapT=i(o.wrap[1],GE)),o.format!==void 0&&(f.format=o.format),o.internalFormat!==void 0&&(f.internalFormat=o.internalFormat),o.type!==void 0&&(f.type=o.type),o.colorSpace!==void 0&&(f.colorSpace=o.colorSpace),o.encoding!==void 0&&(f.encoding=o.encoding),o.minFilter!==void 0&&(f.minFilter=i(o.minFilter,HE)),o.magFilter!==void 0&&(f.magFilter=i(o.magFilter,HE)),o.anisotropy!==void 0&&(f.anisotropy=o.anisotropy),o.flipY!==void 0&&(f.flipY=o.flipY),o.generateMipmaps!==void 0&&(f.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(f.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(f.compareFunction=o.compareFunction),o.userData!==void 0&&(f.userData=o.userData),r[o.uuid]=f}return r}parseObject(e,t,i,r,s){let a;function o(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function l(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let y=0,M=m.length;y<M;y++){const _=m[y];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),g.push(i[_])}return g}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function h(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let f,p;switch(e.type){case"Scene":a=new GS,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new Ue(e.background):a.background=h(e.background)),e.environment!==void 0&&(a.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new Eg(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new Mg(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new Wn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Au(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new vN(e.color,e.intensity);break;case"DirectionalLight":a=new oA(e.color,e.intensity);break;case"PointLight":a=new aA(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new yN(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new sA(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new gN(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new _N().fromJSON(e);break;case"SkinnedMesh":f=o(e.geometry),p=l(e.material),a=new VS(f,p),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":f=o(e.geometry),p=l(e.material),a=new Un(f,p);break;case"InstancedMesh":f=o(e.geometry),p=l(e.material);const m=e.count,g=e.instanceMatrix,y=e.instanceColor;a=new WS(f,p,m),a.instanceMatrix=new Ml(new Float32Array(g.array),16),y!==void 0&&(a.instanceColor=new Ml(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":f=o(e.geometry),p=l(e.material),a=new V2(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,p),a.geometry=f,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(M=>{const _=new Mi;_.min.fromArray(M.boxMin),_.max.fromArray(M.boxMax);const v=new ci;return v.radius=M.sphereRadius,v.center.fromArray(M.sphereCenter),{boxInitialized:M.boxInitialized,box:_,sphereInitialized:M.sphereInitialized,sphere:v}}),a._maxGeometryCount=e.maxGeometryCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=h(e.matricesTexture.uuid);break;case"LOD":a=new H2;break;case"Line":a=new la(o(e.geometry),l(e.material));break;case"LineLoop":a=new XS(o(e.geometry),l(e.material));break;case"LineSegments":a=new is(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new JS(o(e.geometry),l(e.material));break;case"Sprite":a=new G2(l(e.material));break;case"Group":a=new qs;break;case"Bone":a=new Cg;break;default:a=new Ft}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let g=0;g<m.length;g++)a.add(this.parseObject(m[g],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let g=0;g<m.length;g++){const y=m[g];a.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const m=e.levels;for(let g=0;g<m.length;g++){const y=m[g],M=a.getObjectByProperty("uuid",y.object);M!==void 0&&a.addLevel(M,y.distance,y.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const Zz={UVMapping:vg,CubeReflectionMapping:oa,CubeRefractionMapping:ao,EquirectangularReflectionMapping:ih,EquirectangularRefractionMapping:rh,CubeUVReflectionMapping:_u},GE={RepeatWrapping:oo,ClampToEdgeWrapping:oi,MirroredRepeatWrapping:lu},HE={NearestFilter:Mn,NearestMipmapNearestFilter:sh,NearestMipmapLinearFilter:qc,LinearFilter:mn,LinearMipmapNearestFilter:yg,LinearMipmapLinearFilter:Ts};class wN extends Ti{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Qs.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(h=>{t&&t(h),s.manager.itemEnd(e)}).catch(h=>{r&&r(h)});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){return Qs.add(e,h),t&&t(h),s.manager.itemEnd(e),h}).catch(function(h){r&&r(h),Qs.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Qs.add(e,l),s.manager.itemStart(e)}}let Op;class lA{static getContext(){return Op===void 0&&(Op=new(window.AudioContext||window.webkitAudioContext)),Op}static setContext(e){Op=e}}class $z extends Ti{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new hr(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const h=l.slice(0);lA.getContext().decodeAudioData(h,function(p){t(p)}).catch(o)}catch(h){o(h)}},i,r);function o(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const VE=new dt,WE=new dt,Fo=new dt;class e4{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Wn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Wn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Fo.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(hl*t.fov*.5)/t.zoom;let o,l;WE.elements[12]=-r,VE.elements[12]=r,o=-a*t.aspect+s,l=a*t.aspect+s,Fo.elements[0]=2*t.near/(l-o),Fo.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(Fo),o=-a*t.aspect-s,l=a*t.aspect-s,Fo.elements[0]=2*t.near/(l-o),Fo.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(Fo)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(WE),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(VE)}}class cA{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=XE(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=XE();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function XE(){return(typeof performance>"u"?Date:performance).now()}const Uo=new z,JE=new wi,t4=new z,Oo=new z;class n4 extends Ft{constructor(){super(),this.type="AudioListener",this.context=lA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new cA}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Uo,JE,t4),Oo.set(0,0,-1).applyQuaternion(JE),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Uo.x,r),t.positionY.linearRampToValueAtTime(Uo.y,r),t.positionZ.linearRampToValueAtTime(Uo.z,r),t.forwardX.linearRampToValueAtTime(Oo.x,r),t.forwardY.linearRampToValueAtTime(Oo.y,r),t.forwardZ.linearRampToValueAtTime(Oo.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Uo.x,Uo.y,Uo.z),t.setOrientation(Oo.x,Oo.y,Oo.z,i.x,i.y,i.z)}}class MN extends Ft{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const jo=new z,YE=new wi,i4=new z,zo=new z;class r4 extends MN{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(jo,YE,i4),zo.set(0,0,1).applyQuaternion(YE);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(jo.x,i),t.positionY.linearRampToValueAtTime(jo.y,i),t.positionZ.linearRampToValueAtTime(jo.z,i),t.orientationX.linearRampToValueAtTime(zo.x,i),t.orientationY.linearRampToValueAtTime(zo.y,i),t.orientationZ.linearRampToValueAtTime(zo.z,i)}else t.setPosition(jo.x,jo.y,jo.z),t.setOrientation(zo.x,zo.y,zo.z)}}class s4{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class EN{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)i[s+o]=i[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(i,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,h=t+t;l!==h;++l)if(i[l]!==i[l+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){wi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;wi.multiplyQuaternionsFlat(e,a,e,t,e,i),wi.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[i+o]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[i+a]*r}}}const uA="\\[\\]\\.:\\/",a4=new RegExp("["+uA+"]","g"),dA="[^"+uA+"]",o4="[^"+uA.replace("\\.","")+"]",l4=/((?:WC+[\/:])*)/.source.replace("WC",dA),c4=/(WCOD+)?/.source.replace("WCOD",o4),u4=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",dA),d4=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",dA),h4=new RegExp("^"+l4+c4+u4+d4+"$"),f4=["material","materials","bones","map"];class p4{constructor(e,t,i){const r=i||kt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class kt{constructor(e,t,i){this.path=t,this.parsedPath=i||kt.parseTrackName(t),this.node=kt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new kt.Composite(e,t,i):new kt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(a4,"")}static parseTrackName(e){const t=h4.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);f4.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=kt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let h=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===h){h=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const a=e[r];if(a===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}kt.Composite=p4;kt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};kt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};kt.prototype.GetterByBindingType=[kt.prototype._getValue_direct,kt.prototype._getValue_array,kt.prototype._getValue_arrayElement,kt.prototype._getValue_toArray];kt.prototype.SetterByBindingTypeAndVersioning=[[kt.prototype._setValue_direct,kt.prototype._setValue_direct_setNeedsUpdate,kt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_array,kt.prototype._setValue_array_setNeedsUpdate,kt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_arrayElement,kt.prototype._setValue_arrayElement_setNeedsUpdate,kt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[kt.prototype._setValue_fromArray,kt.prototype._setValue_fromArray_setNeedsUpdate,kt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class m4{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ur(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,h=this.nCachedObjects_;for(let f=0,p=arguments.length;f!==p;++f){const m=arguments[f],g=m.uuid;let y=t[g];if(y===void 0){y=l++,t[g]=y,e.push(m);for(let M=0,_=a;M!==_;++M)s[M].push(new kt(m,i[M],r[M]))}else if(y<h){o=e[y];const M=--h,_=e[M];t[_.uuid]=y,e[y]=_,t[g]=M,e[M]=m;for(let v=0,S=a;v!==S;++v){const A=s[v],E=A[M];let N=A[y];A[y]=E,N===void 0&&(N=new kt(m,i[v],r[v])),A[M]=N}}else e[y]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],h=l.uuid,f=t[h];if(f!==void 0&&f>=s){const p=s++,m=e[p];t[m.uuid]=f,e[f]=m,t[h]=p,e[p]=l;for(let g=0,y=r;g!==y;++g){const M=i[g],_=M[p],v=M[f];M[f]=_,M[p]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const h=arguments[o],f=h.uuid,p=t[f];if(p!==void 0)if(delete t[f],p<s){const m=--s,g=e[m],y=--a,M=e[y];t[g.uuid]=p,e[p]=g,t[M.uuid]=m,e[m]=M,e.pop();for(let _=0,v=r;_!==v;++_){const S=i[_],A=S[m],E=S[y];S[p]=A,S[m]=E,S.pop()}}else{const m=--a,g=e[m];m>0&&(t[g.uuid]=p),e[p]=g,e.pop();for(let y=0,M=r;y!==M;++y){const _=i[y];_[p]=_[m],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,o=this._parsedPaths,l=this._objects,h=l.length,f=this.nCachedObjects_,p=new Array(h);r=s.length,i[e]=r,a.push(e),o.push(t),s.push(p);for(let m=f,g=l.length;m!==g;++m){const y=l[m];p[m]=new kt(y,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],h=e[o];t[h]=i,a[i]=l,a.pop(),s[i]=s[o],s.pop(),r[i]=r[o],r.pop()}}}class CN{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:el,endingEnd:el};for(let h=0;h!==a;++h){const f=s[h].createInterpolant(null);o[h]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=d2,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,h=o.sampleValues;return l[0]=s,l[1]=s+i,h[0]=e/a,h[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case bS:for(let f=0,p=l.length;f!==p;++f)l[f].evaluate(a),h[f].accumulateAdditive(o);break;case _g:default:for(let f=0,p=l.length;f!==p;++f)l[f].evaluate(a),h[f].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===h2;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===u2){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const h=e<0;this._setEndings(h,!h,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=tl,r.endingEnd=tl):(e?r.endingStart=this.zeroSlopeAtStart?tl:el:r.endingStart=ah,t?r.endingEnd=this.zeroSlopeAtEnd?tl:el:r.endingEnd=ah)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=i,this}}const g4=new Float32Array(1);class v4 extends ua{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,l=i.uuid,h=this._bindingsByRootAndName;let f=h[l];f===void 0&&(f={},h[l]=f);for(let p=0;p!==s;++p){const m=r[p],g=m.name;let y=f[g];if(y!==void 0)++y.referenceCount,a[p]=y;else{if(y=a[p],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,g));continue}const M=t&&t._propertyBindings[p].binding.parsedPath;y=new EN(kt.create(i,g,M),m.ValueTypeName,m.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,g),a[p]=y}o[p].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,h=l[l.length-1],f=e._byClipCacheIndex;h._byClipCacheIndex=f,l[f]=h,l.pop(),e._byClipCacheIndex=null;const p=o.actionByRoot,m=(e._localRoot||this._root).uuid;delete p[m],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,o=a[r],l=t[t.length-1],h=e._cacheIndex;l._cacheIndex=h,t[h]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new tA(new Float32Array(2),new Float32Array(2),1,g4),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?pu.findByName(r,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let h=null;if(i===void 0&&(a!==null?i=a.blendMode:i=_g),l!==void 0){const p=l.actionByRoot[s];if(p!==void 0&&p.blendMode===i)return p;h=l.knownActions[0],a===null&&(a=h._clip)}if(a===null)return null;const f=new CN(this,a,t,i);return this._bindAction(f,h),this._addInactiveAction(f,o,s),f}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?pu.findByName(i,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let h=0;h!==i;++h)t[h]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let h=0;h!==l;++h)o[h].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const h=a[o];this._deactivateAction(h);const f=h._cacheIndex,p=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,p._cacheIndex=f,t[f]=p,t.pop(),this._removeInactiveBindingsForAction(h)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const o=i[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class hA{constructor(e){this.value=e}clone(){return new hA(this.value.clone===void 0?this.value:this.value.clone())}}let y4=0;class x4 extends ua{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:y4++}),this.name="",this.usage=uh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class _4 extends Bh{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class S4{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class TN{constructor(e,t,i=0,r=1/0){this.ray=new Su(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new fl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return u_(e,this,i,t),i.sort(KE),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)u_(e[r],this,i,t);return i.sort(KE),i}}function KE(n,e){return n.distance-e.distance}function u_(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,a=r.length;s<a;s++)u_(r[s],e,t,!0)}}class A4{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(En(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class w4{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const qE=new Ae;class M4{constructor(e=new Ae(1/0,1/0),t=new Ae(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=qE.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qE).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const QE=new z,jp=new z;class E4{constructor(e=new z,t=new z){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){QE.subVectors(e,this.start),jp.subVectors(this.end,this.start);const i=jp.dot(jp);let s=jp.dot(QE)/i;return t&&(s=En(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const ZE=new z;class C4 extends Ft{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Mt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const h=a/l*Math.PI*2,f=o/l*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(f),Math.sin(f),1)}i.setAttribute("position",new Qe(r,3));const s=new Ci({fog:!1,toneMapped:!1});this.cone=new is(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),ZE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(ZE),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ia=new z,zp=new dt,ey=new dt;class T4 extends is{constructor(e){const t=bN(e),i=new Mt,r=[],s=[],a=new Ue(0,0,1),o=new Ue(0,1,0);for(let h=0;h<t.length;h++){const f=t[h];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}i.setAttribute("position",new Qe(r,3)),i.setAttribute("color",new Qe(s,3));const l=new Ci({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");ey.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(zp.multiplyMatrices(ey,o.matrixWorld),Ia.setFromMatrixPosition(zp),r.setXYZ(a,Ia.x,Ia.y,Ia.z),zp.multiplyMatrices(ey,o.parent.matrixWorld),Ia.setFromMatrixPosition(zp),r.setXYZ(a+1,Ia.x,Ia.y,Ia.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function bN(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,bN(n.children[t]));return e}class b4 extends Un{constructor(e,t,i){const r=new Fh(t,4,2),s=new lr({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const R4=new z,$E=new Ue,eC=new Ue;class N4 extends Ft{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new kh(t);r.rotateY(Math.PI*.5),this.material=new lr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new Ut(a,3)),this.add(new Un(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");$E.copy(this.light.color),eC.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?$E:eC;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(R4.setFromMatrixPosition(this.light.matrixWorld).negate())}}class P4 extends is{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ue(i),r=new Ue(r);const s=t/2,a=e/t,o=e/2,l=[],h=[];for(let m=0,g=0,y=-o;m<=t;m++,y+=a){l.push(-o,0,y,o,0,y),l.push(y,0,-o,y,0,o);const M=m===s?i:r;M.toArray(h,g),g+=3,M.toArray(h,g),g+=3,M.toArray(h,g),g+=3,M.toArray(h,g),g+=3}const f=new Mt;f.setAttribute("position",new Qe(l,3)),f.setAttribute("color",new Qe(h,3));const p=new Ci({vertexColors:!0,toneMapped:!1});super(f,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class I4 extends is{constructor(e=10,t=16,i=8,r=64,s=4473924,a=8947848){s=new Ue(s),a=new Ue(a);const o=[],l=[];if(t>1)for(let p=0;p<t;p++){const m=p/t*(Math.PI*2),g=Math.sin(m)*e,y=Math.cos(m)*e;o.push(0,0,0),o.push(g,0,y);const M=p&1?s:a;l.push(M.r,M.g,M.b),l.push(M.r,M.g,M.b)}for(let p=0;p<i;p++){const m=p&1?s:a,g=e-e/i*p;for(let y=0;y<r;y++){let M=y/r*(Math.PI*2),_=Math.sin(M)*g,v=Math.cos(M)*g;o.push(_,0,v),l.push(m.r,m.g,m.b),M=(y+1)/r*(Math.PI*2),_=Math.sin(M)*g,v=Math.cos(M)*g,o.push(_,0,v),l.push(m.r,m.g,m.b)}}const h=new Mt;h.setAttribute("position",new Qe(o,3)),h.setAttribute("color",new Qe(l,3));const f=new Ci({vertexColors:!0,toneMapped:!1});super(h,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const tC=new z,Gp=new z,nC=new z;class B4 extends Ft{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Mt;r.setAttribute("position",new Qe([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ci({fog:!1,toneMapped:!1});this.lightPlane=new la(r,s),this.add(this.lightPlane),r=new Mt,r.setAttribute("position",new Qe([0,0,0,0,0,1],3)),this.targetLine=new la(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),tC.setFromMatrixPosition(this.light.matrixWorld),Gp.setFromMatrixPosition(this.light.target.matrixWorld),nC.subVectors(Gp,tC),this.lightPlane.lookAt(Gp),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Gp),this.targetLine.scale.z=nC.length()}}const Hp=new z,An=new Rh;class L4 extends is{constructor(e){const t=new Mt,i=new Ci({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(y,M){l(y),l(M)}function l(y){r.push(0,0,0),s.push(0,0,0),a[y]===void 0&&(a[y]=[]),a[y].push(r.length/3-1)}t.setAttribute("position",new Qe(r,3)),t.setAttribute("color",new Qe(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const h=new Ue(16755200),f=new Ue(16711680),p=new Ue(43775),m=new Ue(16777215),g=new Ue(3355443);this.setColors(h,f,p,m,g)}setColors(e,t,i,r,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;An.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Nn("c",t,e,An,0,0,-1),Nn("t",t,e,An,0,0,1),Nn("n1",t,e,An,-i,-r,-1),Nn("n2",t,e,An,i,-r,-1),Nn("n3",t,e,An,-i,r,-1),Nn("n4",t,e,An,i,r,-1),Nn("f1",t,e,An,-i,-r,1),Nn("f2",t,e,An,i,-r,1),Nn("f3",t,e,An,-i,r,1),Nn("f4",t,e,An,i,r,1),Nn("u1",t,e,An,i*.7,r*1.1,-1),Nn("u2",t,e,An,-i*.7,r*1.1,-1),Nn("u3",t,e,An,0,r*2,-1),Nn("cf1",t,e,An,-i,0,1),Nn("cf2",t,e,An,i,0,1),Nn("cf3",t,e,An,0,-r,1),Nn("cf4",t,e,An,0,r,1),Nn("cn1",t,e,An,-i,0,-1),Nn("cn2",t,e,An,i,0,-1),Nn("cn3",t,e,An,0,-r,-1),Nn("cn4",t,e,An,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Nn(n,e,t,i,r,s,a){Hp.set(r,s,a).unproject(i);const o=e[n];if(o!==void 0){const l=t.getAttribute("position");for(let h=0,f=o.length;h<f;h++)l.setXYZ(o[h],Hp.x,Hp.y,Hp.z)}}const Vp=new Mi;class D4 extends is{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Mt;s.setIndex(new Ut(i,1)),s.setAttribute("position",new Ut(r,3)),super(s,new Ci({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Vp.setFromObject(this.object),Vp.isEmpty())return;const t=Vp.min,i=Vp.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class k4 extends is{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Mt;s.setIndex(new Ut(i,1)),s.setAttribute("position",new Qe(r,3)),super(s,new Ci({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class F4 extends la{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Mt;a.setAttribute("position",new Qe(s,3)),a.computeBoundingSphere(),super(a,new Ci({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Mt;l.setAttribute("position",new Qe(o,3)),l.computeBoundingSphere(),this.add(new Un(l,new lr({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const iC=new z;let Wp,ty;class U4 extends Ft{constructor(e=new z(0,0,1),t=new z(0,0,0),i=1,r=16776960,s=i*.2,a=s*.2){super(),this.type="ArrowHelper",Wp===void 0&&(Wp=new Mt,Wp.setAttribute("position",new Qe([0,0,0,0,1,0],3)),ty=new Mu(0,.5,1,5,1),ty.translate(0,-.5,0)),this.position.copy(t),this.line=new la(Wp,new Ci({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Un(ty,new lr({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{iC.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(iC,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class O4 extends is{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Mt;r.setAttribute("position",new Qe(t,3)),r.setAttribute("color",new Qe(i,3));const s=new Ci({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Ue,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class j4{constructor(){this.type="ShapePath",this.color=new Ue,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new hh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,a){return this.currentPath.bezierCurveTo(e,t,i,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const S=[];for(let A=0,E=v.length;A<E;A++){const N=v[A],T=new ml;T.curves=N.curves,S.push(T)}return S}function i(v,S){const A=S.length;let E=!1;for(let N=A-1,T=0;T<A;N=T++){let P=S[N],L=S[T],R=L.x-P.x,b=L.y-P.y;if(Math.abs(b)>Number.EPSILON){if(b<0&&(P=S[T],R=-R,L=S[N],b=-b),v.y<P.y||v.y>L.y)continue;if(v.y===P.y){if(v.x===P.x)return!0}else{const D=b*(v.x-P.x)-R*(v.y-P.y);if(D===0)return!0;if(D<0)continue;E=!E}}else{if(v.y!==P.y)continue;if(L.x<=v.x&&v.x<=P.x||P.x<=v.x&&v.x<=L.x)return!0}}return E}const r=Es.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const h=[];if(s.length===1)return o=s[0],l=new ml,l.curves=o.curves,h.push(l),h;let f=!r(s[0].getPoints());f=e?!f:f;const p=[],m=[];let g=[],y=0,M;m[y]=void 0,g[y]=[];for(let v=0,S=s.length;v<S;v++)o=s[v],M=o.getPoints(),a=r(M),a=e?!a:a,a?(!f&&m[y]&&y++,m[y]={s:new ml,p:M},m[y].s.curves=o.curves,f&&y++,g[y]=[]):g[y].push({h:o,p:M[0]});if(!m[0])return t(s);if(m.length>1){let v=!1,S=0;for(let A=0,E=m.length;A<E;A++)p[A]=[];for(let A=0,E=m.length;A<E;A++){const N=g[A];for(let T=0;T<N.length;T++){const P=N[T];let L=!0;for(let R=0;R<m.length;R++)i(P.p,m[R].p)&&(A!==R&&S++,L?(L=!1,p[R].push(P)):v=!0);L&&p[A].push(P)}}S>0&&v===!1&&(g=p)}let _;for(let v=0,S=m.length;v<S;v++){l=m[v].s,h.push(l),_=g[v];for(let A=0,E=_.length;A<E;A++)l.holes.push(_[A].h)}return h}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Eh}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Eh);const z4=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:_S,AddEquation:za,AddOperation:KR,AdditiveAnimationBlendMode:bS,AdditiveBlending:Mx,AgXToneMapping:e2,AlphaFormat:r2,AlwaysCompare:w2,AlwaysDepth:GR,AlwaysStencilFunc:t_,AmbientLight:vN,AnimationAction:CN,AnimationClip:pu,AnimationLoader:Vz,AnimationMixer:v4,AnimationObjectGroup:m4,AnimationUtils:jz,ArcCurve:W2,ArrayCamera:O2,ArrowHelper:U4,AttachedBindMode:Rx,Audio:MN,AudioAnalyser:s4,AudioContext:lA,AudioListener:n4,AudioLoader:$z,AxesHelper:O4,BackSide:ki,BasicDepthPacking:p2,BasicShadowMap:MR,BatchedMesh:V2,Bone:Cg,BooleanKeyframeTrack:Pl,Box2:M4,Box3:Mi,Box3Helper:k4,BoxGeometry:Nl,BoxHelper:D4,BufferAttribute:Ut,BufferGeometry:Mt,BufferGeometryLoader:AN,ByteType:n2,Cache:Qs,Camera:Rh,CameraHelper:L4,CanvasTexture:uz,CapsuleGeometry:Ng,CatmullRomCurve3:X2,CineonToneMapping:ZR,CircleGeometry:Pg,ClampToEdgeWrapping:oi,Clock:cA,Color:Ue,ColorKeyframeTrack:nA,ColorManagement:Jt,CompressedArrayTexture:lz,CompressedCubeTexture:cz,CompressedTexture:bg,CompressedTextureLoader:Wz,ConeGeometry:Ig,ConstantAlphaFactor:OR,ConstantColorFactor:FR,CubeCamera:N2,CubeReflectionMapping:oa,CubeRefractionMapping:ao,CubeTexture:Nh,CubeTextureLoader:Xz,CubeUVReflectionMapping:_u,CubicBezierCurve:KS,CubicBezierCurve3:J2,CubicInterpolant:dN,CullFaceBack:wx,CullFaceFront:wR,CullFaceFrontBack:tk,CullFaceNone:AR,Curve:rs,CurvePath:K2,CustomBlending:ER,CustomToneMapping:$R,CylinderGeometry:Mu,Cylindrical:w4,Data3DTexture:LS,DataArrayTexture:Ag,DataTexture:pl,DataTextureLoader:Jz,DataUtils:o3,DecrementStencilOp:uk,DecrementWrapStencilOp:hk,DefaultLoadingManager:pN,DepthFormat:eo,DepthStencilFormat:Al,DepthTexture:US,DetachedBindMode:t2,DirectionalLight:oA,DirectionalLightHelper:B4,DiscreteInterpolant:hN,DisplayP3ColorSpace:Sg,DodecahedronGeometry:Bg,DoubleSide:Kr,DstAlphaFactor:IR,DstColorFactor:LR,DynamicCopyUsage:Tk,DynamicDrawUsage:Sk,DynamicReadUsage:Mk,EdgesGeometry:q2,EllipseCurve:Rg,EqualCompare:x2,EqualDepth:VR,EqualStencilFunc:gk,EquirectangularReflectionMapping:ih,EquirectangularRefractionMapping:rh,Euler:bh,EventDispatcher:ua,ExtrudeGeometry:Dg,FileLoader:hr,Float16BufferAttribute:f3,Float32BufferAttribute:Qe,Float64BufferAttribute:p3,FloatType:qr,Fog:Eg,FogExp2:Mg,FramebufferTexture:oz,FrontSide:Cs,Frustum:Ph,GLBufferAttribute:S4,GLSL1:Rk,GLSL3:n_,GreaterCompare:_2,GreaterDepth:XR,GreaterEqualCompare:A2,GreaterEqualDepth:WR,GreaterEqualStencilFunc:_k,GreaterStencilFunc:yk,GridHelper:P4,Group:qs,HalfFloatType:cu,HemisphereLight:gN,HemisphereLightHelper:N4,IcosahedronGeometry:kg,ImageBitmapLoader:wN,ImageLoader:gh,ImageUtils:BS,IncrementStencilOp:ck,IncrementWrapStencilOp:dk,InstancedBufferAttribute:Ml,InstancedBufferGeometry:SN,InstancedInterleavedBuffer:_4,InstancedMesh:WS,Int16BufferAttribute:d3,Int32BufferAttribute:h3,Int8BufferAttribute:l3,IntType:SS,InterleavedBuffer:Bh,InterleavedBufferAttribute:lo,Interpolant:Eu,InterpolateDiscrete:uu,InterpolateLinear:wl,InterpolateSmooth:gm,InvertStencilOp:fk,KeepStencilOp:Jo,KeyframeTrack:ss,LOD:H2,LatheGeometry:Dh,Layers:fl,LessCompare:y2,LessDepth:HR,LessEqualCompare:PS,LessEqualDepth:nh,LessEqualStencilFunc:vk,LessStencilFunc:mk,Light:yo,LightProbe:_N,Line:la,Line3:E4,LineBasicMaterial:Ci,LineCurve:qS,LineCurve3:Y2,LineDashedMaterial:lN,LineLoop:XS,LineSegments:is,LinearDisplayP3ColorSpace:Th,LinearEncoding:NS,LinearFilter:mn,LinearInterpolant:tA,LinearMipMapLinearFilter:ak,LinearMipMapNearestFilter:sk,LinearMipmapLinearFilter:Ts,LinearMipmapNearestFilter:yg,LinearSRGBColorSpace:bs,LinearToneMapping:qR,LinearTransfer:oh,Loader:Ti,LoaderUtils:no,LoadingManager:iA,LoopOnce:u2,LoopPingPong:h2,LoopRepeat:d2,LuminanceAlphaFormat:a2,LuminanceFormat:s2,MOUSE:$D,Material:Kn,MaterialLoader:Hg,MathUtils:Hr,Matrix3:Rt,Matrix4:dt,MaxEquation:bx,Mesh:Un,MeshBasicMaterial:lr,MeshDepthMaterial:OS,MeshDistanceMaterial:jS,MeshLambertMaterial:aN,MeshMatcapMaterial:oN,MeshNormalMaterial:sN,MeshPhongMaterial:iN,MeshPhysicalMaterial:Dr,MeshStandardMaterial:Uh,MeshToonMaterial:rN,MinEquation:Tx,MirroredRepeatWrapping:lu,MixOperation:YR,MultiplyBlending:Cx,MultiplyOperation:Ch,NearestFilter:Mn,NearestMipMapLinearFilter:rk,NearestMipMapNearestFilter:ik,NearestMipmapLinearFilter:qc,NearestMipmapNearestFilter:sh,NeverCompare:v2,NeverDepth:zR,NeverStencilFunc:pk,NoBlending:ta,NoColorSpace:ar,NoToneMapping:ws,NormalAnimationBlendMode:_g,NormalBlending:dl,NotEqualCompare:S2,NotEqualDepth:JR,NotEqualStencilFunc:xk,NumberKeyframeTrack:Cl,Object3D:Ft,ObjectLoader:Qz,ObjectSpaceNormalMap:g2,OctahedronGeometry:kh,OneFactor:RR,OneMinusConstantAlphaFactor:jR,OneMinusConstantColorFactor:UR,OneMinusDstAlphaFactor:BR,OneMinusDstColorFactor:DR,OneMinusSrcAlphaFactor:Wm,OneMinusSrcColorFactor:PR,OrthographicCamera:Au,P3Primaries:ch,PCFShadowMap:gg,PCFSoftShadowMap:Rd,PMREMGenerator:r_,Path:hh,PerspectiveCamera:Wn,Plane:Ua,PlaneGeometry:Ih,PlaneHelper:F4,PointLight:aA,PointLightHelper:b4,Points:JS,PointsMaterial:Tg,PolarGridHelper:I4,PolyhedronGeometry:vo,PositionalAudio:r4,PropertyBinding:kt,PropertyMixer:EN,QuadraticBezierCurve:QS,QuadraticBezierCurve3:ZS,Quaternion:wi,QuaternionKeyframeTrack:co,QuaternionLinearInterpolant:fN,RED_GREEN_RGTC2_Format:$x,RED_RGTC1_Format:c2,REVISION:Eh,RGBADepthPacking:m2,RGBAFormat:Li,RGBAIntegerFormat:CS,RGBA_ASTC_10x10_Format:Jx,RGBA_ASTC_10x5_Format:Vx,RGBA_ASTC_10x6_Format:Wx,RGBA_ASTC_10x8_Format:Xx,RGBA_ASTC_12x10_Format:Yx,RGBA_ASTC_12x12_Format:Kx,RGBA_ASTC_4x4_Format:kx,RGBA_ASTC_5x4_Format:Fx,RGBA_ASTC_5x5_Format:Ux,RGBA_ASTC_6x5_Format:Ox,RGBA_ASTC_6x6_Format:jx,RGBA_ASTC_8x5_Format:zx,RGBA_ASTC_8x6_Format:Gx,RGBA_ASTC_8x8_Format:Hx,RGBA_BPTC_Format:mm,RGBA_ETC2_EAC_Format:Dx,RGBA_PVRTC_2BPPV1_Format:Bx,RGBA_PVRTC_4BPPV1_Format:Ix,RGBA_S3TC_DXT1_Format:hm,RGBA_S3TC_DXT3_Format:fm,RGBA_S3TC_DXT5_Format:pm,RGB_BPTC_SIGNED_Format:qx,RGB_BPTC_UNSIGNED_Format:Qx,RGB_ETC1_Format:TS,RGB_ETC2_Format:Lx,RGB_PVRTC_2BPPV1_Format:Px,RGB_PVRTC_4BPPV1_Format:Nx,RGB_S3TC_DXT1_Format:dm,RGFormat:l2,RGIntegerFormat:ES,RawShaderMaterial:nN,Ray:Su,Raycaster:TN,Rec709Primaries:lh,RectAreaLight:yN,RedFormat:o2,RedIntegerFormat:MS,ReinhardToneMapping:QR,RenderTarget:C2,RepeatWrapping:oo,ReplaceStencilOp:lk,ReverseSubtractEquation:TR,RingGeometry:Fg,SIGNED_RED_GREEN_RGTC2_Format:e_,SIGNED_RED_RGTC1_Format:Zx,SRGBColorSpace:Vn,SRGBTransfer:en,Scene:GS,ShaderChunk:Ct,ShaderLib:Yr,ShaderMaterial:Rs,ShadowMaterial:tN,Shape:ml,ShapeGeometry:Ug,ShapePath:j4,ShapeUtils:Es,ShortType:i2,Skeleton:Lh,SkeletonHelper:T4,SkinnedMesh:VS,Source:nl,Sphere:ci,SphereGeometry:Fh,Spherical:A4,SphericalHarmonics3:xN,SplineCurve:$S,SpotLight:sA,SpotLightHelper:C4,Sprite:G2,SpriteMaterial:HS,SrcAlphaFactor:Vm,SrcAlphaSaturateFactor:kR,SrcColorFactor:NR,StaticCopyUsage:Ck,StaticDrawUsage:uh,StaticReadUsage:wk,StereoCamera:e4,StreamCopyUsage:bk,StreamDrawUsage:Ak,StreamReadUsage:Ek,StringKeyframeTrack:Il,SubtractEquation:CR,SubtractiveBlending:Ex,TOUCH:ek,TangentSpaceNormalMap:go,TetrahedronGeometry:Og,Texture:yn,TextureLoader:mN,TorusGeometry:jg,TorusKnotGeometry:zg,Triangle:Wi,TriangleFanDrawMode:Xm,TriangleStripDrawMode:RS,TrianglesDrawMode:f2,TubeGeometry:Gg,TwoPassDoubleSide:nk,UVMapping:vg,Uint16BufferAttribute:DS,Uint32BufferAttribute:kS,Uint8BufferAttribute:c3,Uint8ClampedBufferAttribute:u3,Uniform:hA,UniformsGroup:x4,UniformsLib:De,UniformsUtils:R2,UnsignedByteType:Ms,UnsignedInt248Type:$a,UnsignedIntType:Ks,UnsignedShort4444Type:AS,UnsignedShort5551Type:wS,UnsignedShortType:xg,VSMShadowMap:Wr,Vector2:Ae,Vector3:z,Vector4:Yt,VectorKeyframeTrack:Tl,VideoTexture:az,WebGL1Renderer:j2,WebGL3DRenderTarget:Kk,WebGLArrayRenderTarget:Yk,WebGLCoordinateSystem:Qr,WebGLCubeRenderTarget:P2,WebGLMultipleRenderTargets:qk,WebGLRenderTarget:ts,WebGLRenderer:zS,WebGLUtils:U2,WebGPUCoordinateSystem:du,WireframeGeometry:eN,WrapAroundEnding:ah,ZeroCurvatureEnding:el,ZeroFactor:bR,ZeroSlopeEnding:tl,ZeroStencilOp:ok,_SRGBAFormat:Jm,createCanvasElement:E2,sRGBEncoding:to},Symbol.toStringTag,{value:"Module"}));var RN={exports:{}},Bl={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Bl.ConcurrentRoot=1;Bl.ContinuousEventPriority=4;Bl.DefaultEventPriority=16;Bl.DiscreteEventPriority=1;Bl.IdleEventPriority=536870912;Bl.LegacyRoot=0;RN.exports=Bl;var zc=RN.exports;function G4(n){let e;const t=new Set,i=(h,f)=>{const p=typeof h=="function"?h(e):h;if(p!==e){const m=e;e=f?p:Object.assign({},e,p),t.forEach(g=>g(e,m))}},r=()=>e,s=(h,f=r,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=f(e);function g(){const y=f(e);if(!p(m,y)){const M=m;h(m=y,M)}}return t.add(g),()=>t.delete(g)},l={setState:i,getState:r,subscribe:(h,f,p)=>f||p?s(h,f,p):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=n(i,r,l),l}const H4=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),rC=H4?B.useEffect:B.useLayoutEffect;function V4(n){const e=typeof n=="function"?G4(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=B.useReducer(_=>_+1,0),a=e.getState(),o=B.useRef(a),l=B.useRef(i),h=B.useRef(r),f=B.useRef(!1),p=B.useRef();p.current===void 0&&(p.current=i(a));let m,g=!1;(o.current!==a||l.current!==i||h.current!==r||f.current)&&(m=i(a),g=!r(p.current,m)),rC(()=>{g&&(p.current=m),o.current=a,l.current=i,h.current=r,f.current=!1});const y=B.useRef(a);rC(()=>{const _=()=>{try{const S=e.getState(),A=l.current(S);h.current(p.current,A)||(o.current=S,p.current=A,s())}catch{f.current=!0,s()}},v=e.subscribe(_);return e.getState()!==y.current&&_(),v},[]);const M=g?m:p.current;return B.useDebugValue(M),M};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const W4=n=>typeof n=="object"&&typeof n.then=="function",rl=[];function NN(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function PN(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of rl)if(NN(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=rl.indexOf(r);s!==-1&&rl.splice(s,1)},promise:(W4(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(rl.push(r),!t)throw r.promise}const X4=(n,e,t)=>PN(n,e,!1,t),J4=(n,e,t)=>void PN(n,e,!0,t),Y4=n=>{if(n===void 0||n.length===0)rl.splice(0,rl.length);else{const e=rl.find(t=>NN(n,t.keys,t.equal));e&&e.remove()}};var IN={exports:{}},BN={exports:{}},LN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(U,j){var W=U.length;U.push(j);e:for(;0<W;){var Y=W-1>>>1,re=U[Y];if(0<r(re,j))U[Y]=j,U[W]=re,W=Y;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var j=U[0],W=U.pop();if(W!==j){U[0]=W;e:for(var Y=0,re=U.length,Q=re>>>1;Y<Q;){var oe=2*(Y+1)-1,ge=U[oe],Te=oe+1,ce=U[Te];if(0>r(ge,W))Te<re&&0>r(ce,ge)?(U[Y]=ce,U[Te]=W,Y=Te):(U[Y]=ge,U[oe]=W,Y=oe);else if(Te<re&&0>r(ce,W))U[Y]=ce,U[Te]=W,Y=Te;else break e}}return j}function r(U,j){var W=U.sortIndex-j.sortIndex;return W!==0?W:U.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],h=[],f=1,p=null,m=3,g=!1,y=!1,M=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(U){for(var j=t(h);j!==null;){if(j.callback===null)i(h);else if(j.startTime<=U)i(h),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(h)}}function E(U){if(M=!1,A(U),!y)if(t(l)!==null)y=!0,q(N);else{var j=t(h);j!==null&&ue(E,j.startTime-U)}}function N(U,j){y=!1,M&&(M=!1,v(L),L=-1),g=!0;var W=m;try{for(A(j),p=t(l);p!==null&&(!(p.expirationTime>j)||U&&!D());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,m=p.priorityLevel;var re=Y(p.expirationTime<=j);j=n.unstable_now(),typeof re=="function"?p.callback=re:p===t(l)&&i(l),A(j)}else i(l);p=t(l)}if(p!==null)var Q=!0;else{var oe=t(h);oe!==null&&ue(E,oe.startTime-j),Q=!1}return Q}finally{p=null,m=W,g=!1}}var T=!1,P=null,L=-1,R=5,b=-1;function D(){return!(n.unstable_now()-b<R)}function X(){if(P!==null){var U=n.unstable_now();b=U;var j=!0;try{j=P(!0,U)}finally{j?$():(T=!1,P=null)}}else T=!1}var $;if(typeof S=="function")$=function(){S(X)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,K=V.port2;V.port1.onmessage=X,$=function(){K.postMessage(null)}}else $=function(){_(X,0)};function q(U){P=U,T||(T=!0,$())}function ue(U,j){L=_(function(){U(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){y||g||(y=!0,q(N))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(U){switch(m){case 1:case 2:case 3:var j=3;break;default:j=m}var W=m;m=j;try{return U()}finally{m=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,j){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var W=m;m=U;try{return j()}finally{m=W}},n.unstable_scheduleCallback=function(U,j,W){var Y=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Y+W:Y):W=Y,U){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=W+re,U={id:f++,callback:j,priorityLevel:U,startTime:W,expirationTime:re,sortIndex:-1},W>Y?(U.sortIndex=W,e(h,U),t(l)===null&&U===t(h)&&(M?(v(L),L=-1):M=!0,ue(E,W-Y))):(U.sortIndex=re,e(l,U),y||g||(y=!0,q(N))),U},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(U){var j=m;return function(){var W=m;m=j;try{return U.apply(this,arguments)}finally{m=W}}}})(LN);BN.exports=LN;var d_=BN.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K4=function(e){var t={},i=B,r=d_,s=Object.assign;function a(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,x=1;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),N=Symbol.iterator;function T(u){return u===null||typeof u!="object"?null:(u=N&&u[N]||u["@@iterator"],typeof u=="function"?u:null)}function P(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case f:return"Fragment";case h:return"Portal";case m:return"Profiler";case p:return"StrictMode";case _:return"Suspense";case v:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case y:return(u.displayName||"Context")+".Consumer";case g:return(u._context.displayName||"Context")+".Provider";case M:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case S:return d=u.displayName||null,d!==null?d:P(u.type)||"Memo";case A:d=u._payload,u=u._init;try{return P(u(d))}catch{}}return null}function L(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(d);case 8:return d===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function R(u){var d=u,x=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,d.flags&4098&&(x=d.return),u=d.return;while(u)}return d.tag===3?x:null}function b(u){if(R(u)!==u)throw Error(a(188))}function D(u){var d=u.alternate;if(!d){if(d=R(u),d===null)throw Error(a(188));return d!==u?null:u}for(var x=u,w=d;;){var C=x.return;if(C===null)break;var I=C.alternate;if(I===null){if(w=C.return,w!==null){x=w;continue}break}if(C.child===I.child){for(I=C.child;I;){if(I===x)return b(C),u;if(I===w)return b(C),d;I=I.sibling}throw Error(a(188))}if(x.return!==w.return)x=C,w=I;else{for(var G=!1,Z=C.child;Z;){if(Z===x){G=!0,x=C,w=I;break}if(Z===w){G=!0,w=C,x=I;break}Z=Z.sibling}if(!G){for(Z=I.child;Z;){if(Z===x){G=!0,x=I,w=C;break}if(Z===w){G=!0,w=I,x=C;break}Z=Z.sibling}if(!G)throw Error(a(189))}}if(x.alternate!==w)throw Error(a(190))}if(x.tag!==3)throw Error(a(188));return x.stateNode.current===x?u:d}function X(u){return u=D(u),u!==null?$(u):null}function $(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=$(u);if(d!==null)return d;u=u.sibling}return null}function V(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var d=V(u);if(d!==null)return d}u=u.sibling}return null}var K=Array.isArray,q=e.getPublicInstance,ue=e.getRootHostContext,U=e.getChildHostContext,j=e.prepareForCommit,W=e.resetAfterCommit,Y=e.createInstance,re=e.appendInitialChild,Q=e.finalizeInitialChildren,oe=e.prepareUpdate,ge=e.shouldSetTextContent,Te=e.createTextInstance,ce=e.scheduleTimeout,Se=e.cancelTimeout,Ce=e.noTimeout,be=e.isPrimaryRenderer,Pe=e.supportsMutation,H=e.supportsPersistence,ve=e.supportsHydration,pe=e.getInstanceFromNode,Me=e.preparePortalMount,de=e.getCurrentEventPriority,ie=e.detachDeletedInstance,Re=e.supportsMicrotasks,F=e.scheduleMicrotask,k=e.supportsTestSelectors,te=e.findFiberRoot,ye=e.getBoundingRect,Ee=e.getTextContent,we=e.isHiddenSubtree,Ke=e.matchAccessibilityRole,Be=e.setFocusIfFocusable,He=e.setupIntersectionObserver,st=e.appendChild,ft=e.appendChildToContainer,xe=e.commitTextUpdate,ot=e.commitMount,Et=e.commitUpdate,pt=e.insertBefore,qe=e.insertInContainerBefore,Xe=e.removeChild,yt=e.removeChildFromContainer,It=e.resetTextContent,zt=e.hideInstance,gt=e.hideTextInstance,Le=e.unhideInstance,J=e.unhideTextInstance,ke=e.clearContainer,Fe=e.cloneInstance,nt=e.createContainerChildSet,rt=e.appendChildToContainerChildSet,Wt=e.finalizeContainerChildren,Dt=e.replaceContainerChildren,on=e.cloneHiddenInstance,In=e.cloneHiddenTextInstance,Xt=e.canHydrateInstance,Bn=e.canHydrateTextInstance,Oi=e.canHydrateSuspenseInstance,da=e.isSuspenseInstancePending,xo=e.isSuspenseInstanceFallback,ha=e.registerSuspenseInstanceRetry,as=e.getNextHydratableSibling,fa=e.getFirstHydratableChild,Ll=e.getFirstHydratableChildWithinContainer,Dl=e.getFirstHydratableChildWithinSuspenseInstance,_n=e.hydrateInstance,os=e.hydrateTextInstance,_o=e.hydrateSuspenseInstance,O=e.getNextHydratableInstanceAfterSuspenseInstance,ne=e.commitHydratedContainer,se=e.commitHydratedSuspenseInstance,he=e.clearSuspenseBoundary,le=e.clearSuspenseBoundaryFromContainer,ze=e.shouldDeleteUnhydratedTailInstances,Ze=e.didNotMatchHydratedContainerTextInstance,at=e.didNotMatchHydratedTextInstance,ct;function mt(u){if(ct===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);ct=d&&d[1]||""}return`
`+ct+u}var vt=!1;function xt(u,d){if(!u||vt)return"";vt=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ie){var w=Ie}Reflect.construct(u,[],d)}else{try{d.call()}catch(Ie){w=Ie}u.call(d.prototype)}else{try{throw Error()}catch(Ie){w=Ie}u()}}catch(Ie){if(Ie&&w&&typeof Ie.stack=="string"){for(var C=Ie.stack.split(`
`),I=w.stack.split(`
`),G=C.length-1,Z=I.length-1;1<=G&&0<=Z&&C[G]!==I[Z];)Z--;for(;1<=G&&0<=Z;G--,Z--)if(C[G]!==I[Z]){if(G!==1||Z!==1)do if(G--,Z--,0>Z||C[G]!==I[Z]){var me=`
`+C[G].replace(" at new "," at ");return u.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",u.displayName)),me}while(1<=G&&0<=Z);break}}}finally{vt=!1,Error.prepareStackTrace=x}return(u=u?u.displayName||u.name:"")?mt(u):""}var $t=Object.prototype.hasOwnProperty,jn=[],qt=-1;function Cn(u){return{current:u}}function ut(u){0>qt||(u.current=jn[qt],jn[qt]=null,qt--)}function Ve(u,d){qt++,jn[qt]=u.current,u.current=d}var hi={},St=Cn(hi),Nt=Cn(!1),Qi=hi;function dn(u,d){var x=u.type.contextTypes;if(!x)return hi;var w=u.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===d)return w.__reactInternalMemoizedMaskedChildContext;var C={},I;for(I in x)C[I]=d[I];return w&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=C),C}function hn(u){return u=u.childContextTypes,u!=null}function ln(){ut(Nt),ut(St)}function Zi(u,d,x){if(St.current!==hi)throw Error(a(168));Ve(St,d),Ve(Nt,x)}function Ns(u,d,x){var w=u.stateNode;if(d=d.childContextTypes,typeof w.getChildContext!="function")return x;w=w.getChildContext();for(var C in w)if(!(C in d))throw Error(a(108,L(u)||"Unknown",C));return s({},x,w)}function zn(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||hi,Qi=St.current,Ve(St,u),Ve(Nt,Nt.current),!0}function pa(u,d,x){var w=u.stateNode;if(!w)throw Error(a(169));x?(u=Ns(u,d,Qi),w.__reactInternalMemoizedMergedChildContext=u,ut(Nt),ut(St),Ve(St,u)):ut(Nt),Ve(Nt,x)}var bi=Math.clz32?Math.clz32:Vg,So=Math.log,Gh=Math.LN2;function Vg(u){return u>>>=0,u===0?32:31-(So(u)/Gh|0)|0}var ls=64,kl=4194304;function ma(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Fl(u,d){var x=u.pendingLanes;if(x===0)return 0;var w=0,C=u.suspendedLanes,I=u.pingedLanes,G=x&268435455;if(G!==0){var Z=G&~C;Z!==0?w=ma(Z):(I&=G,I!==0&&(w=ma(I)))}else G=x&~C,G!==0?w=ma(G):I!==0&&(w=ma(I));if(w===0)return 0;if(d!==0&&d!==w&&!(d&C)&&(C=w&-w,I=d&-d,C>=I||C===16&&(I&4194240)!==0))return d;if(w&4&&(w|=x&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=w;0<d;)x=31-bi(d),C=1<<x,w|=u[x],d&=~C;return w}function Hh(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vh(u,d){for(var x=u.suspendedLanes,w=u.pingedLanes,C=u.expirationTimes,I=u.pendingLanes;0<I;){var G=31-bi(I),Z=1<<G,me=C[G];me===-1?(!(Z&x)||Z&w)&&(C[G]=Hh(Z,d)):me<=d&&(u.expiredLanes|=Z),I&=~Z}}function Ul(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Ol(u){for(var d=[],x=0;31>x;x++)d.push(u);return d}function ga(u,d,x){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-bi(d),u[d]=x}function Wh(u,d){var x=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var w=u.eventTimes;for(u=u.expirationTimes;0<x;){var C=31-bi(x),I=1<<C;d[C]=0,w[C]=-1,u[C]=-1,x&=~I}}function jl(u,d){var x=u.entangledLanes|=d;for(u=u.entanglements;x;){var w=31-bi(x),C=1<<w;C&d|u[w]&d&&(u[w]|=d),x&=~C}}var _e=0;function Oe(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var Qt=r.unstable_scheduleCallback,Tn=r.unstable_cancelCallback,$e=r.unstable_shouldYield,Ot=r.unstable_requestPaint,ht=r.unstable_now,rn=r.unstable_ImmediatePriority,Xh=r.unstable_UserBlockingPriority,bn=r.unstable_NormalPriority,SA=r.unstable_IdlePriority,Ao=null,cs=null;function rP(u){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(Ao,u,void 0,(u.current.flags&128)===128)}catch{}}function sP(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var us=typeof Object.is=="function"?Object.is:sP,Ps=null,Jh=!1,Wg=!1;function AA(u){Ps===null?Ps=[u]:Ps.push(u)}function aP(u){Jh=!0,AA(u)}function ds(){if(!Wg&&Ps!==null){Wg=!0;var u=0,d=_e;try{var x=Ps;for(_e=1;u<x.length;u++){var w=x[u];do w=w(!0);while(w!==null)}Ps=null,Jh=!1}catch(C){throw Ps!==null&&(Ps=Ps.slice(u+1)),Qt(rn,ds),C}finally{_e=d,Wg=!1}}return null}var oP=o.ReactCurrentBatchConfig;function Yh(u,d){if(us(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var x=Object.keys(u),w=Object.keys(d);if(x.length!==w.length)return!1;for(w=0;w<x.length;w++){var C=x[w];if(!$t.call(d,C)||!us(u[C],d[C]))return!1}return!0}function lP(u){switch(u.tag){case 5:return mt(u.type);case 16:return mt("Lazy");case 13:return mt("Suspense");case 19:return mt("SuspenseList");case 0:case 2:case 15:return u=xt(u.type,!1),u;case 11:return u=xt(u.type.render,!1),u;case 1:return u=xt(u.type,!0),u;default:return""}}function kr(u,d){if(u&&u.defaultProps){d=s({},d),u=u.defaultProps;for(var x in u)d[x]===void 0&&(d[x]=u[x]);return d}return d}var Kh=Cn(null),qh=null,zl=null,Xg=null;function Jg(){Xg=zl=qh=null}function wA(u,d,x){be?(Ve(Kh,d._currentValue),d._currentValue=x):(Ve(Kh,d._currentValue2),d._currentValue2=x)}function Yg(u){var d=Kh.current;ut(Kh),be?u._currentValue=d:u._currentValue2=d}function Kg(u,d,x){for(;u!==null;){var w=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),u===x)break;u=u.return}}function Gl(u,d){qh=u,Xg=zl=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&d&&(tr=!0),u.firstContext=null)}function mr(u){var d=be?u._currentValue:u._currentValue2;if(Xg!==u)if(u={context:u,memoizedValue:d,next:null},zl===null){if(qh===null)throw Error(a(308));zl=u,qh.dependencies={lanes:0,firstContext:u}}else zl=zl.next=u;return d}var hs=null,va=!1;function qg(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MA(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Is(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function ya(u,d){var x=u.updateQueue;x!==null&&(x=x.shared,Ln!==null&&u.mode&1&&!(Pt&2)?(u=x.interleaved,u===null?(d.next=d,hs===null?hs=[x]:hs.push(x)):(d.next=u.next,u.next=d),x.interleaved=d):(u=x.pending,u===null?d.next=d:(d.next=u.next,u.next=d),x.pending=d))}function Qh(u,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194240)!==0)){var w=d.lanes;w&=u.pendingLanes,x|=w,d.lanes=x,jl(u,x)}}function EA(u,d){var x=u.updateQueue,w=u.alternate;if(w!==null&&(w=w.updateQueue,x===w)){var C=null,I=null;if(x=x.firstBaseUpdate,x!==null){do{var G={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};I===null?C=I=G:I=I.next=G,x=x.next}while(x!==null);I===null?C=I=d:I=I.next=d}else C=I=d;x={baseState:w.baseState,firstBaseUpdate:C,lastBaseUpdate:I,shared:w.shared,effects:w.effects},u.updateQueue=x;return}u=x.lastBaseUpdate,u===null?x.firstBaseUpdate=d:u.next=d,x.lastBaseUpdate=d}function Zh(u,d,x,w){var C=u.updateQueue;va=!1;var I=C.firstBaseUpdate,G=C.lastBaseUpdate,Z=C.shared.pending;if(Z!==null){C.shared.pending=null;var me=Z,Ie=me.next;me.next=null,G===null?I=Ie:G.next=Ie,G=me;var Ye=u.alternate;Ye!==null&&(Ye=Ye.updateQueue,Z=Ye.lastBaseUpdate,Z!==G&&(Z===null?Ye.firstBaseUpdate=Ie:Z.next=Ie,Ye.lastBaseUpdate=me))}if(I!==null){var At=C.baseState;G=0,Ye=Ie=me=null,Z=I;do{var lt=Z.lane,Zt=Z.eventTime;if((w&lt)===lt){Ye!==null&&(Ye=Ye.next={eventTime:Zt,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var it=u,gi=Z;switch(lt=d,Zt=x,gi.tag){case 1:if(it=gi.payload,typeof it=="function"){At=it.call(Zt,At,lt);break e}At=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=gi.payload,lt=typeof it=="function"?it.call(Zt,At,lt):it,lt==null)break e;At=s({},At,lt);break e;case 2:va=!0}}Z.callback!==null&&Z.lane!==0&&(u.flags|=64,lt=C.effects,lt===null?C.effects=[Z]:lt.push(Z))}else Zt={eventTime:Zt,lane:lt,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Ye===null?(Ie=Ye=Zt,me=At):Ye=Ye.next=Zt,G|=lt;if(Z=Z.next,Z===null){if(Z=C.shared.pending,Z===null)break;lt=Z,Z=lt.next,lt.next=null,C.lastBaseUpdate=lt,C.shared.pending=null}}while(!0);if(Ye===null&&(me=At),C.baseState=me,C.firstBaseUpdate=Ie,C.lastBaseUpdate=Ye,d=C.shared.interleaved,d!==null){C=d;do G|=C.lane,C=C.next;while(C!==d)}else I===null&&(C.shared.lanes=0);Ql|=G,u.lanes=G,u.memoizedState=At}}function CA(u,d,x){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var w=u[d],C=w.callback;if(C!==null){if(w.callback=null,w=x,typeof C!="function")throw Error(a(191,C));C.call(w)}}}var TA=new i.Component().refs;function Qg(u,d,x,w){d=u.memoizedState,x=x(w,d),x=x==null?d:s({},d,x),u.memoizedState=x,u.lanes===0&&(u.updateQueue.baseState=x)}var $h={isMounted:function(u){return(u=u._reactInternals)?R(u)===u:!1},enqueueSetState:function(u,d,x){u=u._reactInternals;var w=Ni(),C=Sa(u),I=Is(w,C);I.payload=d,x!=null&&(I.callback=x),ya(u,I),d=_r(u,C,w),d!==null&&Qh(d,u,C)},enqueueReplaceState:function(u,d,x){u=u._reactInternals;var w=Ni(),C=Sa(u),I=Is(w,C);I.tag=1,I.payload=d,x!=null&&(I.callback=x),ya(u,I),d=_r(u,C,w),d!==null&&Qh(d,u,C)},enqueueForceUpdate:function(u,d){u=u._reactInternals;var x=Ni(),w=Sa(u),C=Is(x,w);C.tag=2,d!=null&&(C.callback=d),ya(u,C),d=_r(u,w,x),d!==null&&Qh(d,u,w)}};function bA(u,d,x,w,C,I,G){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(w,I,G):d.prototype&&d.prototype.isPureReactComponent?!Yh(x,w)||!Yh(C,I):!0}function RA(u,d,x){var w=!1,C=hi,I=d.contextType;return typeof I=="object"&&I!==null?I=mr(I):(C=hn(d)?Qi:St.current,w=d.contextTypes,I=(w=w!=null)?dn(u,C):hi),d=new d(x,I),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=$h,u.stateNode=d,d._reactInternals=u,w&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=C,u.__reactInternalMemoizedMaskedChildContext=I),d}function NA(u,d,x,w){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,w),d.state!==u&&$h.enqueueReplaceState(d,d.state,null)}function Zg(u,d,x,w){var C=u.stateNode;C.props=x,C.state=u.memoizedState,C.refs=TA,qg(u);var I=d.contextType;typeof I=="object"&&I!==null?C.context=mr(I):(I=hn(d)?Qi:St.current,C.context=dn(u,I)),C.state=u.memoizedState,I=d.getDerivedStateFromProps,typeof I=="function"&&(Qg(u,d,I,x),C.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(d=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),d!==C.state&&$h.enqueueReplaceState(C,C.state,null),Zh(u,x,C,w),C.state=u.memoizedState),typeof C.componentDidMount=="function"&&(u.flags|=4194308)}var Hl=[],Vl=0,ef=null,tf=0,gr=[],vr=0,wo=null,Bs=1,Ls="";function Mo(u,d){Hl[Vl++]=tf,Hl[Vl++]=ef,ef=u,tf=d}function PA(u,d,x){gr[vr++]=Bs,gr[vr++]=Ls,gr[vr++]=wo,wo=u;var w=Bs;u=Ls;var C=32-bi(w)-1;w&=~(1<<C),x+=1;var I=32-bi(d)+C;if(30<I){var G=C-C%5;I=(w&(1<<G)-1).toString(32),w>>=G,C-=G,Bs=1<<32-bi(d)+C|x<<C|w,Ls=I+u}else Bs=1<<I|x<<C|w,Ls=u}function $g(u){u.return!==null&&(Mo(u,1),PA(u,1,0))}function ev(u){for(;u===ef;)ef=Hl[--Vl],Hl[Vl]=null,tf=Hl[--Vl],Hl[Vl]=null;for(;u===wo;)wo=gr[--vr],gr[vr]=null,Ls=gr[--vr],gr[vr]=null,Bs=gr[--vr],gr[vr]=null}var $i=null,er=null,cn=!1,Cu=!1,Fr=null;function IA(u,d){var x=Sr(5,null,null,0);x.elementType="DELETED",x.stateNode=d,x.return=u,d=u.deletions,d===null?(u.deletions=[x],u.flags|=16):d.push(x)}function BA(u,d){switch(u.tag){case 5:return d=Xt(d,u.type,u.pendingProps),d!==null?(u.stateNode=d,$i=u,er=fa(d),!0):!1;case 6:return d=Bn(d,u.pendingProps),d!==null?(u.stateNode=d,$i=u,er=null,!0):!1;case 13:if(d=Oi(d),d!==null){var x=wo!==null?{id:Bs,overflow:Ls}:null;return u.memoizedState={dehydrated:d,treeContext:x,retryLane:1073741824},x=Sr(18,null,null,0),x.stateNode=d,x.return=u,u.child=x,$i=u,er=null,!0}return!1;default:return!1}}function tv(u){return(u.mode&1)!==0&&(u.flags&128)===0}function nv(u){if(cn){var d=er;if(d){var x=d;if(!BA(u,d)){if(tv(u))throw Error(a(418));d=as(x);var w=$i;d&&BA(u,d)?IA(w,x):(u.flags=u.flags&-4097|2,cn=!1,$i=u)}}else{if(tv(u))throw Error(a(418));u.flags=u.flags&-4097|2,cn=!1,$i=u}}}function LA(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;$i=u}function Tu(u){if(!ve||u!==$i)return!1;if(!cn)return LA(u),cn=!0,!1;if(u.tag!==3&&(u.tag!==5||ze(u.type)&&!ge(u.type,u.memoizedProps))){var d=er;if(d){if(tv(u)){for(u=er;u;)u=as(u);throw Error(a(418))}for(;d;)IA(u,d),d=as(d)}}if(LA(u),u.tag===13){if(!ve)throw Error(a(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));er=O(u)}else er=$i?as(u.stateNode):null;return!0}function Wl(){ve&&(er=$i=null,Cu=cn=!1)}function iv(u){Fr===null?Fr=[u]:Fr.push(u)}function bu(u,d,x){if(u=x.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(a(309));var w=x.stateNode}if(!w)throw Error(a(147,u));var C=w,I=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===I?d.ref:(d=function(G){var Z=C.refs;Z===TA&&(Z=C.refs={}),G===null?delete Z[I]:Z[I]=G},d._stringRef=I,d)}if(typeof u!="string")throw Error(a(284));if(!x._owner)throw Error(a(290,u))}return u}function nf(u,d){throw u=Object.prototype.toString.call(d),Error(a(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function DA(u){var d=u._init;return d(u._payload)}function kA(u){function d(ae,ee){if(u){var fe=ae.deletions;fe===null?(ae.deletions=[ee],ae.flags|=16):fe.push(ee)}}function x(ae,ee){if(!u)return null;for(;ee!==null;)d(ae,ee),ee=ee.sibling;return null}function w(ae,ee){for(ae=new Map;ee!==null;)ee.key!==null?ae.set(ee.key,ee):ae.set(ee.index,ee),ee=ee.sibling;return ae}function C(ae,ee){return ae=wa(ae,ee),ae.index=0,ae.sibling=null,ae}function I(ae,ee,fe){return ae.index=fe,u?(fe=ae.alternate,fe!==null?(fe=fe.index,fe<ee?(ae.flags|=2,ee):fe):(ae.flags|=2,ee)):(ae.flags|=1048576,ee)}function G(ae){return u&&ae.alternate===null&&(ae.flags|=2),ae}function Z(ae,ee,fe,Ge){return ee===null||ee.tag!==6?(ee=jv(fe,ae.mode,Ge),ee.return=ae,ee):(ee=C(ee,fe),ee.return=ae,ee)}function me(ae,ee,fe,Ge){var et=fe.type;return et===f?Ye(ae,ee,fe.props.children,Ge,fe.key):ee!==null&&(ee.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===A&&DA(et)===ee.type)?(Ge=C(ee,fe.props),Ge.ref=bu(ae,ee,fe),Ge.return=ae,Ge):(Ge=Lf(fe.type,fe.key,fe.props,null,ae.mode,Ge),Ge.ref=bu(ae,ee,fe),Ge.return=ae,Ge)}function Ie(ae,ee,fe,Ge){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==fe.containerInfo||ee.stateNode.implementation!==fe.implementation?(ee=zv(fe,ae.mode,Ge),ee.return=ae,ee):(ee=C(ee,fe.children||[]),ee.return=ae,ee)}function Ye(ae,ee,fe,Ge,et){return ee===null||ee.tag!==7?(ee=Po(fe,ae.mode,Ge,et),ee.return=ae,ee):(ee=C(ee,fe),ee.return=ae,ee)}function At(ae,ee,fe){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=jv(""+ee,ae.mode,fe),ee.return=ae,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case l:return fe=Lf(ee.type,ee.key,ee.props,null,ae.mode,fe),fe.ref=bu(ae,null,ee),fe.return=ae,fe;case h:return ee=zv(ee,ae.mode,fe),ee.return=ae,ee;case A:var Ge=ee._init;return At(ae,Ge(ee._payload),fe)}if(K(ee)||T(ee))return ee=Po(ee,ae.mode,fe,null),ee.return=ae,ee;nf(ae,ee)}return null}function lt(ae,ee,fe,Ge){var et=ee!==null?ee.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return et!==null?null:Z(ae,ee,""+fe,Ge);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case l:return fe.key===et?me(ae,ee,fe,Ge):null;case h:return fe.key===et?Ie(ae,ee,fe,Ge):null;case A:return et=fe._init,lt(ae,ee,et(fe._payload),Ge)}if(K(fe)||T(fe))return et!==null?null:Ye(ae,ee,fe,Ge,null);nf(ae,fe)}return null}function Zt(ae,ee,fe,Ge,et){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number")return ae=ae.get(fe)||null,Z(ee,ae,""+Ge,et);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case l:return ae=ae.get(Ge.key===null?fe:Ge.key)||null,me(ee,ae,Ge,et);case h:return ae=ae.get(Ge.key===null?fe:Ge.key)||null,Ie(ee,ae,Ge,et);case A:var bt=Ge._init;return Zt(ae,ee,fe,bt(Ge._payload),et)}if(K(Ge)||T(Ge))return ae=ae.get(fe)||null,Ye(ee,ae,Ge,et,null);nf(ee,Ge)}return null}function it(ae,ee,fe,Ge){for(var et=null,bt=null,wt=ee,Gt=ee=0,$n=null;wt!==null&&Gt<fe.length;Gt++){wt.index>Gt?($n=wt,wt=null):$n=wt.sibling;var Ht=lt(ae,wt,fe[Gt],Ge);if(Ht===null){wt===null&&(wt=$n);break}u&&wt&&Ht.alternate===null&&d(ae,wt),ee=I(Ht,ee,Gt),bt===null?et=Ht:bt.sibling=Ht,bt=Ht,wt=$n}if(Gt===fe.length)return x(ae,wt),cn&&Mo(ae,Gt),et;if(wt===null){for(;Gt<fe.length;Gt++)wt=At(ae,fe[Gt],Ge),wt!==null&&(ee=I(wt,ee,Gt),bt===null?et=wt:bt.sibling=wt,bt=wt);return cn&&Mo(ae,Gt),et}for(wt=w(ae,wt);Gt<fe.length;Gt++)$n=Zt(wt,ae,Gt,fe[Gt],Ge),$n!==null&&(u&&$n.alternate!==null&&wt.delete($n.key===null?Gt:$n.key),ee=I($n,ee,Gt),bt===null?et=$n:bt.sibling=$n,bt=$n);return u&&wt.forEach(function(Ma){return d(ae,Ma)}),cn&&Mo(ae,Gt),et}function gi(ae,ee,fe,Ge){var et=T(fe);if(typeof et!="function")throw Error(a(150));if(fe=et.call(fe),fe==null)throw Error(a(151));for(var bt=et=null,wt=ee,Gt=ee=0,$n=null,Ht=fe.next();wt!==null&&!Ht.done;Gt++,Ht=fe.next()){wt.index>Gt?($n=wt,wt=null):$n=wt.sibling;var Ma=lt(ae,wt,Ht.value,Ge);if(Ma===null){wt===null&&(wt=$n);break}u&&wt&&Ma.alternate===null&&d(ae,wt),ee=I(Ma,ee,Gt),bt===null?et=Ma:bt.sibling=Ma,bt=Ma,wt=$n}if(Ht.done)return x(ae,wt),cn&&Mo(ae,Gt),et;if(wt===null){for(;!Ht.done;Gt++,Ht=fe.next())Ht=At(ae,Ht.value,Ge),Ht!==null&&(ee=I(Ht,ee,Gt),bt===null?et=Ht:bt.sibling=Ht,bt=Ht);return cn&&Mo(ae,Gt),et}for(wt=w(ae,wt);!Ht.done;Gt++,Ht=fe.next())Ht=Zt(wt,ae,Gt,Ht.value,Ge),Ht!==null&&(u&&Ht.alternate!==null&&wt.delete(Ht.key===null?Gt:Ht.key),ee=I(Ht,ee,Gt),bt===null?et=Ht:bt.sibling=Ht,bt=Ht);return u&&wt.forEach(function(UP){return d(ae,UP)}),cn&&Mo(ae,Gt),et}function Ar(ae,ee,fe,Ge){if(typeof fe=="object"&&fe!==null&&fe.type===f&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case l:e:{for(var et=fe.key,bt=ee;bt!==null;){if(bt.key===et){if(et=fe.type,et===f){if(bt.tag===7){x(ae,bt.sibling),ee=C(bt,fe.props.children),ee.return=ae,ae=ee;break e}}else if(bt.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===A&&DA(et)===bt.type){x(ae,bt.sibling),ee=C(bt,fe.props),ee.ref=bu(ae,bt,fe),ee.return=ae,ae=ee;break e}x(ae,bt);break}else d(ae,bt);bt=bt.sibling}fe.type===f?(ee=Po(fe.props.children,ae.mode,Ge,fe.key),ee.return=ae,ae=ee):(Ge=Lf(fe.type,fe.key,fe.props,null,ae.mode,Ge),Ge.ref=bu(ae,ee,fe),Ge.return=ae,ae=Ge)}return G(ae);case h:e:{for(bt=fe.key;ee!==null;){if(ee.key===bt)if(ee.tag===4&&ee.stateNode.containerInfo===fe.containerInfo&&ee.stateNode.implementation===fe.implementation){x(ae,ee.sibling),ee=C(ee,fe.children||[]),ee.return=ae,ae=ee;break e}else{x(ae,ee);break}else d(ae,ee);ee=ee.sibling}ee=zv(fe,ae.mode,Ge),ee.return=ae,ae=ee}return G(ae);case A:return bt=fe._init,Ar(ae,ee,bt(fe._payload),Ge)}if(K(fe))return it(ae,ee,fe,Ge);if(T(fe))return gi(ae,ee,fe,Ge);nf(ae,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,ee!==null&&ee.tag===6?(x(ae,ee.sibling),ee=C(ee,fe),ee.return=ae,ae=ee):(x(ae,ee),ee=jv(fe,ae.mode,Ge),ee.return=ae,ae=ee),G(ae)):x(ae,ee)}return Ar}var Xl=kA(!0),FA=kA(!1),Ru={},yr=Cn(Ru),Nu=Cn(Ru),Jl=Cn(Ru);function fs(u){if(u===Ru)throw Error(a(174));return u}function rv(u,d){Ve(Jl,d),Ve(Nu,u),Ve(yr,Ru),u=ue(d),ut(yr),Ve(yr,u)}function Yl(){ut(yr),ut(Nu),ut(Jl)}function UA(u){var d=fs(Jl.current),x=fs(yr.current);d=U(x,u.type,d),x!==d&&(Ve(Nu,u),Ve(yr,d))}function sv(u){Nu.current===u&&(ut(yr),ut(Nu))}var fn=Cn(0);function rf(u){for(var d=u;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||da(x)||xo(x)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var av=[];function ov(){for(var u=0;u<av.length;u++){var d=av[u];be?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}av.length=0}var sf=o.ReactCurrentDispatcher,xr=o.ReactCurrentBatchConfig,Kl=0,Sn=null,fi=null,Zn=null,af=!1,Pu=!1,Iu=0,cP=0;function pi(){throw Error(a(321))}function lv(u,d){if(d===null)return!1;for(var x=0;x<d.length&&x<u.length;x++)if(!us(u[x],d[x]))return!1;return!0}function cv(u,d,x,w,C,I){if(Kl=I,Sn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,sf.current=u===null||u.memoizedState===null?fP:pP,u=x(w,C),Pu){I=0;do{if(Pu=!1,Iu=0,25<=I)throw Error(a(301));I+=1,Zn=fi=null,d.updateQueue=null,sf.current=mP,u=x(w,C)}while(Pu)}if(sf.current=df,d=fi!==null&&fi.next!==null,Kl=0,Zn=fi=Sn=null,af=!1,d)throw Error(a(300));return u}function uv(){var u=Iu!==0;return Iu=0,u}function Ds(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?Sn.memoizedState=Zn=u:Zn=Zn.next=u,Zn}function ps(){if(fi===null){var u=Sn.alternate;u=u!==null?u.memoizedState:null}else u=fi.next;var d=Zn===null?Sn.memoizedState:Zn.next;if(d!==null)Zn=d,fi=u;else{if(u===null)throw Error(a(310));fi=u,u={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},Zn===null?Sn.memoizedState=Zn=u:Zn=Zn.next=u}return Zn}function Eo(u,d){return typeof d=="function"?d(u):d}function of(u){var d=ps(),x=d.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=u;var w=fi,C=w.baseQueue,I=x.pending;if(I!==null){if(C!==null){var G=C.next;C.next=I.next,I.next=G}w.baseQueue=C=I,x.pending=null}if(C!==null){I=C.next,w=w.baseState;var Z=G=null,me=null,Ie=I;do{var Ye=Ie.lane;if((Kl&Ye)===Ye)me!==null&&(me=me.next={lane:0,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null}),w=Ie.hasEagerState?Ie.eagerState:u(w,Ie.action);else{var At={lane:Ye,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null};me===null?(Z=me=At,G=w):me=me.next=At,Sn.lanes|=Ye,Ql|=Ye}Ie=Ie.next}while(Ie!==null&&Ie!==I);me===null?G=w:me.next=Z,us(w,d.memoizedState)||(tr=!0),d.memoizedState=w,d.baseState=G,d.baseQueue=me,x.lastRenderedState=w}if(u=x.interleaved,u!==null){C=u;do I=C.lane,Sn.lanes|=I,Ql|=I,C=C.next;while(C!==u)}else C===null&&(x.lanes=0);return[d.memoizedState,x.dispatch]}function lf(u){var d=ps(),x=d.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=u;var w=x.dispatch,C=x.pending,I=d.memoizedState;if(C!==null){x.pending=null;var G=C=C.next;do I=u(I,G.action),G=G.next;while(G!==C);us(I,d.memoizedState)||(tr=!0),d.memoizedState=I,d.baseQueue===null&&(d.baseState=I),x.lastRenderedState=I}return[I,w]}function OA(){}function jA(u,d){var x=Sn,w=ps(),C=d(),I=!us(w.memoizedState,C);if(I&&(w.memoizedState=C,tr=!0),w=w.queue,Lu(HA.bind(null,x,w,u),[u]),w.getSnapshot!==d||I||Zn!==null&&Zn.memoizedState.tag&1){if(x.flags|=2048,Bu(9,GA.bind(null,x,w,C,d),void 0,null),Ln===null)throw Error(a(349));Kl&30||zA(x,d,C)}return C}function zA(u,d,x){u.flags|=16384,u={getSnapshot:d,value:x},d=Sn.updateQueue,d===null?(d={lastEffect:null,stores:null},Sn.updateQueue=d,d.stores=[u]):(x=d.stores,x===null?d.stores=[u]:x.push(u))}function GA(u,d,x,w){d.value=x,d.getSnapshot=w,VA(d)&&_r(u,1,-1)}function HA(u,d,x){return x(function(){VA(d)&&_r(u,1,-1)})}function VA(u){var d=u.getSnapshot;u=u.value;try{var x=d();return!us(u,x)}catch{return!0}}function dv(u){var d=Ds();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:u},d.queue=u,u=u.dispatch=hP.bind(null,Sn,u),[d.memoizedState,u]}function Bu(u,d,x,w){return u={tag:u,create:d,destroy:x,deps:w,next:null},d=Sn.updateQueue,d===null?(d={lastEffect:null,stores:null},Sn.updateQueue=d,d.lastEffect=u.next=u):(x=d.lastEffect,x===null?d.lastEffect=u.next=u:(w=x.next,x.next=u,u.next=w,d.lastEffect=u)),u}function WA(){return ps().memoizedState}function cf(u,d,x,w){var C=Ds();Sn.flags|=u,C.memoizedState=Bu(1|d,x,void 0,w===void 0?null:w)}function uf(u,d,x,w){var C=ps();w=w===void 0?null:w;var I=void 0;if(fi!==null){var G=fi.memoizedState;if(I=G.destroy,w!==null&&lv(w,G.deps)){C.memoizedState=Bu(d,x,I,w);return}}Sn.flags|=u,C.memoizedState=Bu(1|d,x,I,w)}function hv(u,d){return cf(8390656,8,u,d)}function Lu(u,d){return uf(2048,8,u,d)}function XA(u,d){return uf(4,2,u,d)}function JA(u,d){return uf(4,4,u,d)}function YA(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function KA(u,d,x){return x=x!=null?x.concat([u]):null,uf(4,4,YA.bind(null,d,u),x)}function fv(){}function qA(u,d){var x=ps();d=d===void 0?null:d;var w=x.memoizedState;return w!==null&&d!==null&&lv(d,w[1])?w[0]:(x.memoizedState=[u,d],u)}function QA(u,d){var x=ps();d=d===void 0?null:d;var w=x.memoizedState;return w!==null&&d!==null&&lv(d,w[1])?w[0]:(u=u(),x.memoizedState=[u,d],u)}function uP(u,d){var x=_e;_e=x!==0&&4>x?x:4,u(!0);var w=xr.transition;xr.transition={};try{u(!1),d()}finally{_e=x,xr.transition=w}}function ZA(){return ps().memoizedState}function dP(u,d,x){var w=Sa(u);x={lane:w,action:x,hasEagerState:!1,eagerState:null,next:null},$A(u)?e1(d,x):(t1(u,d,x),x=Ni(),u=_r(u,w,x),u!==null&&n1(u,d,w))}function hP(u,d,x){var w=Sa(u),C={lane:w,action:x,hasEagerState:!1,eagerState:null,next:null};if($A(u))e1(d,C);else{t1(u,d,C);var I=u.alternate;if(u.lanes===0&&(I===null||I.lanes===0)&&(I=d.lastRenderedReducer,I!==null))try{var G=d.lastRenderedState,Z=I(G,x);if(C.hasEagerState=!0,C.eagerState=Z,us(Z,G))return}catch{}finally{}x=Ni(),u=_r(u,w,x),u!==null&&n1(u,d,w)}}function $A(u){var d=u.alternate;return u===Sn||d!==null&&d===Sn}function e1(u,d){Pu=af=!0;var x=u.pending;x===null?d.next=d:(d.next=x.next,x.next=d),u.pending=d}function t1(u,d,x){Ln!==null&&u.mode&1&&!(Pt&2)?(u=d.interleaved,u===null?(x.next=x,hs===null?hs=[d]:hs.push(d)):(x.next=u.next,u.next=x),d.interleaved=x):(u=d.pending,u===null?x.next=x:(x.next=u.next,u.next=x),d.pending=x)}function n1(u,d,x){if(x&4194240){var w=d.lanes;w&=u.pendingLanes,x|=w,d.lanes=x,jl(u,x)}}var df={readContext:mr,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},fP={readContext:mr,useCallback:function(u,d){return Ds().memoizedState=[u,d===void 0?null:d],u},useContext:mr,useEffect:hv,useImperativeHandle:function(u,d,x){return x=x!=null?x.concat([u]):null,cf(4194308,4,YA.bind(null,d,u),x)},useLayoutEffect:function(u,d){return cf(4194308,4,u,d)},useInsertionEffect:function(u,d){return cf(4,2,u,d)},useMemo:function(u,d){var x=Ds();return d=d===void 0?null:d,u=u(),x.memoizedState=[u,d],u},useReducer:function(u,d,x){var w=Ds();return d=x!==void 0?x(d):d,w.memoizedState=w.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},w.queue=u,u=u.dispatch=dP.bind(null,Sn,u),[w.memoizedState,u]},useRef:function(u){var d=Ds();return u={current:u},d.memoizedState=u},useState:dv,useDebugValue:fv,useDeferredValue:function(u){var d=dv(u),x=d[0],w=d[1];return hv(function(){var C=xr.transition;xr.transition={};try{w(u)}finally{xr.transition=C}},[u]),x},useTransition:function(){var u=dv(!1),d=u[0];return u=uP.bind(null,u[1]),Ds().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,x){var w=Sn,C=Ds();if(cn){if(x===void 0)throw Error(a(407));x=x()}else{if(x=d(),Ln===null)throw Error(a(349));Kl&30||zA(w,d,x)}C.memoizedState=x;var I={value:x,getSnapshot:d};return C.queue=I,hv(HA.bind(null,w,I,u),[u]),w.flags|=2048,Bu(9,GA.bind(null,w,I,x,d),void 0,null),x},useId:function(){var u=Ds(),d=Ln.identifierPrefix;if(cn){var x=Ls,w=Bs;x=(w&~(1<<32-bi(w)-1)).toString(32)+x,d=":"+d+"R"+x,x=Iu++,0<x&&(d+="H"+x.toString(32)),d+=":"}else x=cP++,d=":"+d+"r"+x.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},pP={readContext:mr,useCallback:qA,useContext:mr,useEffect:Lu,useImperativeHandle:KA,useInsertionEffect:XA,useLayoutEffect:JA,useMemo:QA,useReducer:of,useRef:WA,useState:function(){return of(Eo)},useDebugValue:fv,useDeferredValue:function(u){var d=of(Eo),x=d[0],w=d[1];return Lu(function(){var C=xr.transition;xr.transition={};try{w(u)}finally{xr.transition=C}},[u]),x},useTransition:function(){var u=of(Eo)[0],d=ps().memoizedState;return[u,d]},useMutableSource:OA,useSyncExternalStore:jA,useId:ZA,unstable_isNewReconciler:!1},mP={readContext:mr,useCallback:qA,useContext:mr,useEffect:Lu,useImperativeHandle:KA,useInsertionEffect:XA,useLayoutEffect:JA,useMemo:QA,useReducer:lf,useRef:WA,useState:function(){return lf(Eo)},useDebugValue:fv,useDeferredValue:function(u){var d=lf(Eo),x=d[0],w=d[1];return Lu(function(){var C=xr.transition;xr.transition={};try{w(u)}finally{xr.transition=C}},[u]),x},useTransition:function(){var u=lf(Eo)[0],d=ps().memoizedState;return[u,d]},useMutableSource:OA,useSyncExternalStore:jA,useId:ZA,unstable_isNewReconciler:!1};function pv(u,d){try{var x="",w=d;do x+=lP(w),w=w.return;while(w);var C=x}catch(I){C=`
Error generating stack: `+I.message+`
`+I.stack}return{value:u,source:d,stack:C}}function mv(u,d){try{console.error(d.value)}catch(x){setTimeout(function(){throw x})}}var gP=typeof WeakMap=="function"?WeakMap:Map;function i1(u,d,x){x=Is(-1,x),x.tag=3,x.payload={element:null};var w=d.value;return x.callback=function(){Tf||(Tf=!0,Bv=w),mv(u,d)},x}function r1(u,d,x){x=Is(-1,x),x.tag=3;var w=u.type.getDerivedStateFromError;if(typeof w=="function"){var C=d.value;x.payload=function(){return w(C)},x.callback=function(){mv(u,d)}}var I=u.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(x.callback=function(){mv(u,d),typeof w!="function"&&(xa===null?xa=new Set([this]):xa.add(this));var G=d.stack;this.componentDidCatch(d.value,{componentStack:G!==null?G:""})}),x}function s1(u,d,x){var w=u.pingCache;if(w===null){w=u.pingCache=new gP;var C=new Set;w.set(d,C)}else C=w.get(d),C===void 0&&(C=new Set,w.set(d,C));C.has(x)||(C.add(x),u=NP.bind(null,u,d,x),d.then(u,u))}function a1(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function o1(u,d,x,w,C){return u.mode&1?(u.flags|=65536,u.lanes=C,u):(u===d?u.flags|=65536:(u.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(d=Is(-1,1),d.tag=2,ya(x,d))),x.lanes|=1),u)}function ms(u){u.flags|=4}function l1(u,d){if(u!==null&&u.child===d.child)return!0;if(d.flags&16)return!1;for(u=d.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var Du,ku,hf,ff;if(Pe)Du=function(u,d){for(var x=d.child;x!==null;){if(x.tag===5||x.tag===6)re(u,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},ku=function(){},hf=function(u,d,x,w,C){if(u=u.memoizedProps,u!==w){var I=d.stateNode,G=fs(yr.current);x=oe(I,x,u,w,C,G),(d.updateQueue=x)&&ms(d)}},ff=function(u,d,x,w){x!==w&&ms(d)};else if(H){Du=function(u,d,x,w){for(var C=d.child;C!==null;){if(C.tag===5){var I=C.stateNode;x&&w&&(I=on(I,C.type,C.memoizedProps,C)),re(u,I)}else if(C.tag===6)I=C.stateNode,x&&w&&(I=In(I,C.memoizedProps,C)),re(u,I);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)I=C.child,I!==null&&(I.return=C),Du(u,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===d)break;for(;C.sibling===null;){if(C.return===null||C.return===d)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};var c1=function(u,d,x,w){for(var C=d.child;C!==null;){if(C.tag===5){var I=C.stateNode;x&&w&&(I=on(I,C.type,C.memoizedProps,C)),rt(u,I)}else if(C.tag===6)I=C.stateNode,x&&w&&(I=In(I,C.memoizedProps,C)),rt(u,I);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)I=C.child,I!==null&&(I.return=C),c1(u,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===d)break;for(;C.sibling===null;){if(C.return===null||C.return===d)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};ku=function(u,d){var x=d.stateNode;if(!l1(u,d)){u=x.containerInfo;var w=nt(u);c1(w,d,!1,!1),x.pendingChildren=w,ms(d),Wt(u,w)}},hf=function(u,d,x,w,C){var I=u.stateNode,G=u.memoizedProps;if((u=l1(u,d))&&G===w)d.stateNode=I;else{var Z=d.stateNode,me=fs(yr.current),Ie=null;G!==w&&(Ie=oe(Z,x,G,w,C,me)),u&&Ie===null?d.stateNode=I:(I=Fe(I,Ie,x,G,w,d,u,Z),Q(I,x,w,C,me)&&ms(d),d.stateNode=I,u?ms(d):Du(I,d,!1,!1))}},ff=function(u,d,x,w){x!==w?(u=fs(Jl.current),x=fs(yr.current),d.stateNode=Te(w,u,x,d),ms(d)):d.stateNode=u.stateNode}}else ku=function(){},hf=function(){},ff=function(){};function Fu(u,d){if(!cn)switch(u.tailMode){case"hidden":d=u.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?u.tail=null:x.sibling=null;break;case"collapsed":x=u.tail;for(var w=null;x!==null;)x.alternate!==null&&(w=x),x=x.sibling;w===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:w.sibling=null}}function mi(u){var d=u.alternate!==null&&u.alternate.child===u.child,x=0,w=0;if(d)for(var C=u.child;C!==null;)x|=C.lanes|C.childLanes,w|=C.subtreeFlags&14680064,w|=C.flags&14680064,C.return=u,C=C.sibling;else for(C=u.child;C!==null;)x|=C.lanes|C.childLanes,w|=C.subtreeFlags,w|=C.flags,C.return=u,C=C.sibling;return u.subtreeFlags|=w,u.childLanes=x,d}function vP(u,d,x){var w=d.pendingProps;switch(ev(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mi(d),null;case 1:return hn(d.type)&&ln(),mi(d),null;case 3:return w=d.stateNode,Yl(),ut(Nt),ut(St),ov(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(u===null||u.child===null)&&(Tu(d)?ms(d):u===null||u.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,Fr!==null&&(kv(Fr),Fr=null))),ku(u,d),mi(d),null;case 5:sv(d),x=fs(Jl.current);var C=d.type;if(u!==null&&d.stateNode!=null)hf(u,d,C,w,x),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!w){if(d.stateNode===null)throw Error(a(166));return mi(d),null}if(u=fs(yr.current),Tu(d)){if(!ve)throw Error(a(175));u=_n(d.stateNode,d.type,d.memoizedProps,x,u,d,!Cu),d.updateQueue=u,u!==null&&ms(d)}else{var I=Y(C,w,x,u,d);Du(I,d,!1,!1),d.stateNode=I,Q(I,C,w,x,u)&&ms(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return mi(d),null;case 6:if(u&&d.stateNode!=null)ff(u,d,u.memoizedProps,w);else{if(typeof w!="string"&&d.stateNode===null)throw Error(a(166));if(u=fs(Jl.current),x=fs(yr.current),Tu(d)){if(!ve)throw Error(a(176));if(u=d.stateNode,w=d.memoizedProps,(x=os(u,w,d,!Cu))&&(C=$i,C!==null))switch(I=(C.mode&1)!==0,C.tag){case 3:Ze(C.stateNode.containerInfo,u,w,I);break;case 5:at(C.type,C.memoizedProps,C.stateNode,u,w,I)}x&&ms(d)}else d.stateNode=Te(w,u,x,d)}return mi(d),null;case 13:if(ut(fn),w=d.memoizedState,cn&&er!==null&&d.mode&1&&!(d.flags&128)){for(u=er;u;)u=as(u);return Wl(),d.flags|=98560,d}if(w!==null&&w.dehydrated!==null){if(w=Tu(d),u===null){if(!w)throw Error(a(318));if(!ve)throw Error(a(344));if(u=d.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));_o(u,d)}else Wl(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return mi(d),null}return Fr!==null&&(kv(Fr),Fr=null),d.flags&128?(d.lanes=x,d):(w=w!==null,x=!1,u===null?Tu(d):x=u.memoizedState!==null,w&&!x&&(d.child.flags|=8192,d.mode&1&&(u===null||fn.current&1?Gn===0&&(Gn=3):Uv())),d.updateQueue!==null&&(d.flags|=4),mi(d),null);case 4:return Yl(),ku(u,d),u===null&&Me(d.stateNode.containerInfo),mi(d),null;case 10:return Yg(d.type._context),mi(d),null;case 17:return hn(d.type)&&ln(),mi(d),null;case 19:if(ut(fn),C=d.memoizedState,C===null)return mi(d),null;if(w=(d.flags&128)!==0,I=C.rendering,I===null)if(w)Fu(C,!1);else{if(Gn!==0||u!==null&&u.flags&128)for(u=d.child;u!==null;){if(I=rf(u),I!==null){for(d.flags|=128,Fu(C,!1),u=I.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),d.subtreeFlags=0,u=x,w=d.child;w!==null;)x=w,C=u,x.flags&=14680066,I=x.alternate,I===null?(x.childLanes=0,x.lanes=C,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=I.childLanes,x.lanes=I.lanes,x.child=I.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=I.memoizedProps,x.memoizedState=I.memoizedState,x.updateQueue=I.updateQueue,x.type=I.type,C=I.dependencies,x.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext}),w=w.sibling;return Ve(fn,fn.current&1|2),d.child}u=u.sibling}C.tail!==null&&ht()>Iv&&(d.flags|=128,w=!0,Fu(C,!1),d.lanes=4194304)}else{if(!w)if(u=rf(I),u!==null){if(d.flags|=128,w=!0,u=u.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),Fu(C,!0),C.tail===null&&C.tailMode==="hidden"&&!I.alternate&&!cn)return mi(d),null}else 2*ht()-C.renderingStartTime>Iv&&x!==1073741824&&(d.flags|=128,w=!0,Fu(C,!1),d.lanes=4194304);C.isBackwards?(I.sibling=d.child,d.child=I):(u=C.last,u!==null?u.sibling=I:d.child=I,C.last=I)}return C.tail!==null?(d=C.tail,C.rendering=d,C.tail=d.sibling,C.renderingStartTime=ht(),d.sibling=null,u=fn.current,Ve(fn,w?u&1|2:u&1),d):(mi(d),null);case 22:case 23:return Fv(),w=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==w&&(d.flags|=8192),w&&d.mode&1?nr&1073741824&&(mi(d),Pe&&d.subtreeFlags&6&&(d.flags|=8192)):mi(d),null;case 24:return null;case 25:return null}throw Error(a(156,d.tag))}var yP=o.ReactCurrentOwner,tr=!1;function Ri(u,d,x,w){d.child=u===null?FA(d,null,x,w):Xl(d,u.child,x,w)}function u1(u,d,x,w,C){x=x.render;var I=d.ref;return Gl(d,C),w=cv(u,d,x,w,I,C),x=uv(),u!==null&&!tr?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~C,ks(u,d,C)):(cn&&x&&$g(d),d.flags|=1,Ri(u,d,w,C),d.child)}function d1(u,d,x,w,C){if(u===null){var I=x.type;return typeof I=="function"&&!Ov(I)&&I.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(d.tag=15,d.type=I,h1(u,d,I,w,C)):(u=Lf(x.type,null,w,d,d.mode,C),u.ref=d.ref,u.return=d,d.child=u)}if(I=u.child,!(u.lanes&C)){var G=I.memoizedProps;if(x=x.compare,x=x!==null?x:Yh,x(G,w)&&u.ref===d.ref)return ks(u,d,C)}return d.flags|=1,u=wa(I,w),u.ref=d.ref,u.return=d,d.child=u}function h1(u,d,x,w,C){if(u!==null&&Yh(u.memoizedProps,w)&&u.ref===d.ref)if(tr=!1,(u.lanes&C)!==0)u.flags&131072&&(tr=!0);else return d.lanes=u.lanes,ks(u,d,C);return gv(u,d,x,w,C)}function f1(u,d,x){var w=d.pendingProps,C=w.children,I=u!==null?u.memoizedState:null;if(w.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},Ve(ql,nr),nr|=x;else if(x&1073741824)d.memoizedState={baseLanes:0,cachePool:null},w=I!==null?I.baseLanes:x,Ve(ql,nr),nr|=w;else return u=I!==null?I.baseLanes|x:x,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null},d.updateQueue=null,Ve(ql,nr),nr|=u,null;else I!==null?(w=I.baseLanes|x,d.memoizedState=null):w=x,Ve(ql,nr),nr|=w;return Ri(u,d,C,x),d.child}function p1(u,d){var x=d.ref;(u===null&&x!==null||u!==null&&u.ref!==x)&&(d.flags|=512,d.flags|=2097152)}function gv(u,d,x,w,C){var I=hn(x)?Qi:St.current;return I=dn(d,I),Gl(d,C),x=cv(u,d,x,w,I,C),w=uv(),u!==null&&!tr?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~C,ks(u,d,C)):(cn&&w&&$g(d),d.flags|=1,Ri(u,d,x,C),d.child)}function m1(u,d,x,w,C){if(hn(x)){var I=!0;zn(d)}else I=!1;if(Gl(d,C),d.stateNode===null)u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),RA(d,x,w),Zg(d,x,w,C),w=!0;else if(u===null){var G=d.stateNode,Z=d.memoizedProps;G.props=Z;var me=G.context,Ie=x.contextType;typeof Ie=="object"&&Ie!==null?Ie=mr(Ie):(Ie=hn(x)?Qi:St.current,Ie=dn(d,Ie));var Ye=x.getDerivedStateFromProps,At=typeof Ye=="function"||typeof G.getSnapshotBeforeUpdate=="function";At||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Z!==w||me!==Ie)&&NA(d,G,w,Ie),va=!1;var lt=d.memoizedState;G.state=lt,Zh(d,w,G,C),me=d.memoizedState,Z!==w||lt!==me||Nt.current||va?(typeof Ye=="function"&&(Qg(d,x,Ye,w),me=d.memoizedState),(Z=va||bA(d,x,Z,w,lt,me,Ie))?(At||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(d.flags|=4194308)):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=me),G.props=w,G.state=me,G.context=Ie,w=Z):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{G=d.stateNode,MA(u,d),Z=d.memoizedProps,Ie=d.type===d.elementType?Z:kr(d.type,Z),G.props=Ie,At=d.pendingProps,lt=G.context,me=x.contextType,typeof me=="object"&&me!==null?me=mr(me):(me=hn(x)?Qi:St.current,me=dn(d,me));var Zt=x.getDerivedStateFromProps;(Ye=typeof Zt=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Z!==At||lt!==me)&&NA(d,G,w,me),va=!1,lt=d.memoizedState,G.state=lt,Zh(d,w,G,C);var it=d.memoizedState;Z!==At||lt!==it||Nt.current||va?(typeof Zt=="function"&&(Qg(d,x,Zt,w),it=d.memoizedState),(Ie=va||bA(d,x,Ie,w,lt,it,me)||!1)?(Ye||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(w,it,me),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(w,it,me)),typeof G.componentDidUpdate=="function"&&(d.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof G.componentDidUpdate!="function"||Z===u.memoizedProps&&lt===u.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||Z===u.memoizedProps&&lt===u.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=it),G.props=w,G.state=it,G.context=me,w=Ie):(typeof G.componentDidUpdate!="function"||Z===u.memoizedProps&&lt===u.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||Z===u.memoizedProps&&lt===u.memoizedState||(d.flags|=1024),w=!1)}return vv(u,d,x,w,I,C)}function vv(u,d,x,w,C,I){p1(u,d);var G=(d.flags&128)!==0;if(!w&&!G)return C&&pa(d,x,!1),ks(u,d,I);w=d.stateNode,yP.current=d;var Z=G&&typeof x.getDerivedStateFromError!="function"?null:w.render();return d.flags|=1,u!==null&&G?(d.child=Xl(d,u.child,null,I),d.child=Xl(d,null,Z,I)):Ri(u,d,Z,I),d.memoizedState=w.state,C&&pa(d,x,!0),d.child}function g1(u){var d=u.stateNode;d.pendingContext?Zi(u,d.pendingContext,d.pendingContext!==d.context):d.context&&Zi(u,d.context,!1),rv(u,d.containerInfo)}function v1(u,d,x,w,C){return Wl(),iv(C),d.flags|=256,Ri(u,d,x,w),d.child}var pf={dehydrated:null,treeContext:null,retryLane:0};function mf(u){return{baseLanes:u,cachePool:null}}function y1(u,d,x){var w=d.pendingProps,C=fn.current,I=!1,G=(d.flags&128)!==0,Z;if((Z=G)||(Z=u!==null&&u.memoizedState===null?!1:(C&2)!==0),Z?(I=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(C|=1),Ve(fn,C&1),u===null)return nv(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(d.mode&1?xo(u)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(C=w.children,u=w.fallback,I?(w=d.mode,I=d.child,C={mode:"hidden",children:C},!(w&1)&&I!==null?(I.childLanes=0,I.pendingProps=C):I=Df(C,w,0,null),u=Po(u,w,x,null),I.return=d,u.return=d,I.sibling=u,d.child=I,d.child.memoizedState=mf(x),d.memoizedState=pf,u):yv(d,C));if(C=u.memoizedState,C!==null){if(Z=C.dehydrated,Z!==null){if(G)return d.flags&256?(d.flags&=-257,gf(u,d,x,Error(a(422)))):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(I=w.fallback,C=d.mode,w=Df({mode:"visible",children:w.children},C,0,null),I=Po(I,C,x,null),I.flags|=2,w.return=d,I.return=d,w.sibling=I,d.child=w,d.mode&1&&Xl(d,u.child,null,x),d.child.memoizedState=mf(x),d.memoizedState=pf,I);if(!(d.mode&1))d=gf(u,d,x,null);else if(xo(Z))d=gf(u,d,x,Error(a(419)));else if(w=(x&u.childLanes)!==0,tr||w){if(w=Ln,w!==null){switch(x&-x){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}w=I&(w.suspendedLanes|x)?0:I,w!==0&&w!==C.retryLane&&(C.retryLane=w,_r(u,w,-1))}Uv(),d=gf(u,d,x,Error(a(421)))}else da(Z)?(d.flags|=128,d.child=u.child,d=PP.bind(null,u),ha(Z,d),d=null):(x=C.treeContext,ve&&(er=Dl(Z),$i=d,cn=!0,Fr=null,Cu=!1,x!==null&&(gr[vr++]=Bs,gr[vr++]=Ls,gr[vr++]=wo,Bs=x.id,Ls=x.overflow,wo=d)),d=yv(d,d.pendingProps.children),d.flags|=4096);return d}return I?(w=_1(u,d,w.children,w.fallback,x),I=d.child,C=u.child.memoizedState,I.memoizedState=C===null?mf(x):{baseLanes:C.baseLanes|x,cachePool:null},I.childLanes=u.childLanes&~x,d.memoizedState=pf,w):(x=x1(u,d,w.children,x),d.memoizedState=null,x)}return I?(w=_1(u,d,w.children,w.fallback,x),I=d.child,C=u.child.memoizedState,I.memoizedState=C===null?mf(x):{baseLanes:C.baseLanes|x,cachePool:null},I.childLanes=u.childLanes&~x,d.memoizedState=pf,w):(x=x1(u,d,w.children,x),d.memoizedState=null,x)}function yv(u,d){return d=Df({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function x1(u,d,x,w){var C=u.child;return u=C.sibling,x=wa(C,{mode:"visible",children:x}),!(d.mode&1)&&(x.lanes=w),x.return=d,x.sibling=null,u!==null&&(w=d.deletions,w===null?(d.deletions=[u],d.flags|=16):w.push(u)),d.child=x}function _1(u,d,x,w,C){var I=d.mode;u=u.child;var G=u.sibling,Z={mode:"hidden",children:x};return!(I&1)&&d.child!==u?(x=d.child,x.childLanes=0,x.pendingProps=Z,d.deletions=null):(x=wa(u,Z),x.subtreeFlags=u.subtreeFlags&14680064),G!==null?w=wa(G,w):(w=Po(w,I,C,null),w.flags|=2),w.return=d,x.return=d,x.sibling=w,d.child=x,w}function gf(u,d,x,w){return w!==null&&iv(w),Xl(d,u.child,null,x),u=yv(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function S1(u,d,x){u.lanes|=d;var w=u.alternate;w!==null&&(w.lanes|=d),Kg(u.return,d,x)}function xv(u,d,x,w,C){var I=u.memoizedState;I===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:x,tailMode:C}:(I.isBackwards=d,I.rendering=null,I.renderingStartTime=0,I.last=w,I.tail=x,I.tailMode=C)}function A1(u,d,x){var w=d.pendingProps,C=w.revealOrder,I=w.tail;if(Ri(u,d,w.children,x),w=fn.current,w&2)w=w&1|2,d.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&S1(u,x,d);else if(u.tag===19)S1(u,x,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}w&=1}if(Ve(fn,w),!(d.mode&1))d.memoizedState=null;else switch(C){case"forwards":for(x=d.child,C=null;x!==null;)u=x.alternate,u!==null&&rf(u)===null&&(C=x),x=x.sibling;x=C,x===null?(C=d.child,d.child=null):(C=x.sibling,x.sibling=null),xv(d,!1,C,x,I);break;case"backwards":for(x=null,C=d.child,d.child=null;C!==null;){if(u=C.alternate,u!==null&&rf(u)===null){d.child=C;break}u=C.sibling,C.sibling=x,x=C,C=u}xv(d,!0,x,null,I);break;case"together":xv(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function ks(u,d,x){if(u!==null&&(d.dependencies=u.dependencies),Ql|=d.lanes,!(x&d.childLanes))return null;if(u!==null&&d.child!==u.child)throw Error(a(153));if(d.child!==null){for(u=d.child,x=wa(u,u.pendingProps),d.child=x,x.return=d;u.sibling!==null;)u=u.sibling,x=x.sibling=wa(u,u.pendingProps),x.return=d;x.sibling=null}return d.child}function xP(u,d,x){switch(d.tag){case 3:g1(d),Wl();break;case 5:UA(d);break;case 1:hn(d.type)&&zn(d);break;case 4:rv(d,d.stateNode.containerInfo);break;case 10:wA(d,d.type._context,d.memoizedProps.value);break;case 13:var w=d.memoizedState;if(w!==null)return w.dehydrated!==null?(Ve(fn,fn.current&1),d.flags|=128,null):x&d.child.childLanes?y1(u,d,x):(Ve(fn,fn.current&1),u=ks(u,d,x),u!==null?u.sibling:null);Ve(fn,fn.current&1);break;case 19:if(w=(x&d.childLanes)!==0,u.flags&128){if(w)return A1(u,d,x);d.flags|=128}var C=d.memoizedState;if(C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Ve(fn,fn.current),w)break;return null;case 22:case 23:return d.lanes=0,f1(u,d,x)}return ks(u,d,x)}function _P(u,d){switch(ev(d),d.tag){case 1:return hn(d.type)&&ln(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return Yl(),ut(Nt),ut(St),ov(),u=d.flags,u&65536&&!(u&128)?(d.flags=u&-65537|128,d):null;case 5:return sv(d),null;case 13:if(ut(fn),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(a(340));Wl()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return ut(fn),null;case 4:return Yl(),null;case 10:return Yg(d.type._context),null;case 22:case 23:return Fv(),null;case 24:return null;default:return null}}var vf=!1,Co=!1,SP=typeof WeakSet=="function"?WeakSet:Set,je=null;function yf(u,d){var x=u.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(w){Gi(u,d,w)}else x.current=null}function _v(u,d,x){try{x()}catch(w){Gi(u,d,w)}}var w1=!1;function AP(u,d){for(j(u.containerInfo),je=d;je!==null;)if(u=je,d=u.child,(u.subtreeFlags&1028)!==0&&d!==null)d.return=u,je=d;else for(;je!==null;){u=je;try{var x=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,C=x.memoizedState,I=u.stateNode,G=I.getSnapshotBeforeUpdate(u.elementType===u.type?w:kr(u.type,w),C);I.__reactInternalSnapshotBeforeUpdate=G}break;case 3:Pe&&ke(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Z){Gi(u,u.return,Z)}if(d=u.sibling,d!==null){d.return=u.return,je=d;break}je=u.return}return x=w1,w1=!1,x}function To(u,d,x){var w=d.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var C=w=w.next;do{if((C.tag&u)===u){var I=C.destroy;C.destroy=void 0,I!==void 0&&_v(d,x,I)}C=C.next}while(C!==w)}}function Uu(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&u)===u){var w=x.create;x.destroy=w()}x=x.next}while(x!==d)}}function Sv(u){var d=u.ref;if(d!==null){var x=u.stateNode;switch(u.tag){case 5:u=q(x);break;default:u=x}typeof d=="function"?d(u):d.current=u}}function M1(u,d,x){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(Ao,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(u=d.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var w=u=u.next;do{var C=w,I=C.destroy;C=C.tag,I!==void 0&&(C&2||C&4)&&_v(d,x,I),w=w.next}while(w!==u)}break;case 1:if(yf(d,x),u=d.stateNode,typeof u.componentWillUnmount=="function")try{u.props=d.memoizedProps,u.state=d.memoizedState,u.componentWillUnmount()}catch(G){Gi(d,x,G)}break;case 5:yf(d,x);break;case 4:Pe?N1(u,d,x):H&&H&&(d=d.stateNode.containerInfo,x=nt(d),Dt(d,x))}}function E1(u,d,x){for(var w=d;;)if(M1(u,w,x),w.child===null||Pe&&w.tag===4){if(w===d)break;for(;w.sibling===null;){if(w.return===null||w.return===d)return;w=w.return}w.sibling.return=w.return,w=w.sibling}else w.child.return=w,w=w.child}function C1(u){var d=u.alternate;d!==null&&(u.alternate=null,C1(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&ie(d)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function T1(u){return u.tag===5||u.tag===3||u.tag===4}function b1(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||T1(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function R1(u){if(Pe){e:{for(var d=u.return;d!==null;){if(T1(d))break e;d=d.return}throw Error(a(160))}var x=d;switch(x.tag){case 5:d=x.stateNode,x.flags&32&&(It(d),x.flags&=-33),x=b1(u),wv(u,x,d);break;case 3:case 4:d=x.stateNode.containerInfo,x=b1(u),Av(u,x,d);break;default:throw Error(a(161))}}}function Av(u,d,x){var w=u.tag;if(w===5||w===6)u=u.stateNode,d?qe(x,u,d):ft(x,u);else if(w!==4&&(u=u.child,u!==null))for(Av(u,d,x),u=u.sibling;u!==null;)Av(u,d,x),u=u.sibling}function wv(u,d,x){var w=u.tag;if(w===5||w===6)u=u.stateNode,d?pt(x,u,d):st(x,u);else if(w!==4&&(u=u.child,u!==null))for(wv(u,d,x),u=u.sibling;u!==null;)wv(u,d,x),u=u.sibling}function N1(u,d,x){for(var w=d,C=!1,I,G;;){if(!C){C=w.return;e:for(;;){if(C===null)throw Error(a(160));switch(I=C.stateNode,C.tag){case 5:G=!1;break e;case 3:I=I.containerInfo,G=!0;break e;case 4:I=I.containerInfo,G=!0;break e}C=C.return}C=!0}if(w.tag===5||w.tag===6)E1(u,w,x),G?yt(I,w.stateNode):Xe(I,w.stateNode);else if(w.tag===18)G?le(I,w.stateNode):he(I,w.stateNode);else if(w.tag===4){if(w.child!==null){I=w.stateNode.containerInfo,G=!0,w.child.return=w,w=w.child;continue}}else if(M1(u,w,x),w.child!==null){w.child.return=w,w=w.child;continue}if(w===d)break;for(;w.sibling===null;){if(w.return===null||w.return===d)return;w=w.return,w.tag===4&&(C=!1)}w.sibling.return=w.return,w=w.sibling}}function Mv(u,d){if(Pe){switch(d.tag){case 0:case 11:case 14:case 15:To(3,d,d.return),Uu(3,d),To(5,d,d.return);return;case 1:return;case 5:var x=d.stateNode;if(x!=null){var w=d.memoizedProps;u=u!==null?u.memoizedProps:w;var C=d.type,I=d.updateQueue;d.updateQueue=null,I!==null&&Et(x,I,C,u,w,d)}return;case 6:if(d.stateNode===null)throw Error(a(162));x=d.memoizedProps,xe(d.stateNode,u!==null?u.memoizedProps:x,x);return;case 3:ve&&u!==null&&u.memoizedState.isDehydrated&&ne(d.stateNode.containerInfo);return;case 12:return;case 13:xf(d);return;case 19:xf(d);return;case 17:return}throw Error(a(163))}switch(d.tag){case 0:case 11:case 14:case 15:To(3,d,d.return),Uu(3,d),To(5,d,d.return);return;case 12:return;case 13:xf(d);return;case 19:xf(d);return;case 3:ve&&u!==null&&u.memoizedState.isDehydrated&&ne(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(H){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,Dt(d.containerInfo,d.pendingChildren);break e}throw Error(a(163))}}function xf(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var x=u.stateNode;x===null&&(x=u.stateNode=new SP),d.forEach(function(w){var C=IP.bind(null,u,w);x.has(w)||(x.add(w),w.then(C,C))})}}function wP(u,d){for(je=d;je!==null;){d=je;var x=d.deletions;if(x!==null)for(var w=0;w<x.length;w++){var C=x[w];try{var I=u;Pe?N1(I,C,d):E1(I,C,d);var G=C.alternate;G!==null&&(G.return=null),C.return=null}catch(et){Gi(C,d,et)}}if(x=d.child,d.subtreeFlags&12854&&x!==null)x.return=d,je=x;else for(;je!==null;){d=je;try{var Z=d.flags;if(Z&32&&Pe&&It(d.stateNode),Z&512){var me=d.alternate;if(me!==null){var Ie=me.ref;Ie!==null&&(typeof Ie=="function"?Ie(null):Ie.current=null)}}if(Z&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var Ye=d.alternate;(Ye===null||Ye.memoizedState===null)&&(Pv=ht())}break;case 22:var At=d.memoizedState!==null,lt=d.alternate,Zt=lt!==null&&lt.memoizedState!==null;if(x=d,Pe){e:if(w=x,C=At,I=null,Pe)for(var it=w;;){if(it.tag===5){if(I===null){I=it;var gi=it.stateNode;C?zt(gi):Le(it.stateNode,it.memoizedProps)}}else if(it.tag===6){if(I===null){var Ar=it.stateNode;C?gt(Ar):J(Ar,it.memoizedProps)}}else if((it.tag!==22&&it.tag!==23||it.memoizedState===null||it===w)&&it.child!==null){it.child.return=it,it=it.child;continue}if(it===w)break;for(;it.sibling===null;){if(it.return===null||it.return===w)break e;I===it&&(I=null),it=it.return}I===it&&(I=null),it.sibling.return=it.return,it=it.sibling}}if(At&&!Zt&&x.mode&1){je=x;for(var ae=x.child;ae!==null;){for(x=je=ae;je!==null;){w=je;var ee=w.child;switch(w.tag){case 0:case 11:case 14:case 15:To(4,w,w.return);break;case 1:yf(w,w.return);var fe=w.stateNode;if(typeof fe.componentWillUnmount=="function"){var Ge=w.return;try{fe.props=w.memoizedProps,fe.state=w.memoizedState,fe.componentWillUnmount()}catch(et){Gi(w,Ge,et)}}break;case 5:yf(w,w.return);break;case 22:if(w.memoizedState!==null){B1(x);continue}}ee!==null?(ee.return=w,je=ee):B1(x)}ae=ae.sibling}}}switch(Z&4102){case 2:R1(d),d.flags&=-3;break;case 6:R1(d),d.flags&=-3,Mv(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,Mv(d.alternate,d);break;case 4:Mv(d.alternate,d)}}catch(et){Gi(d,d.return,et)}if(x=d.sibling,x!==null){x.return=d.return,je=x;break}je=d.return}}}function MP(u,d,x){je=u,P1(u)}function P1(u,d,x){for(var w=(u.mode&1)!==0;je!==null;){var C=je,I=C.child;if(C.tag===22&&w){var G=C.memoizedState!==null||vf;if(!G){var Z=C.alternate,me=Z!==null&&Z.memoizedState!==null||Co;Z=vf;var Ie=Co;if(vf=G,(Co=me)&&!Ie)for(je=C;je!==null;)G=je,me=G.child,G.tag===22&&G.memoizedState!==null?L1(C):me!==null?(me.return=G,je=me):L1(C);for(;I!==null;)je=I,P1(I),I=I.sibling;je=C,vf=Z,Co=Ie}I1(u)}else C.subtreeFlags&8772&&I!==null?(I.return=C,je=I):I1(u)}}function I1(u){for(;je!==null;){var d=je;if(d.flags&8772){var x=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:Co||Uu(5,d);break;case 1:var w=d.stateNode;if(d.flags&4&&!Co)if(x===null)w.componentDidMount();else{var C=d.elementType===d.type?x.memoizedProps:kr(d.type,x.memoizedProps);w.componentDidUpdate(C,x.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var I=d.updateQueue;I!==null&&CA(d,I,w);break;case 3:var G=d.updateQueue;if(G!==null){if(x=null,d.child!==null)switch(d.child.tag){case 5:x=q(d.child.stateNode);break;case 1:x=d.child.stateNode}CA(d,G,x)}break;case 5:var Z=d.stateNode;x===null&&d.flags&4&&ot(Z,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(ve&&d.memoizedState===null){var me=d.alternate;if(me!==null){var Ie=me.memoizedState;if(Ie!==null){var Ye=Ie.dehydrated;Ye!==null&&se(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}Co||d.flags&512&&Sv(d)}catch(At){Gi(d,d.return,At)}}if(d===u){je=null;break}if(x=d.sibling,x!==null){x.return=d.return,je=x;break}je=d.return}}function B1(u){for(;je!==null;){var d=je;if(d===u){je=null;break}var x=d.sibling;if(x!==null){x.return=d.return,je=x;break}je=d.return}}function L1(u){for(;je!==null;){var d=je;try{switch(d.tag){case 0:case 11:case 15:var x=d.return;try{Uu(4,d)}catch(me){Gi(d,x,me)}break;case 1:var w=d.stateNode;if(typeof w.componentDidMount=="function"){var C=d.return;try{w.componentDidMount()}catch(me){Gi(d,C,me)}}var I=d.return;try{Sv(d)}catch(me){Gi(d,I,me)}break;case 5:var G=d.return;try{Sv(d)}catch(me){Gi(d,G,me)}}}catch(me){Gi(d,d.return,me)}if(d===u){je=null;break}var Z=d.sibling;if(Z!==null){Z.return=d.return,je=Z;break}je=d.return}}var _f=0,Sf=1,Af=2,wf=3,Mf=4;if(typeof Symbol=="function"&&Symbol.for){var Ou=Symbol.for;_f=Ou("selector.component"),Sf=Ou("selector.has_pseudo_class"),Af=Ou("selector.role"),wf=Ou("selector.test_id"),Mf=Ou("selector.text")}function Ev(u){var d=pe(u);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(a(364));return d}if(u=te(u),u===null)throw Error(a(362));return u.stateNode.current}function Cv(u,d){switch(d.$$typeof){case _f:if(u.type===d.value)return!0;break;case Sf:e:{d=d.value,u=[u,0];for(var x=0;x<u.length;){var w=u[x++],C=u[x++],I=d[C];if(w.tag!==5||!we(w)){for(;I!=null&&Cv(w,I);)C++,I=d[C];if(C===d.length){d=!0;break e}else for(w=w.child;w!==null;)u.push(w,C),w=w.sibling}}d=!1}return d;case Af:if(u.tag===5&&Ke(u.stateNode,d.value))return!0;break;case Mf:if((u.tag===5||u.tag===6)&&(u=Ee(u),u!==null&&0<=u.indexOf(d.value)))return!0;break;case wf:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Tv(u){switch(u.$$typeof){case _f:return"<"+(P(u.value)||"Unknown")+">";case Sf:return":has("+(Tv(u)||"")+")";case Af:return'[role="'+u.value+'"]';case Mf:return'"'+u.value+'"';case wf:return'[data-testname="'+u.value+'"]';default:throw Error(a(365))}}function D1(u,d){var x=[];u=[u,0];for(var w=0;w<u.length;){var C=u[w++],I=u[w++],G=d[I];if(C.tag!==5||!we(C)){for(;G!=null&&Cv(C,G);)I++,G=d[I];if(I===d.length)x.push(C);else for(C=C.child;C!==null;)u.push(C,I),C=C.sibling}}return x}function bv(u,d){if(!k)throw Error(a(363));u=Ev(u),u=D1(u,d),d=[],u=Array.from(u);for(var x=0;x<u.length;){var w=u[x++];if(w.tag===5)we(w)||d.push(w.stateNode);else for(w=w.child;w!==null;)u.push(w),w=w.sibling}return d}var EP=Math.ceil,Ef=o.ReactCurrentDispatcher,Rv=o.ReactCurrentOwner,Rn=o.ReactCurrentBatchConfig,Pt=0,Ln=null,Dn=null,ri=0,nr=0,ql=Cn(0),Gn=0,ju=null,Ql=0,Cf=0,Nv=0,zu=null,ji=null,Pv=0,Iv=1/0;function Zl(){Iv=ht()+500}var Tf=!1,Bv=null,xa=null,bf=!1,_a=null,Rf=0,Gu=0,Lv=null,Nf=-1,Pf=0;function Ni(){return Pt&6?ht():Nf!==-1?Nf:Nf=ht()}function Sa(u){return u.mode&1?Pt&2&&ri!==0?ri&-ri:oP.transition!==null?(Pf===0&&(u=ls,ls<<=1,!(ls&4194240)&&(ls=64),Pf=u),Pf):(u=_e,u!==0?u:de()):1}function _r(u,d,x){if(50<Gu)throw Gu=0,Lv=null,Error(a(185));var w=If(u,d);return w===null?null:(ga(w,d,x),(!(Pt&2)||w!==Ln)&&(w===Ln&&(!(Pt&2)&&(Cf|=d),Gn===4&&Aa(w,ri)),zi(w,x),d===1&&Pt===0&&!(u.mode&1)&&(Zl(),Jh&&ds())),w)}function If(u,d){u.lanes|=d;var x=u.alternate;for(x!==null&&(x.lanes|=d),x=u,u=u.return;u!==null;)u.childLanes|=d,x=u.alternate,x!==null&&(x.childLanes|=d),x=u,u=u.return;return x.tag===3?x.stateNode:null}function zi(u,d){var x=u.callbackNode;Vh(u,d);var w=Fl(u,u===Ln?ri:0);if(w===0)x!==null&&Tn(x),u.callbackNode=null,u.callbackPriority=0;else if(d=w&-w,u.callbackPriority!==d){if(x!=null&&Tn(x),d===1)u.tag===0?aP(F1.bind(null,u)):AA(F1.bind(null,u)),Re?F(function(){Pt===0&&ds()}):Qt(rn,ds),x=null;else{switch(Oe(w)){case 1:x=rn;break;case 4:x=Xh;break;case 16:x=bn;break;case 536870912:x=SA;break;default:x=bn}x=X1(x,k1.bind(null,u))}u.callbackPriority=d,u.callbackNode=x}}function k1(u,d){if(Nf=-1,Pf=0,Pt&6)throw Error(a(327));var x=u.callbackNode;if(No()&&u.callbackNode!==x)return null;var w=Fl(u,u===Ln?ri:0);if(w===0)return null;if(w&30||w&u.expiredLanes||d)d=Bf(u,w);else{d=w;var C=Pt;Pt|=2;var I=j1();(Ln!==u||ri!==d)&&(Zl(),bo(u,d));do try{bP();break}catch(Z){O1(u,Z)}while(!0);Jg(),Ef.current=I,Pt=C,Dn!==null?d=0:(Ln=null,ri=0,d=Gn)}if(d!==0){if(d===2&&(C=Ul(u),C!==0&&(w=C,d=Dv(u,C))),d===1)throw x=ju,bo(u,0),Aa(u,w),zi(u,ht()),x;if(d===6)Aa(u,w);else{if(C=u.current.alternate,!(w&30)&&!CP(C)&&(d=Bf(u,w),d===2&&(I=Ul(u),I!==0&&(w=I,d=Dv(u,I))),d===1))throw x=ju,bo(u,0),Aa(u,w),zi(u,ht()),x;switch(u.finishedWork=C,u.finishedLanes=w,d){case 0:case 1:throw Error(a(345));case 2:Ro(u,ji);break;case 3:if(Aa(u,w),(w&130023424)===w&&(d=Pv+500-ht(),10<d)){if(Fl(u,0)!==0)break;if(C=u.suspendedLanes,(C&w)!==w){Ni(),u.pingedLanes|=u.suspendedLanes&C;break}u.timeoutHandle=ce(Ro.bind(null,u,ji),d);break}Ro(u,ji);break;case 4:if(Aa(u,w),(w&4194240)===w)break;for(d=u.eventTimes,C=-1;0<w;){var G=31-bi(w);I=1<<G,G=d[G],G>C&&(C=G),w&=~I}if(w=C,w=ht()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*EP(w/1960))-w,10<w){u.timeoutHandle=ce(Ro.bind(null,u,ji),w);break}Ro(u,ji);break;case 5:Ro(u,ji);break;default:throw Error(a(329))}}}return zi(u,ht()),u.callbackNode===x?k1.bind(null,u):null}function Dv(u,d){var x=zu;return u.current.memoizedState.isDehydrated&&(bo(u,d).flags|=256),u=Bf(u,d),u!==2&&(d=ji,ji=x,d!==null&&kv(d)),u}function kv(u){ji===null?ji=u:ji.push.apply(ji,u)}function CP(u){for(var d=u;;){if(d.flags&16384){var x=d.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var w=0;w<x.length;w++){var C=x[w],I=C.getSnapshot;C=C.value;try{if(!us(I(),C))return!1}catch{return!1}}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Aa(u,d){for(d&=~Nv,d&=~Cf,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var x=31-bi(d),w=1<<x;u[x]=-1,d&=~w}}function F1(u){if(Pt&6)throw Error(a(327));No();var d=Fl(u,0);if(!(d&1))return zi(u,ht()),null;var x=Bf(u,d);if(u.tag!==0&&x===2){var w=Ul(u);w!==0&&(d=w,x=Dv(u,w))}if(x===1)throw x=ju,bo(u,0),Aa(u,d),zi(u,ht()),x;if(x===6)throw Error(a(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,Ro(u,ji),zi(u,ht()),null}function U1(u){_a!==null&&_a.tag===0&&!(Pt&6)&&No();var d=Pt;Pt|=1;var x=Rn.transition,w=_e;try{if(Rn.transition=null,_e=1,u)return u()}finally{_e=w,Rn.transition=x,Pt=d,!(Pt&6)&&ds()}}function Fv(){nr=ql.current,ut(ql)}function bo(u,d){u.finishedWork=null,u.finishedLanes=0;var x=u.timeoutHandle;if(x!==Ce&&(u.timeoutHandle=Ce,Se(x)),Dn!==null)for(x=Dn.return;x!==null;){var w=x;switch(ev(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&ln();break;case 3:Yl(),ut(Nt),ut(St),ov();break;case 5:sv(w);break;case 4:Yl();break;case 13:ut(fn);break;case 19:ut(fn);break;case 10:Yg(w.type._context);break;case 22:case 23:Fv()}x=x.return}if(Ln=u,Dn=u=wa(u.current,null),ri=nr=d,Gn=0,ju=null,Nv=Cf=Ql=0,ji=zu=null,hs!==null){for(d=0;d<hs.length;d++)if(x=hs[d],w=x.interleaved,w!==null){x.interleaved=null;var C=w.next,I=x.pending;if(I!==null){var G=I.next;I.next=C,w.next=G}x.pending=w}hs=null}return u}function O1(u,d){do{var x=Dn;try{if(Jg(),sf.current=df,af){for(var w=Sn.memoizedState;w!==null;){var C=w.queue;C!==null&&(C.pending=null),w=w.next}af=!1}if(Kl=0,Zn=fi=Sn=null,Pu=!1,Iu=0,Rv.current=null,x===null||x.return===null){Gn=1,ju=d,Dn=null;break}e:{var I=u,G=x.return,Z=x,me=d;if(d=ri,Z.flags|=32768,me!==null&&typeof me=="object"&&typeof me.then=="function"){var Ie=me,Ye=Z,At=Ye.tag;if(!(Ye.mode&1)&&(At===0||At===11||At===15)){var lt=Ye.alternate;lt?(Ye.updateQueue=lt.updateQueue,Ye.memoizedState=lt.memoizedState,Ye.lanes=lt.lanes):(Ye.updateQueue=null,Ye.memoizedState=null)}var Zt=a1(G);if(Zt!==null){Zt.flags&=-257,o1(Zt,G,Z,I,d),Zt.mode&1&&s1(I,Ie,d),d=Zt,me=Ie;var it=d.updateQueue;if(it===null){var gi=new Set;gi.add(me),d.updateQueue=gi}else it.add(me);break e}else{if(!(d&1)){s1(I,Ie,d),Uv();break e}me=Error(a(426))}}else if(cn&&Z.mode&1){var Ar=a1(G);if(Ar!==null){!(Ar.flags&65536)&&(Ar.flags|=256),o1(Ar,G,Z,I,d),iv(me);break e}}I=me,Gn!==4&&(Gn=2),zu===null?zu=[I]:zu.push(I),me=pv(me,Z),Z=G;do{switch(Z.tag){case 3:Z.flags|=65536,d&=-d,Z.lanes|=d;var ae=i1(Z,me,d);EA(Z,ae);break e;case 1:I=me;var ee=Z.type,fe=Z.stateNode;if(!(Z.flags&128)&&(typeof ee.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(xa===null||!xa.has(fe)))){Z.flags|=65536,d&=-d,Z.lanes|=d;var Ge=r1(Z,I,d);EA(Z,Ge);break e}}Z=Z.return}while(Z!==null)}G1(x)}catch(et){d=et,Dn===x&&x!==null&&(Dn=x=x.return);continue}break}while(!0)}function j1(){var u=Ef.current;return Ef.current=df,u===null?df:u}function Uv(){(Gn===0||Gn===3||Gn===2)&&(Gn=4),Ln===null||!(Ql&268435455)&&!(Cf&268435455)||Aa(Ln,ri)}function Bf(u,d){var x=Pt;Pt|=2;var w=j1();Ln===u&&ri===d||bo(u,d);do try{TP();break}catch(C){O1(u,C)}while(!0);if(Jg(),Pt=x,Ef.current=w,Dn!==null)throw Error(a(261));return Ln=null,ri=0,Gn}function TP(){for(;Dn!==null;)z1(Dn)}function bP(){for(;Dn!==null&&!$e();)z1(Dn)}function z1(u){var d=W1(u.alternate,u,nr);u.memoizedProps=u.pendingProps,d===null?G1(u):Dn=d,Rv.current=null}function G1(u){var d=u;do{var x=d.alternate;if(u=d.return,d.flags&32768){if(x=_P(x,d),x!==null){x.flags&=32767,Dn=x;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Gn=6,Dn=null;return}}else if(x=vP(x,d,nr),x!==null){Dn=x;return}if(d=d.sibling,d!==null){Dn=d;return}Dn=d=u}while(d!==null);Gn===0&&(Gn=5)}function Ro(u,d){var x=_e,w=Rn.transition;try{Rn.transition=null,_e=1,RP(u,d,x)}finally{Rn.transition=w,_e=x}return null}function RP(u,d,x){do No();while(_a!==null);if(Pt&6)throw Error(a(327));var w=u.finishedWork,C=u.finishedLanes;if(w===null)return null;if(u.finishedWork=null,u.finishedLanes=0,w===u.current)throw Error(a(177));u.callbackNode=null,u.callbackPriority=0;var I=w.lanes|w.childLanes;if(Wh(u,I),u===Ln&&(Dn=Ln=null,ri=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||bf||(bf=!0,X1(bn,function(){return No(),null})),I=(w.flags&15990)!==0,w.subtreeFlags&15990||I){I=Rn.transition,Rn.transition=null;var G=_e;_e=1;var Z=Pt;Pt|=4,Rv.current=null,AP(u,w),wP(u,w),W(u.containerInfo),u.current=w,MP(w),Ot(),Pt=Z,_e=G,Rn.transition=I}else u.current=w;if(bf&&(bf=!1,_a=u,Rf=C),I=u.pendingLanes,I===0&&(xa=null),rP(w.stateNode),zi(u,ht()),d!==null)for(x=u.onRecoverableError,w=0;w<d.length;w++)x(d[w]);if(Tf)throw Tf=!1,u=Bv,Bv=null,u;return Rf&1&&u.tag!==0&&No(),I=u.pendingLanes,I&1?u===Lv?Gu++:(Gu=0,Lv=u):Gu=0,ds(),null}function No(){if(_a!==null){var u=Oe(Rf),d=Rn.transition,x=_e;try{if(Rn.transition=null,_e=16>u?16:u,_a===null)var w=!1;else{if(u=_a,_a=null,Rf=0,Pt&6)throw Error(a(331));var C=Pt;for(Pt|=4,je=u.current;je!==null;){var I=je,G=I.child;if(je.flags&16){var Z=I.deletions;if(Z!==null){for(var me=0;me<Z.length;me++){var Ie=Z[me];for(je=Ie;je!==null;){var Ye=je;switch(Ye.tag){case 0:case 11:case 15:To(8,Ye,I)}var At=Ye.child;if(At!==null)At.return=Ye,je=At;else for(;je!==null;){Ye=je;var lt=Ye.sibling,Zt=Ye.return;if(C1(Ye),Ye===Ie){je=null;break}if(lt!==null){lt.return=Zt,je=lt;break}je=Zt}}}var it=I.alternate;if(it!==null){var gi=it.child;if(gi!==null){it.child=null;do{var Ar=gi.sibling;gi.sibling=null,gi=Ar}while(gi!==null)}}je=I}}if(I.subtreeFlags&2064&&G!==null)G.return=I,je=G;else e:for(;je!==null;){if(I=je,I.flags&2048)switch(I.tag){case 0:case 11:case 15:To(9,I,I.return)}var ae=I.sibling;if(ae!==null){ae.return=I.return,je=ae;break e}je=I.return}}var ee=u.current;for(je=ee;je!==null;){G=je;var fe=G.child;if(G.subtreeFlags&2064&&fe!==null)fe.return=G,je=fe;else e:for(G=ee;je!==null;){if(Z=je,Z.flags&2048)try{switch(Z.tag){case 0:case 11:case 15:Uu(9,Z)}}catch(et){Gi(Z,Z.return,et)}if(Z===G){je=null;break e}var Ge=Z.sibling;if(Ge!==null){Ge.return=Z.return,je=Ge;break e}je=Z.return}}if(Pt=C,ds(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(Ao,u)}catch{}w=!0}return w}finally{_e=x,Rn.transition=d}}return!1}function H1(u,d,x){d=pv(x,d),d=i1(u,d,1),ya(u,d),d=Ni(),u=If(u,1),u!==null&&(ga(u,1,d),zi(u,d))}function Gi(u,d,x){if(u.tag===3)H1(u,u,x);else for(;d!==null;){if(d.tag===3){H1(d,u,x);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(xa===null||!xa.has(w))){u=pv(x,u),u=r1(d,u,1),ya(d,u),u=Ni(),d=If(d,1),d!==null&&(ga(d,1,u),zi(d,u));break}}d=d.return}}function NP(u,d,x){var w=u.pingCache;w!==null&&w.delete(d),d=Ni(),u.pingedLanes|=u.suspendedLanes&x,Ln===u&&(ri&x)===x&&(Gn===4||Gn===3&&(ri&130023424)===ri&&500>ht()-Pv?bo(u,0):Nv|=x),zi(u,d)}function V1(u,d){d===0&&(u.mode&1?(d=kl,kl<<=1,!(kl&130023424)&&(kl=4194304)):d=1);var x=Ni();u=If(u,d),u!==null&&(ga(u,d,x),zi(u,x))}function PP(u){var d=u.memoizedState,x=0;d!==null&&(x=d.retryLane),V1(u,x)}function IP(u,d){var x=0;switch(u.tag){case 13:var w=u.stateNode,C=u.memoizedState;C!==null&&(x=C.retryLane);break;case 19:w=u.stateNode;break;default:throw Error(a(314))}w!==null&&w.delete(d),V1(u,x)}var W1;W1=function(u,d,x){if(u!==null)if(u.memoizedProps!==d.pendingProps||Nt.current)tr=!0;else{if(!(u.lanes&x)&&!(d.flags&128))return tr=!1,xP(u,d,x);tr=!!(u.flags&131072)}else tr=!1,cn&&d.flags&1048576&&PA(d,tf,d.index);switch(d.lanes=0,d.tag){case 2:var w=d.type;u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),u=d.pendingProps;var C=dn(d,St.current);Gl(d,x),C=cv(null,d,w,u,C,x);var I=uv();return d.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,hn(w)?(I=!0,zn(d)):I=!1,d.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,qg(d),C.updater=$h,d.stateNode=C,C._reactInternals=d,Zg(d,w,u,x),d=vv(null,d,w,!0,I,x)):(d.tag=0,cn&&I&&$g(d),Ri(null,d,C,x),d=d.child),d;case 16:w=d.elementType;e:{switch(u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),u=d.pendingProps,C=w._init,w=C(w._payload),d.type=w,C=d.tag=LP(w),u=kr(w,u),C){case 0:d=gv(null,d,w,u,x);break e;case 1:d=m1(null,d,w,u,x);break e;case 11:d=u1(null,d,w,u,x);break e;case 14:d=d1(null,d,w,kr(w.type,u),x);break e}throw Error(a(306,w,""))}return d;case 0:return w=d.type,C=d.pendingProps,C=d.elementType===w?C:kr(w,C),gv(u,d,w,C,x);case 1:return w=d.type,C=d.pendingProps,C=d.elementType===w?C:kr(w,C),m1(u,d,w,C,x);case 3:e:{if(g1(d),u===null)throw Error(a(387));w=d.pendingProps,I=d.memoizedState,C=I.element,MA(u,d),Zh(d,w,null,x);var G=d.memoizedState;if(w=G.element,ve&&I.isDehydrated)if(I={element:w,isDehydrated:!1,cache:G.cache,transitions:G.transitions},d.updateQueue.baseState=I,d.memoizedState=I,d.flags&256){C=Error(a(423)),d=v1(u,d,w,x,C);break e}else if(w!==C){C=Error(a(424)),d=v1(u,d,w,x,C);break e}else for(ve&&(er=Ll(d.stateNode.containerInfo),$i=d,cn=!0,Fr=null,Cu=!1),x=FA(d,null,w,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Wl(),w===C){d=ks(u,d,x);break e}Ri(u,d,w,x)}d=d.child}return d;case 5:return UA(d),u===null&&nv(d),w=d.type,C=d.pendingProps,I=u!==null?u.memoizedProps:null,G=C.children,ge(w,C)?G=null:I!==null&&ge(w,I)&&(d.flags|=32),p1(u,d),Ri(u,d,G,x),d.child;case 6:return u===null&&nv(d),null;case 13:return y1(u,d,x);case 4:return rv(d,d.stateNode.containerInfo),w=d.pendingProps,u===null?d.child=Xl(d,null,w,x):Ri(u,d,w,x),d.child;case 11:return w=d.type,C=d.pendingProps,C=d.elementType===w?C:kr(w,C),u1(u,d,w,C,x);case 7:return Ri(u,d,d.pendingProps,x),d.child;case 8:return Ri(u,d,d.pendingProps.children,x),d.child;case 12:return Ri(u,d,d.pendingProps.children,x),d.child;case 10:e:{if(w=d.type._context,C=d.pendingProps,I=d.memoizedProps,G=C.value,wA(d,w,G),I!==null)if(us(I.value,G)){if(I.children===C.children&&!Nt.current){d=ks(u,d,x);break e}}else for(I=d.child,I!==null&&(I.return=d);I!==null;){var Z=I.dependencies;if(Z!==null){G=I.child;for(var me=Z.firstContext;me!==null;){if(me.context===w){if(I.tag===1){me=Is(-1,x&-x),me.tag=2;var Ie=I.updateQueue;if(Ie!==null){Ie=Ie.shared;var Ye=Ie.pending;Ye===null?me.next=me:(me.next=Ye.next,Ye.next=me),Ie.pending=me}}I.lanes|=x,me=I.alternate,me!==null&&(me.lanes|=x),Kg(I.return,x,d),Z.lanes|=x;break}me=me.next}}else if(I.tag===10)G=I.type===d.type?null:I.child;else if(I.tag===18){if(G=I.return,G===null)throw Error(a(341));G.lanes|=x,Z=G.alternate,Z!==null&&(Z.lanes|=x),Kg(G,x,d),G=I.sibling}else G=I.child;if(G!==null)G.return=I;else for(G=I;G!==null;){if(G===d){G=null;break}if(I=G.sibling,I!==null){I.return=G.return,G=I;break}G=G.return}I=G}Ri(u,d,C.children,x),d=d.child}return d;case 9:return C=d.type,w=d.pendingProps.children,Gl(d,x),C=mr(C),w=w(C),d.flags|=1,Ri(u,d,w,x),d.child;case 14:return w=d.type,C=kr(w,d.pendingProps),C=kr(w.type,C),d1(u,d,w,C,x);case 15:return h1(u,d,d.type,d.pendingProps,x);case 17:return w=d.type,C=d.pendingProps,C=d.elementType===w?C:kr(w,C),u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,hn(w)?(u=!0,zn(d)):u=!1,Gl(d,x),RA(d,w,C),Zg(d,w,C,x),vv(null,d,w,!0,u,x);case 19:return A1(u,d,x);case 22:return f1(u,d,x)}throw Error(a(156,d.tag))};function X1(u,d){return Qt(u,d)}function BP(u,d,x,w){this.tag=u,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(u,d,x,w){return new BP(u,d,x,w)}function Ov(u){return u=u.prototype,!(!u||!u.isReactComponent)}function LP(u){if(typeof u=="function")return Ov(u)?1:0;if(u!=null){if(u=u.$$typeof,u===M)return 11;if(u===S)return 14}return 2}function wa(u,d){var x=u.alternate;return x===null?(x=Sr(u.tag,d,u.key,u.mode),x.elementType=u.elementType,x.type=u.type,x.stateNode=u.stateNode,x.alternate=u,u.alternate=x):(x.pendingProps=d,x.type=u.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=u.flags&14680064,x.childLanes=u.childLanes,x.lanes=u.lanes,x.child=u.child,x.memoizedProps=u.memoizedProps,x.memoizedState=u.memoizedState,x.updateQueue=u.updateQueue,d=u.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=u.sibling,x.index=u.index,x.ref=u.ref,x}function Lf(u,d,x,w,C,I){var G=2;if(w=u,typeof u=="function")Ov(u)&&(G=1);else if(typeof u=="string")G=5;else e:switch(u){case f:return Po(x.children,C,I,d);case p:G=8,C|=8;break;case m:return u=Sr(12,x,d,C|2),u.elementType=m,u.lanes=I,u;case _:return u=Sr(13,x,d,C),u.elementType=_,u.lanes=I,u;case v:return u=Sr(19,x,d,C),u.elementType=v,u.lanes=I,u;case E:return Df(x,C,I,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case g:G=10;break e;case y:G=9;break e;case M:G=11;break e;case S:G=14;break e;case A:G=16,w=null;break e}throw Error(a(130,u==null?u:typeof u,""))}return d=Sr(G,x,d,C),d.elementType=u,d.type=w,d.lanes=I,d}function Po(u,d,x,w){return u=Sr(7,u,w,d),u.lanes=x,u}function Df(u,d,x,w){return u=Sr(22,u,w,d),u.elementType=E,u.lanes=x,u.stateNode={},u}function jv(u,d,x){return u=Sr(6,u,null,d),u.lanes=x,u}function zv(u,d,x){return d=Sr(4,u.children!==null?u.children:[],u.key,d),d.lanes=x,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function DP(u,d,x,w,C){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ce,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ol(0),this.expirationTimes=Ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ol(0),this.identifierPrefix=w,this.onRecoverableError=C,ve&&(this.mutableSourceEagerHydrationData=null)}function J1(u,d,x,w,C,I,G,Z,me){return u=new DP(u,d,x,Z,me),d===1?(d=1,I===!0&&(d|=8)):d=0,I=Sr(3,null,null,d),u.current=I,I.stateNode=u,I.memoizedState={element:w,isDehydrated:x,cache:null,transitions:null},qg(I),u}function Y1(u){if(!u)return hi;u=u._reactInternals;e:{if(R(u)!==u||u.tag!==1)throw Error(a(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(hn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(a(171))}if(u.tag===1){var x=u.type;if(hn(x))return Ns(u,x,d)}return d}function K1(u){var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(a(188)):(u=Object.keys(u).join(","),Error(a(268,u)));return u=X(d),u===null?null:u.stateNode}function q1(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var x=u.retryLane;u.retryLane=x!==0&&x<d?x:d}}function Gv(u,d){q1(u,d),(u=u.alternate)&&q1(u,d)}function kP(u){return u=X(u),u===null?null:u.stateNode}function FP(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var d=Ni();_r(u,134217728,d),Gv(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var d=Ni(),x=Sa(u);_r(u,x,d),Gv(u,x)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var x=ma(d.pendingLanes);x!==0&&(jl(d,x|1),zi(d,ht()),!(Pt&6)&&(Zl(),ds()))}break;case 13:var w=Ni();U1(function(){return _r(u,1,w)}),Gv(u,1)}},t.batchedUpdates=function(u,d){var x=Pt;Pt|=1;try{return u(d)}finally{Pt=x,Pt===0&&(Zl(),Jh&&ds())}},t.createComponentSelector=function(u){return{$$typeof:_f,value:u}},t.createContainer=function(u,d,x,w,C,I,G){return J1(u,d,!1,null,x,w,C,I,G)},t.createHasPseudoClassSelector=function(u){return{$$typeof:Sf,value:u}},t.createHydrationContainer=function(u,d,x,w,C,I,G,Z,me){return u=J1(x,w,!0,u,C,I,G,Z,me),u.context=Y1(null),x=u.current,w=Ni(),C=Sa(x),I=Is(w,C),I.callback=d??null,ya(x,I),u.current.lanes=C,ga(u,C,w),zi(u,w),u},t.createPortal=function(u,d,x){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:w==null?null:""+w,children:u,containerInfo:d,implementation:x}},t.createRoleSelector=function(u){return{$$typeof:Af,value:u}},t.createTestNameSelector=function(u){return{$$typeof:wf,value:u}},t.createTextSelector=function(u){return{$$typeof:Mf,value:u}},t.deferredUpdates=function(u){var d=_e,x=Rn.transition;try{return Rn.transition=null,_e=16,u()}finally{_e=d,Rn.transition=x}},t.discreteUpdates=function(u,d,x,w,C){var I=_e,G=Rn.transition;try{return Rn.transition=null,_e=1,u(d,x,w,C)}finally{_e=I,Rn.transition=G,Pt===0&&Zl()}},t.findAllNodes=bv,t.findBoundingRects=function(u,d){if(!k)throw Error(a(363));d=bv(u,d),u=[];for(var x=0;x<d.length;x++)u.push(ye(d[x]));for(d=u.length-1;0<d;d--){x=u[d];for(var w=x.x,C=w+x.width,I=x.y,G=I+x.height,Z=d-1;0<=Z;Z--)if(d!==Z){var me=u[Z],Ie=me.x,Ye=Ie+me.width,At=me.y,lt=At+me.height;if(w>=Ie&&I>=At&&C<=Ye&&G<=lt){u.splice(d,1);break}else if(w!==Ie||x.width!==me.width||lt<I||At>G){if(!(I!==At||x.height!==me.height||Ye<w||Ie>C)){Ie>w&&(me.width+=Ie-w,me.x=w),Ye<C&&(me.width=C-Ie),u.splice(d,1);break}}else{At>I&&(me.height+=At-I,me.y=I),lt<G&&(me.height=G-At),u.splice(d,1);break}}}return u},t.findHostInstance=K1,t.findHostInstanceWithNoPortals=function(u){return u=D(u),u=u!==null?V(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return K1(u)},t.flushControlled=function(u){var d=Pt;Pt|=1;var x=Rn.transition,w=_e;try{Rn.transition=null,_e=1,u()}finally{_e=w,Rn.transition=x,Pt=d,Pt===0&&(Zl(),ds())}},t.flushPassiveEffects=No,t.flushSync=U1,t.focusWithin=function(u,d){if(!k)throw Error(a(363));for(u=Ev(u),d=D1(u,d),d=Array.from(d),u=0;u<d.length;){var x=d[u++];if(!we(x)){if(x.tag===5&&Be(x.stateNode))return!0;for(x=x.child;x!==null;)d.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return _e},t.getFindAllNodesFailureDescription=function(u,d){if(!k)throw Error(a(363));var x=0,w=[];u=[Ev(u),0];for(var C=0;C<u.length;){var I=u[C++],G=u[C++],Z=d[G];if((I.tag!==5||!we(I))&&(Cv(I,Z)&&(w.push(Tv(Z)),G++,G>x&&(x=G)),G<d.length))for(I=I.child;I!==null;)u.push(I,G),I=I.sibling}if(x<d.length){for(u=[];x<d.length;x++)u.push(Tv(d[x]));return`findAllNodes was able to match part of the selector:
  `+(w.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return q(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:kP,findFiberByHostInstance:u.findFiberByHostInstance||FP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)u=!0;else{try{Ao=d.inject(u),cs=d}catch{}u=!!d.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,d,x,w){if(!k)throw Error(a(363));u=bv(u,d);var C=He(u,x,w).disconnect;return{disconnect:function(){C()}}},t.registerMutableSourceForHydration=function(u,d){var x=d._getVersion;x=x(d._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[d,x]:u.mutableSourceEagerHydrationData.push(d,x)},t.runWithPriority=function(u,d){var x=_e;try{return _e=u,d()}finally{_e=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,d,x,w){var C=d.current,I=Ni(),G=Sa(C);return x=Y1(x),d.context===null?d.context=x:d.pendingContext=x,d=Is(I,G),d.payload={element:u},w=w===void 0?null:w,w!==null&&(d.callback=w),ya(C,d),u=_r(C,G,I),u!==null&&Qh(u,C,G),G},t};IN.exports=K4;var q4=IN.exports;const Q4=IC(q4),fA={},Z4=n=>void Object.assign(fA,n);function $4(n,e){function t(f,{args:p=[],attach:m,...g},y){let M=`${f[0].toUpperCase()}${f.slice(1)}`,_;if(f==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=g.object;_=wc(v,{type:f,root:y,attach:m,primitive:!0})}else{const v=fA[M];if(!v)throw new Error(`R3F: ${M} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");_=wc(new v(...p),{type:f,root:y,attach:m,memoizedProps:{args:p}})}return _.__r3f.attach===void 0&&(_.isBufferGeometry?_.__r3f.attach="geometry":_.isMaterial&&(_.__r3f.attach="material")),M!=="inject"&&ry(_,g),_}function i(f,p){let m=!1;if(p){var g,y;(g=p.__r3f)!=null&&g.attach?iy(f,p,p.__r3f.attach):p.isObject3D&&f.isObject3D&&(f.add(p),m=!0),m||(y=f.__r3f)==null||y.objects.push(p),p.__r3f||wc(p,{}),p.__r3f.parent=f,f_(p),Mc(p)}}function r(f,p,m){let g=!1;if(p){var y,M;if((y=p.__r3f)!=null&&y.attach)iy(f,p,p.__r3f.attach);else if(p.isObject3D&&f.isObject3D){p.parent=f,p.dispatchEvent({type:"added"}),f.dispatchEvent({type:"childadded",child:p});const _=f.children.filter(S=>S!==p),v=_.indexOf(m);f.children=[..._.slice(0,v),p,..._.slice(v)],g=!0}g||(M=f.__r3f)==null||M.objects.push(p),p.__r3f||wc(p,{}),p.__r3f.parent=f,f_(p),Mc(p)}}function s(f,p,m=!1){f&&[...f].forEach(g=>a(p,g,m))}function a(f,p,m){if(p){var g,y,M;if(p.__r3f&&(p.__r3f.parent=null),(g=f.__r3f)!=null&&g.objects&&(f.__r3f.objects=f.__r3f.objects.filter(E=>E!==p)),(y=p.__r3f)!=null&&y.attach)cC(f,p,p.__r3f.attach);else if(p.isObject3D&&f.isObject3D){var _;f.remove(p),(_=p.__r3f)!=null&&_.root&&oG(ym(p),p)}const S=(M=p.__r3f)==null?void 0:M.primitive,A=!S&&(m===void 0?p.dispose!==null:m);if(!S){var v;s((v=p.__r3f)==null?void 0:v.objects,p,A),s(p.children,p,A)}if(delete p.__r3f,A&&p.dispose&&p.type!=="Scene"){const E=()=>{try{p.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?d_.unstable_scheduleCallback(d_.unstable_IdlePriority,E):E()}Mc(f)}}function o(f,p,m,g){var y;const M=(y=f.__r3f)==null?void 0:y.parent;if(!M)return;const _=t(p,m,f.__r3f.root);if(f.children){for(const v of f.children)v.__r3f&&i(_,v);f.children=f.children.filter(v=>!v.__r3f)}f.__r3f.objects.forEach(v=>i(_,v)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||a(M,f),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),i(M,_),_.raycast&&_.__r3f.eventCount&&ym(_).getState().internal.interaction.push(_),[g,g.alternate].forEach(v=>{v!==null&&(v.stateNode=_,v.ref&&(typeof v.ref=="function"?v.ref(_):v.ref.current=_))})}const l=()=>{};return{reconciler:Q4({createInstance:t,removeChild:a,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,p)=>{if(!p)return;const m=f.getState().scene;m.__r3f&&(m.__r3f.root=f,i(m,p))},removeChildFromContainer:(f,p)=>{p&&a(f.getState().scene,p)},insertInContainerBefore:(f,p,m)=>{if(!p||!m)return;const g=f.getState().scene;g.__r3f&&r(g,p,m)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var p;return!!((p=f==null?void 0:f.__r3f)!=null?p:{}).handlers},prepareUpdate(f,p,m,g){var y;if(((y=f==null?void 0:f.__r3f)!=null?y:{}).primitive&&g.object&&g.object!==f)return[!0];{const{args:_=[],children:v,...S}=g,{args:A=[],children:E,...N}=m;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((P,L)=>P!==A[L]))return[!0];const T=zN(f,S,N,!0);return T.changes.length?[!1,T]:null}},commitUpdate(f,[p,m],g,y,M,_){p?o(f,g,M,_):ry(f,m)},commitMount(f,p,m,g){var y;const M=(y=f.__r3f)!=null?y:{};f.raycast&&M.handlers&&M.eventCount&&ym(f).getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>wc(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var p;const{attach:m,parent:g}=(p=f.__r3f)!=null?p:{};m&&g&&cC(g,f,m),f.isObject3D&&(f.visible=!1),Mc(f)},unhideInstance(f,p){var m;const{attach:g,parent:y}=(m=f.__r3f)!=null?m:{};g&&y&&iy(y,f,g),(f.isObject3D&&p.visible==null||p.visible)&&(f.visible=!0),Mc(f)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():zc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&tn.fun(performance.now)?performance.now:tn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:tn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:tn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:ry}}var sC,aC;const ny=n=>"colorSpace"in n||"outputColorSpace"in n,DN=()=>{var n;return(n=fA.ColorManagement)!=null?n:null},kN=n=>n&&n.isOrthographicCamera,eG=n=>n&&n.hasOwnProperty("current"),Oh=typeof window<"u"&&((sC=window.document)!=null&&sC.createElement||((aC=window.navigator)==null?void 0:aC.product)==="ReactNative")?B.useLayoutEffect:B.useEffect;function FN(n){const e=B.useRef(n);return Oh(()=>void(e.current=n),[n]),e}function tG({set:n}){return Oh(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}let UN=class extends B.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}};UN.getDerivedStateFromError=()=>({error:!0});const ON="__default",oC=new Map,nG=n=>n&&!!n.memoized&&!!n.changes;function jN(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const dd=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function ym(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const tn={obj:n=>n===Object(n)&&!tn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(tn.str(n)||tn.num(n)||tn.boo(n))return n===e;const s=tn.obj(n);if(s&&i==="reference")return n===e;const a=tn.arr(n);if(a&&t==="reference")return n===e;if((a||s)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(o in r?e:n)if(!tn.equ(n[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:n)if(n[o]!==e[o])return!1;if(tn.und(o)){if(a&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function iG(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function rG(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function wc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function h_(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,a)=>s[a],n),{target:t,key:r}}else return{target:t,key:e}}const lC=/-\d+$/;function iy(n,e,t){if(tn.str(t)){if(lC.test(t)){const s=t.replace(lC,""),{target:a,key:o}=h_(n,s);Array.isArray(a[o])||(a[o]=[])}const{target:i,key:r}=h_(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function cC(n,e,t){var i,r;if(tn.str(t)){const{target:s,key:a}=h_(n,t),o=e.__r3f.previousAttach;o===void 0?delete s[a]:s[a]=o}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function zN(n,{children:e,key:t,ref:i,...r},{children:s,key:a,ref:o,...l}={},h=!1){const f=n.__r3f,p=Object.entries(r),m=[];if(h){const y=Object.keys(l);for(let M=0;M<y.length;M++)r.hasOwnProperty(y[M])||p.unshift([y[M],ON+"remove"])}p.forEach(([y,M])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&y==="object"||tn.equ(M,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return m.push([y,M,!0,[]]);let v=[];y.includes("-")&&(v=y.split("-")),m.push([y,M,!1,v]);for(const S in r){const A=r[S];S.startsWith(`${y}-`)&&m.push([S,A,!1,S.split("-")])}});const g={...r};return f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.args&&(g.args=f.memoizedProps.args),f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.attach&&(g.attach=f.memoizedProps.attach),{memoized:g,changes:m}}function ry(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:a,changes:o}=nG(e)?e:zN(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=a);for(let m=0;m<o.length;m++){let[g,y,M,_]=o[m];if(ny(n)){const E="srgb",N="srgb-linear";g==="encoding"?(g="colorSpace",y=y===3001?E:N):g==="outputEncoding"&&(g="outputColorSpace",y=y===3001?E:N)}let v=n,S=v[g];if(_.length&&(S=_.reduce((A,E)=>A[E],n),!(S&&S.set))){const[A,...E]=_.reverse();v=E.reverse().reduce((N,T)=>N[T],n),g=A}if(y===ON+"remove")if(v.constructor){let A=oC.get(v.constructor);A||(A=new v.constructor,oC.set(v.constructor,A)),y=A[g]}else y=0;if(M&&i)y?i.handlers[g]=y:delete i.handlers[g],i.eventCount=Object.keys(i.handlers).length;else if(S&&S.set&&(S.copy||S instanceof fl)){if(Array.isArray(y))S.fromArray?S.fromArray(y):S.set(...y);else if(S.copy&&y&&y.constructor&&S.constructor===y.constructor)S.copy(y);else if(y!==void 0){var h;const A=(h=S)==null?void 0:h.isColor;!A&&S.setScalar?S.setScalar(y):S instanceof fl&&y instanceof fl?S.mask=y.mask:S.set(y),!DN()&&s&&!s.linear&&A&&S.convertSRGBToLinear()}}else{var f;if(v[g]=y,(f=v[g])!=null&&f.isTexture&&v[g].format===Li&&v[g].type===Ms&&s){const A=v[g];ny(A)&&ny(s.gl)?A.colorSpace=s.gl.outputColorSpace:A.encoding=s.gl.outputEncoding}}Mc(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const m=ym(n).getState().internal,g=m.interaction.indexOf(n);g>-1&&m.interaction.splice(g,1),i.eventCount&&m.interaction.push(n)}return!(o.length===1&&o[0][0]==="onUpdate")&&o.length&&(t=n.__r3f)!=null&&t.parent&&f_(n),n}function Mc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function f_(n){n.onUpdate==null||n.onUpdate(n)}function sG(n,e){n.manual||(kN(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Xp(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function aG(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return zc.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return zc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return zc.ContinuousEventPriority;default:return zc.DefaultEventPriority}}function GN(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function oG(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{GN(t.capturedMap,e,i,r)})}function lG(n){function e(l){const{internal:h}=n.getState(),f=l.offsetX-h.initialClick[0],p=l.offsetY-h.initialClick[1];return Math.round(Math.sqrt(f*f+p*p))}function t(l){return l.filter(h=>["Move","Over","Enter","Out","Leave"].some(f=>{var p;return(p=h.__r3f)==null?void 0:p.handlers["onPointer"+f]}))}function i(l,h){const f=n.getState(),p=new Set,m=[],g=h?h(f.internal.interaction):f.internal.interaction;for(let v=0;v<g.length;v++){const S=dd(g[v]);S&&(S.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(l,f);function y(v){const S=dd(v);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var A;S.events.compute==null||S.events.compute(l,S,(A=S.previousRoot)==null?void 0:A.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(v,!0):[]}let M=g.flatMap(y).sort((v,S)=>{const A=dd(v.object),E=dd(S.object);return!A||!E?v.distance-S.distance:E.events.priority-A.events.priority||v.distance-S.distance}).filter(v=>{const S=Xp(v);return p.has(S)?!1:(p.add(S),!0)});f.events.filter&&(M=f.events.filter(M,f));for(const v of M){let S=v.object;for(;S;){var _;(_=S.__r3f)!=null&&_.eventCount&&m.push({...v,eventObject:S}),S=S.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let v of f.internal.capturedMap.get(l.pointerId).values())p.has(Xp(v.intersection))||m.push(v.intersection);return m}function r(l,h,f,p){const m=n.getState();if(l.length){const g={stopped:!1};for(const y of l){const M=dd(y.object)||m,{raycaster:_,pointer:v,camera:S,internal:A}=M,E=new z(v.x,v.y,0).unproject(S),N=b=>{var D,X;return(D=(X=A.capturedMap.get(b))==null?void 0:X.has(y.eventObject))!=null?D:!1},T=b=>{const D={intersection:y,target:h.target};A.capturedMap.has(b)?A.capturedMap.get(b).set(y.eventObject,D):A.capturedMap.set(b,new Map([[y.eventObject,D]])),h.target.setPointerCapture(b)},P=b=>{const D=A.capturedMap.get(b);D&&GN(A.capturedMap,y.eventObject,D,b)};let L={};for(let b in h){let D=h[b];typeof D!="function"&&(L[b]=D)}let R={...y,...L,pointer:v,intersections:l,stopped:g.stopped,delta:f,unprojectedPoint:E,ray:_.ray,camera:S,stopPropagation(){const b="pointerId"in h&&A.capturedMap.get(h.pointerId);if((!b||b.has(y.eventObject))&&(R.stopped=g.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(D=>D.eventObject===y.eventObject))){const D=l.slice(0,l.indexOf(y));s([...D,y])}},target:{hasPointerCapture:N,setPointerCapture:T,releasePointerCapture:P},currentTarget:{hasPointerCapture:N,setPointerCapture:T,releasePointerCapture:P},nativeEvent:h};if(p(R),g.stopped===!0)break}}return l}function s(l){const{internal:h}=n.getState();for(const f of h.hovered.values())if(!l.length||!l.find(p=>p.object===f.object&&p.index===f.index&&p.instanceId===f.instanceId)){const m=f.eventObject.__r3f,g=m==null?void 0:m.handlers;if(h.hovered.delete(Xp(f)),m!=null&&m.eventCount){const y={...f,intersections:l};g.onPointerOut==null||g.onPointerOut(y),g.onPointerLeave==null||g.onPointerLeave(y)}}}function a(l,h){for(let f=0;f<h.length;f++){const p=h[f].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return h=>{const{internal:f}=n.getState();"pointerId"in h&&f.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(h.pointerId)&&(f.capturedMap.delete(h.pointerId),s([]))})}}return function(f){const{onPointerMissed:p,internal:m}=n.getState();m.lastEvent.current=f;const g=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(f,g?t:void 0),v=y?e(f):0;l==="onPointerDown"&&(m.initialClick=[f.offsetX,f.offsetY],m.initialHits=_.map(A=>A.eventObject)),y&&!_.length&&v<=2&&(a(f,m.interaction),p&&p(f)),g&&s(_);function S(A){const E=A.eventObject,N=E.__r3f,T=N==null?void 0:N.handlers;if(N!=null&&N.eventCount)if(g){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const P=Xp(A),L=m.hovered.get(P);L?L.stopped&&A.stopPropagation():(m.hovered.set(P,A),T.onPointerOver==null||T.onPointerOver(A),T.onPointerEnter==null||T.onPointerEnter(A))}T.onPointerMove==null||T.onPointerMove(A)}else{const P=T[l];P?(!y||m.initialHits.includes(E))&&(a(f,m.interaction.filter(L=>!m.initialHits.includes(L))),P(A)):y&&m.initialHits.includes(E)&&a(f,m.interaction.filter(L=>!m.initialHits.includes(L)))}}r(_,f,v,S)}}return{handlePointer:o}}const HN=n=>!!(n!=null&&n.render),VN=B.createContext(null),cG=(n,e)=>{const t=V4((o,l)=>{const h=new z,f=new z,p=new z;function m(v=l().camera,S=f,A=l().size){const{width:E,height:N,top:T,left:P}=A,L=E/N;S.isVector3?p.copy(S):p.set(...S);const R=v.getWorldPosition(h).distanceTo(p);if(kN(v))return{width:E/v.zoom,height:N/v.zoom,top:T,left:P,factor:1,distance:R,aspect:L};{const b=v.fov*Math.PI/180,D=2*Math.tan(b/2)*R,X=D*(E/N);return{width:X,height:D,top:T,left:P,factor:E/X,distance:R,aspect:L}}}let g;const y=v=>o(S=>({performance:{...S.performance,current:v}})),M=new Ae;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>n(l(),v),advance:(v,S)=>e(v,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new cA,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();g&&clearTimeout(g),v.performance.current!==v.performance.min&&y(v.performance.min),g=setTimeout(()=>y(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:v=>o(S=>({...S,events:{...S.events,...v}})),setSize:(v,S,A,E,N)=>{const T=l().camera,P={width:v,height:S,top:E||0,left:N||0,updateStyle:A};o(L=>({size:P,viewport:{...L.viewport,...m(T,f,P)}}))},setDpr:v=>o(S=>{const A=jN(v);return{viewport:{...S.viewport,dpr:A,initialDpr:S.viewport.initialDpr||A}}}),setFrameloop:(v="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,v!=="never"&&(S.start(),S.elapsedTime=0),o(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:B.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,S,A)=>{const E=l().internal;return E.priority=E.priority+(S>0?1:0),E.subscribers.push({ref:v,priority:S,store:A}),E.subscribers=E.subscribers.sort((N,T)=>N.priority-T.priority),()=>{const N=l().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(S>0?1:0),N.subscribers=N.subscribers.filter(T=>T.ref!==v))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,a=i.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:h,gl:f,set:p}=t.getState();if(l.width!==r.width||l.height!==r.height||h.dpr!==s){var m;r=l,s=h.dpr,sG(o,l),f.setPixelRatio(h.dpr);const g=(m=l.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(l.width,l.height,g)}o!==a&&(a=o,p(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};let Jp,uG=new Set,dG=new Set,hG=new Set;function sy(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function hd(n,e){switch(n){case"before":return sy(uG,e);case"after":return sy(dG,e);case"tail":return sy(hG,e)}}let ay,oy;function ly(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),ay=e.internal.subscribers,Jp=0;Jp<ay.length;Jp++)oy=ay[Jp],oy.ref.current(oy.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function fG(n){let e=!1,t=!1,i,r,s;function a(h){r=requestAnimationFrame(a),e=!0,i=0,hd("before",h),t=!0;for(const p of n.values()){var f;s=p.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((f=s.gl.xr)!=null&&f.isPresenting)&&(i+=ly(h,s))}if(t=!1,hd("after",h),i===0)return hd("tail",h),e=!1,cancelAnimationFrame(r)}function o(h,f=1){var p;if(!h)return n.forEach(m=>o(m.store.getState(),f));(p=h.gl.xr)!=null&&p.isPresenting||!h.internal.active||h.frameloop==="never"||(f>1?h.internal.frames=Math.min(60,h.internal.frames+f):t?h.internal.frames=2:h.internal.frames=1,e||(e=!0,requestAnimationFrame(a)))}function l(h,f=!0,p,m){if(f&&hd("before",h),p)ly(h,p,m);else for(const g of n.values())ly(h,g.store.getState());f&&hd("after",h)}return{loop:a,invalidate:o,advance:l}}function WN(){const n=B.useContext(VN);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function pG(n=t=>t,e){return WN()(n,e)}function mG(n,e=0){const t=WN(),i=t.getState().internal.subscribe,r=FN(n);return Oh(()=>i(r,e,t),[e,i,t]),null}const uC=new WeakMap;function XN(n,e){return function(t,...i){let r=uC.get(t);return r||(r=new t,uC.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((a,o)=>r.load(s,l=>{l.scene&&Object.assign(l,iG(l.scene)),a(l)},e,l=>o(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function jh(n,e,t,i){const r=Array.isArray(e)?e:[e],s=X4(XN(t,i),[n,...r],{equal:tn.equ});return Array.isArray(e)?s:s[0]}jh.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return J4(XN(t),[n,...i])};jh.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Y4([n,...t])};const mu=new Map,{invalidate:dC,advance:hC}=fG(mu),{reconciler:qm,applyProps:Sc}=$4(mu,aG),Ac={objects:"shallow",strict:!1},gG=(n,e)=>{const t=typeof n=="function"?n(e):n;return HN(t)?t:new zS({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function vG(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:a,updateStyle:o=t}=e;return{width:i,height:r,top:s,left:a,updateStyle:o}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:a}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:a,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function yG(n){const e=mu.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||cG(dC,hC),a=t||qm.createContainer(s,zc.ConcurrentRoot,null,!1,null,"",r,null);e||mu.set(n,{fiber:a,store:s});let o,l=!1,h;return{configure(f={}){let{gl:p,size:m,scene:g,events:y,onCreated:M,shadows:_=!1,linear:v=!1,flat:S=!1,legacy:A=!1,orthographic:E=!1,frameloop:N="always",dpr:T=[1,2],performance:P,raycaster:L,camera:R,onPointerMissed:b}=f,D=s.getState(),X=D.gl;D.gl||D.set({gl:X=gG(p,n)});let $=D.raycaster;$||D.set({raycaster:$=new TN});const{params:V,...K}=L||{};if(tn.equ(K,$,Ac)||Sc($,{...K}),tn.equ(V,$.params,Ac)||Sc($,{params:{...$.params,...V}}),!D.camera||D.camera===h&&!tn.equ(h,R,Ac)){h=R;const W=R instanceof Rh,Y=W?R:E?new Au(0,0,0,0,.1,1e3):new Wn(75,0,.1,1e3);W||(Y.position.z=5,R&&(Sc(Y,R),("aspect"in R||"left"in R||"right"in R||"bottom"in R||"top"in R)&&(Y.manual=!0,Y.updateProjectionMatrix())),!D.camera&&!(R!=null&&R.rotation)&&Y.lookAt(0,0,0)),D.set({camera:Y}),$.camera=Y}if(!D.scene){let W;g!=null&&g.isScene?W=g:(W=new GS,g&&Sc(W,g)),D.set({scene:wc(W)})}if(!D.xr){var q;const W=(Q,oe)=>{const ge=s.getState();ge.frameloop!=="never"&&hC(Q,!0,ge,oe)},Y=()=>{const Q=s.getState();Q.gl.xr.enabled=Q.gl.xr.isPresenting,Q.gl.xr.setAnimationLoop(Q.gl.xr.isPresenting?W:null),Q.gl.xr.isPresenting||dC(Q)},re={connect(){const Q=s.getState().gl;Q.xr.addEventListener("sessionstart",Y),Q.xr.addEventListener("sessionend",Y)},disconnect(){const Q=s.getState().gl;Q.xr.removeEventListener("sessionstart",Y),Q.xr.removeEventListener("sessionend",Y)}};typeof((q=X.xr)==null?void 0:q.addEventListener)=="function"&&re.connect(),D.set({xr:re})}if(X.shadowMap){const W=X.shadowMap.enabled,Y=X.shadowMap.type;if(X.shadowMap.enabled=!!_,tn.boo(_))X.shadowMap.type=Rd;else if(tn.str(_)){var ue;const re={basic:MR,percentage:gg,soft:Rd,variance:Wr};X.shadowMap.type=(ue=re[_])!=null?ue:Rd}else tn.obj(_)&&Object.assign(X.shadowMap,_);(W!==X.shadowMap.enabled||Y!==X.shadowMap.type)&&(X.shadowMap.needsUpdate=!0)}const U=DN();U&&("enabled"in U?U.enabled=!A:"legacyMode"in U&&(U.legacyMode=A)),l||Sc(X,{outputEncoding:v?3e3:3001,toneMapping:S?ws:_S}),D.legacy!==A&&D.set(()=>({legacy:A})),D.linear!==v&&D.set(()=>({linear:v})),D.flat!==S&&D.set(()=>({flat:S})),p&&!tn.fun(p)&&!HN(p)&&!tn.equ(p,X,Ac)&&Sc(X,p),y&&!D.events.handlers&&D.set({events:y(s)});const j=vG(n,m);return tn.equ(j,D.size,Ac)||D.setSize(j.width,j.height,j.updateStyle,j.top,j.left),T&&D.viewport.dpr!==jN(T)&&D.setDpr(T),D.frameloop!==N&&D.setFrameloop(N),D.onPointerMissed||D.set({onPointerMissed:b}),P&&!tn.equ(P,D.performance,Ac)&&D.set(W=>({performance:{...W.performance,...P}})),o=M,l=!0,this},render(f){return l||this.configure(),qm.updateContainer(c.jsx(xG,{store:s,children:f,onCreated:o,rootElement:n}),a,null,()=>{}),s},unmount(){JN(n)}}}function xG({store:n,children:e,onCreated:t,rootElement:i}){return Oh(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),c.jsx(VN.Provider,{value:n,children:e})}function JN(n,e){const t=mu.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),qm.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,a,o,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),rG(r),mu.delete(n)}catch{}},500)})}}qm.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:B.version});const cy={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function _G(n){const{handlePointer:e}=lG(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(cy).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(a=>({events:{...a.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([a,o])=>{const[l,h]=cy[a];t.addEventListener(l,o,{passive:h})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,a])=>{if(i&&i.connected instanceof HTMLElement){const[o]=cy[s];i.connected.removeEventListener(o,a)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function fC(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function SG({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=B.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=B.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,h=n?typeof n=="number"?n:n.resize:null,f=B.useRef(!1);B.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[p,m,g]=B.useMemo(()=>{const v=()=>{if(!o.current.element)return;const{left:S,top:A,width:E,height:N,bottom:T,right:P,x:L,y:R}=o.current.element.getBoundingClientRect(),b={left:S,top:A,width:E,height:N,bottom:T,right:P,x:L,y:R};o.current.element instanceof HTMLElement&&i&&(b.height=o.current.element.offsetHeight,b.width=o.current.element.offsetWidth),Object.freeze(b),f.current&&!EG(o.current.lastBounds,b)&&a(o.current.lastBounds=b)};return[v,h?fC(v,h):v,l?fC(v,l):v]},[a,i,l,h]);function y(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",g,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function M(){o.current.element&&(o.current.resizeObserver=new r(g),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(v=>v.addEventListener("scroll",g,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const _=v=>{!v||v===o.current.element||(y(),o.current.element=v,o.current.scrollContainers=YN(v),M())};return wG(g,!!e),AG(m),B.useEffect(()=>{y(),M()},[e,g,m]),B.useEffect(()=>y,[]),[_,s,p]}function AG(n){B.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function wG(n,e){B.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function YN(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...YN(n.parentElement)]}const MG=["x","y","top","bottom","left","right","width","height"],EG=(n,e)=>MG.every(t=>n[t]===e[t]);var CG=Object.defineProperty,TG=Object.defineProperties,bG=Object.getOwnPropertyDescriptors,pC=Object.getOwnPropertySymbols,RG=Object.prototype.hasOwnProperty,NG=Object.prototype.propertyIsEnumerable,mC=(n,e,t)=>e in n?CG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gC=(n,e)=>{for(var t in e||(e={}))RG.call(e,t)&&mC(n,t,e[t]);if(pC)for(var t of pC(e))NG.call(e,t)&&mC(n,t,e[t]);return n},PG=(n,e)=>TG(n,bG(e)),vC,yC;typeof window<"u"&&((vC=window.document)!=null&&vC.createElement||((yC=window.navigator)==null?void 0:yC.product)==="ReactNative")?B.useLayoutEffect:B.useEffect;function KN(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=KN(i,e,t);if(r)return r;i=i.sibling}}function qN(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const xC=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=xC;return}return xC.apply(this,arguments)};const pA=qN(B.createContext(null));class QN extends B.Component{render(){return B.createElement(pA.Provider,{value:this._reactInternals},this.props.children)}}function IG(){const n=B.useContext(pA);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=B.useId();return B.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=KN(i,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(r)return r}},[n,e])}function BG(){const n=IG(),[e]=B.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==pA&&!e.has(r)&&e.set(r,B.useContext(qN(r)))}t=t.return}return e}function LG(){const n=BG();return B.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>B.createElement(e,null,B.createElement(t.Provider,PG(gC({},i),{value:n.get(t)}))),e=>B.createElement(QN,gC({},e))),[n])}const DG=B.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:a=_G,eventSource:o,eventPrefix:l,shadows:h,linear:f,flat:p,legacy:m,orthographic:g,frameloop:y,dpr:M,performance:_,raycaster:v,camera:S,scene:A,onPointerMissed:E,onCreated:N,...T},P){B.useMemo(()=>Z4(z4),[]);const L=LG(),[R,b]=SG({scroll:!0,debounce:{scroll:50,resize:0},...i}),D=B.useRef(null),X=B.useRef(null);B.useImperativeHandle(P,()=>D.current);const $=FN(E),[V,K]=B.useState(!1),[q,ue]=B.useState(!1);if(V)throw V;if(q)throw q;const U=B.useRef(null);Oh(()=>{const W=D.current;b.width>0&&b.height>0&&W&&(U.current||(U.current=yG(W)),U.current.configure({gl:s,events:a,shadows:h,linear:f,flat:p,legacy:m,orthographic:g,frameloop:y,dpr:M,performance:_,raycaster:v,camera:S,scene:A,size:b,onPointerMissed:(...Y)=>$.current==null?void 0:$.current(...Y),onCreated:Y=>{Y.events.connect==null||Y.events.connect(o?eG(o)?o.current:o:X.current),l&&Y.setEvents({compute:(re,Q)=>{const oe=re[l+"X"],ge=re[l+"Y"];Q.pointer.set(oe/Q.size.width*2-1,-(ge/Q.size.height)*2+1),Q.raycaster.setFromCamera(Q.pointer,Q.camera)}}),N==null||N(Y)}}),U.current.render(c.jsx(L,{children:c.jsx(UN,{set:ue,children:c.jsx(B.Suspense,{fallback:c.jsx(tG,{set:K}),children:e??null})})})))}),B.useEffect(()=>{const W=D.current;if(W)return()=>JN(W)},[]);const j=o?"none":"auto";return c.jsx("div",{ref:X,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:j,...r},...T,children:c.jsx("div",{ref:R,style:{width:"100%",height:"100%"},children:c.jsx("canvas",{ref:D,style:{display:"block"},children:t})})})}),kG=B.forwardRef(function(e,t){return c.jsx(QN,{children:c.jsx(DG,{...e,ref:t})})}),FG=parseInt(Eh.replace(/\D+/g,""));function _C(n,e){if(e===f2)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Xm||e===RS){let t=n.getIndex();if(t===null){const a=[],o=n.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===Xm)for(let a=1;a<=i;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}function Qm(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const sl="srgb",na="srgb-linear",SC=3001,UG=3e3;class mA extends Ti{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new HG(t)}),this.register(function(t){return new VG(t)}),this.register(function(t){return new $G(t)}),this.register(function(t){return new eH(t)}),this.register(function(t){return new tH(t)}),this.register(function(t){return new XG(t)}),this.register(function(t){return new JG(t)}),this.register(function(t){return new YG(t)}),this.register(function(t){return new KG(t)}),this.register(function(t){return new GG(t)}),this.register(function(t){return new qG(t)}),this.register(function(t){return new WG(t)}),this.register(function(t){return new ZG(t)}),this.register(function(t){return new QG(t)}),this.register(function(t){return new jG(t)}),this.register(function(t){return new nH(t)}),this.register(function(t){return new iH(t)})}load(e,t,i,r){const s=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const h=no.extractUrlBase(e);a=no.resolveURL(h,this.path)}else a=no.extractUrlBase(e);this.manager.itemStart(e);const o=function(h){r?r(h):console.error(h),s.manager.itemError(e),s.manager.itemEnd(e)},l=new hr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(h){try{s.parse(h,a,function(f){t(f),s.manager.itemEnd(e)},o)}catch(f){o(f)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const a={},o={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Qm(new Uint8Array(e.slice(0,4)))===ZN){try{a[Bt.KHR_BINARY_GLTF]=new rH(e)}catch(f){r&&r(f);return}s=JSON.parse(a[Bt.KHR_BINARY_GLTF].content)}else s=JSON.parse(Qm(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new vH(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const f=this.pluginCallbacks[h](l);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[f.name]=f,a[f.name]=!0}if(s.extensionsUsed)for(let h=0;h<s.extensionsUsed.length;++h){const f=s.extensionsUsed[h],p=s.extensionsRequired||[];switch(f){case Bt.KHR_MATERIALS_UNLIT:a[f]=new zG;break;case Bt.KHR_DRACO_MESH_COMPRESSION:a[f]=new sH(s,this.dracoLoader);break;case Bt.KHR_TEXTURE_TRANSFORM:a[f]=new aH;break;case Bt.KHR_MESH_QUANTIZATION:a[f]=new oH;break;default:p.indexOf(f)>=0&&o[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(a),l.setPlugins(o),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function OG(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Bt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class jG{constructor(e){this.parser=e,this.name=Bt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let h;const f=new Ue(16777215);l.color!==void 0&&f.setRGB(l.color[0],l.color[1],l.color[2],na);const p=l.range!==void 0?l.range:0;switch(l.type){case"directional":h=new oA(f),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new aA(f),h.distance=p;break;case"spot":h=new sA(f),h.distance=p,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,h.angle=l.spot.outerConeAngle,h.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return h.position.set(0,0,0),h.decay=2,Vs(h,l),l.intensity!==void 0&&(h.intensity=l.intensity),h.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(h),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return i._getNodeRef(t.cache,o,l)})}}class zG{constructor(){this.name=Bt.KHR_MATERIALS_UNLIT}getMaterialType(){return lr}extendParams(e,t,i){const r=[];e.color=new Ue(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],na),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,sl))}return Promise.all(r)}}class GG{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class HG{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ae(o,o)}return Promise.all(s)}}class VG{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dr}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class WG{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class XG{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ue(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];if(a.sheenColorFactor!==void 0){const o=a.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],na)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,sl)),a.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class JG{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class YG{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new Ue().setRGB(o[0],o[1],o[2],na),Promise.all(s)}}class KG{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dr}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class qG{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new Ue().setRGB(o[0],o[1],o[2],na),a.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,sl)),Promise.all(s)}}class QG{constructor(e){this.parser=e,this.name=Bt.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(s)}}class ZG{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Dr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class $G{constructor(e){this.parser=e,this.name=Bt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class eH{constructor(e){this.parser=e,this.name=Bt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let l=i.textureLoader;if(o.uri){const h=i.options.manager.getHandler(o.uri);h!==null&&(l=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class tH{constructor(e){this.parser=e,this.name=Bt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let l=i.textureLoader;if(o.uri){const h=i.options.manager.getHandler(o.uri);h!==null&&(l=h)}return this.detectSupport().then(function(h){if(h)return i.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class nH{constructor(e){this.name=Bt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const l=r.byteOffset||0,h=r.byteLength||0,f=r.count,p=r.byteStride,m=new Uint8Array(o,l,h);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(f,p,m,r.mode,r.filter).then(function(g){return g.buffer}):a.ready.then(function(){const g=new ArrayBuffer(f*p);return a.decodeGltfBuffer(new Uint8Array(g),f,p,m,r.mode,r.filter),g})})}else return null}}class iH{constructor(e){this.name=Bt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const h of r.primitives)if(h.mode!==Mr.TRIANGLES&&h.mode!==Mr.TRIANGLE_STRIP&&h.mode!==Mr.TRIANGLE_FAN&&h.mode!==void 0)return null;const a=i.extensions[this.name].attributes,o=[],l={};for(const h in a)o.push(this.parser.getDependency("accessor",a[h]).then(f=>(l[h]=f,l[h])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(h=>{const f=h.pop(),p=f.isGroup?f.children:[f],m=h[0].count,g=[];for(const y of p){const M=new dt,_=new z,v=new wi,S=new z(1,1,1),A=new WS(y.geometry,y.material,m);for(let E=0;E<m;E++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,E),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,E),l.SCALE&&S.fromBufferAttribute(l.SCALE,E),A.setMatrixAt(E,M.compose(_,v,S));for(const E in l)if(E==="_COLOR_0"){const N=l[E];A.instanceColor=new Ml(N.array,N.itemSize,N.normalized)}else E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&y.geometry.setAttribute(E,l[E]);Ft.prototype.copy.call(A,y),this.parser.assignFinalMaterial(A),g.push(A)}return f.isGroup?(f.clear(),f.add(...g),f):g[0]}))}}const ZN="glTF",fd=12,AC={JSON:1313821514,BIN:5130562};class rH{constructor(e){this.name=Bt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,fd);if(this.header={magic:Qm(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==ZN)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-fd,r=new DataView(e,fd);let s=0;for(;s<i;){const a=r.getUint32(s,!0);s+=4;const o=r.getUint32(s,!0);if(s+=4,o===AC.JSON){const l=new Uint8Array(e,fd+s,a);this.content=Qm(l)}else if(o===AC.BIN){const l=fd+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class sH{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Bt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},h={};for(const f in a){const p=p_[f]||f.toLowerCase();o[p]=a[f]}for(const f in e.attributes){const p=p_[f]||f.toLowerCase();if(a[f]!==void 0){const m=i.accessors[e.attributes[f]],g=Zc[m.componentType];h[p]=g.name,l[p]=m.normalized===!0}}return t.getDependency("bufferView",s).then(function(f){return new Promise(function(p,m){r.decodeDracoFile(f,function(g){for(const y in g.attributes){const M=g.attributes[y],_=l[y];_!==void 0&&(M.normalized=_)}p(g)},o,h,na,m)})})}}class aH{constructor(){this.name=Bt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class oH{constructor(){this.name=Bt.KHR_MESH_QUANTIZATION}}class $N extends Eu{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=i[s+a];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,h=o*3,f=r-t,p=(i-t)/f,m=p*p,g=m*p,y=e*h,M=y-h,_=-2*g+3*m,v=g-m,S=1-_,A=v-m+p;for(let E=0;E!==o;E++){const N=a[M+E+o],T=a[M+E+l]*f,P=a[y+E+o],L=a[y+E]*f;s[E]=S*N+A*T+_*P+v*L}return s}}const lH=new wi;class cH extends $N{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return lH.fromArray(s).normalize().toArray(s),s}}const Mr={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Zc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},wC={9728:Mn,9729:mn,9984:sh,9985:yg,9986:qc,9987:Ts},MC={33071:oi,33648:lu,10497:oo},uy={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},p_={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...FG>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ba={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},uH={CUBICSPLINE:void 0,LINEAR:wl,STEP:uu},dy={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function dH(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Uh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Cs})),n.DefaultMaterial}function Go(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Vs(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function hH(n,e,t){let i=!1,r=!1,s=!1;for(let h=0,f=e.length;h<f;h++){const p=e[h];if(p.POSITION!==void 0&&(i=!0),p.NORMAL!==void 0&&(r=!0),p.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const a=[],o=[],l=[];for(let h=0,f=e.length;h<f;h++){const p=e[h];if(i){const m=p.POSITION!==void 0?t.getDependency("accessor",p.POSITION):n.attributes.position;a.push(m)}if(r){const m=p.NORMAL!==void 0?t.getDependency("accessor",p.NORMAL):n.attributes.normal;o.push(m)}if(s){const m=p.COLOR_0!==void 0?t.getDependency("accessor",p.COLOR_0):n.attributes.color;l.push(m)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(h){const f=h[0],p=h[1],m=h[2];return i&&(n.morphAttributes.position=f),r&&(n.morphAttributes.normal=p),s&&(n.morphAttributes.color=m),n.morphTargetsRelative=!0,n})}function fH(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function pH(n){let e;const t=n.extensions&&n.extensions[Bt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+hy(t.attributes):e=n.indices+":"+hy(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+hy(n.targets[i]);return e}function hy(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function m_(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function mH(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const gH=new dt;class vH{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new OG,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new mN(this.options.manager):this.textureLoader=new wN(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new hr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const o={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:i,userData:{}};return Go(s,o,r),Vs(o,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){for(const l of o.scenes)l.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[h,f]of a.children.entries())s(f,o.children[h])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Bt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){i.load(no.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const a=uy[r.type],o=Zc[r.componentType],l=r.normalized===!0,h=new o(r.count*a);return Promise.resolve(new Ut(h,a,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=uy[r.type],h=Zc[r.componentType],f=h.BYTES_PER_ELEMENT,p=f*l,m=r.byteOffset||0,g=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,y=r.normalized===!0;let M,_;if(g&&g!==p){const v=Math.floor(m/g),S="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let A=t.cache.get(S);A||(M=new h(o,v*g,r.count*g/f),A=new Bh(M,g/f),t.cache.add(S,A)),_=new lo(A,l,m%g/f,y)}else o===null?M=new h(r.count*l):M=new h(o,m,r.count*l),_=new Ut(M,l,y);if(r.sparse!==void 0){const v=uy.SCALAR,S=Zc[r.sparse.indices.componentType],A=r.sparse.indices.byteOffset||0,E=r.sparse.values.byteOffset||0,N=new S(a[1],A,r.sparse.count*v),T=new h(a[2],E,r.sparse.count*l);o!==null&&(_=new Ut(_.array.slice(),_.itemSize,_.normalized));for(let P=0,L=N.length;P<L;P++){const R=N[P];if(_.setX(R,T[P*l]),l>=2&&_.setY(R,T[P*l+1]),l>=3&&_.setZ(R,T[P*l+2]),l>=4&&_.setW(R,T[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const l=i.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,i){const r=this,s=this.json,a=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const h=this.loadImageSource(t,i).then(function(f){f.flipY=!1,f.name=a.name||o.name||"",f.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(f.name=o.uri);const m=(s.samplers||{})[a.sampler]||{};return f.magFilter=wC[m.magFilter]||mn,f.minFilter=wC[m.minFilter]||Ts,f.wrapS=MC[m.wrapS]||oo,f.wrapT=MC[m.wrapT]||oo,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[l]=h,h}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(p=>p.clone());const a=r.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",h=!1;if(a.bufferView!==void 0)l=i.getDependency("bufferView",a.bufferView).then(function(p){h=!0;const m=new Blob([p],{type:a.mimeType});return l=o.createObjectURL(m),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const f=Promise.resolve(l).then(function(p){return new Promise(function(m,g){let y=m;t.isImageBitmapLoader===!0&&(y=function(M){const _=new yn(M);_.needsUpdate=!0,m(_)}),t.load(no.resolveURL(p,s.path),y,void 0,g)})}).then(function(p){return h===!0&&o.revokeObjectURL(l),Vs(p,a),p.userData.mimeType=a.mimeType||mH(a.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),p});return this.sourceCache[e]=f,f}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(a){if(!a)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(a=a.clone(),a.channel=i.texCoord),s.extensions[Bt.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[Bt.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[Bt.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===SC?sl:na),"colorSpace"in a?a.colorSpace=r:a.encoding=r===sl?SC:UG),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new Tg,Kn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(o,l)),i=l}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new Ci,Kn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(o,l)),i=l}if(r||s||a){let o="ClonedMaterial:"+i.uuid+":";r&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=i.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Uh}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let a;const o={},l=s.extensions||{},h=[];if(l[Bt.KHR_MATERIALS_UNLIT]){const p=r[Bt.KHR_MATERIALS_UNLIT];a=p.getMaterialType(),h.push(p.extendParams(o,s,t))}else{const p=s.pbrMetallicRoughness||{};if(o.color=new Ue(1,1,1),o.opacity=1,Array.isArray(p.baseColorFactor)){const m=p.baseColorFactor;o.color.setRGB(m[0],m[1],m[2],na),o.opacity=m[3]}p.baseColorTexture!==void 0&&h.push(t.assignTexture(o,"map",p.baseColorTexture,sl)),o.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,o.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(o,"metalnessMap",p.metallicRoughnessTexture)),h.push(t.assignTexture(o,"roughnessMap",p.metallicRoughnessTexture))),a=this._invokeOne(function(m){return m.getMaterialType&&m.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&&m.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=Kr);const f=s.alphaMode||dy.OPAQUE;if(f===dy.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,f===dy.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==lr&&(h.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new Ae(1,1),s.normalTexture.scale!==void 0)){const p=s.normalTexture.scale;o.normalScale.set(p,p)}if(s.occlusionTexture!==void 0&&a!==lr&&(h.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==lr){const p=s.emissiveFactor;o.emissive=new Ue().setRGB(p[0],p[1],p[2],na)}return s.emissiveTexture!==void 0&&a!==lr&&h.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,sl)),Promise.all(h).then(function(){const p=new a(o);return s.name&&(p.name=s.name),Vs(p,s),t.associations.set(p,{materials:e}),s.extensions&&Go(r,p,s),p})}createUniqueName(e){const t=kt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(o){return i[Bt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return EC(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const h=e[o],f=pH(h),p=r[f];if(p)a.push(p.promise);else{let m;h.extensions&&h.extensions[Bt.KHR_DRACO_MESH_COMPRESSION]?m=s(h):m=EC(new Mt,h,t),r[f]={primitive:h,promise:m},a.push(m)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],a=s.primitives,o=[];for(let l=0,h=a.length;l<h;l++){const f=a[l].material===void 0?dH(this.cache):this.getDependency("material",a[l].material);o.push(f)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const h=l.slice(0,l.length-1),f=l[l.length-1],p=[];for(let g=0,y=f.length;g<y;g++){const M=f[g],_=a[g];let v;const S=h[g];if(_.mode===Mr.TRIANGLES||_.mode===Mr.TRIANGLE_STRIP||_.mode===Mr.TRIANGLE_FAN||_.mode===void 0)v=s.isSkinnedMesh===!0?new VS(M,S):new Un(M,S),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),_.mode===Mr.TRIANGLE_STRIP?v.geometry=_C(v.geometry,RS):_.mode===Mr.TRIANGLE_FAN&&(v.geometry=_C(v.geometry,Xm));else if(_.mode===Mr.LINES)v=new is(M,S);else if(_.mode===Mr.LINE_STRIP)v=new la(M,S);else if(_.mode===Mr.LINE_LOOP)v=new XS(M,S);else if(_.mode===Mr.POINTS)v=new JS(M,S);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(v.geometry.morphAttributes).length>0&&fH(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),Vs(v,s),_.extensions&&Go(r,v,_),t.assignFinalMaterial(v),p.push(v)}for(let g=0,y=p.length;g<y;g++)t.associations.set(p[g],{meshes:e,primitives:g});if(p.length===1)return s.extensions&&Go(r,p[0],s),p[0];const m=new qs;s.extensions&&Go(r,m,s),t.associations.set(m,{meshes:e});for(let g=0,y=p.length;g<y;g++)m.add(p[g]);return m})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Wn(Hr.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Au(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Vs(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),a=r,o=[],l=[];for(let h=0,f=a.length;h<f;h++){const p=a[h];if(p){o.push(p);const m=new dt;s!==null&&m.fromArray(s.array,h*16),l.push(m)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new Lh(o,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,a=[],o=[],l=[],h=[],f=[];for(let p=0,m=r.channels.length;p<m;p++){const g=r.channels[p],y=r.samplers[g.sampler],M=g.target,_=M.node,v=r.parameters!==void 0?r.parameters[y.input]:y.input,S=r.parameters!==void 0?r.parameters[y.output]:y.output;M.node!==void 0&&(a.push(this.getDependency("node",_)),o.push(this.getDependency("accessor",v)),l.push(this.getDependency("accessor",S)),h.push(y),f.push(M))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(h),Promise.all(f)]).then(function(p){const m=p[0],g=p[1],y=p[2],M=p[3],_=p[4],v=[];for(let S=0,A=m.length;S<A;S++){const E=m[S],N=g[S],T=y[S],P=M[S],L=_[S];if(E===void 0)continue;E.updateMatrix&&E.updateMatrix();const R=i._createAnimationTracks(E,N,T,P,L);if(R)for(let b=0;b<R.length;b++)v.push(R[b])}return new pu(s,void 0,v)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const a=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,h=r.weights.length;l<h;l++)o.morphTargetInfluences[l]=r.weights[l]}),a})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),a=[],o=r.children||[];for(let h=0,f=o.length;h<f;h++)a.push(i.getDependency("node",o[h]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(a),l]).then(function(h){const f=h[0],p=h[1],m=h[2];m!==null&&f.traverse(function(g){g.isSkinnedMesh&&g.bind(m,gH)});for(let g=0,y=p.length;g<y;g++)f.add(p[g]);return f})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],a=s.name?r.createUniqueName(s.name):"",o=[],l=r._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(r.getDependency("camera",s.camera).then(function(h){return r._getNodeRef(r.cameraCache,s.camera,h)})),r._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){o.push(h)}),this.nodeCache[e]=Promise.all(o).then(function(h){let f;if(s.isBone===!0?f=new Cg:h.length>1?f=new qs:h.length===1?f=h[0]:f=new Ft,f!==h[0])for(let p=0,m=h.length;p<m;p++)f.add(h[p]);if(s.name&&(f.userData.name=s.name,f.name=a),Vs(f,s),s.extensions&&Go(i,f,s),s.matrix!==void 0){const p=new dt;p.fromArray(s.matrix),f.applyMatrix4(p)}else s.translation!==void 0&&f.position.fromArray(s.translation),s.rotation!==void 0&&f.quaternion.fromArray(s.rotation),s.scale!==void 0&&f.scale.fromArray(s.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new qs;i.name&&(s.name=r.createUniqueName(i.name)),Vs(s,i),i.extensions&&Go(t,s,i);const a=i.nodes||[],o=[];for(let l=0,h=a.length;l<h;l++)o.push(r.getDependency("node",a[l]));return Promise.all(o).then(function(l){for(let f=0,p=l.length;f<p;f++)s.add(l[f]);const h=f=>{const p=new Map;for(const[m,g]of r.associations)(m instanceof Kn||m instanceof yn)&&p.set(m,g);return f.traverse(m=>{const g=r.associations.get(m);g!=null&&p.set(m,g)}),p};return r.associations=h(s),s})}_createAnimationTracks(e,t,i,r,s){const a=[],o=e.name?e.name:e.uuid,l=[];Ba[s.path]===Ba.weights?e.traverse(function(m){m.morphTargetInfluences&&l.push(m.name?m.name:m.uuid)}):l.push(o);let h;switch(Ba[s.path]){case Ba.weights:h=Cl;break;case Ba.rotation:h=co;break;case Ba.position:case Ba.scale:h=Tl;break;default:switch(i.itemSize){case 1:h=Cl;break;case 2:case 3:default:h=Tl;break}break}const f=r.interpolation!==void 0?uH[r.interpolation]:wl,p=this._getArrayFromAccessor(i);for(let m=0,g=l.length;m<g;m++){const y=new h(l[m]+"."+Ba[s.path],t.array,p,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(y),a.push(y)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=m_(t.constructor),r=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof co?cH:$N;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function yH(n,e,t){const i=e.attributes,r=new Mi;if(i.POSITION!==void 0){const o=t.json.accessors[i.POSITION],l=o.min,h=o.max;if(l!==void 0&&h!==void 0){if(r.set(new z(l[0],l[1],l[2]),new z(h[0],h[1],h[2])),o.normalized){const f=m_(Zc[o.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new z,l=new z;for(let h=0,f=s.length;h<f;h++){const p=s[h];if(p.POSITION!==void 0){const m=t.json.accessors[p.POSITION],g=m.min,y=m.max;if(g!==void 0&&y!==void 0){if(l.setX(Math.max(Math.abs(g[0]),Math.abs(y[0]))),l.setY(Math.max(Math.abs(g[1]),Math.abs(y[1]))),l.setZ(Math.max(Math.abs(g[2]),Math.abs(y[2]))),m.normalized){const M=m_(Zc[m.componentType]);l.multiplyScalar(M)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}n.boundingBox=r;const a=new ci;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=a}function EC(n,e,t){const i=e.attributes,r=[];function s(a,o){return t.getDependency("accessor",a).then(function(l){n.setAttribute(o,l)})}for(const a in i){const o=p_[a]||a.toLowerCase();o in n.attributes||r.push(s(i[a],o))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});r.push(a)}return Vs(n,e),yH(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?hH(n,e.targets,t):n})}const fy=new WeakMap;class xH extends Ti{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new hr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,o).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const h=t.attributeTypes[l];h.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=h.name)}const i=JSON.stringify(t);if(fy.has(e)){const l=fy.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(s,a).then(l=>(r=l,new Promise((h,f)=>{r._callbacks[s]={resolve:h,reject:f},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),fy.set(e,{key:i,promise:o}),o}_createGeometry(e){const t=new Mt;e.index&&t.setIndex(new Ut(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,a=r.array,o=r.itemSize;t.setAttribute(s,new Ut(a,o))}return t}_loadLibrary(e,t){const i=new hr(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=_H.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function _H(){let n,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":n=o.decoderConfig,e=new Promise(function(f){n.onModuleLoaded=function(p){f({draco:p})},DracoDecoderModule(n)});break;case"decode":const l=o.buffer,h=o.taskConfig;e.then(f=>{const p=f.draco,m=new p.Decoder,g=new p.DecoderBuffer;g.Init(new Int8Array(l),l.byteLength);try{const y=t(p,m,g,h),M=y.attributes.map(_=>_.array.buffer);y.index&&M.push(y.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:y},M)}catch(y){console.error(y),self.postMessage({type:"error",id:o.id,error:y.message})}finally{p.destroy(g),p.destroy(m)}});break}};function t(a,o,l,h){const f=h.attributeIDs,p=h.attributeTypes;let m,g;const y=o.GetEncodedGeometryType(l);if(y===a.TRIANGULAR_MESH)m=new a.Mesh,g=o.DecodeBufferToMesh(l,m);else if(y===a.POINT_CLOUD)m=new a.PointCloud,g=o.DecodeBufferToPointCloud(l,m);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!g.ok()||m.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+g.error_msg());const M={index:null,attributes:[]};for(const _ in f){const v=self[p[_]];let S,A;if(h.useUniqueIDs)A=f[_],S=o.GetAttributeByUniqueId(m,A);else{if(A=o.GetAttributeId(m,a[f[_]]),A===-1)continue;S=o.GetAttribute(m,A)}M.attributes.push(r(a,o,m,_,v,S))}return y===a.TRIANGULAR_MESH&&(M.index=i(a,o,m)),a.destroy(m),M}function i(a,o,l){const f=l.num_faces()*3,p=f*4,m=a._malloc(p);o.GetTrianglesUInt32Array(l,p,m);const g=new Uint32Array(a.HEAPF32.buffer,m,f).slice();return a._free(m),{array:g,itemSize:1}}function r(a,o,l,h,f,p){const m=p.num_components(),y=l.num_points()*m,M=y*f.BYTES_PER_ELEMENT,_=s(a,f),v=a._malloc(M);o.GetAttributeDataArrayForAllPoints(l,p,_,M,v);const S=new f(a.HEAPF32.buffer,v,y).slice();return a._free(v),{name:h,array:S,itemSize:m}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let Yp;const py=()=>{if(Yp)return Yp;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const a=WebAssembly.instantiate(o(r),{}).then(p=>{s=p.instance,s.exports.__wasm_call_ctors()});function o(p){const m=new Uint8Array(p.length);for(let y=0;y<p.length;++y){const M=p.charCodeAt(y);m[y]=M>96?M-71:M>64?M-65:M>47?M+4:M>46?63:62}let g=0;for(let y=0;y<p.length;++y)m[g++]=m[y]<60?i[m[y]]:(m[y]-60)*64+m[++y];return m.buffer.slice(0,g)}function l(p,m,g,y,M,_){const v=s.exports.sbrk,S=g+3&-4,A=v(S*y),E=v(M.length),N=new Uint8Array(s.exports.memory.buffer);N.set(M,E);const T=p(A,g,y,E,M.length);if(T===0&&_&&_(A,S,y),m.set(N.subarray(A,A+g*y)),v(A-v(0)),T!==0)throw new Error(`Malformed buffer data: ${T}`)}const h={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},f={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Yp={ready:a,supported:!0,decodeVertexBuffer(p,m,g,y,M){l(s.exports.meshopt_decodeVertexBuffer,p,m,g,y,s.exports[h[M]])},decodeIndexBuffer(p,m,g,y){l(s.exports.meshopt_decodeIndexBuffer,p,m,g,y)},decodeIndexSequence(p,m,g,y){l(s.exports.meshopt_decodeIndexSequence,p,m,g,y)},decodeGltfBuffer(p,m,g,y,M,_){l(s.exports[f[M]],p,m,g,y,s.exports[h[_]])}},Yp};let Kp=null,eP="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function tP(n=!0,e=!0,t){return i=>{t&&t(i),n&&(Kp||(Kp=new xH),Kp.setDecoderPath(typeof n=="string"?n:eP),i.setDRACOLoader(Kp)),e&&i.setMeshoptDecoder(typeof py=="function"?py():py)}}const zh=(n,e,t,i)=>jh(mA,n,tP(e,t,i));zh.preload=(n,e,t,i)=>jh.preload(mA,n,tP(e,t,i));zh.clear=n=>jh.clear(mA,n);zh.setDecoderPath=n=>{eP=n};const nP=new URL("/assets/3d_model-Ub7XXjQc.glb",import.meta.url).href,gA={dpr:Math.min(window.devicePixelRatio||2,2),eyeContact:{enabled:!0,useWebcam:!0,smoothing:.08,webcamYawSensitivity:.3,webcamPitchSensitivity:.2,microMovementAmount:.02,microMovementSpeed:.5,primaryYaw:.12,primaryPitch:.08,secondaryYaw:.06,secondaryPitch:.04,primarySpeed:.4,secondarySpeed:.7,maxYaw:.4,maxPitch:.3},lipSync:{amplitudeSensitivity:8,smoothing:.22,maxValue:1,jawOpenMax:.4,visemeSpeed:14,jawEnabled:!0,mouthOpenTargets:["jawOpen","mouthOpen","viseme_aa","viseme_O","aa","oh"],visemeTargets:{A:["viseme_aa","aa","mouthOpen"],O:["viseme_O","viseme_oh","oh","oo"],E:["viseme_E","viseme_ee","ee","ih"],I:["viseme_I","viseme_ih","ih"],U:["viseme_U","viseme_uu","uu"],CH:["viseme_CH","ch"],PP:["viseme_PP","viseme_pp","pp","mbp"],FF:["viseme_FF","viseme_ff","ff","fv"],TH:["viseme_TH","th"],SS:["viseme_SS","viseme_ss","ss"],RR:["viseme_RR","rr"],NN:["viseme_nn","nn"],DD:["viseme_DD","dd"],kk:["viseme_kk","kk"]}},animation:{blinkInterval:[2.5,5],blinkDuration:.12,breathSpeed:1,idleSwayAmount:0}},_t={initialized:!1,time:0,webcamActive:!1,faceDetected:!1,facePosition:{x:0,y:0},targetYaw:0,targetPitch:0,videoElement:null,faceMesh:null,camera:null,lastFaceTime:0,debugMode:!0};let my=null,gy=null;const SH=async()=>{try{return my||(my=await bM(()=>import("./face_mesh-BNXwfNsh.js").then(n=>n.f),[])),gy||(gy=await bM(()=>import("./camera_utils-BDQ-n0XP.js").then(n=>n.c),[])),{faceMeshModule:my,cameraUtilsModule:gy}}catch(n){return console.error("[EyeContact] Failed to load MediaPipe modules:",n),null}},AH=n=>{if(n.multiFaceLandmarks&&n.multiFaceLandmarks.length>0){const t=n.multiFaceLandmarks[0][1],i=(t.x-.5)*2,r=(t.y-.5)*2;_t.faceDetected=!0,_t.facePosition={x:i,y:r},_t.lastFaceTime=Date.now();const s=gA.eyeContact;_t.targetYaw=-i*s.webcamYawSensitivity,_t.targetPitch=r*s.webcamPitchSensitivity,Math.random()<.02&&console.log("[EyeContact] Face detected - X:",i.toFixed(2),"Y:",r.toFixed(2),"TargetYaw:",_t.targetYaw.toFixed(3),"TargetPitch:",_t.targetPitch.toFixed(3))}else Date.now()-_t.lastFaceTime>500&&(_t.faceDetected=!1)},iP=async()=>{if(!_t.initialized){_t.initialized=!0,_t.time=0,console.log("[EyeContact]  Initializing WEBCAM-based eye contact tracking...");try{const n=await SH();if(!n){console.warn("[EyeContact] MediaPipe modules not available, using fallback animation");return}const{FaceMesh:e}=n.faceMeshModule,{Camera:t}=n.cameraUtilsModule,i=document.createElement("video");i.setAttribute("playsinline",""),i.setAttribute("autoplay",""),i.style.display="none",i.style.width="320px",i.style.height="240px",document.body.appendChild(i),_t.videoElement=i;const r=new e({locateFile:a=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${a}`});r.setOptions({maxNumFaces:1,refineLandmarks:!1,minDetectionConfidence:.5,minTrackingConfidence:.5}),r.onResults(AH),_t.faceMesh=r;const s=new t(i,{onFrame:async()=>{_t.faceMesh&&_t.webcamActive&&await _t.faceMesh.send({image:i})},width:320,height:240});_t.camera=s,await s.start(),_t.webcamActive=!0,console.log("[EyeContact]  WEBCAM face tracking ACTIVE! Avatar will follow your face position.")}catch(n){console.error("[EyeContact] Failed to initialize webcam tracking:",n),console.log("[EyeContact] Using fallback animation mode"),_t.webcamActive=!1}}},vA=()=>{console.log("[EyeContact] Cleaning up webcam resources..."),_t.camera&&(_t.camera.stop(),_t.camera=null),_t.faceMesh&&(_t.faceMesh.close(),_t.faceMesh=null),_t.videoElement&&(_t.videoElement.remove(),_t.videoElement=null),_t.initialized=!1,_t.webcamActive=!1,_t.faceDetected=!1,_t.time=0,console.log("[EyeContact] System cleaned up")};function wH({speaking:n,audioLevel:e,theme:t}){const i=zh(nP),{scene:r}=i,s=B.useRef(),a=B.useRef({}),o=B.useRef({}),l=B.useRef({});B.useRef({x:0,y:0});const h=B.useRef([]),f=B.useRef({}),p=B.useRef(!1),m=B.useRef(0),g=B.useRef(0),y=B.useRef(null),M=B.useRef(!1),_=B.useRef(!1),v=B.useRef({time:0,blinkTimer:Math.random()*3+2,isBlinking:!1,blinkProgress:0,breathPhase:0,lastLogTime:0,loggedInit:!1});B.useEffect(()=>(_.current||(_.current=!0,console.log("[GLBAvatar]  Initializing WEBCAM-based eye contact tracking"),iP()),()=>{vA()}),[]),B.useEffect(()=>{if(!r||M.current)return;M.current=!0;const E=a.current,N=[],T={};r.traverse(R=>{R.isBone&&(T[R.name]=R)});const P=Object.keys(T);console.log("[Avatar] Found bones:",P.length),console.log("[Avatar] All bone names:",P),P.forEach(R=>{const b=R.toLowerCase(),D=T[R];(b==="head"||b.endsWith("head")||b.includes("head")&&!b.includes("top")&&!b.includes("end"))&&(E.head||(E.head=D,o.current.head=D.rotation.clone(),console.log("[Avatar] Found Head bone:",R))),(b==="neck"||b.endsWith("neck")||b.includes("neck"))&&(E.neck||(E.neck=D,o.current.neck=D.rotation.clone(),console.log("[Avatar] Found Neck bone:",R))),(b==="jaw"||b.includes("jaw")||b.includes("chin")||b.includes("mandible")||b.includes("lower_lip")||b.includes("lowerlip")||b.includes("mouth")||b.endsWith("_jaw")||b.endsWith(":jaw")||b.endsWith(".jaw"))&&!E.jaw&&(E.jaw=D,o.current.jaw=D.rotation.clone(),l.current.jaw=D.scale.clone(),y.current={x:D.rotation.x,y:D.rotation.y,z:D.rotation.z},console.log("[Avatar] Found Jaw/Chin bone:",R,"Rest position:",y.current)),(b.includes("left")&&b.includes("arm")&&!b.includes("fore")&&!b.includes("lower")&&!b.includes("shoulder")||b.includes("left")&&b.includes("upper")&&!b.includes("shoulder")||b==="leftarm"||b.endsWith(":leftarm")||b.endsWith("_leftarm")||b.includes("l_arm")&&!b.includes("fore")&&!b.includes("shoulder")&&!b.includes("lower")||b.includes("arm_l")&&!b.includes("fore")&&!b.includes("shoulder")&&!b.includes("lower")||b.includes("arm.l")&&!b.includes("fore")&&!b.includes("shoulder")&&!b.includes("lower"))&&!E.leftArm&&(E.leftArm=D,o.current.leftArm=D.rotation.clone(),console.log("[Avatar] Found Left Upper Arm bone:",R)),(b.includes("right")&&b.includes("arm")&&!b.includes("fore")&&!b.includes("lower")&&!b.includes("shoulder")||b.includes("right")&&b.includes("upper")&&!b.includes("shoulder")||b==="rightarm"||b.endsWith(":rightarm")||b.endsWith("_rightarm")||b.includes("r_arm")&&!b.includes("fore")&&!b.includes("shoulder")&&!b.includes("lower")||b.includes("arm_r")&&!b.includes("fore")&&!b.includes("shoulder")&&!b.includes("lower")||b.includes("arm.r")&&!b.includes("fore")&&!b.includes("shoulder")&&!b.includes("lower"))&&!E.rightArm&&(E.rightArm=D,o.current.rightArm=D.rotation.clone(),console.log("[Avatar] Found Right Upper Arm bone:",R)),(b.includes("left")&&(b.includes("fore")||b.includes("lower"))&&b.includes("arm")||b==="leftforearm"||b.endsWith(":leftforearm")||b.includes("forearm")&&b.includes("l")||b.includes("l_forearm")||b.includes("forearm_l")||b.includes("forearm.l")||b.includes("elbow")&&b.includes("left"))&&!E.leftForearm&&(E.leftForearm=D,o.current.leftForearm=D.rotation.clone(),console.log("[Avatar] Found Left Forearm bone:",R)),(b.includes("right")&&(b.includes("fore")||b.includes("lower"))&&b.includes("arm")||b==="rightforearm"||b.endsWith(":rightforearm")||b.includes("forearm")&&b.includes("r")&&!b.includes("l")||b.includes("r_forearm")||b.includes("forearm_r")||b.includes("forearm.r")||b.includes("elbow")&&b.includes("right"))&&!E.rightForearm&&(E.rightForearm=D,o.current.rightForearm=D.rotation.clone(),console.log("[Avatar] Found Right Forearm bone:",R)),(b.includes("left")&&b.includes("hand")&&!b.includes("thumb")&&!b.includes("index")&&!b.includes("middle")&&!b.includes("ring")&&!b.includes("pinky")||b==="lefthand"||b.endsWith(":lefthand")||b.includes("hand_l")||b.includes("hand.l")||b.includes("l_hand"))&&!E.leftHand&&(E.leftHand=D,o.current.leftHand=D.rotation.clone(),console.log("[Avatar] Found Left Hand bone:",R)),(b.includes("right")&&b.includes("hand")&&!b.includes("thumb")&&!b.includes("index")&&!b.includes("middle")&&!b.includes("ring")&&!b.includes("pinky")||b==="righthand"||b.endsWith(":righthand")||b.includes("hand_r")||b.includes("hand.r")||b.includes("r_hand"))&&!E.rightHand&&(E.rightHand=D,o.current.rightHand=D.rotation.clone(),console.log("[Avatar] Found Right Hand bone:",R)),(b==="spine"||b.includes("spine"))&&(E.spine||(E.spine=D,o.current.spine=D.rotation.clone()))});const L=f.current;r.traverse(R=>{(R.isMesh||R.isSkinnedMesh)&&R.morphTargetDictionary&&Object.keys(R.morphTargetDictionary).length>0&&(N.push(R),p.current=!0,Object.keys(R.morphTargetDictionary).forEach(b=>{const D=b.toLowerCase();L[D]||(L[D]=b)})),R.name&&R.name.toLowerCase().includes("head")&&(l.current.head=R.scale.clone(),a.current.headMesh=R,console.log("[Avatar] Found head mesh for fallback lip sync:",R.name))}),h.current=N,console.log("[Avatar] Found morph targets:",Object.keys(L)),E.leftArm?(E.leftArm.rotation.set(1.2,0,.3),console.log("[Avatar] Left Arm posed - X rotation")):console.log("[Avatar] WARNING: Left Arm bone NOT FOUND"),E.rightArm?(E.rightArm.rotation.set(1.2,0,-.3),console.log("[Avatar] Right Arm posed - X rotation")):console.log("[Avatar] WARNING: Right Arm bone NOT FOUND"),E.leftForearm&&E.leftForearm.rotation.set(.3,0,0),E.rightForearm&&E.rightForearm.rotation.set(.3,0,0),E.leftHand&&E.leftHand.rotation.set(0,0,0),E.rightHand&&E.rightHand.rotation.set(0,0,0),E.head&&E.head.rotation.set(0,0,0),E.neck&&E.neck.rotation.set(0,0,0),console.log("[Avatar] Initialized - Head:",!!E.head,"Neck:",!!E.neck,"Arms:",!!E.leftArm&&!!E.rightArm,"Forearms:",!!E.leftForearm&&!!E.rightForearm,"Hands:",!!E.leftHand&&!!E.rightHand,"Jaw:",!!E.jaw,"HeadMesh:",!!E.headMesh,"HasMorphs:",p.current)},[r]);const S=B.useCallback((E,N)=>{h.current.forEach(T=>{var L,R,b;let P=(L=T.morphTargetDictionary)==null?void 0:L[E];P===void 0&&(P=(R=T.morphTargetDictionary)==null?void 0:R[E.toLowerCase()]),P===void 0&&f.current[E.toLowerCase()]&&(P=(b=T.morphTargetDictionary)==null?void 0:b[f.current[E.toLowerCase()]]),P!==void 0&&T.morphTargetInfluences&&(T.morphTargetInfluences[P]=Math.max(0,Math.min(1,N)))})},[]),A=B.useCallback((E,N)=>{let T=!1;for(const P of E)if(h.current.forEach(L=>{var b;const R=(b=L.morphTargetDictionary)==null?void 0:b[P];R!==void 0&&L.morphTargetInfluences&&(L.morphTargetInfluences[R]=Math.max(0,Math.min(1,N)),T=!0)}),T)break},[]);return mG((E,N)=>{var K,q,ue,U;const T=v.current,P=Math.min(N,.1);T.time+=P;const L=a.current,R=gA,b=R.eyeContact,D=R.lipSync;if(!T.loggedInit&&L.head&&(T.loggedInit=!0,console.log("[GLBAvatar]  Animation loop ACTIVE - Head bone:",!!L.head,"EyeContact:",b.enabled,"WebcamTracking:",b.useWebcam)),T.time-T.lastLogTime>5){T.lastLogTime=T.time;const j=_t.webcamActive&&_t.faceDetected?"WEBCAM":"FALLBACK";console.log("[useFrame] Eye Contact Mode:",j,"| HeadYaw:",((K=L.head)==null?void 0:K.rotation.y.toFixed(3))||"N/A","| HeadPitch:",((q=L.head)==null?void 0:q.rotation.x.toFixed(3))||"N/A","| FacePos:",((U=(ue=_t.facePosition)==null?void 0:ue.x)==null?void 0:U.toFixed(2))||"N/A")}if(s.current&&(s.current.position.y=-1.35+Math.sin(T.breathPhase)*.002,s.current.rotation.y=Math.sin(T.time*.3)*R.animation.idleSwayAmount),T.breathPhase+=P*R.animation.breathSpeed,L.leftArm&&L.leftArm.rotation.set(1.2,0,.3),L.rightArm&&L.rightArm.rotation.set(1.2,0,-.3),L.leftForearm&&L.leftForearm.rotation.set(.3,0,0),L.rightForearm&&L.rightForearm.rotation.set(.3,0,0),L.leftHand&&L.leftHand.rotation.set(0,0,0),L.rightHand&&L.rightHand.rotation.set(0,0,0),L.head){_t.time+=P;const j=_t.time;let W=0,Y=0;if(_t.webcamActive&&_t.faceDetected){W=_t.targetYaw,Y=_t.targetPitch;const oe=Math.sin(j*b.microMovementSpeed*2.1)*b.microMovementAmount+Math.sin(j*b.microMovementSpeed*3.7)*b.microMovementAmount*.5,ge=Math.cos(j*b.microMovementSpeed*1.8)*b.microMovementAmount*.7;W+=oe,Y+=ge}else{const oe=Math.sin(j*b.primarySpeed)*b.primaryYaw,ge=Math.cos(j*b.primarySpeed*.7)*b.primaryPitch,Te=Math.sin(j*b.secondarySpeed+1.5)*b.secondaryYaw+Math.sin(j*b.secondarySpeed*1.8+3)*b.secondaryYaw*.4,ce=Math.cos(j*b.secondarySpeed*.9+.8)*b.secondaryPitch+Math.sin(j*b.secondarySpeed*1.4+2)*b.secondaryPitch*.3,Se=j%12;let Ce=0,be=0;if(Se>10.5&&Se<11.2){const Pe=(Se-10.5)/.7;Ce=Math.sin(Pe*Math.PI)*.15}if(Se>5&&Se<5.4){const Pe=(Se-5)/.4;be=Math.sin(Pe*Math.PI)*.1}W=oe+Te+Ce,Y=ge+ce+be}const re=Hr.clamp(W,-.4,b.maxYaw),Q=Hr.clamp(Y,-.3,b.maxPitch);L.head.rotation.y=Hr.lerp(L.head.rotation.y,re,b.smoothing),L.head.rotation.x=Hr.lerp(L.head.rotation.x,Q,b.smoothing),L.head.rotation.z=0}else L.head&&L.head.rotation.set(0,0,0);if(L.neck&&b.enabled&&L.head){const j=L.head.rotation.y*.35,W=L.head.rotation.x*.25;L.neck.rotation.y=Hr.lerp(L.neck.rotation.y,j,b.smoothing*.5),L.neck.rotation.x=Hr.lerp(L.neck.rotation.x,W,b.smoothing*.5),L.neck.rotation.z=0}else L.neck&&L.neck.rotation.set(0,0,0);if(T.blinkTimer-=P,T.blinkTimer<=0&&!T.isBlinking&&(T.isBlinking=!0,T.blinkProgress=0,T.blinkTimer=R.animation.blinkInterval[0]+Math.random()*(R.animation.blinkInterval[1]-R.animation.blinkInterval[0])),T.isBlinking){T.blinkProgress+=P/R.animation.blinkDuration;const j=T.blinkProgress<.5?T.blinkProgress*2:2-T.blinkProgress*2;["eyesClosed","eyeBlinkLeft","eyeBlinkRight","eyeBlink_L","eyeBlink_R","blink","blink_L","blink_R"].forEach(W=>{S(W,j)}),T.blinkProgress>=1&&(T.isBlinking=!1,["eyesClosed","eyeBlinkLeft","eyeBlinkRight","eyeBlink_L","eyeBlink_R","blink","blink_L","blink_R"].forEach(W=>S(W,0)))}if(L.jaw&&y.current&&D.jawEnabled&&(L.jaw.rotation.x=y.current.x,L.jaw.rotation.y=y.current.y,L.jaw.rotation.z=y.current.z),n&&e>.02){const j=Math.min(e*D.amplitudeSensitivity,D.maxValue);m.current+=(j-m.current)*D.smoothing,g.current+=P*D.visemeSpeed}else m.current*=.85,m.current<.01&&(m.current=0);const $=m.current,V=g.current;if($>.02){const j=Math.max(0,Math.sin(V)*.5+.5),W=Math.max(0,Math.sin(V+1.2)*.5+.5),Y=Math.max(0,Math.sin(V+2.4)*.5+.5),re=Math.max(0,Math.sin(V*2.3))*.5,Q=Math.max(0,Math.sin(V*2.7+.5))*.45;A(D.visemeTargets.A,$*j*.9),A(D.visemeTargets.O,$*W*.7),A(D.visemeTargets.E,$*Y*.6),A(D.visemeTargets.PP,$*re),A(D.visemeTargets.FF,$*Q);const oe=$*(.6+Math.sin(V*1.5)*.25);if(A(D.mouthOpenTargets,oe),L.jaw&&y.current&&D.jawEnabled&&(L.jaw.rotation.x=y.current.x+$*D.jawOpenMax),!p.current&&!L.jaw&&L.head){const ge=o.current.head,Te=$*.03*Math.sin(V*3),ce=$*.015*Math.sin(V*1.7+.5);L.head.rotation.x=Hr.lerp(L.head.rotation.x,ge.x+Te,.2),L.head.rotation.z=Hr.lerp(L.head.rotation.z,(ge.z||0)+ce,.15)}if(!p.current&&!L.jaw&&L.neck){const ge=o.current.neck,Te=$*.02*Math.sin(V*2.5);L.neck.rotation.x=Hr.lerp(L.neck.rotation.x,ge.x+Te,.15)}}else m.current=0,p.current&&[...D.mouthOpenTargets,...Object.values(D.visemeTargets).flat()].forEach(W=>S(W,0)),["mouthOpen","jawOpen","viseme_aa","viseme_O","viseme_E","viseme_I","viseme_U","aa","oh","ee","ih","uu","mouthSmile","mouthFrown"].forEach(j=>S(j,0))}),c.jsx("group",{ref:s,children:c.jsx("primitive",{object:r})})}zh.preload(nP);function MH({theme:n}){const e=n==="dark";return c.jsxs(c.Fragment,{children:[c.jsx("ambientLight",{intensity:e?.5:.7}),c.jsx("directionalLight",{position:[2,2,4],intensity:e?1.2:1.4,color:e?"#fff":"#fff8f0"}),c.jsx("directionalLight",{position:[-2,1,3],intensity:e?.4:.6,color:"#e8f0ff"}),e&&c.jsxs(c.Fragment,{children:[c.jsx("pointLight",{position:[-1,.2,-.3],intensity:2,color:"#8b5cf6",distance:4}),c.jsx("pointLight",{position:[1,.2,-.3],intensity:1.5,color:"#a78bfa",distance:4})]})]})}function EH({theme:n}){const{scene:e}=pG();return B.useEffect(()=>{e.background=new Ue(n==="dark"?"#0d0d1a":"#f0f4f8")},[e,n]),null}function CH(){return c.jsxs("mesh",{position:[0,0,0],children:[c.jsx("sphereGeometry",{args:[.06,32,32]}),c.jsx("meshStandardMaterial",{color:"#8b5cf6"})]})}function yA({speaking:n=!1,listening:e=!1,audioLevel:t=0,enabled:i=!0,theme:r="dark"}){const[s,a]=B.useState(!1),[o,l]=B.useState(!1),[h,f]=B.useState(r);B.useEffect(()=>{const g=()=>{const M=document.documentElement.getAttribute("data-theme");f(M||r)};g();const y=new MutationObserver(g);return y.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>y.disconnect()},[r]),B.useEffect(()=>(i&&(console.log("[Avatar]  Initializing WEBCAM-based eye contact tracking"),iP()),()=>{i&&(console.log("[Avatar] Cleaning up webcam eye contact tracking"),vA())}),[i]);const p=n?t:0,m=h==="dark";return i?c.jsxs("div",{className:`avatar-container ${m?"dark":"light"}`,children:[c.jsxs("div",{className:"avatar-status",children:[n&&c.jsx("div",{className:"status-indicator speaking",children:"Speaking"}),e&&c.jsx("div",{className:"status-indicator listening",children:"Listening"})]}),c.jsxs(kG,{dpr:gA.dpr,gl:{antialias:!0,alpha:!1},camera:{fov:22,position:[0,.25,1.8],near:.1,far:100},onCreated:({camera:g})=>{g.lookAt(0,.2,0),a(!0)},onError:()=>l(!0),children:[c.jsx(EH,{theme:h}),c.jsx(MH,{theme:h}),c.jsx(B.Suspense,{fallback:c.jsx(CH,{}),children:c.jsx(wH,{speaking:n,audioLevel:p,theme:h})})]}),!s&&c.jsxs("div",{className:`avatar-loading-overlay ${m?"dark":"light"}`,children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("span",{children:"Loading Avatar..."})]}),o&&c.jsx("div",{className:"avatar-error",children:c.jsx("span",{children:"Failed to load avatar"})})]}):c.jsx("div",{className:`avatar-container avatar-disabled ${m?"dark":"light"}`,children:c.jsx("div",{className:"avatar-placeholder",children:c.jsx("span",{children:"Avatar Disabled"})})})}const CC=()=>{vA(),_t.initialized=!1,_t.time=0,console.log("[Avatar] Eye contact state fully reset")};function TH(){const{sessionId:n}=mg(),e=di(),[t,i]=B.useState("configuring"),[r,s]=B.useState(null),[a,o]=B.useState(0),[l,h]=B.useState(10),[f,p]=B.useState(""),[m,g]=B.useState(180),[y,M]=B.useState(!1),[_,v]=B.useState({sessionType:"mixed",difficulty:"medium",questionCount:10});B.useEffect(()=>{if(t!=="in_progress"||m<=0)return;const T=setInterval(()=>{g(P=>Math.max(0,P-1))},1e3);return()=>clearInterval(T)},[t,m]);const S=async()=>{M(!0),setTimeout(()=>{i("in_progress"),o(1),s({id:"q1",text:"Tell me about yourself and your experience.",type:"behavioral"}),M(!1)},1500)},A=async()=>{f.trim()&&(M(!0),setTimeout(()=>{a>=l?(i("completed"),e(`/report/${n||"demo"}`)):(o(T=>T+1),s({id:`q${a+1}`,text:"What is your greatest strength?",type:"behavioral"}),p(""),g(180)),M(!1)},1e3))},E=()=>{window.confirm("Are you sure you want to end the interview?")&&e(`/report/${n||"demo"}`)},N=T=>{const P=Math.floor(T/60),L=T%60;return`${P}:${L.toString().padStart(2,"0")}`};return c.jsxs("div",{className:"interview-container",children:[c.jsx(Yn,{minimal:!0}),c.jsxs("main",{className:"interview-main",children:[t==="configuring"&&c.jsxs("div",{className:"config-panel",children:[c.jsx("h2",{children:"Configure Your Interview"}),c.jsxs("div",{className:"config-options",children:[c.jsxs("div",{className:"config-group",children:[c.jsx("label",{children:"Interview Type"}),c.jsxs("select",{value:_.sessionType,onChange:T=>v({..._,sessionType:T.target.value}),children:[c.jsx("option",{value:"technical",children:"Technical"}),c.jsx("option",{value:"behavioral",children:"Behavioral"}),c.jsx("option",{value:"mixed",children:"Mixed"})]})]}),c.jsxs("div",{className:"config-group",children:[c.jsx("label",{children:"Difficulty"}),c.jsxs("select",{value:_.difficulty,onChange:T=>v({..._,difficulty:T.target.value}),children:[c.jsx("option",{value:"easy",children:"Easy"}),c.jsx("option",{value:"medium",children:"Medium"}),c.jsx("option",{value:"hard",children:"Hard"}),c.jsx("option",{value:"expert",children:"Expert"})]})]}),c.jsxs("div",{className:"config-group",children:[c.jsx("label",{children:"Number of Questions"}),c.jsxs("select",{value:_.questionCount,onChange:T=>v({..._,questionCount:Number(T.target.value)}),children:[c.jsx("option",{value:"5",children:"5 Questions"}),c.jsx("option",{value:"10",children:"10 Questions"}),c.jsx("option",{value:"15",children:"15 Questions"})]})]})]}),c.jsx("button",{className:"btn-primary btn-large",onClick:S,disabled:y,children:y?"Preparing...":"Start Interview"})]}),t==="in_progress"&&c.jsxs("div",{className:"interview-panel",children:[c.jsx("div",{className:"avatar-section",children:c.jsx(yA,{speaking:!1,enableWebcam:!1})}),c.jsxs("div",{className:"qa-section",children:[c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"progress-fill",style:{width:`${a/l*100}%`}})}),c.jsxs("div",{className:"progress-text",children:["Question ",a," of ",l]}),c.jsx("div",{className:`timer ${m<30?"warning":""}`,children:N(m)}),c.jsxs("div",{className:"question-box",children:[c.jsx("span",{className:"question-type",children:r==null?void 0:r.type}),c.jsx("p",{className:"question-text",children:r==null?void 0:r.text})]}),c.jsx("textarea",{className:"answer-input",value:f,onChange:T=>p(T.target.value),placeholder:"Type your answer here...",rows:6}),c.jsxs("div",{className:"interview-actions",children:[c.jsx("button",{className:"btn-secondary",onClick:E,children:"End Interview"}),c.jsx("button",{className:"btn-primary",onClick:A,disabled:y||!f.trim(),children:y?"Submitting...":"Submit Answer"})]})]})]})]})]})}const Vt={PENDING:"pending",GRANTED:"granted",DENIED:"denied",BLOCKED:"blocked",ERROR:"error",NOT_SUPPORTED:"not_supported"};function bH(){const[n,e]=B.useState(Vt.PENDING),[t,i]=B.useState(Vt.PENDING),[r,s]=B.useState(null),[a,o]=B.useState(null),[l,h]=B.useState(!1),[f,p]=B.useState(!1),[m,g]=B.useState(null),[y,M]=B.useState(!1),_=B.useRef(null),v=B.useRef(null),S=B.useRef(null),A=B.useRef(null),E=typeof navigator<"u"&&navigator.mediaDevices&&typeof navigator.mediaDevices.getUserMedia=="function",N=B.useCallback(async()=>{if(!navigator.permissions)return{camera:"prompt",microphone:"prompt"};try{const[U,j]=await Promise.all([navigator.permissions.query({name:"camera"}).catch(()=>({state:"prompt"})),navigator.permissions.query({name:"microphone"}).catch(()=>({state:"prompt"}))]);return{camera:U.state,microphone:j.state}}catch(U){return console.warn("Permission query failed:",U),{camera:"prompt",microphone:"prompt"}}},[]),T=B.useCallback((U,j)=>{if((j==null?void 0:j.camera)==="denied"||(j==null?void 0:j.microphone)==="denied")return{title:"Access Blocked",message:"Browser has blocked camera/microphone access. You need to manually allow access.",action:"Click the  icon in address bar  Site settings  Allow camera & microphone  Refresh page",isBlocked:!0};if(!U)return null;switch(U.name){case"NotAllowedError":case"PermissionDeniedError":return{title:"Permission Denied",message:"You denied camera/microphone access.",action:"Click the  icon in address bar  Allow camera & microphone  Refresh",isBlocked:!1};case"NotFoundError":case"DevicesNotFoundError":return{title:"No Device Found",message:"No camera or microphone detected.",action:"Connect a camera/microphone and try again",isBlocked:!1};case"NotReadableError":case"TrackStartError":return{title:"Device In Use",message:"Your camera or microphone is being used by another application.",action:"Close other apps using camera/mic and try again",isBlocked:!1};case"OverconstrainedError":return{title:"Device Error",message:"Your device doesn't support the required settings.",action:"Try a different camera/microphone",isBlocked:!1};case"SecurityError":return{title:"Security Error",message:"Media access blocked due to security settings.",action:"Use HTTPS or localhost",isBlocked:!0};default:return{title:"Unknown Error",message:U.message||"An unexpected error occurred.",action:"Refresh the page and try again",isBlocked:!1}}},[]),P=B.useCallback(U=>{if(!U)return{hasVideo:!1,hasAudio:!1};const j=U.getVideoTracks(),W=U.getAudioTracks(),Y=j.length>0&&j.some(Q=>Q.enabled&&Q.readyState==="live"),re=W.length>0&&W.some(Q=>Q.enabled&&Q.readyState==="live");return{hasVideo:Y,hasAudio:re}},[]),L=B.useCallback(async()=>{if(!E)return e(Vt.NOT_SUPPORTED),i(Vt.NOT_SUPPORTED),s({title:"Not Supported",message:"Your browser does not support camera/microphone access.",action:"Use Chrome, Firefox, Edge, or Safari",isBlocked:!0}),!1;const U=await N();if(console.log("Current permission state:",U),U.camera==="denied"&&U.microphone==="denied")return e(Vt.BLOCKED),i(Vt.BLOCKED),s(T(null,U)),!1;e(Vt.PENDING),i(Vt.PENDING),s(null);try{a&&a.getTracks().forEach(re=>re.stop());const j=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:320,max:640},height:{ideal:240,max:480},facingMode:"user"},audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),{hasVideo:W,hasAudio:Y}=P(j);return console.log("Stream validation:",{hasVideo:W,hasAudio:Y}),h(W),p(Y),e(W?Vt.GRANTED:Vt.ERROR),i(Y?Vt.GRANTED:Vt.ERROR),o(j),!W||!Y?(s({title:"Partial Access",message:`${W?"Microphone":"Camera"} could not be accessed.`,action:"Check your device settings",isBlocked:!1}),!1):!0}catch(j){console.error("getUserMedia error:",j);const W=await N(),Y=W.camera==="denied"?Vt.BLOCKED:Vt.DENIED,re=W.microphone==="denied"?Vt.BLOCKED:Vt.DENIED;return e(Y),i(re),h(!1),p(!1),s(T(j,W)),!1}},[E,a,N,P,T]),R=B.useCallback(async()=>{const U=await N();return console.log("Retry - Current permission state:",U),U.camera==="denied"&&U.microphone==="denied"?(e(Vt.BLOCKED),i(Vt.BLOCKED),s({title:"Access Blocked by Browser",message:"You previously blocked camera/microphone access. The browser will not ask again automatically.",action:'To fix: Click  icon in address bar  Site settings  Change camera/microphone to "Allow"  Refresh the page',isBlocked:!0}),!1):L()},[N,L]),b=B.useCallback((U,j,W)=>{if(!U||!j||!W||U.readyState<2)return null;try{W.drawImage(U,0,0,j.width,j.height);const re=W.getImageData(0,0,j.width,j.height).data;let Q=0,oe=0,ge=0;for(let Te=0;Te<j.height;Te+=4)for(let ce=0;ce<j.width;ce+=4){const Se=(Te*j.width+ce)*4,Ce=re[Se],be=re[Se+1],Pe=re[Se+2];Ce>95&&be>40&&Pe>20&&Ce>be&&Ce>Pe&&Math.abs(Ce-be)>15&&Ce-Pe>15&&(Q+=ce,oe+=Te,ge++)}if(ge>50)return{x:(Q/ge/j.width-.5)*2,y:(oe/ge/j.height-.5)*2}}catch{}return null},[]),D=B.useCallback(()=>!a||!l?(console.warn("Cannot start face tracking: no video stream"),!1):(_.current||(_.current=document.createElement("video"),_.current.autoplay=!0,_.current.playsInline=!0,_.current.muted=!0,_.current.style.display="none"),v.current||(v.current=document.createElement("canvas"),v.current.width=160,v.current.height=120,S.current=v.current.getContext("2d",{willReadFrequently:!0})),_.current.srcObject=a,_.current.play().catch(console.warn),A.current&&clearInterval(A.current),A.current=setInterval(()=>{const U=b(_.current,v.current,S.current);U?(g(j=>({x:j?j.x*.7+U.x*.3:U.x,y:j?j.y*.7+U.y*.3:U.y})),M(!0)):(M(!1),g(j=>j?{x:j.x*.9,y:j.y*.9}:null))},100),!0),[a,l,b]),X=B.useCallback(()=>{A.current&&(clearInterval(A.current),A.current=null),_.current&&(_.current.pause(),_.current.srcObject=null),g(null),M(!1)},[]),$=B.useCallback(()=>{X(),a&&a.getTracks().forEach(U=>{U.stop()}),o(null),h(!1),p(!1)},[a,X]);B.useEffect(()=>()=>{$()},[]);const V=n===Vt.GRANTED&&l,K=t===Vt.GRANTED&&f,q=V&&K,ue=(r==null?void 0:r.isBlocked)===!0;return{cameraPermission:n,micPermission:t,permissionError:r,isSupported:E,isCameraReady:V,isMicReady:K,isAllReady:q,isBlocked:ue,mediaStream:a,facePosition:m,isFaceDetected:y,requestAllPermissions:L,retryPermissions:R,startFaceTracking:D,stopFaceTracking:X,stopAllMedia:$}}function RH({onPermissionsGranted:n,onSkip:e,requestAllPermissions:t,retryPermissions:i,cameraPermission:r,micPermission:s,permissionError:a,isSupported:o,isCameraReady:l,isMicReady:h,isBlocked:f}){const[p,m]=B.useState(!1),[g,y]=B.useState(!1);B.useEffect(()=>{!g&&o&&(y(!0),M())},[g,o]);const M=async()=>{m(!0);try{await t()&&setTimeout(()=>{n()},300)}catch(L){console.error("Permission request failed:",L)}finally{m(!1)}},_=async()=>{m(!0);try{await i()&&setTimeout(()=>{n()},300)}catch(L){console.error("Retry failed:",L)}finally{m(!1)}},v=(L,R)=>{if(R)return{icon:Xn,color:"#22c55e",label:"Ready",bg:"rgba(34, 197, 94, 0.1)"};switch(L){case Vt.GRANTED:return{icon:Xn,color:"#22c55e",label:"Enabled",bg:"rgba(34, 197, 94, 0.1)"};case Vt.DENIED:return{icon:ni,color:"#ef4444",label:"Denied",bg:"rgba(239, 68, 68, 0.1)"};case Vt.BLOCKED:return{icon:ni,color:"#f97316",label:"Blocked",bg:"rgba(249, 115, 22, 0.1)"};case Vt.ERROR:return{icon:ni,color:"#ef4444",label:"Error",bg:"rgba(239, 68, 68, 0.1)"};case Vt.NOT_SUPPORTED:return{icon:ni,color:"#6b7280",label:"Not Supported",bg:"rgba(107, 114, 128, 0.1)"};case Vt.PENDING:default:return{icon:Lr,color:"#3b82f6",label:"Checking...",bg:"rgba(59, 130, 246, 0.1)"}}},S=v(r,l),A=v(s,h),E=S.icon,N=A.icon,T=l&&h,P=r===Vt.DENIED||s===Vt.DENIED||r===Vt.BLOCKED||s===Vt.BLOCKED;return c.jsxs("div",{className:"permission-modal-overlay",children:[c.jsxs("div",{className:"permission-modal",children:[c.jsxs("div",{className:"permission-header",children:[c.jsx("div",{className:"permission-icon",children:T?c.jsx(Xn,{size:32,color:"#22c55e"}):f?c.jsx(ni,{size:32,color:"#f97316"}):P?c.jsx(ni,{size:32,color:"#ef4444"}):c.jsx(v0,{size:32})}),c.jsx("h2",{children:T?"Ready to Start!":f?"Access Blocked":P?"Permission Required":"Camera & Microphone Setup"}),c.jsx("button",{className:"close-btn",onClick:e,title:"Skip",children:c.jsx(vR,{size:20})})]}),c.jsxs("div",{className:"permission-body",children:[c.jsxs("div",{className:"permission-status-cards",children:[c.jsxs("div",{className:"status-card",style:{background:S.bg},children:[c.jsx("div",{className:"status-card-icon",children:c.jsx(v0,{size:24})}),c.jsxs("div",{className:"status-card-content",children:[c.jsx("span",{className:"status-card-title",children:"Camera"}),c.jsx("span",{className:"status-card-subtitle",children:"For eye contact tracking"})]}),c.jsxs("div",{className:"status-card-status",style:{color:S.color},children:[c.jsx(E,{size:20,className:r===Vt.PENDING&&p?"spin":""}),c.jsx("span",{children:S.label})]})]}),c.jsxs("div",{className:"status-card",style:{background:A.bg},children:[c.jsx("div",{className:"status-card-icon",children:c.jsx(gS,{size:24})}),c.jsxs("div",{className:"status-card-content",children:[c.jsx("span",{className:"status-card-title",children:"Microphone"}),c.jsx("span",{className:"status-card-subtitle",children:"For voice responses"})]}),c.jsxs("div",{className:"status-card-status",style:{color:A.color},children:[c.jsx(N,{size:20,className:s===Vt.PENDING&&p?"spin":""}),c.jsx("span",{children:A.label})]})]})]}),a&&c.jsxs("div",{className:`permission-error-box ${f?"blocked":""}`,children:[c.jsx(ni,{size:20}),c.jsxs("div",{className:"error-content",children:[c.jsx("strong",{children:a.title}),c.jsx("p",{children:a.message}),a.action&&c.jsxs("div",{className:"error-action",children:[c.jsx(um,{size:14}),c.jsx("span",{children:a.action})]})]})]}),f&&c.jsxs("div",{className:"blocked-instructions",children:[c.jsx("h4",{children:" How to Enable Access:"}),c.jsxs("ol",{children:[c.jsxs("li",{children:["Look at your browser's ",c.jsx("strong",{children:"address bar"})]}),c.jsxs("li",{children:["Click the ",c.jsx("strong",{children:" lock icon"})," (or camera icon)"]}),c.jsxs("li",{children:["Find ",c.jsx("strong",{children:'"Camera"'})," and ",c.jsx("strong",{children:'"Microphone"'})]}),c.jsxs("li",{children:["Change both to ",c.jsx("strong",{children:'"Allow"'})]}),c.jsxs("li",{children:["Click ",c.jsx("strong",{children:'"Refresh"'})," or press F5"]})]}),c.jsxs("button",{className:"btn btn-outline-small",onClick:()=>window.location.reload(),children:[c.jsx(y0,{size:14})," Refresh Page"]})]}),T&&c.jsxs("div",{className:"success-message",children:[c.jsx(Xn,{size:20}),c.jsx("span",{children:"Camera and microphone are ready!"})]}),c.jsxs("div",{className:"privacy-note",children:[c.jsx("span",{className:"privacy-icon",children:""}),c.jsx("span",{children:"Your video and audio are processed locally. Nothing is recorded or stored."})]})]}),c.jsxs("div",{className:"permission-footer",children:[c.jsx("button",{className:"btn btn-ghost",onClick:e,disabled:p,children:"Skip (Text Only)"}),T?c.jsxs("button",{className:"btn btn-success",onClick:n,children:[c.jsx(Xn,{size:18}),"Start Interview"]}):f?c.jsxs("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:[c.jsx(y0,{size:18}),"Refresh Page"]}):c.jsx("button",{className:"btn btn-primary",onClick:P?_:M,disabled:p,children:p?c.jsxs(c.Fragment,{children:[c.jsx(Lr,{size:18,className:"spin"}),"Requesting..."]}):P?c.jsxs(c.Fragment,{children:[c.jsx(y0,{size:18}),"Retry Permission"]}):c.jsxs(c.Fragment,{children:[c.jsx(v0,{size:18}),"Enable Access"]})})]})]}),c.jsx("style",{children:`
        .permission-modal-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.75);
          backdrop-filter: blur(8px);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          padding: 1rem;
        }
        
        .permission-modal {
          background: var(--bg-card, #1e293b);
          border: 1px solid var(--border-color, #334155);
          border-radius: 20px;
          max-width: 520px;
          width: 100%;
          overflow: hidden;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }
        
        .permission-header {
          display: flex;
          align-items: center;
          gap: 1rem;
          padding: 1.5rem;
          border-bottom: 1px solid var(--border-color, #334155);
        }
        
        .permission-icon {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 48px;
          height: 48px;
          background: var(--bg-tertiary, #0f172a);
          border-radius: 12px;
          color: var(--primary, #3b82f6);
        }
        
        .permission-header h2 {
          flex: 1;
          font-size: 1.2rem;
          font-weight: 600;
          color: var(--text-primary, #f8fafc);
          margin: 0;
        }
        
        .close-btn {
          background: none;
          border: none;
          color: var(--text-muted, #64748b);
          cursor: pointer;
          padding: 0.5rem;
          border-radius: 8px;
          transition: all 0.2s;
        }
        
        .close-btn:hover {
          background: var(--bg-tertiary, #0f172a);
          color: var(--text-primary, #f8fafc);
        }
        
        .permission-body {
          padding: 1.5rem;
        }
        
        .permission-status-cards {
          display: flex;
          flex-direction: column;
          gap: 0.75rem;
          margin-bottom: 1.25rem;
        }
        
        .status-card {
          display: flex;
          align-items: center;
          gap: 1rem;
          padding: 1rem 1.25rem;
          border-radius: 12px;
          border: 1px solid var(--border-color, #334155);
        }
        
        .status-card-icon {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 40px;
          height: 40px;
          background: var(--bg-card, #1e293b);
          border-radius: 10px;
          color: var(--primary, #3b82f6);
        }
        
        .status-card-content {
          flex: 1;
          display: flex;
          flex-direction: column;
        }
        
        .status-card-title {
          font-weight: 600;
          color: var(--text-primary, #f8fafc);
          font-size: 0.95rem;
        }
        
        .status-card-subtitle {
          font-size: 0.8rem;
          color: var(--text-muted, #64748b);
        }
        
        .status-card-status {
          display: flex;
          align-items: center;
          gap: 0.4rem;
          font-size: 0.85rem;
          font-weight: 500;
        }
        
        .permission-error-box {
          display: flex;
          gap: 1rem;
          padding: 1rem;
          background: rgba(239, 68, 68, 0.1);
          border: 1px solid rgba(239, 68, 68, 0.25);
          border-radius: 12px;
          margin-bottom: 1rem;
          color: #fca5a5;
        }
        
        .permission-error-box.blocked {
          background: rgba(249, 115, 22, 0.1);
          border-color: rgba(249, 115, 22, 0.3);
          color: #fed7aa;
        }
        
        .permission-error-box > svg {
          flex-shrink: 0;
          color: #ef4444;
          margin-top: 2px;
        }
        
        .permission-error-box.blocked > svg {
          color: #f97316;
        }
        
        .error-content {
          flex: 1;
        }
        
        .error-content strong {
          display: block;
          color: #fecaca;
          margin-bottom: 0.25rem;
        }
        
        .blocked .error-content strong {
          color: #fed7aa;
        }
        
        .error-content p {
          margin: 0 0 0.5rem 0;
          font-size: 0.9rem;
          line-height: 1.5;
        }
        
        .error-action {
          display: flex;
          align-items: flex-start;
          gap: 0.5rem;
          font-size: 0.85rem;
          background: rgba(0, 0, 0, 0.2);
          padding: 0.5rem 0.75rem;
          border-radius: 8px;
          line-height: 1.4;
        }
        
        .error-action svg {
          flex-shrink: 0;
          margin-top: 2px;
        }
        
        .blocked-instructions {
          background: var(--bg-tertiary, #0f172a);
          border-radius: 12px;
          padding: 1rem 1.25rem;
          margin-bottom: 1rem;
          border: 1px solid var(--border-color, #334155);
        }
        
        .blocked-instructions h4 {
          font-size: 0.95rem;
          font-weight: 600;
          color: var(--text-primary, #f8fafc);
          margin: 0 0 0.75rem 0;
        }
        
        .blocked-instructions ol {
          margin: 0 0 1rem 0;
          padding-left: 1.25rem;
          color: var(--text-secondary, #94a3b8);
          font-size: 0.85rem;
          line-height: 1.8;
        }
        
        .blocked-instructions strong {
          color: var(--text-primary, #f8fafc);
        }
        
        .btn-outline-small {
          display: inline-flex;
          align-items: center;
          gap: 0.4rem;
          padding: 0.5rem 1rem;
          font-size: 0.85rem;
          background: transparent;
          border: 1px solid var(--border-color, #475569);
          color: var(--text-secondary, #94a3b8);
          border-radius: 8px;
          cursor: pointer;
          transition: all 0.2s;
        }
        
        .btn-outline-small:hover {
          background: var(--bg-card-hover, #334155);
          border-color: var(--text-muted, #64748b);
        }
        
        .success-message {
          display: flex;
          align-items: center;
          gap: 0.75rem;
          padding: 1rem;
          background: rgba(34, 197, 94, 0.1);
          border: 1px solid rgba(34, 197, 94, 0.25);
          border-radius: 12px;
          margin-bottom: 1rem;
          color: #86efac;
          font-weight: 500;
        }
        
        .success-message svg {
          color: #22c55e;
        }
        
        .privacy-note {
          display: flex;
          align-items: center;
          gap: 0.6rem;
          font-size: 0.8rem;
          color: var(--text-muted, #64748b);
          background: var(--bg-tertiary, #0f172a);
          padding: 0.75rem 1rem;
          border-radius: 10px;
        }
        
        .privacy-icon {
          font-size: 1rem;
        }
        
        .permission-footer {
          display: flex;
          gap: 1rem;
          padding: 1.25rem 1.5rem;
          border-top: 1px solid var(--border-color, #334155);
          background: var(--bg-tertiary, #0f172a);
        }
        
        .permission-footer .btn {
          flex: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 0.5rem;
          padding: 0.875rem 1.5rem;
          font-size: 0.95rem;
          font-weight: 500;
          border-radius: 12px;
          cursor: pointer;
          transition: all 0.2s;
        }
        
        .btn-ghost {
          background: transparent;
          border: 1px solid var(--border-color, #475569);
          color: var(--text-secondary, #94a3b8);
        }
        
        .btn-ghost:hover:not(:disabled) {
          background: var(--bg-card-hover, #334155);
          border-color: var(--text-muted, #64748b);
        }
        
        .btn-primary {
          background: var(--primary, #3b82f6);
          border: none;
          color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
          background: var(--primary-dark, #2563eb);
        }
        
        .btn-success {
          background: #22c55e;
          border: none;
          color: white;
        }
        
        .btn-success:hover:not(:disabled) {
          background: #16a34a;
        }
        
        .btn:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }
        
        .spin {
          animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        
        @media (max-width: 480px) {
          .permission-footer {
            flex-direction: column-reverse;
          }
          
          .permission-header {
            padding: 1rem;
          }
          
          .permission-body {
            padding: 1rem;
          }
        }
      `})]})}const NH=`
@keyframes pulse-rec {
    0%, 100% {
        opacity: 1;
        transform: scale(1);
    }
    50% {
        opacity: 0.5;
        transform: scale(0.85);
    }
}
`;if(typeof document<"u"){const n="recording-indicator-styles";if(!document.getElementById(n)){const e=document.createElement("style");e.id=n,e.textContent=NH,document.head.appendChild(e)}}function PH({timeRemaining:n,totalTime:e,isRunning:t,onTimeUp:i,showWarnings:r=!0}){const s=e>0?n/e*100:100,a=B.useMemo(()=>n<=10?"critical":n<=30?"warning":s<=25?"low":"normal",[n,s]),o=B.useMemo(()=>{const l=Math.floor(n/60),h=n%60;return`${l}:${h.toString().padStart(2,"0")}`},[n]);return e<=0?null:c.jsxs("div",{className:`question-timer ${a} ${t?"running":"paused"}`,children:[c.jsxs("div",{className:"timer-header",children:[a==="critical"?c.jsx(px,{size:16,className:"timer-icon pulse"}):c.jsx(Yc,{size:16,className:"timer-icon"}),c.jsx("span",{className:"timer-label",children:"Time Remaining"})]}),c.jsx("div",{className:"timer-display",children:c.jsx("span",{className:`timer-value ${a}`,children:o})}),c.jsx("div",{className:"timer-progress-bar",children:c.jsx("div",{className:`timer-progress-fill ${a}`,style:{width:`${s}%`}})}),r&&a==="warning"&&c.jsx("div",{className:"timer-warning",children:" 30 seconds remaining!"}),r&&a==="critical"&&c.jsx("div",{className:"timer-warning critical",children:" Wrap up your answer!"}),n===0&&c.jsx("div",{className:"timer-timeout",children:" Time's up!"})]})}function IH({summary:n,onClose:e,onDownloadVideo:t}){var f,p,m,g,y,M,_,v,S,A,E,N,T,P,L,R,b,D,X,$,V,K,q,ue,U,j,W,Y,re,Q,oe,ge,Te,ce,Se,Ce,be,Pe;const[i,r]=B.useState({eyeContact:!0,posture:!0,fillerWords:!1,silence:!1,speed:!0}),s=B.useRef(null);if(!n)return null;const a=H=>{r(ve=>({...ve,[H]:!ve[H]}))},o=H=>H==="Excellent"?c.jsx(Xn,{size:18,className:"grade-icon excellent"}):H==="Good"?c.jsx(Xn,{size:18,className:"grade-icon good"}):H==="Fair"?c.jsx(px,{size:18,className:"grade-icon fair"}):c.jsx(jD,{size:18,className:"grade-icon poor"}),l=H=>H>=80?"excellent":H>=60?"good":H>=40?"fair":"poor",h=()=>{var H;if((H=n.video)!=null&&H.url){const ve=document.createElement("a");ve.href=n.video.url,ve.download=`interview-recording-${new Date().toISOString().split("T")[0]}.webm`,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve)}};return c.jsx("div",{className:"performance-summary-overlay",children:c.jsxs("div",{className:"performance-summary-modal",children:[c.jsxs("div",{className:"summary-header",children:[c.jsxs("div",{className:"summary-title",children:[c.jsx(cl,{size:28,className:"title-icon"}),c.jsxs("div",{children:[c.jsx("h2",{children:"Interview Performance Analysis"}),c.jsxs("p",{className:"summary-subtitle",children:[n.mode==="strict"?"Strict Mode":"High-Pressure Mode"," Interview Complete"]})]})]}),c.jsx("button",{className:"close-btn",onClick:e,children:""})]}),c.jsxs("div",{className:"overall-score-section",children:[c.jsxs("div",{className:`score-circle ${l(n.overallScore)}`,children:[c.jsx("span",{className:"score-value",children:n.overallScore}),c.jsx("span",{className:"score-label",children:"Overall"})]}),c.jsxs("div",{className:"score-breakdown",children:[c.jsxs("div",{className:"breakdown-item",children:[c.jsx(Kc,{size:16}),c.jsx("span",{children:"Eye Contact"}),c.jsxs("span",{className:`score ${l(((f=n.eyeContact)==null?void 0:f.percentage)||0)}`,children:[((p=n.eyeContact)==null?void 0:p.percentage)||0,"%"]})]}),c.jsxs("div",{className:"breakdown-item",children:[c.jsx(fx,{size:16}),c.jsx("span",{children:"Stability"}),c.jsxs("span",{className:`score ${l(((m=n.posture)==null?void 0:m.stabilityScore)||0)}`,children:[((g=n.posture)==null?void 0:g.stabilityScore)||0,"%"]})]}),c.jsxs("div",{className:"breakdown-item",children:[c.jsx(vS,{size:16}),c.jsx("span",{children:"Speed"}),c.jsxs("span",{className:"score",children:[((y=n.speed)==null?void 0:y.wordsPerMinute)||0," WPM"]})]})]})]}),((M=n.video)==null?void 0:M.available)&&((_=n.video)==null?void 0:_.url)&&c.jsxs("div",{className:"video-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx(gR,{size:20}),c.jsx("h3",{children:"Your Interview Recording"}),c.jsxs("button",{className:"download-btn",onClick:h,children:[c.jsx(cR,{size:16})," Download"]})]}),c.jsxs("div",{className:"video-container",children:[c.jsx("video",{ref:s,src:n.video.url,controls:!0,className:"interview-video"}),c.jsxs("p",{className:"video-duration",children:["Duration: ",n.video.duration,"s"]})]})]}),c.jsxs("div",{className:"metrics-sections",children:[c.jsxs("div",{className:`metric-section ${i.eyeContact?"expanded":""}`,children:[c.jsxs("div",{className:"section-header clickable",onClick:()=>a("eyeContact"),children:[c.jsxs("div",{className:"header-left",children:[c.jsx(Kc,{size:20}),c.jsx("h3",{children:"Eye Contact Analysis"}),o((v=n.eyeContact)==null?void 0:v.grade)]}),i.eyeContact?c.jsx($u,{size:20}):c.jsx(Ko,{size:20})]}),i.eyeContact&&c.jsxs("div",{className:"section-content",children:[c.jsxs("div",{className:"metric-grid",children:[c.jsxs("div",{className:"metric-item",children:[c.jsx("span",{className:"metric-label",children:"Eye Contact Time"}),c.jsxs("span",{className:`metric-value ${l((S=n.eyeContact)==null?void 0:S.percentage)}`,children:[(A=n.eyeContact)==null?void 0:A.percentage,"%"]})]}),c.jsxs("div",{className:"metric-item",children:[c.jsx("span",{className:"metric-label",children:"Grade"}),c.jsx("span",{className:"metric-value",children:(E=n.eyeContact)==null?void 0:E.grade})]})]}),c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:`progress-fill ${l((N=n.eyeContact)==null?void 0:N.percentage)}`,style:{width:`${(T=n.eyeContact)==null?void 0:T.percentage}%`}})}),c.jsx("p",{className:"recommendation",children:(P=n.eyeContact)==null?void 0:P.recommendation})]})]}),c.jsxs("div",{className:`metric-section ${i.posture?"expanded":""}`,children:[c.jsxs("div",{className:"section-header clickable",onClick:()=>a("posture"),children:[c.jsxs("div",{className:"header-left",children:[c.jsx(fx,{size:20}),c.jsx("h3",{children:"Posture & Stability"}),o((L=n.posture)==null?void 0:L.grade)]}),i.posture?c.jsx($u,{size:20}):c.jsx(Ko,{size:20})]}),i.posture&&c.jsxs("div",{className:"section-content",children:[c.jsxs("div",{className:"metric-grid",children:[c.jsxs("div",{className:"metric-item",children:[c.jsx("span",{className:"metric-label",children:"Stability Score"}),c.jsxs("span",{className:`metric-value ${l((R=n.posture)==null?void 0:R.stabilityScore)}`,children:[(b=n.posture)==null?void 0:b.stabilityScore,"%"]})]}),c.jsxs("div",{className:"metric-item",children:[c.jsx("span",{className:"metric-label",children:"Fidget Count"}),c.jsx("span",{className:"metric-value",children:(D=n.posture)==null?void 0:D.fidgetCount})]})]}),c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:`progress-fill ${l((X=n.posture)==null?void 0:X.stabilityScore)}`,style:{width:`${($=n.posture)==null?void 0:$.stabilityScore}%`}})}),c.jsx("p",{className:"recommendation",children:(V=n.posture)==null?void 0:V.recommendation})]})]}),c.jsxs("div",{className:`metric-section ${i.fillerWords?"expanded":""}`,children:[c.jsxs("div",{className:"section-header clickable",onClick:()=>a("fillerWords"),children:[c.jsxs("div",{className:"header-left",children:[c.jsx(yx,{size:20}),c.jsx("h3",{children:"Filler Words"}),c.jsxs("span",{className:`count-badge ${((K=n.fillerWords)==null?void 0:K.totalCount)>10?"warning":"good"}`,children:[((q=n.fillerWords)==null?void 0:q.totalCount)||0," found"]})]}),i.fillerWords?c.jsx($u,{size:20}):c.jsx(Ko,{size:20})]}),i.fillerWords&&c.jsxs("div",{className:"section-content",children:[c.jsxs("div",{className:"filler-breakdown",children:[Object.entries(((ue=n.fillerWords)==null?void 0:ue.breakdown)||{}).map(([H,ve])=>c.jsxs("div",{className:"filler-item",children:[c.jsxs("span",{className:"filler-word",children:['"',H,'"']}),c.jsxs("span",{className:"filler-count",children:[ve,"x"]})]},H)),Object.keys(((U=n.fillerWords)==null?void 0:U.breakdown)||{}).length===0&&c.jsx("p",{className:"no-fillers",children:"No filler words detected! "})]}),c.jsx("p",{className:"recommendation",children:(j=n.fillerWords)==null?void 0:j.recommendation})]})]}),c.jsxs("div",{className:`metric-section ${i.silence?"expanded":""}`,children:[c.jsxs("div",{className:"section-header clickable",onClick:()=>a("silence"),children:[c.jsxs("div",{className:"header-left",children:[c.jsx(Yc,{size:20}),c.jsx("h3",{children:"Silence Analysis"}),c.jsxs("span",{className:`count-badge ${((W=n.silence)==null?void 0:W.instanceCount)>3?"warning":"good"}`,children:[((Y=n.silence)==null?void 0:Y.instanceCount)||0," pauses"]})]}),i.silence?c.jsx($u,{size:20}):c.jsx(Ko,{size:20})]}),i.silence&&c.jsxs("div",{className:"section-content",children:[c.jsxs("div",{className:"metric-grid",children:[c.jsxs("div",{className:"metric-item",children:[c.jsx("span",{className:"metric-label",children:"Total Silence"}),c.jsxs("span",{className:"metric-value",children:[(re=n.silence)==null?void 0:re.totalSilenceSeconds,"s"]})]}),c.jsxs("div",{className:"metric-item",children:[c.jsx("span",{className:"metric-label",children:"Longest Pause"}),c.jsxs("span",{className:"metric-value",children:[(Q=n.silence)==null?void 0:Q.longestSilenceSeconds,"s"]})]})]}),c.jsx("p",{className:"recommendation",children:(oe=n.silence)==null?void 0:oe.recommendation})]})]}),c.jsxs("div",{className:`metric-section ${i.speed?"expanded":""}`,children:[c.jsxs("div",{className:"section-header clickable",onClick:()=>a("speed"),children:[c.jsxs("div",{className:"header-left",children:[c.jsx(eh,{size:20}),c.jsx("h3",{children:"Speaking Speed"}),c.jsxs("span",{className:`speed-badge ${((ge=n.speed)==null?void 0:ge.grade)==="Excellent"?"excellent":((Te=n.speed)==null?void 0:Te.grade)==="Good"?"good":"warning"}`,children:[(ce=n.speed)==null?void 0:ce.wordsPerMinute," WPM"]})]}),i.speed?c.jsx($u,{size:20}):c.jsx(Ko,{size:20})]}),i.speed&&c.jsxs("div",{className:"section-content",children:[c.jsxs("div",{className:"speed-meter",children:[c.jsxs("div",{className:"speed-labels",children:[c.jsx("span",{children:"Too Slow"}),c.jsx("span",{children:"Optimal (120-160)"}),c.jsx("span",{children:"Too Fast"})]}),c.jsx("div",{className:"speed-bar",children:c.jsx("div",{className:"speed-marker",style:{left:`${Math.min(100,Math.max(0,(((Se=n.speed)==null?void 0:Se.wordsPerMinute)-60)/1.8))}%`}})})]}),c.jsx("p",{className:"speed-grade",children:(Ce=n.speed)==null?void 0:Ce.grade}),c.jsx("p",{className:"recommendation",children:(be=n.speed)==null?void 0:be.recommendation})]})]}),((Pe=n.timer)==null?void 0:Pe.timedOutQuestions)>0&&c.jsxs("div",{className:"metric-section warning-section",children:[c.jsx("div",{className:"section-header",children:c.jsxs("div",{className:"header-left",children:[c.jsx(px,{size:20,className:"warning-icon"}),c.jsx("h3",{children:"Time Management"})]})}),c.jsxs("div",{className:"section-content",children:[c.jsxs("p",{className:"timeout-warning",children:[" You ran out of time on ",c.jsx("strong",{children:n.timer.timedOutQuestions})," question(s)."]}),c.jsx("p",{className:"recommendation",children:"Practice giving concise answers. Aim to complete your response within the time limit."})]})]})]}),c.jsxs("div",{className:"summary-footer",children:[c.jsx("p",{className:"footer-note",children:" These metrics help you improve your interview performance. Practice makes perfect!"}),c.jsx("button",{className:"btn-primary",onClick:e,children:"Continue to Results"})]})]})})}const qp={rate:.95,pitch:1,volume:1,preferredVoices:["Microsoft David","Google US English","Alex","Daniel"]};class BH{constructor(){Hu(this,"analyze",()=>{if(!this.isRunning)return;this.analyser.getByteFrequencyData(this.dataArray);let e=0;for(let r=0;r<this.dataArray.length;r++)e+=this.dataArray[r]**2;const t=Math.sqrt(e/this.dataArray.length),i=Math.min(1,t/128);this.onLevelChange&&this.onLevelChange(i),this.animationFrame=requestAnimationFrame(this.analyze)});this.audioContext=null,this.analyser=null,this.dataArray=null,this.source=null,this.animationFrame=null,this.onLevelChange=null,this.isRunning=!1}async start(e,t){this.onLevelChange=t;try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=256,this.analyser.smoothingTimeConstant=.5,this.source=this.audioContext.createMediaStreamSource(e),this.source.connect(this.analyser),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.isRunning=!0,this.analyze()}catch(i){console.warn("Audio analyzer setup failed:",i)}}stop(){this.isRunning=!1,this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null),this.source&&(this.source.disconnect(),this.source=null),this.audioContext&&(this.audioContext.close().catch(()=>{}),this.audioContext=null),this.onLevelChange=null}}function LH(){const[n,e]=B.useState(!1),[t,i]=B.useState(0),[r,s]=B.useState(!1),[a,o]=B.useState(""),[l,h]=B.useState(""),f=B.useRef(null);B.useRef(null);const p=B.useRef(null),m=B.useRef(null),g=B.useRef(null),y=B.useRef(!1),M=B.useRef(!1),_=typeof window<"u"&&"speechSynthesis"in window,v=typeof window<"u"&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window),S=B.useCallback(()=>{if(!_)return null;const R=window.speechSynthesis.getVoices();for(const D of qp.preferredVoices){const X=R.find($=>$.name.includes(D));if(X)return X}const b=R.find(D=>D.lang.startsWith("en"));return b||R[0]||null},[_]),A=B.useCallback(R=>new Promise((b,D)=>{if(!_||!R){b();return}window.speechSynthesis.cancel();const X=new SpeechSynthesisUtterance(R);p.current=X;const $=S();$&&(X.voice=$),X.rate=qp.rate,X.pitch=qp.pitch,X.volume=qp.volume;let V=0,K=0,q=0,ue=.5,U=.5;const j=()=>{if(!M.current){i(0);return}const W=Date.now(),Y=W-V;if(Y<40){m.current=requestAnimationFrame(j);return}V=W,K+=Y*.015,q-=Y,q<=0&&(Math.random()<.15?(q=80+Math.random()*120,U=.05):(q=150+Math.random()*200,U=.4+Math.random()*.5)),ue=ue+(U-ue)*.3;const re=Math.sin(K)*.3,Q=Math.sin(W*.02)*.15,oe=(Math.random()-.5)*.12;let ge=ue+re+Q+oe;ge=Math.max(.02,Math.min(1,ge)),i(ge),m.current=requestAnimationFrame(j)};X.onstart=()=>{M.current=!0,e(!0),j()},X.onend=()=>{M.current=!1,e(!1),i(0),m.current&&(cancelAnimationFrame(m.current),m.current=null),b()},X.onerror=W=>{M.current=!1,e(!1),i(0),m.current&&(cancelAnimationFrame(m.current),m.current=null),W.error!=="interrupted"&&console.warn("TTS error:",W.error),b()},window.speechSynthesis.speak(X)}),[_,S,n]),E=B.useCallback(()=>{M.current=!1,_&&window.speechSynthesis.cancel(),e(!1),i(0),m.current&&(cancelAnimationFrame(m.current),m.current=null)},[_]),N=B.useCallback(()=>{if(!v)return null;if(f.current)return f.current;const R=window.SpeechRecognition||window.webkitSpeechRecognition,b=new R;return b.continuous=!0,b.interimResults=!0,b.lang="en-US",b.maxAlternatives=1,b.onresult=D=>{let X="",$="";console.log("[STT] onresult event received, resultIndex:",D.resultIndex,"resultsLength:",D.results.length);for(let V=D.resultIndex;V<D.results.length;V++){const K=D.results[V];K.isFinal?($+=K[0].transcript+" ",console.log("[STT] Final result:",K[0].transcript,"confidence:",(K[0].confidence*100).toFixed(0)+"%")):X+=K[0].transcript}$&&(console.log("[STT] Adding final transcript:",$.trim().substring(0,50)),o(V=>{const K=(V+$).trim();return console.log("[STT] New transcript value:",K.substring(0,50)),K})),X&&console.log("[STT] Interim result:",X.substring(0,50)),h(X)},b.onerror=D=>{console.warn("[STT] Recognition error:",D.error,D.message),D.error==="not-allowed"||D.error==="service-not-allowed"?(console.error("[STT] Microphone access denied"),s(!1),y.current=!1):D.error==="no-speech"?console.log("[STT] No speech detected, continuing to listen..."):D.error==="aborted"?console.log("[STT] Recognition aborted"):console.warn("[STT] Other error, will attempt to continue:",D.error)},b.onend=()=>{if(console.log("[STT] Recognition ended, isListeningRef:",y.current),y.current&&f.current){console.log("[STT] Auto-restarting recognition...");try{f.current.start()}catch(D){console.warn("[STT] Failed to restart recognition:",D),s(!1),y.current=!1}}else s(!1),y.current=!1},f.current=b,b},[v,r]),T=B.useCallback(async(R=null)=>{if(!v)return;console.log("[STT] startListening called");const b=N();if(b){o(""),h("");try{b.start(),s(!0),y.current=!0,console.log("[STT] Recognition started successfully"),R&&(g.current&&g.current.stop(),g.current=new BH,g.current.start(R,i))}catch(D){console.warn("[STT] Failed to start speech recognition:",D),s(!1),y.current=!1}}},[v,N]),P=B.useCallback(()=>{if(console.log("[STT] stopListening called"),y.current=!1,f.current)try{f.current.stop()}catch{}g.current&&(g.current.stop(),g.current=null),s(!1),h(""),i(0)},[]),L=B.useCallback(()=>{o(""),h("")},[]);return B.useEffect(()=>()=>{E(),P()},[E,P]),B.useEffect(()=>{_&&(window.speechSynthesis.getVoices(),window.speechSynthesis.onvoiceschanged=()=>{window.speechSynthesis.getVoices()})},[_]),{isSpeaking:n,audioLevel:t,speak:A,stopSpeaking:E,ttsSupported:_,isListening:r,transcript:a+l,finalTranscript:a,interimTranscript:l,startListening:T,stopListening:P,clearTranscript:L,sttSupported:v}}const DH=["video/webm;codecs=vp9","video/webm;codecs=vp8","video/webm","video/mp4"];function kH(){for(const n of DH)if(MediaRecorder.isTypeSupported(n))return n;return"video/webm"}function FH(){const[n,e]=B.useState(!1),[t,i]=B.useState(!1),[r,s]=B.useState(0),[a,o]=B.useState(null),[l,h]=B.useState(null),[f,p]=B.useState(!0),m=B.useRef(null),g=B.useRef([]),y=B.useRef(null),M=B.useRef(null),_=B.useRef(null);B.useEffect(()=>{p(typeof MediaRecorder<"u"&&navigator.mediaDevices&&typeof navigator.mediaDevices.getUserMedia=="function")},[]),B.useEffect(()=>()=>{S(),M.current&&clearInterval(M.current)},[]);const v=B.useCallback(async(b=null)=>{if(!f)return h("Recording is not supported in this browser"),!1;try{h(null),g.current=[];let D=b;D||(D=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280,max:1920},height:{ideal:720,max:1080},facingMode:"user"},audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}})),y.current=D;const X=kH(),$=new MediaRecorder(D,{mimeType:X,videoBitsPerSecond:25e5,audioBitsPerSecond:128e3});return $.ondataavailable=V=>{V.data&&V.data.size>0&&g.current.push(V.data)},$.onstop=()=>{if(g.current.length>0){const V=new Blob(g.current,{type:X});o(V)}e(!1),i(!1)},$.onerror=V=>{var K;console.error("MediaRecorder error:",V.error),h(`Recording error: ${((K=V.error)==null?void 0:K.message)||"Unknown error"}`),e(!1)},m.current=$,$.start(1e3),e(!0),i(!1),_.current=Date.now(),M.current=setInterval(()=>{_.current&&s(Math.floor((Date.now()-_.current)/1e3))},1e3),console.log("[Recording] Started with",X),!0}catch(D){return console.error("Failed to start recording:",D),h(D.message||"Failed to start recording"),!1}},[f]),S=B.useCallback(()=>{if(M.current&&(clearInterval(M.current),M.current=null),m.current&&m.current.state!=="inactive")try{m.current.stop()}catch(b){console.warn("Error stopping recorder:",b)}e(!1),i(!1)},[]),A=B.useCallback(()=>{m.current&&m.current.state==="recording"&&(m.current.pause(),i(!0))},[]),E=B.useCallback(()=>{m.current&&m.current.state==="paused"&&(m.current.resume(),i(!1))},[]),N=B.useCallback((b="interview-recording.webm")=>{if(!a)return;const D=URL.createObjectURL(a),X=document.createElement("a");X.href=D,X.download=b,document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(D)},[a]),T=B.useCallback((b="interview-recording.webm")=>a?new File([a],b,{type:a.type,lastModified:Date.now()}):null,[a]),P=B.useCallback(async(b,D="/api/interviews/recording")=>{if(!a)throw new Error("No recording available");const X=new FormData;X.append("recording",a,`interview-${b}.webm`),X.append("session_id",b),X.append("duration",r.toString());try{const $=await fetch(D,{method:"POST",body:X,credentials:"include"});if(!$.ok)throw new Error(`Upload failed: ${$.status}`);return await $.json()}catch($){throw console.error("Upload failed:",$),$}},[a,r]),L=B.useCallback(()=>{o(null),s(0),g.current=[]},[]),R=B.useCallback(b=>{const D=Math.floor(b/60),X=b%60;return`${D.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}`},[]);return{isRecording:n,isPaused:t,recordingDuration:r,recordingBlob:a,error:l,isSupported:f,formattedDuration:R(r),startRecording:v,stopRecording:S,pauseRecording:A,resumeRecording:E,downloadRecording:N,getRecordingFile:T,uploadRecording:P,clearRecording:L}}const UH=["um","uh","uhh","umm","er","err","ah","ahh","like","you know","basically","actually","literally","so","well","right","okay","i mean","kind of","sort of"],TC={strict:{questionTimeLimit:120,silenceThreshold:3e3,eyeContactThreshold:.7,enabled:!0},stress:{questionTimeLimit:90,silenceThreshold:2e3,eyeContactThreshold:.8,enabled:!0},friendly:{questionTimeLimit:0,silenceThreshold:0,eyeContactThreshold:0,enabled:!1},neutral:{questionTimeLimit:0,silenceThreshold:0,eyeContactThreshold:0,enabled:!1},professional:{questionTimeLimit:0,silenceThreshold:0,eyeContactThreshold:0,enabled:!1}};function OH(n="neutral"){const e=TC[n]||TC.neutral,t=e.enabled,[i,r]=B.useState({totalFrames:0,eyeContactFrames:0,percentage:0,currentlyLooking:!1,history:[]}),[s,a]=B.useState({stabilityScore:100,totalMovement:0,fidgetCount:0,positionHistory:[]}),[o,l]=B.useState({totalCount:0,breakdown:{},percentageOfSpeech:0,instances:[]}),[h,f]=B.useState({totalSilenceMs:0,silenceInstances:[],longestSilence:0,averageSilence:0}),[p,m]=B.useState({wordsPerMinute:0,totalWords:0,totalSpeakingTimeMs:0,speedHistory:[],isTooFast:!1,isTooSlow:!1}),[g,y]=B.useState({timeRemaining:e.questionTimeLimit,isRunning:!1,timedOutQuestions:[],questionStartTime:null}),[M,_]=B.useState({isRecording:!1,blob:null,url:null,duration:0}),[v,S]=B.useState(null),A=B.useRef(null),E=B.useRef(null),N=B.useRef([]),T=B.useRef(null),P=B.useRef(null),L=B.useRef(null),R=B.useRef(null),b=B.useRef(0),D=B.useRef(null),X=B.useRef(null),$=B.useRef(0),V=B.useCallback(async()=>{if(t)try{const ce=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:640,height:480},audio:!1});E.current=ce,N.current=[];const Se=new MediaRecorder(ce,{mimeType:"video/webm;codecs=vp9"});Se.ondataavailable=Ce=>{Ce.data.size>0&&N.current.push(Ce.data)},Se.onstop=()=>{const Ce=new Blob(N.current,{type:"video/webm"}),be=URL.createObjectURL(Ce);_(Pe=>({...Pe,isRecording:!1,blob:Ce,url:be}))},A.current=Se,Se.start(1e3),D.current=Date.now(),_(Ce=>({...Ce,isRecording:!0})),console.log("[Analytics] Video recording started")}catch(ce){console.error("[Analytics] Failed to start video recording:",ce)}},[t]),K=B.useCallback(()=>{if(A.current&&A.current.state!=="inactive"){A.current.stop();const ce=D.current?(Date.now()-D.current)/1e3:0;_(Se=>({...Se,duration:ce}))}E.current&&(E.current.getTracks().forEach(ce=>ce.stop()),E.current=null),console.log("[Analytics] Video recording stopped")},[]),q=B.useCallback((ce,Se=null)=>{t&&(r(Ce=>{const be=Ce.totalFrames+1,Pe=ce?Ce.eyeContactFrames+1:Ce.eyeContactFrames,H=Pe/be*100;return{totalFrames:be,eyeContactFrames:Pe,percentage:Math.round(H*10)/10,currentlyLooking:ce,history:[...Ce.history.slice(-100),{looking:ce,timestamp:Date.now()}]}}),Se&&ue(Se))},[t]),ue=B.useCallback(ce=>{if(!t||!ce)return;const{x:Se,y:Ce}=ce,be=Date.now();a(Pe=>{const H=[...Pe.positionHistory.slice(-60),{x:Se,y:Ce,timestamp:be}];let ve=0,pe=0;if(P.current){const de=Math.abs(Se-P.current.x),ie=Math.abs(Ce-P.current.y);ve=Math.sqrt(de*de+ie*ie),ve>.05&&ve<.15&&(pe=1)}P.current={x:Se,y:Ce};let Me=100;if(H.length>=10){const de=H.slice(-30),ie=de.reduce((k,te)=>k+te.x,0)/de.length,Re=de.reduce((k,te)=>k+te.y,0)/de.length,F=de.reduce((k,te)=>k+Math.pow(te.x-ie,2)+Math.pow(te.y-Re,2),0)/de.length;Me=Math.max(0,Math.min(100,100-F*2e3))}return{stabilityScore:Math.round(Me),totalMovement:Pe.totalMovement+ve,fidgetCount:Pe.fidgetCount+pe,positionHistory:H}})},[t]),U=B.useCallback((ce,Se=0)=>{if(!t||!ce)return;const Ce=ce.toLowerCase(),Pe=Ce.split(/\s+/).length,H={};UH.forEach(pe=>{const Me=new RegExp(`\\b${pe}\\b`,"gi"),de=Ce.match(Me);de&&de.length>0&&(H[pe]=de.length)});const ve=Object.values(H).reduce((pe,Me)=>pe+Me,0);l(pe=>({totalCount:ve,breakdown:H,percentageOfSpeech:Pe>0?ve/Pe*100:0,instances:Object.entries(H).map(([Me,de])=>({word:Me,count:de,questionIndex:Se,timestamp:Date.now()}))})),$.current=Pe},[t]),j=B.useCallback((ce,Se=0)=>{if(!t)return;const Ce=Date.now();if(ce){if(X.current||(X.current=Ce),R.current){const be=Ce-R.current;be>=e.silenceThreshold&&f(Pe=>{const H=[...Pe.silenceInstances,{startTime:R.current,duration:be,questionIndex:Se}],ve=H.reduce((Me,de)=>Me+de.duration,0),pe=H.length>0?ve/H.length:0;return{totalSilenceMs:ve,silenceInstances:H,longestSilence:Math.max(Pe.longestSilence,be),averageSilence:pe}}),R.current=null}L.current=Ce}else L.current&&!R.current&&(R.current=Ce)},[t,e.silenceThreshold]),W=B.useCallback((ce,Se)=>{if(!t||Se<=0)return;const Ce=ce/Se*6e4;m(be=>({wordsPerMinute:Math.round(Ce),totalWords:ce,totalSpeakingTimeMs:Se,speedHistory:[...be.speedHistory.slice(-20),{wpm:Math.round(Ce),timestamp:Date.now()}],isTooFast:Ce>180,isTooSlow:Ce<100}))},[t]),Y=B.useCallback((ce=0)=>{!t||e.questionTimeLimit<=0||(b.current=ce,y(Se=>({...Se,timeRemaining:e.questionTimeLimit,isRunning:!0,questionStartTime:Date.now()})),T.current&&clearInterval(T.current),T.current=setInterval(()=>{y(Se=>{const Ce=Se.timeRemaining-1;return Ce<=0?(clearInterval(T.current),{...Se,timeRemaining:0,isRunning:!1,timedOutQuestions:[...Se.timedOutQuestions,ce]}):{...Se,timeRemaining:Ce}})},1e3),console.log("[Analytics] Question timer started:",e.questionTimeLimit,"seconds"))},[t,e.questionTimeLimit]),re=B.useCallback(()=>{T.current&&(clearInterval(T.current),T.current=null),y(ce=>({...ce,isRunning:!1}))},[]),Q=B.useCallback(()=>{T.current&&(clearInterval(T.current),T.current=null),y(ce=>({...ce,isRunning:!1}))},[]),oe=B.useCallback(()=>{!t||g.timeRemaining<=0||(T.current=setInterval(()=>{y(ce=>{const Se=ce.timeRemaining-1;return Se<=0?(clearInterval(T.current),{...ce,timeRemaining:0,isRunning:!1,timedOutQuestions:[...ce.timedOutQuestions,b.current]}):{...ce,timeRemaining:Se,isRunning:!0}})},1e3))},[t,g.timeRemaining]),ge=B.useCallback(()=>{const ce=D.current?Date.now()-D.current:p.totalSpeakingTimeMs,Se=ce>0?$.current/ce*6e4:p.wordsPerMinute;let Ce="Needs Improvement";i.percentage>=80?Ce="Excellent":i.percentage>=70?Ce="Good":i.percentage>=50&&(Ce="Fair");let be="Needs Improvement";s.stabilityScore>=85?be="Excellent":s.stabilityScore>=70?be="Good":s.stabilityScore>=50&&(be="Fair");let Pe="Good";Se>180?Pe="Too Fast (Nervous)":Se<100?Pe="Too Slow":Se>=120&&Se<=160&&(Pe="Excellent");const H={eyeContact:{percentage:Math.round(i.percentage),grade:Ce,totalFrames:i.totalFrames,recommendation:i.percentage<70?"Try to maintain eye contact with the camera more consistently. This shows confidence and engagement.":"Great job maintaining eye contact!"},posture:{stabilityScore:s.stabilityScore,grade:be,fidgetCount:s.fidgetCount,recommendation:s.stabilityScore<70?"Try to stay more steady during your responses. Excessive movement can appear nervous.":"Good posture control throughout the interview!"},fillerWords:{totalCount:o.totalCount,breakdown:o.breakdown,percentageOfSpeech:Math.round(o.percentageOfSpeech*100)/100,recommendation:o.totalCount>10?'Work on reducing filler words. Practice pausing instead of using "um" or "uh".':o.totalCount>5?"Some filler words detected. A bit of practice can help reduce these.":"Excellent! Minimal filler words used."},silence:{totalSilenceSeconds:Math.round(h.totalSilenceMs/1e3),instanceCount:h.silenceInstances.length,longestSilenceSeconds:Math.round(h.longestSilence/1e3),recommendation:h.silenceInstances.length>3?"Several awkward pauses detected. Practice your responses to speak more fluently.":"Good flow! Minimal awkward silences."},speed:{wordsPerMinute:Math.round(Se),grade:Pe,recommendation:Se>180?"You're speaking quite fast. Try to slow down to ensure clarity.":Se<100?"Consider speaking a bit faster to maintain engagement.":"Great speaking pace!"},timer:{timedOutQuestions:g.timedOutQuestions.length,questionIndexes:g.timedOutQuestions},video:{available:M.blob!==null,url:M.url,duration:Math.round(M.duration)},overallScore:Math.round(i.percentage*.25+s.stabilityScore*.2+Math.max(0,100-o.totalCount*3)*.2+Math.max(0,100-h.silenceInstances.length*10)*.15+(Se>=120&&Se<=160?100:Math.max(0,100-Math.abs(140-Se)))*.2),timestamp:new Date().toISOString(),mode:n};return S(H),console.log("[Analytics] Summary generated:",H),H},[i,s,o,h,p,g,M,n]);B.useEffect(()=>()=>{K(),re()},[K,re]);const Te=B.useCallback(()=>{r({totalFrames:0,eyeContactFrames:0,percentage:0,currentlyLooking:!1,history:[]}),a({stabilityScore:100,totalMovement:0,fidgetCount:0,positionHistory:[]}),l({totalCount:0,breakdown:{},percentageOfSpeech:0,instances:[]}),f({totalSilenceMs:0,silenceInstances:[],longestSilence:0,averageSilence:0}),m({wordsPerMinute:0,totalWords:0,totalSpeakingTimeMs:0,speedHistory:[],isTooFast:!1,isTooSlow:!1}),y({timeRemaining:e.questionTimeLimit,isRunning:!1,timedOutQuestions:[],questionStartTime:null}),_({isRecording:!1,blob:null,url:null,duration:0}),S(null),P.current=null,L.current=null,R.current=null,D.current=null,X.current=null,$.current=0,N.current=[]},[e.questionTimeLimit]);return{isAnalyticsEnabled:t,config:e,eyeContactData:i,postureData:s,fillerWordData:o,silenceData:h,speedData:p,timerData:g,videoData:M,summary:v,startVideoRecording:V,stopVideoRecording:K,updateEyeContact:q,updatePosture:ue,analyzeTranscript:U,trackSpeech:j,updateSpeakingSpeed:W,startQuestionTimer:Y,stopQuestionTimer:re,pauseTimer:Q,resumeTimer:oe,generateSummary:ge,resetAnalytics:Te}}const jH=(n,e)=>{let t;return(...i)=>{clearTimeout(t),t=setTimeout(()=>n(...i),e)}};function bC(){var Hh,Vh,Ul,Ol,ga,Wh,jl;const n=di(),e=mo(),{sessionId:t}=mg(),i=B.useRef(null),r=B.useRef(null),s=ns(),[a,o]=B.useState(t||null),[l,h]=B.useState("loading"),[f,p]=B.useState([]),[m,g]=B.useState(null),[y,M]=B.useState(null),[_,v]=B.useState(""),[S,A]=B.useState("professional"),[E,N]=B.useState(""),[T,P]=B.useState(!1),[L,R]=B.useState(null),[b,D]=B.useState(null),[X,$]=B.useState(!1),[V,K]=B.useState(!0),[q,ue]=B.useState(!0),[U,j]=B.useState(!0),[W,Y]=B.useState(!1),[re,Q]=B.useState("idle"),oe=B.useRef(null),ge=B.useRef(""),Te=2e3,[ce,Se]=B.useState("GREETING"),Ce=B.useRef(!1),be=["yes","yeah","ready","start","begin","let's go","sure","ok","okay","yep","yup","absolutely","definitely","go ahead","i'm ready","let's start","let's begin"],Pe=["no","not now","later","wait","not yet","hold on","give me a moment","one second","nope"],H=["hi","hello","hey","good morning","good afternoon","good evening","greetings","howdy","hii","hiii"],ve=["my name is","i am","i'm","this is","call me","you can call me","myself"],pe=["give me some time","give me a moment","one moment","just a second","wait a minute","hold on","let me think","i need a moment","can we start later","not ready yet"],Me=["what is","what are","how does","how do","can you explain","explain","tell me about","define","meaning of","difference between","why is","why do","when should","when do"],de=["pause","stop","break","resume","continue","skip","next question"],ie={DSA:{name:"DSA Round",icon:"",color:"#10b981",description:"Data Structures & Algorithms"},TECHNICAL:{name:"Technical Round",icon:"",color:"#6366f1",description:"Role-specific Technical Questions"},BEHAVIORAL:{name:"Behavioral Round",icon:"",color:"#f59e0b",description:"Soft Skills & Communication"},HR:{name:"HR Round",icon:"",color:"#8b5cf6",description:"Cultural Fit & HR Questions"},SITUATIONAL:{name:"Situational Round",icon:"",color:"#ec4899",description:"Real-world Scenario Questions"}},[Re,F]=B.useState(null),[k,te]=B.useState(!1),[ye,Ee]=B.useState(null),[we,Ke]=B.useState([]),Be=B.useRef(null),[He,st]=B.useState(null),{isSpeaking:ft,isListening:xe,transcript:ot,audioLevel:Et,ttsSupported:pt,sttSupported:qe,speak:Xe,stopSpeaking:yt,startListening:It,stopListening:zt,clearTranscript:gt}=LH(),{cameraPermission:Le,micPermission:J,permissionError:ke,isSupported:Fe,isCameraReady:nt,isMicReady:rt,isBlocked:Wt,facePosition:Dt,isFaceDetected:on,requestAllPermissions:In,retryPermissions:Xt,startFaceTracking:Bn,stopFaceTracking:Oi,stopAllMedia:da}=bH(),{isRecording:xo,recordingBlob:ha,startRecording:as,stopRecording:fa,downloadRecording:Ll,isSupported:Dl}=FH(),{isAnalyticsEnabled:_n,config:os,eyeContactData:_o,postureData:O,fillerWordData:ne,timerData:se,startVideoRecording:he,stopVideoRecording:le,updateEyeContact:ze,analyzeTranscript:Ze,trackSpeech:at,updateSpeakingSpeed:ct,startQuestionTimer:mt,stopQuestionTimer:vt,generateSummary:xt,resetAnalytics:$t}=OH(S),[jn,qt]=B.useState(!1),[Cn,ut]=B.useState(null),Ve=B.useMemo(()=>{const _e={strict:{label:"Strict",icon:"",color:"persona-strict"},friendly:{label:"Friendly",icon:"",color:"persona-friendly"},stress:{label:"High-Pressure",icon:"",color:"persona-stress"},neutral:{label:"Balanced",icon:"",color:"persona-neutral"},professional:{label:"Balanced",icon:"",color:"persona-neutral"}};return _e[S]||_e.neutral},[S]);B.useEffect(()=>{if(!_n||ce!=="INTERVIEW_IN_PROGRESS")return;const _e=on&&Dt&&Math.abs(Dt.x)<.3&&Math.abs(Dt.y)<.3;ze(_e,Dt)},[on,Dt,_n,ce,ze]);const hi=B.useCallback(_e=>{if(!_e)return"TECHNICAL";const Oe=_e.toLowerCase();return Oe.includes("dsa")||Oe.includes("algorithm")||Oe.includes("data structure")?"DSA":Oe.includes("technical")||Oe.includes("coding")||Oe.includes("system")?"TECHNICAL":Oe.includes("behavioral")||Oe.includes("soft")||Oe.includes("communication")?"BEHAVIORAL":Oe.includes("hr")||Oe.includes("culture")||Oe.includes("fit")?"HR":Oe.includes("situational")||Oe.includes("scenario")?"SITUATIONAL":"TECHNICAL"},[]),St=B.useCallback((_e,Oe)=>{_e&&!we.includes(_e)&&Ke($e=>[...$e,_e]);const Qt=!_e;Ee({from:_e?ie[_e]:null,to:ie[Oe],isFirst:Qt}),te(!0),setTimeout(()=>{te(!1),F(Oe),Be.current=Oe},2500)},[we,ie]),Nt=B.useCallback(async(_e,Oe=!0)=>{if(_e){if(console.log("[Speech] Speaking:",_e.substring(0,50)+"..."),xe&&zt(),Q("bot_speaking"),q&&pt)try{await Xe(_e)}catch(Qt){console.warn("TTS error:",Qt)}else await new Promise(Qt=>setTimeout(Qt,1500));Oe&&l==="in_progress"&&qe?(console.log("[Speech] Auto-enabling mic for user turn..."),Q("user_turn"),gt(),ge.current="",setTimeout(()=>{It(),console.log("[Speech] Started listening for user input")},300)):(console.log("[Speech] Not enabling mic:",{autoEnableMic:Oe,status:l,sttSupported:qe,isMicReady:rt}),Q("idle"))}},[q,pt,Xe,xe,zt,It,gt,l,qe,rt]),Qi=B.useCallback(async _e=>{try{const Oe=await Zu.getState(_e);if(Oe.success)o(_e),h(Oe.status),p(Oe.messages||[]),g(Oe.current_question),M(Oe.progress),v(Oe.target_role),A(Oe.interviewer_persona||"professional"),st(Date.now()),j(!1);else throw new Error(Oe.message||"Failed to load session")}catch(Oe){console.error("Failed to load session:",Oe),R("Failed to load interview session. Please try again."),h("error")}},[]),dn=B.useRef(null),hn=B.useCallback(async()=>{var Qt,Tn,$e;const _e=(Qt=e.state)==null?void 0:Qt.planId,Oe=((Tn=e.state)==null?void 0:Tn.personality)||(($e=e.state)==null?void 0:$e.persona)||"neutral";if(!_e){n("/interview-prep");return}try{h("starting");const Ot=await Zu.start(_e,Oe);if(Ot.success){o(Ot.session_id),h("in_progress"),M(Ot.progress),A(Oe),v(Ot.target_role||"Interview"),dn.current=Ot.first_question;const ht="Hi, I'm your AI Interviewer. Are you ready to begin?",rn=[{id:"greeting",role:"interviewer",content:ht,message_type:"greeting",created_at:new Date().toISOString()}];p(rn),g(null),Se("WAITING_FOR_CONSENT"),Ce.current=!0,window.history.replaceState(null,"",`/interview/${Ot.session_id}`),Dl&&nt&&(console.log("[V3] Auto-starting interview recording..."),as()),setTimeout(()=>{Nt(ht,!0)},500),nt&&Bn()}else throw new Error(Ot.message||"Failed to start interview")}catch(Ot){console.error("Failed to start interview:",Ot),R(Ot.message||"Failed to start interview"),h("error")}},[e.state,n,Nt,nt,Bn]),ln=B.useCallback(async()=>{if(!dn.current){console.error("[Consent] No first question stored");return}const _e=dn.current.round_name||dn.current.category,Oe=hi(_e);St(null,Oe);try{a&&(await Zu.confirmConsent(a),console.log("[Consent] Backend consent confirmed, first question recorded"))}catch(Qt){console.warn("[Consent] Backend consent call failed, continuing anyway:",Qt)}_n&&(console.log("[Analytics] Starting performance tracking for",S,"mode"),he(),$t()),setTimeout(()=>{const Qt={id:"first-question",role:"interviewer",content:dn.current.text,message_type:"question",question_id:dn.current.id,question_index:0,round_name:dn.current.round_name,difficulty:dn.current.difficulty,created_at:new Date().toISOString()};p($e=>[...$e,Qt]),g(dn.current),st(Date.now()),Se("INTERVIEW_IN_PROGRESS"),_n&&os.questionTimeLimit>0&&(console.log("[Analytics] Starting question timer:",os.questionTimeLimit,"seconds"),mt(0));const Tn="Great, let's start the interview. "+dn.current.text;Nt(Tn,!0)},2600)},[Nt,hi,St,a,_n,S,he,$t,os,mt]),Zi=B.useCallback(_e=>{const Oe=_e.toLowerCase().trim();return H.some(bn=>Oe.split(/\s+/).some(Ao=>Ao===bn||Ao.startsWith(bn)))&&Oe.split(" ").length<=5?"GREETING":ve.some(bn=>Oe.includes(bn))?"INTRODUCTION":pe.some(bn=>Oe.includes(bn))?"TIME_REQUEST":Me.some(bn=>Oe.startsWith(bn)||Oe.includes(bn))&&Oe.includes("?")?"KNOWLEDGE_QUESTION":de.some(bn=>Oe.includes(bn))?"CONTROL":be.some(bn=>Oe.includes(bn))?"CONSENT":Pe.some(bn=>Oe.includes(bn))?"DECLINE":"GENERAL_MESSAGE"},[H,ve,pe,Me,de,be,Pe]),Ns=B.useCallback(_e=>{_e.toLowerCase().trim();const Oe=[/my name is\s+(\w+)/i,/i'?m\s+(\w+)/i,/i am\s+(\w+)/i,/this is\s+(\w+)/i,/call me\s+(\w+)/i];for(const Qt of Oe){const Tn=_e.match(Qt);if(Tn&&Tn[1])return Tn[1].charAt(0).toUpperCase()+Tn[1].slice(1)}return null},[]),zn=B.useCallback(_e=>{const Oe=Zi(_e),Qt=new Date().toISOString();console.log("[Intent Router] Input:",_e,"-> Intent:",Oe,"-> Phase:",ce);const Tn={id:`user-${Date.now()}`,role:"candidate",content:_e,message_type:Oe.toLowerCase(),created_at:Qt};switch(p($e=>[...$e,Tn]),Oe){case"GREETING":{const $e={id:`greeting-resp-${Date.now()}`,role:"interviewer",content:"Hello! Nice to meet you. I'm your AI Interviewer today. Are you ready to begin the interview?",message_type:"greeting_response",created_at:new Date().toISOString()};return p(Ot=>[...Ot,$e]),Nt("Hello! Nice to meet you. I'm your AI Interviewer today. Are you ready to begin the interview?",!0),!0}case"INTRODUCTION":{const $e=Ns(_e),Ot=$e?`Nice to meet you, ${$e}! I'm glad you're here today. Shall we begin the interview?`:"Nice to meet you! I appreciate you introducing yourself. Shall we begin the interview?",ht={id:`intro-resp-${Date.now()}`,role:"interviewer",content:Ot,message_type:"introduction_response",created_at:new Date().toISOString()};return p(rn=>[...rn,ht]),Nt(Ot,!0),!0}case"TIME_REQUEST":{const $e="Of course, take all the time you need. Just say 'ready' or 'yes' when you're prepared to start.",Ot={id:`time-resp-${Date.now()}`,role:"interviewer",content:$e,message_type:"time_response",created_at:new Date().toISOString()};return p(ht=>[...ht,Ot]),Nt($e,!0),!0}case"KNOWLEDGE_QUESTION":{const $e="That's a great question! While I'm here primarily as your interviewer, let me help you with that. During the actual interview, feel free to ask clarifying questions about the interview questions themselves. For now, shall we begin the interview?",Ot={id:`knowledge-resp-${Date.now()}`,role:"interviewer",content:$e,message_type:"knowledge_response",created_at:new Date().toISOString()};return p(ht=>[...ht,Ot]),Nt($e,!0),!0}case"CONSENT":return ln(),!0;case"DECLINE":{const $e="No problem at all. Take your time to prepare. Just let me know when you're ready to begin.",Ot={id:`decline-resp-${Date.now()}`,role:"interviewer",content:$e,message_type:"decline_response",created_at:new Date().toISOString()};return p(ht=>[...ht,Ot]),Nt($e,!0),!0}case"CONTROL":{const $e="I understand. Let me know when you're ready to proceed with the interview.",Ot={id:`control-resp-${Date.now()}`,role:"interviewer",content:$e,message_type:"control_response",created_at:new Date().toISOString()};return p(ht=>[...ht,Ot]),Nt($e,!0),!0}default:{const $e="Thank you for sharing. I'm your AI Interviewer, and I'm here to help you practice. When you're ready to start the interview, just say 'yes' or 'ready'.",Ot={id:`general-resp-${Date.now()}`,role:"interviewer",content:$e,message_type:"general_response",created_at:new Date().toISOString()};return p(ht=>[...ht,Ot]),Nt($e,!0),!0}}},[Zi,Ns,ce,Nt,ln]),pa=B.useCallback(()=>{j(!1),Y(!1),hn()},[hn]),bi=B.useCallback(()=>{j(!1),Y(!0),K(!1),hn()},[hn]);B.useEffect(()=>{var _e;t?Qi(t):(_e=e.state)!=null&&_e.planId?(h("permission"),j(!0)):n("/interview-prep")},[t,e.state,Qi,n]),B.useEffect(()=>{i.current&&i.current.scrollIntoView({behavior:"smooth"})},[f]),B.useEffect(()=>{l==="in_progress"&&!T&&r.current&&r.current.focus()},[l,T,m]);const So=B.useMemo(()=>jH(_e=>N(_e),150),[]),Gh=B.useRef("");B.useEffect(()=>{Gh.current=ot||""},[ot]),B.useEffect(()=>{console.log("[Transcript Sync] Effect fired:",{transcript:ot==null?void 0:ot.substring(0,50),isListening:xe,hasTranscript:!!ot,transcriptLength:ot==null?void 0:ot.length}),ot&&xe?(console.log("[Transcript Sync] Updating answer with transcript:",ot.substring(0,50)),N(ot),So(ot),_n&&(at(!0,(y==null?void 0:y.current_question)||0),Ze(ot,(y==null?void 0:y.current_question)||0)),ot!==ge.current&&(console.log("[Transcript Sync] New transcript detected, resetting silence timer"),ge.current=ot,oe.current&&clearTimeout(oe.current),ot.trim().length>=10&&(oe.current=setTimeout(()=>{const _e=Gh.current;console.log("[V3] Silence detected, checking transcript:",_e==null?void 0:_e.substring(0,30)),_n&&at(!1,(y==null?void 0:y.current_question)||0),_e&&_e.trim().length>=10&&(console.log("[V3] Auto-submitting voice answer:",_e.substring(0,50)),zt(),N(_e),setTimeout(()=>{ls()},50))},Te)))):!xe&&_n&&at(!1,(y==null?void 0:y.current_question)||0)},[ot,xe,So,zt,_n,at,Ze,y]),B.useEffect(()=>{!xe&&oe.current&&(clearTimeout(oe.current),oe.current=null)},[xe]),B.useEffect(()=>{if(!_n||se.timeRemaining!==0||!se.timedOutQuestions.length)return;const _e=se.timedOutQuestions[se.timedOutQuestions.length-1],Oe=(y==null?void 0:y.current_question)||0;_e===Oe&&!T&&(console.log("[Analytics] Timer expired! Auto-submitting answer..."),E.trim().length>0?ls():(N("I ran out of time for this question."),setTimeout(()=>{ls()},100)))},[se.timeRemaining,se.timedOutQuestions,_n,y,T,E]),B.useEffect(()=>()=>{da(),yt(),CC(),oe.current&&clearTimeout(oe.current),_n&&le()},[da,yt,_n,le]);const Vg=B.useCallback(()=>{if(console.log("[Voice] Toggle requested:",{isListening:xe,isSpeaking:ft,conversationState:re,sttSupported:qe}),ft||re==="bot_speaking"){console.log("[Voice] Cannot toggle - bot is speaking");return}if(!qe){console.warn("[Voice] Speech recognition not supported in this browser");return}xe?(console.log("[Voice] Stopping listening..."),zt(),Q("idle")):(console.log("[Voice] Starting listening..."),yt(),gt(),ge.current="",It(),Q("user_turn"))},[xe,ft,re,It,zt,yt,gt,qe]),ls=async _e=>{_e==null||_e.preventDefault();const Oe=E.trim();if(console.log("[Submit] Attempting to submit:",{answerLength:Oe.length,submitting:T,interviewPhase:ce,sessionId:a}),!Oe||T){console.log("[Submit] Blocked - empty answer or already submitting");return}if(xe&&zt(),ce==="WAITING_FOR_CONSENT"){console.log("[Submit] Routing through intent classifier"),zn(Oe),N(""),gt();return}if(ce!=="INTERVIEW_IN_PROGRESS"){console.warn("[Phase] Cannot submit answer - not in interview phase:",ce),N(""),gt();return}console.log("[Submit] Sending answer to backend...");const Qt=He?Math.round((Date.now()-He)/1e3):null;P(!0),R(null);const Tn={id:`user-${Date.now()}`,role:"candidate",content:Oe,message_type:"answer",created_at:new Date().toISOString()};p($e=>[...$e,Tn]),N(""),gt();try{const $e=await Zu.submitAnswer(a,Oe,Qt);if($e.success){const Ot={id:`ack-${Date.now()}`,role:"interviewer",content:$e.acknowledgment,message_type:"acknowledgment",created_at:new Date().toISOString()};if(p(ht=>[...ht,Ot]),M($e.progress),_n){vt();const ht=He?Date.now()-He:0,rn=Oe.split(/\s+/).length;ht>0&&ct(rn,ht)}if(m&&hD.quick(a,m.id,m.text||"",Oe,m.type).then(ht=>{ht.success&&ht.result&&(D(ht.result),$(!0),setTimeout(()=>$(!1),5e3))}).catch(console.warn),$e.is_complete){await Nt($e.acknowledgment,!1),await new Promise(rn=>setTimeout(rn,800)),_n&&(console.log("[Analytics] Interview complete, generating summary..."),le(),setTimeout(()=>{const rn=xt();ut(rn),qt(!0),console.log("[Analytics] Performance summary ready")},500)),h("completed"),g(null),Se("INTERVIEW_COMPLETED"),VD(a,{targetRole:_,date:new Date().toISOString()});const ht={id:`complete-${Date.now()}`,role:"interviewer",content:"Thank you for your time. That concludes our interview. Your results will be ready shortly.",message_type:"transition",created_at:new Date().toISOString()};p(rn=>[...rn,ht]),Nt("Thank you for your time. That concludes our interview.",!1)}else if($e.next_question){await Nt($e.acknowledgment);const ht=$e.next_question.round_name||$e.next_question.category,rn=hi(ht);rn&&Be.current&&rn!==Be.current?St(Be.current,rn):rn&&!Be.current?(Be.current=rn,F(rn)):rn&&F(rn);const Xh={id:`q-${Date.now()}`,role:"interviewer",content:$e.next_question.text,message_type:"question",question_id:$e.next_question.id,question_index:$e.next_question.index,round_name:$e.next_question.round_name,difficulty:$e.next_question.difficulty,created_at:new Date().toISOString()};p(bn=>[...bn,Xh]),g($e.next_question),st(Date.now()),_n&&os.questionTimeLimit>0&&mt($e.next_question.index||(y==null?void 0:y.current_question)||0),setTimeout(()=>{Nt($e.next_question.text)},300)}}else throw new Error($e.message||"Failed to submit answer")}catch($e){console.error("Submit answer error:",$e),R($e.message||"Failed to submit answer. Please try again.")}finally{P(!1)}},kl=async()=>{try{(await Zu.resume(a)).success&&h("in_progress")}catch{R("Failed to resume interview")}},ma=()=>{Oi(),CC(),xo&&fa(),ha&&window.confirm("Do you want to download your interview recording?")&&Ll(`interview-${a}.webm`),n(`/report/${a}`)},Fl=B.useCallback(_e=>{const Oe=_e.role==="interviewer";return _e.role==="system"?c.jsx("div",{className:"chat-message system",children:c.jsx("span",{className:"system-badge",children:_e.content})},_e.id):c.jsxs("div",{className:`chat-message ${Oe?"interviewer":"user"}`,children:[c.jsx("div",{className:"message-avatar",children:Oe?c.jsx("span",{className:"avatar-icon interviewer",children:Ve.icon}):c.jsx("span",{className:"avatar-icon user",children:""})}),c.jsxs("div",{className:"message-content",children:[c.jsxs("div",{className:"message-header",children:[c.jsx("span",{className:"sender-name",children:Oe?"Interviewer":"You"}),_e.message_type==="question"&&c.jsxs("span",{className:"question-badge",children:["Q",(_e.question_index||0)+1]})]}),c.jsx("div",{className:"message-bubble",children:_e.content})]})]},_e.id)},[Ve]);return U&&l==="permission"?c.jsxs("div",{className:"live-interview-container",children:[c.jsx(Yn,{user:s}),c.jsx(RH,{onPermissionsGranted:pa,onSkip:bi,requestAllPermissions:In,retryPermissions:Xt,cameraPermission:Le,micPermission:J,permissionError:ke,isSupported:Fe,isCameraReady:nt,isMicReady:rt,isBlocked:Wt})]}):l==="loading"||l==="starting"?c.jsxs("div",{className:"live-interview-container",children:[c.jsx(Yn,{user:s}),c.jsx("main",{className:"interview-loading",children:c.jsxs("div",{className:"loading-card",children:[c.jsx(Lr,{size:48,className:"spin"}),c.jsx("h2",{children:l==="starting"?"Starting Interview...":"Loading..."}),c.jsx("p",{children:"Preparing your personalized interview experience"})]})})]}):l==="error"?c.jsxs("div",{className:"live-interview-container",children:[c.jsx(Yn,{user:s}),c.jsx("main",{className:"interview-loading",children:c.jsxs("div",{className:"error-card",children:[c.jsx(ni,{size:48}),c.jsx("h2",{children:"Something went wrong"}),c.jsx("p",{children:L}),c.jsx("button",{className:"btn btn-primary",onClick:()=>n("/interview-prep"),children:"Back to Interview Prep"})]})})]}):c.jsxs("div",{className:"live-interview-container",children:[c.jsx(Yn,{user:s,minimal:!0}),k&&ye&&c.jsx("div",{className:"round-transition-overlay",children:c.jsxs("div",{className:`round-transition-content ${ye.isFirst?"interview-start":"round-change"}`,children:[c.jsx("div",{className:"round-transition-icon",style:{backgroundColor:(Hh=ye.to)!=null&&Hh.color?`${ye.to.color}20`:"rgba(99, 102, 241, 0.1)",borderColor:((Vh=ye.to)==null?void 0:Vh.color)||"#6366f1"},children:((Ul=ye.to)==null?void 0:Ul.icon)||""}),c.jsx("div",{className:"round-transition-to",children:ye.isFirst?"Interview Starting":`Moving to ${((Ol=ye.to)==null?void 0:Ol.name)||"Next Round"}`}),!ye.isFirst&&c.jsx("div",{className:"round-transition-name",style:{color:((ga=ye.to)==null?void 0:ga.color)||"#6366f1"},children:((Wh=ye.to)==null?void 0:Wh.name)||"Next Round"}),c.jsx("div",{className:"round-transition-description",children:((jl=ye.to)==null?void 0:jl.description)||"Get ready for your mock interview"}),ye.from&&c.jsxs("div",{className:"round-transition-from",children:[c.jsx("span",{className:"from-icon",children:ye.from.icon}),c.jsxs("span",{className:"from-text",children:[ye.from.name," Complete "]})]}),c.jsx("div",{className:"round-transition-progress",children:["DSA","TECHNICAL","BEHAVIORAL","HR"].map(_e=>{var Oe,Qt,Tn,$e,Ot,ht;return c.jsxs("div",{className:`round-dot 
                                        ${we.includes(_e)?"completed":""} 
                                        ${ye.to&&((Oe=ie[_e])==null?void 0:Oe.name)===((Qt=ye.to)==null?void 0:Qt.name)?"current":""}`,title:(Tn=ie[_e])==null?void 0:Tn.name,style:{borderColor:ye.to&&(($e=ie[_e])==null?void 0:$e.name)===((Ot=ye.to)==null?void 0:Ot.name)?ye.to.color:void 0},children:[c.jsx("span",{className:"dot-icon",children:(ht=ie[_e])==null?void 0:ht.icon}),c.jsx("span",{className:"dot-label",children:_e})]},_e)})})]})}),c.jsxs("main",{className:"interview-main",children:[L&&l!=="error"&&c.jsxs("div",{className:"error-banner",children:[c.jsx(ni,{size:16}),c.jsx("span",{children:L}),c.jsx("button",{onClick:()=>R(null),children:""})]}),l==="paused"&&c.jsx("div",{className:"paused-overlay",children:c.jsxs("div",{className:"paused-card",children:[c.jsx(BD,{size:48}),c.jsx("h3",{children:"Interview Paused"}),c.jsx("p",{children:"Your progress is saved. Resume when you're ready."}),c.jsxs("button",{className:"btn btn-primary btn-lg",onClick:kl,children:[c.jsx(hR,{size:20})," Resume Interview"]})]})}),c.jsxs("div",{className:`interview-content ${V?"":"no-avatar"}`,children:[V&&c.jsxs("div",{className:"avatar-panel",children:[c.jsxs("div",{className:"avatar-panel-header",children:[c.jsxs("div",{className:"header-left",children:[c.jsxs("div",{className:"header-title",children:[c.jsx(yx,{size:18}),c.jsx("span",{children:"Interview"})]}),c.jsxs("span",{className:`persona-badge ${Ve.color}`,children:[Ve.icon," ",Ve.label]})]}),c.jsx("div",{className:"header-center",children:y&&c.jsxs(c.Fragment,{children:[c.jsxs("span",{className:"question-progress",children:["Question ",y.current_question," / ",y.total_questions]}),c.jsx("div",{className:"progress-bar-mini",children:c.jsx("div",{className:"fill",style:{width:`${y.current_question/y.total_questions*100}%`}})})]})}),c.jsxs("div",{className:"header-controls",children:[c.jsx("button",{className:`header-icon-btn ${V?"active":""}`,onClick:()=>K(!V),title:"Toggle Avatar",children:c.jsx(Kc,{size:18})}),pt&&c.jsx("button",{className:`header-icon-btn ${q?"active":""}`,onClick:()=>ue(!q),title:"Toggle Voice",children:c.jsx(AM,{size:18})}),c.jsx("button",{className:"header-icon-btn",title:"Fullscreen",children:c.jsx(kD,{size:18})})]})]}),c.jsx(yA,{speaking:ft||re==="bot_speaking",listening:re==="user_turn"||xe,audioLevel:Et,enabled:V,enableWebcam:l==="in_progress"&&nt})]}),c.jsxs("div",{className:"chat-panel",children:[c.jsxs("div",{className:"chat-header",children:[y&&c.jsxs("span",{className:"question-label",children:["Question ",y.current_question," / ",y.total_questions]}),Re&&ie[Re]&&c.jsxs("div",{className:"round-indicator",children:[c.jsx("span",{className:"round-indicator-icon",children:ie[Re].icon}),c.jsx("span",{className:"round-indicator-name",children:ie[Re].name})]})]}),_n&&se.isRunning&&os.questionTimeLimit>0&&c.jsx(PH,{timeRemaining:se.timeRemaining,totalTime:os.questionTimeLimit,isRunning:se.isRunning,showWarnings:!0}),_n&&ce==="INTERVIEW_IN_PROGRESS"&&c.jsxs("div",{className:"analytics-stats-bar",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx(Kc,{size:14}),c.jsx("span",{className:"stat-label",children:"Eye Contact"}),c.jsxs("span",{className:`stat-value ${_o.percentage>=70?"good":_o.percentage>=50?"fair":"poor"}`,children:[Math.round(_o.percentage),"%"]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx(fx,{size:14}),c.jsx("span",{className:"stat-label",children:"Stability"}),c.jsxs("span",{className:`stat-value ${O.stabilityScore>=70?"good":O.stabilityScore>=50?"fair":"poor"}`,children:[O.stabilityScore,"%"]})]}),ne.totalCount>0&&c.jsxs("div",{className:"stat-item warning",children:[c.jsx(yx,{size:14}),c.jsx("span",{className:"stat-label",children:"Fillers"}),c.jsx("span",{className:"stat-value",children:ne.totalCount})]})]}),c.jsxs("div",{className:"chat-messages",children:[f.map(Fl),c.jsx("div",{ref:i})]}),X&&b&&c.jsxs("div",{className:`feedback-toast ${b.relevance_score>=6?"good":b.relevance_score>=4?"ok":"needs-work"}`,children:[c.jsxs("div",{className:"feedback-header",children:[b.relevance_score>=6?c.jsx(Xn,{size:16}):c.jsx(ni,{size:16}),c.jsx("span",{children:b.relevance_score>=6?"Good Answer":b.relevance_score>=4?"Adequate":"Needs Improvement"}),c.jsx("button",{onClick:()=>$(!1),children:""})]}),c.jsx("p",{children:b.feedback}),c.jsxs("div",{className:"feedback-score",children:["Score: ",b.relevance_score,"/10"]})]}),xe&&qe&&c.jsxs("div",{className:"voice-input-indicator recording",children:[c.jsxs("div",{className:"voice-waves",children:[c.jsx("span",{className:"voice-wave-bar"}),c.jsx("span",{className:"voice-wave-bar"}),c.jsx("span",{className:"voice-wave-bar"}),c.jsx("span",{className:"voice-wave-bar"}),c.jsx("span",{className:"voice-wave-bar"})]}),c.jsx("div",{className:`voice-transcript ${ot?"":"placeholder"}`,children:ot||(ce==="WAITING_FOR_CONSENT"?"Listening... Say 'yes' or 'ready'":"Listening... Speak your answer")})]}),l==="in_progress"&&(m||ce==="WAITING_FOR_CONSENT")&&c.jsx("div",{className:"chat-input-area",children:c.jsxs("form",{onSubmit:ls,children:[c.jsxs("div",{className:"input-container",children:[c.jsx("textarea",{ref:r,value:E,onChange:_e=>N(_e.target.value),placeholder:ce==="WAITING_FOR_CONSENT"?"Say 'yes' or 'ready' to begin...":"Type your answer...",disabled:T,rows:1,className:"chat-input",onKeyDown:_e=>{_e.key==="Enter"&&!_e.shiftKey&&(_e.preventDefault(),ls(_e))}}),c.jsx("div",{className:"input-actions-inline",children:c.jsx("button",{type:"submit",className:`send-btn ${E.trim()?"active":""}`,disabled:T||!E.trim(),title:"Send (Enter)",children:T?c.jsx(Lr,{size:20,className:"spin"}):c.jsx(DD,{size:20})})})]}),c.jsxs("div",{className:"media-controls",children:[qe&&c.jsxs("button",{type:"button",className:`media-btn ${xe?"active recording":"off"}`,onClick:Vg,disabled:T||ft,title:xe?"Stop Recording":"Start Voice Input",children:[xe?c.jsx(PD,{size:20}):c.jsx(gS,{size:20}),xe&&c.jsx("span",{className:"recording-dot"})]}),c.jsx("button",{type:"button",className:`media-btn ${q?"active":"off"}`,onClick:()=>ue(!q),title:q?"Mute Interviewer":"Unmute Interviewer",children:q?c.jsx(AM,{size:20}):c.jsx(OD,{size:20})}),c.jsx("button",{type:"button",className:`media-btn ${nt?"active":"off"}`,title:"Camera",children:nt?c.jsx(Kc,{size:20}):c.jsx(ED,{size:20})})]})]})}),l==="completed"&&c.jsxs("div",{className:"completing-card",children:[c.jsx(Nr,{size:48}),c.jsx("h3",{children:"Interview Complete!"}),c.jsx("p",{children:"Great job! Your responses are being analyzed."}),c.jsx("button",{className:"btn btn-primary btn-lg",onClick:ma,children:"View Your Results"})]})]})]})]}),jn&&Cn&&c.jsx(IH,{summary:Cn,onClose:()=>{qt(!1),ma()}})]})}function zH({plan:n,loading:e=!1,onStartInterview:t,onRegenerate:i}){var o,l,h,f,p;if(e)return c.jsx("div",{className:"plan-preview loading",children:c.jsxs("div",{className:"plan-loading",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Generating your personalized interview plan..."}),c.jsx("p",{className:"loading-hint",children:"This may take a few seconds"})]})});if(!n)return null;const r=m=>{switch(m==null?void 0:m.toLowerCase()){case"easy":return"difficulty-easy";case"medium":return"difficulty-medium";case"hard":return"difficulty-hard";case"expert":return"difficulty-expert";default:return"difficulty-medium"}},s=m=>{switch(m==null?void 0:m.toLowerCase()){case"dsa":return"";case"technical":return"";case"behavioral":return"";case"hr":return"";case"situational":return"";default:return""}},a=m=>{if(m<60)return`${m} min`;const g=Math.floor(m/60),y=m%60;return y>0?`${g}h ${y}m`:`${g} hour${g>1?"s":""}`};return c.jsxs("div",{className:"plan-preview",children:[c.jsxs("div",{className:"plan-header",children:[c.jsxs("div",{className:"plan-title",children:[c.jsx("h3",{children:" Interview Plan Ready"}),c.jsx("span",{className:`difficulty-badge ${r(n.difficulty_level)}`,children:n.difficulty_level})]}),c.jsxs("p",{className:"plan-role",children:["For: ",c.jsx("strong",{children:n.target_role})]}),n.generation_source==="mock"&&c.jsx("span",{className:"mock-badge",children:"Demo Mode"})]}),c.jsxs("div",{className:"plan-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-icon",children:""}),c.jsx("span",{className:"stat-value",children:n.total_questions}),c.jsx("span",{className:"stat-label",children:"Questions"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-icon",children:""}),c.jsx("span",{className:"stat-value",children:a(n.total_questions*3)}),c.jsx("span",{className:"stat-label",children:"Duration"})]})]}),c.jsxs("div",{className:"plan-section",children:[c.jsx("h4",{children:"Question Breakdown"}),c.jsx("div",{className:"breakdown-grid",children:n.breakdown&&Object.entries(n.breakdown).map(([m,g])=>g>0&&c.jsxs("div",{className:"breakdown-item",children:[c.jsx("span",{className:"category-icon",children:s(m)}),c.jsxs("div",{className:"category-info",children:[c.jsx("span",{className:"category-name",children:m.charAt(0).toUpperCase()+m.slice(1)}),c.jsxs("span",{className:"category-count",children:[g," question",g>1?"s":""]})]})]},m))})]}),(((o=n.strength_focus_areas)==null?void 0:o.length)>0||((l=n.weakness_focus_areas)==null?void 0:l.length)>0)&&c.jsxs("div",{className:"plan-section",children:[c.jsx("h4",{children:"Focus Areas"}),c.jsxs("div",{className:"focus-areas",children:[(h=n.strength_focus_areas)==null?void 0:h.slice(0,2).map((m,g)=>c.jsxs("div",{className:"focus-item strength",children:[c.jsx("span",{className:"focus-icon",children:""}),c.jsx("span",{className:"focus-text",children:m.area})]},g)),(f=n.weakness_focus_areas)==null?void 0:f.slice(0,2).map((m,g)=>c.jsxs("div",{className:"focus-item weakness",children:[c.jsx("span",{className:"focus-icon",children:""}),c.jsx("span",{className:"focus-text",children:m.area})]},g))]})]}),((p=n.skills_to_test)==null?void 0:p.length)>0&&c.jsxs("div",{className:"plan-section",children:[c.jsx("h4",{children:"Skills to Be Tested"}),c.jsxs("div",{className:"skills-list",children:[n.skills_to_test.slice(0,8).map((m,g)=>c.jsx("span",{className:"skill-tag",children:m},g)),n.skills_to_test.length>8&&c.jsxs("span",{className:"skill-tag more",children:["+",n.skills_to_test.length-8," more"]})]})]}),n.summary&&c.jsx("div",{className:"plan-summary",children:c.jsx("p",{children:n.summary})}),c.jsxs("div",{className:"plan-actions",children:[c.jsx("button",{className:"btn-primary start-button",onClick:t,disabled:n.status==="used",children:" Start Interview"}),i&&c.jsx("button",{className:"btn-secondary",onClick:i,children:" Generate New Plan"})]}),n.is_used&&c.jsx("p",{className:"plan-used-notice",children:"This plan has already been used for an interview."})]})}const g_={faang:{id:"faang",name:"FAANG / Big Tech",icon:"",description:"Rigorous technical standards, system design focus",config:{strictness:.9,technicalWeight:.4,behavioralWeight:.25,communicationWeight:.35,followUpDepth:"deep",scoringThreshold:75,personality:"analytical"}},startup:{id:"startup",name:"Startup",icon:"",description:"Agility focus, problem-solving, cultural fit",config:{strictness:.7,technicalWeight:.3,behavioralWeight:.35,communicationWeight:.35,followUpDepth:"moderate",scoringThreshold:65,personality:"friendly"}},enterprise:{id:"enterprise",name:"Enterprise / Corporate",icon:"",description:"Process-oriented, team collaboration, stability",config:{strictness:.75,technicalWeight:.3,behavioralWeight:.4,communicationWeight:.3,followUpDepth:"moderate",scoringThreshold:70,personality:"professional"}},hr:{id:"hr",name:"HR Screening",icon:"",description:"Cultural fit, soft skills, basic qualification",config:{strictness:.5,technicalWeight:.15,behavioralWeight:.5,communicationWeight:.35,followUpDepth:"light",scoringThreshold:60,personality:"friendly"}},recruiter:{id:"recruiter",name:"Recruiter Call",icon:"",description:"Quick screen, experience verification, salary discussion",config:{strictness:.4,technicalWeight:.2,behavioralWeight:.35,communicationWeight:.45,followUpDepth:"light",scoringThreshold:55,personality:"casual"}}};function GH(){return Object.values(g_)}function HH({value:n="faang",onChange:e,disabled:t=!1}){const[i,r]=B.useState(!1),s=GH(),a=g_[n]||g_.faang,o=l=>{e==null||e(l),r(!1)};return c.jsxs("div",{className:"company-mode-selector",children:[c.jsxs("label",{className:"selector-label",children:[c.jsx(lR,{size:16}),"Interview Mode"]}),c.jsxs("div",{className:"selector-container",children:[c.jsxs("button",{type:"button",className:`selector-trigger ${i?"open":""}`,onClick:()=>!t&&r(!i),disabled:t,children:[c.jsx("span",{className:"mode-icon",children:a.icon}),c.jsxs("div",{className:"mode-info",children:[c.jsx("span",{className:"mode-name",children:a.name}),c.jsx("span",{className:"mode-desc",children:a.description})]}),c.jsx(Ko,{size:18,className:`chevron ${i?"rotated":""}`})]}),i&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"selector-backdrop",onClick:()=>r(!1)}),c.jsx("div",{className:"selector-dropdown",children:s.map(l=>c.jsxs("button",{type:"button",className:`dropdown-option ${l.id===n?"selected":""}`,onClick:()=>o(l.id),children:[c.jsx("span",{className:"mode-icon",children:l.icon}),c.jsxs("div",{className:"mode-info",children:[c.jsx("span",{className:"mode-name",children:l.name}),c.jsx("span",{className:"mode-desc",children:l.description})]}),l.id===n&&c.jsx(AD,{size:18,className:"check-icon"})]},l.id))})]})]}),c.jsx("style",{jsx:!0,children:`
        .company-mode-selector {
          margin-bottom: var(--space-6);
        }
        
        .selector-label {
          display: flex;
          align-items: center;
          gap: var(--space-2);
          margin-bottom: var(--space-2);
          font-weight: var(--font-medium);
          font-size: var(--text-sm);
          color: var(--text-secondary);
        }
        
        .selector-container {
          position: relative;
        }
        
        .selector-trigger {
          display: flex;
          align-items: center;
          gap: var(--space-3);
          width: 100%;
          padding: var(--space-3) var(--space-4);
          background: var(--bg-card);
          border: 2px solid var(--border-color);
          border-radius: var(--radius-xl);
          text-align: left;
          transition: all var(--transition-fast);
        }
        
        .selector-trigger:hover:not(:disabled) {
          border-color: var(--primary);
        }
        
        .selector-trigger.open {
          border-color: var(--primary);
          box-shadow: 0 0 0 4px var(--primary-glow);
        }
        
        .selector-trigger:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }
        
        .mode-icon {
          font-size: 1.5rem;
          flex-shrink: 0;
        }
        
        .mode-info {
          flex: 1;
          min-width: 0;
        }
        
        .mode-name {
          display: block;
          font-weight: var(--font-semibold);
          font-size: var(--text-base);
          color: var(--text-primary);
        }
        
        .mode-desc {
          display: block;
          font-size: var(--text-xs);
          color: var(--text-muted);
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }
        
        .chevron {
          color: var(--text-muted);
          flex-shrink: 0;
          transition: transform var(--transition-fast);
        }
        
        .chevron.rotated {
          transform: rotate(180deg);
        }
        
        .selector-backdrop {
          position: fixed;
          inset: 0;
          z-index: 10;
        }
        
        .selector-dropdown {
          position: absolute;
          top: calc(100% + var(--space-2));
          left: 0;
          right: 0;
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: var(--radius-xl);
          box-shadow: var(--shadow-xl);
          z-index: 11;
          overflow: hidden;
          animation: slideDown 0.2s ease-out;
        }
        
        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-8px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .dropdown-option {
          display: flex;
          align-items: center;
          gap: var(--space-3);
          width: 100%;
          padding: var(--space-3) var(--space-4);
          text-align: left;
          transition: all var(--transition-fast);
        }
        
        .dropdown-option:hover {
          background: var(--bg-tertiary);
        }
        
        .dropdown-option.selected {
          background: var(--primary-glow);
        }
        
        .dropdown-option.selected .mode-name {
          color: var(--primary);
        }
        
        .check-icon {
          color: var(--primary);
          flex-shrink: 0;
        }
        
        .dropdown-option + .dropdown-option {
          border-top: 1px solid var(--border-color);
        }
      `})]})}const VH={strict:"",friendly:"",stress:"",neutral:""},WH={strict:"personality-strict",friendly:"personality-friendly",stress:"personality-stress",neutral:"personality-neutral"};function XH({selectedPersonality:n,onPersonalitySelect:e,disabled:t=!1}){const[i,r]=B.useState([]),[s,a]=B.useState(!0),[o,l]=B.useState(null);B.useEffect(()=>{(async()=>{try{const p=await fD.getAll();p.success&&p.personalities&&r(p.personalities)}catch(p){l("Failed to load personality modes"),console.error("Personality fetch error:",p)}finally{a(!1)}})()},[]);const h=f=>{t||e(f.id)};return s?c.jsxs("div",{className:"personality-selector loading",children:[c.jsx("div",{className:"spinner-small"}),c.jsx("span",{children:"Loading personalities..."})]}):o?c.jsx("div",{className:"personality-selector error",children:c.jsxs("span",{children:[" ",o]})}):c.jsxs("div",{className:"personality-selector",children:[c.jsx("h3",{className:"personality-title",children:"Choose Interviewer Style"}),c.jsx("p",{className:"personality-subtitle",children:"Select how the interviewer should interact with you"}),c.jsx("div",{className:"personality-options",children:i.map(f=>c.jsxs("div",{className:`personality-option ${WH[f.id]} ${n===f.id?"selected":""} ${t?"disabled":""}`,onClick:()=>h(f),children:[c.jsx("div",{className:"personality-icon",children:VH[f.id]||""}),c.jsxs("div",{className:"personality-info",children:[c.jsx("h4",{className:"personality-name",children:f.name}),c.jsx("p",{className:"personality-desc",children:f.description}),c.jsxs("div",{className:"personality-tags",children:[c.jsxs("span",{className:`intensity-tag ${f.intensity}`,children:[f.intensity," intensity"]}),c.jsxs("span",{className:`pressure-tag ${f.pressure_level}`,children:[f.pressure_level," pressure"]})]})]}),n===f.id&&c.jsx("span",{className:"selected-check",children:""})]},f.id))})]})}const La="ai_interviewer_config_",Da={selectedResumeId:`${La}resume_id`,targetRole:`${La}target_role`,sessionType:`${La}session_type`,difficulty:`${La}difficulty`,companyMode:`${La}company_mode`,personality:`${La}personality`,roundConfig:`${La}round_config`,selectedRoles:`${La}selected_roles`},Ho=(n,e)=>{try{localStorage.setItem(n,JSON.stringify(e))}catch{}},JH=()=>{try{Object.values(Da).forEach(n=>{localStorage.removeItem(n)})}catch{}},YH={react:["Frontend Developer","React Developer","UI Engineer"],angular:["Frontend Developer","Angular Developer","UI Engineer"],vue:["Frontend Developer","Vue.js Developer","UI Engineer"],javascript:["Frontend Developer","Full Stack Developer","Software Engineer"],typescript:["Frontend Developer","Full Stack Developer","Software Engineer"],html:["Frontend Developer","Web Developer"],css:["Frontend Developer","Web Developer","UI Engineer"],python:["Backend Developer","Python Developer","Software Engineer","Data Engineer"],java:["Backend Developer","Java Developer","Software Engineer"],node:["Backend Developer","Node.js Developer","Full Stack Developer"],express:["Backend Developer","Node.js Developer","API Engineer"],django:["Backend Developer","Python Developer","Full Stack Developer"],fastapi:["Backend Developer","Python Developer","API Engineer"],spring:["Backend Developer","Java Developer","Software Engineer"],golang:["Backend Developer","Go Developer","Software Engineer"],rust:["Systems Engineer","Backend Developer","Software Engineer"],"machine learning":["ML Engineer","Data Scientist","AI Engineer"],"deep learning":["ML Engineer","Deep Learning Engineer","AI Researcher"],tensorflow:["ML Engineer","Data Scientist","AI Engineer"],pytorch:["ML Engineer","Deep Learning Engineer","AI Engineer"],pandas:["Data Scientist","Data Analyst","Data Engineer"],numpy:["Data Scientist","ML Engineer","Data Analyst"],scikit:["Data Scientist","ML Engineer","Data Analyst"],"data analysis":["Data Analyst","Business Analyst","Data Scientist"],sql:["Data Engineer","Backend Developer","Data Analyst","Database Administrator"],aws:["DevOps Engineer","Cloud Engineer","Solutions Architect"],azure:["DevOps Engineer","Cloud Engineer","Solutions Architect"],gcp:["DevOps Engineer","Cloud Engineer","Solutions Architect"],docker:["DevOps Engineer","Platform Engineer","Backend Developer"],kubernetes:["DevOps Engineer","Platform Engineer","SRE"],terraform:["DevOps Engineer","Infrastructure Engineer","Cloud Engineer"],"ci/cd":["DevOps Engineer","SRE","Platform Engineer"],ios:["iOS Developer","Mobile Developer","Software Engineer"],android:["Android Developer","Mobile Developer","Software Engineer"],swift:["iOS Developer","Mobile Developer"],kotlin:["Android Developer","Mobile Developer","Backend Developer"],flutter:["Mobile Developer","Cross-Platform Developer"],"react native":["Mobile Developer","Cross-Platform Developer","React Developer"],lead:["Tech Lead","Engineering Manager","Senior Engineer"],manager:["Engineering Manager","Product Manager","Project Manager"],architect:["Solutions Architect","Technical Architect","Principal Engineer"],scrum:["Scrum Master","Agile Coach","Project Manager"],product:["Product Manager","Product Owner","Technical Product Manager"]},Qp=["Software Engineer","Full Stack Developer","Backend Developer","Frontend Developer"],Vo={selectedResumeId:"",targetRole:"Software Engineer",sessionType:"mixed",difficulty:"medium",companyMode:"faang",personality:"strict",roundConfig:{dsa:2,technical:4,behavioral:2,hr:2}};function KH(){var ve,pe,Me,de;const n=di(),e=mo(),t=ns();(ve=e.state)!=null&&ve.domain;const i=((pe=e.state)==null?void 0:pe.domainName)||"Computer Science";(Me=e.state)!=null&&Me.domainTopics;const[r,s]=B.useState(!0),[a,o]=B.useState([]),[l,h]=B.useState(null),[f,p]=B.useState(!1),[m,g]=B.useState(null),[y,M]=B.useState(1),[_,v]=B.useState(!1),[S,A]=B.useState(Date.now()),[E,N]=B.useState(((de=e.state)==null?void 0:de.resumeId)||Vo.selectedResumeId),[T,P]=B.useState(Vo.targetRole),[L,R]=B.useState(Vo.sessionType),[b,D]=B.useState(Vo.difficulty),[X,$]=B.useState(Vo.companyMode),[V,K]=B.useState(Vo.personality),[q,ue]=B.useState(Vo.roundConfig),[U,j]=B.useState(Qp),W=B.useCallback(ie=>{N(ie),Ho(Da.selectedResumeId,ie)},[]),Y=B.useCallback(ie=>{P(ie),Ho(Da.targetRole,ie)},[]);B.useCallback(ie=>{R(ie),Ho(Da.sessionType,ie)},[]);const re=B.useCallback(ie=>{D(ie),Ho(Da.difficulty,ie)},[]),Q=B.useCallback(ie=>{$(ie),Ho(Da.companyMode,ie)},[]),oe=B.useCallback(ie=>{K(ie),Ho(Da.personality,ie)},[]),ge=B.useCallback(ie=>{ue(Re=>{const F=typeof ie=="function"?ie(Re):ie;return Ho(Da.roundConfig,F),F})},[]),Te=B.useMemo(()=>Object.values(q).reduce((ie,Re)=>ie+Re,0),[q]),ce=B.useCallback(ie=>{if(!ie)return Qp;const Re=ie.toLowerCase(),F=new Set;for(const[te,ye]of Object.entries(YH))Re.includes(te)&&ye.forEach(Ee=>F.add(Ee));const k=Array.from(F);return k.length>0?k.slice(0,8):Qp},[]),Se=B.useCallback(async()=>{try{s(!0);const ie=await Sl.getAll();ie.success&&o(ie.resumes||[])}catch{g("Failed to load resumes. Please try again.")}finally{s(!1)}},[]),Ce=B.useCallback(async ie=>{if(ie)try{const Re=await gM.getByResume(ie);Re.success&&Re.plan?(h(Re.plan),M(3)):h(null)}catch{h(null)}},[]);B.useEffect(()=>{JH(),A(Date.now())},[]),B.useEffect(()=>{Se()},[Se]),B.useEffect(()=>{E&&(Ce(E),y<2&&M(2),a.find(Re=>Re.id===E)&&Sl.getById(E).then(Re=>{var F;if(Re.success&&((F=Re.resume)!=null&&F.text_content)){const k=ce(Re.resume.text_content);j(k)}}).catch(()=>j(Qp)))},[E,Ce,y,a,ce]);const be=async()=>{if(!E){g("Please select a resume first");return}if(!T.trim()){g("Please enter a target job role");return}if(Te<3){g("Please configure at least 3 questions total");return}p(!0),g(null);try{const ie=await gM.generate(E,T.trim(),{sessionType:L,difficultyLevel:b,questionCount:Te,companyMode:X,roundConfig:{dsa_questions:q.dsa,technical_questions:q.technical,behavioral_questions:q.behavioral,hr_questions:q.hr}});if(ie.success&&ie.plan)h(ie.plan),M(3);else throw new Error(ie.message||"Failed to generate plan")}catch(ie){g(ie.message||"Failed to generate interview plan")}finally{p(!1)}},Pe=()=>{l&&v(!0)},H=()=>{v(!1),sessionStorage.setItem("ai_interviewer_instruction_accepted","true"),n("/interview",{state:{planId:l.id,resumeId:E,personality:V}})};return a.find(ie=>ie.id===E),c.jsxs("div",{className:"readiness-container",children:[c.jsx(Yn,{user:t}),c.jsxs("main",{className:"readiness-main",children:[c.jsxs("div",{className:"domain-breadcrumb",children:[c.jsx("button",{className:"back-btn-small",onClick:()=>n("/select-domain"),children:" Change Domain"}),c.jsxs("div",{className:"domain-badge-inline",children:[c.jsx("span",{className:"domain-badge-icon",children:""}),c.jsx("span",{className:"domain-badge-label",children:i})]})]}),c.jsxs("section",{className:"page-header-premium",children:[c.jsx("div",{className:"header-icon",children:c.jsx(Pr,{size:40})}),c.jsxs("div",{className:"header-content",children:[c.jsx("h1",{children:"Interview Preparation"}),c.jsxs("p",{children:["Configure your personalized AI-powered mock interview for ",i]})]})]}),c.jsxs("div",{className:"step-indicator",children:[c.jsxs("div",{className:`step ${y>=1?"active":""} ${E?"completed":""}`,children:[c.jsx("span",{className:"step-number",children:"1"}),c.jsx("span",{className:"step-label",children:"Resume"})]}),c.jsx(ea,{size:16,className:"step-arrow"}),c.jsxs("div",{className:`step ${y>=2?"active":""} ${l?"completed":""}`,children:[c.jsx("span",{className:"step-number",children:"2"}),c.jsx("span",{className:"step-label",children:"Configure"})]}),c.jsx(ea,{size:16,className:"step-arrow"}),c.jsxs("div",{className:`step ${y>=3?"active":""}`,children:[c.jsx("span",{className:"step-number",children:"3"}),c.jsx("span",{className:"step-label",children:"Start"})]})]}),m&&c.jsxs("div",{className:"error-banner",children:[c.jsx(ni,{size:16}),c.jsx("span",{children:m}),c.jsx("button",{onClick:()=>g(null),children:""})]}),c.jsxs("div",{className:"readiness-grid",children:[c.jsxs("section",{className:"config-panel card",children:[c.jsxs("div",{className:"panel-header",children:[c.jsx(um,{size:20}),c.jsx("h2",{children:"Interview Configuration"})]}),c.jsxs("div",{className:"config-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx(br,{size:18}),c.jsx("h3",{children:"Select Resume"})]}),r?c.jsxs("div",{className:"loading-inline",children:[c.jsx(Lr,{size:20,className:"spin"}),c.jsx("span",{children:"Loading resumes..."})]}):a.length===0?c.jsxs("div",{className:"no-resumes-card",children:[c.jsx(au,{size:32}),c.jsx("p",{children:"No resumes uploaded yet"}),c.jsx("button",{className:"btn btn-secondary",onClick:()=>n("/resumes"),children:"Upload Resume"})]}):c.jsxs("select",{value:E,onChange:ie=>W(ie.target.value),disabled:f,className:"form-select",children:[c.jsx("option",{value:"",children:"Select a resume..."}),a.map(ie=>c.jsxs("option",{value:ie.id,children:[ie.filename," ",ie.is_parsed==="success"?"":""]},ie.id))]},`resume-${S}`)]}),E&&c.jsxs("div",{className:"config-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx($s,{size:18}),c.jsx("h3",{children:"Interview Style"})]}),c.jsx(HH,{value:X,onChange:Q,disabled:f})]}),E&&c.jsx("div",{className:"config-section",children:c.jsx(XH,{selectedPersonality:V,onPersonalitySelect:oe,disabled:f})}),c.jsxs("div",{className:"config-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx(Pr,{size:18}),c.jsx("h3",{children:"Target Role"})]}),c.jsx("input",{type:"text",value:T,onChange:ie=>Y(ie.target.value),placeholder:"e.g., Software Engineer",disabled:f,className:"form-input"},`role-${S}`),c.jsx("div",{className:"role-chips",children:U.slice(0,4).map(ie=>c.jsx("button",{type:"button",className:`chip ${T===ie?"active":""}`,onClick:()=>Y(ie),disabled:f,children:ie},ie))})]}),c.jsxs("div",{className:"config-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx(um,{size:18}),c.jsx("h3",{children:"Difficulty Level"})]}),c.jsxs("select",{value:b,onChange:ie=>re(ie.target.value),disabled:f,className:"form-select",children:[c.jsx("option",{value:"easy",children:"Entry Level"}),c.jsx("option",{value:"medium",children:"Mid Level"}),c.jsx("option",{value:"hard",children:"Senior"}),c.jsx("option",{value:"expert",children:"Lead/Principal"})]},`diff-${S}`)]}),c.jsxs("div",{className:"config-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx(um,{size:18}),c.jsx("h3",{children:"Questions Per Round"}),c.jsxs("span",{className:"badge-total",children:[Te," total"]})]}),c.jsxs("div",{className:"round-config-grid",children:[c.jsxs("div",{className:"round-config-item",children:[c.jsxs("div",{className:"round-label",children:[c.jsx("span",{className:"round-icon",children:""}),c.jsx("span",{children:"DSA"})]}),c.jsxs("div",{className:"round-controls",children:[c.jsx("button",{type:"button",className:"round-btn",onClick:()=>ge(ie=>({...ie,dsa:Math.max(0,ie.dsa-1)})),disabled:f||q.dsa<=0,children:""}),c.jsx("span",{className:"round-count",children:q.dsa}),c.jsx("button",{type:"button",className:"round-btn",onClick:()=>ge(ie=>({...ie,dsa:Math.min(10,ie.dsa+1)})),disabled:f||q.dsa>=10,children:"+"})]})]}),c.jsxs("div",{className:"round-config-item",children:[c.jsxs("div",{className:"round-label",children:[c.jsx("span",{className:"round-icon",children:""}),c.jsx("span",{children:"Technical"})]}),c.jsxs("div",{className:"round-controls",children:[c.jsx("button",{type:"button",className:"round-btn",onClick:()=>ge(ie=>({...ie,technical:Math.max(0,ie.technical-1)})),disabled:f||q.technical<=0,children:""}),c.jsx("span",{className:"round-count",children:q.technical}),c.jsx("button",{type:"button",className:"round-btn",onClick:()=>ge(ie=>({...ie,technical:Math.min(10,ie.technical+1)})),disabled:f||q.technical>=10,children:"+"})]})]}),c.jsxs("div",{className:"round-config-item",children:[c.jsxs("div",{className:"round-label",children:[c.jsx("span",{className:"round-icon",children:""}),c.jsx("span",{children:"Behavioral"})]}),c.jsxs("div",{className:"round-controls",children:[c.jsx("button",{type:"button",className:"round-btn",onClick:()=>ge(ie=>({...ie,behavioral:Math.max(0,ie.behavioral-1)})),disabled:f||q.behavioral<=0,children:""}),c.jsx("span",{className:"round-count",children:q.behavioral}),c.jsx("button",{type:"button",className:"round-btn",onClick:()=>ge(ie=>({...ie,behavioral:Math.min(10,ie.behavioral+1)})),disabled:f||q.behavioral>=10,children:"+"})]})]}),c.jsxs("div",{className:"round-config-item",children:[c.jsxs("div",{className:"round-label",children:[c.jsx("span",{className:"round-icon",children:""}),c.jsx("span",{children:"HR"})]}),c.jsxs("div",{className:"round-controls",children:[c.jsx("button",{type:"button",className:"round-btn",onClick:()=>ge(ie=>({...ie,hr:Math.max(0,ie.hr-1)})),disabled:f||q.hr<=0,children:""}),c.jsx("span",{className:"round-count",children:q.hr}),c.jsx("button",{type:"button",className:"round-btn",onClick:()=>ge(ie=>({...ie,hr:Math.min(10,ie.hr+1)})),disabled:f||q.hr>=10,children:"+"})]})]})]}),c.jsx("div",{className:"duration-estimate",children:c.jsxs("span",{children:[" Estimated: ",Math.round(Te*3)," min"]})})]}),c.jsx("button",{className:"btn btn-primary btn-lg generate-btn",onClick:be,disabled:f||!E,children:f?c.jsxs(c.Fragment,{children:[c.jsx(Lr,{size:20,className:"spin"}),c.jsx("span",{children:"Generating Plan..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Nr,{size:20}),c.jsx("span",{children:l?"Regenerate Plan":"Generate Interview Plan"})]})})]}),c.jsx("section",{className:"preview-panel",children:f?c.jsxs("div",{className:"generating-state card",children:[c.jsx("div",{className:"generating-animation",children:c.jsx(Nr,{size:48,className:"sparkle-icon"})}),c.jsx("h3",{children:"Creating Your Interview Plan"}),c.jsx("p",{children:"Analyzing your resume and generating personalized questions..."}),c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"progress-fill generating"})})]}):l?c.jsx(zH,{plan:l,onStartInterview:Pe,onRegenerate:be}):c.jsxs("div",{className:"no-plan card",children:[c.jsx("div",{className:"no-plan-icon",children:c.jsx(Pr,{size:64})}),c.jsx("h3",{children:"No Interview Plan Yet"}),c.jsx("p",{children:"Configure your settings and generate a personalized interview plan based on your resume."}),c.jsxs("ul",{className:"feature-list",children:[c.jsxs("li",{children:[c.jsx(Xn,{size:16}),"Questions tailored to your experience"]}),c.jsxs("li",{children:[c.jsx(Xn,{size:16}),"Focus on your skill gaps"]}),c.jsxs("li",{children:[c.jsx(Xn,{size:16}),"Deeper probing on strengths"]}),c.jsxs("li",{children:[c.jsx(Xn,{size:16}),"Behavioral questions included"]})]})]})})]})]}),_&&c.jsx("div",{className:"instruction-modal-overlay",children:c.jsxs("div",{className:"instruction-modal",children:[c.jsx("div",{className:"instruction-modal-icon",children:c.jsx(ni,{size:48})}),c.jsx("h2",{className:"instruction-modal-title",children:"Before You Begin"}),c.jsxs("div",{className:"instruction-modal-content",children:[c.jsxs("p",{children:["This AI Interviewer is trained and fine-tuned",c.jsx("strong",{children:" ONLY for interview practice purposes"}),"."]}),c.jsxs("p",{children:["Please focus on ",c.jsx("strong",{children:"interview responses only"}),". The AI is designed to evaluate and help you improve your interview skills, not to answer general questions."]}),c.jsxs("ul",{className:"instruction-list",children:[c.jsx("li",{children:" Answer interview questions thoughtfully"}),c.jsx("li",{children:" Ask for clarification if needed"}),c.jsx("li",{children:" Do not ask unrelated questions"}),c.jsx("li",{children:" Do not use as a general chatbot"})]})]}),c.jsx("button",{className:"btn btn-primary btn-lg instruction-modal-btn",onClick:H,children:"I Understand"})]})})]})}const qH={"A+":"grade-excellent",A:"grade-excellent","B+":"grade-good",B:"grade-good","C+":"grade-average",C:"grade-average",D:"grade-poor",F:"grade-poor"},QH={excellent:"Excellent - Interview Ready",good:"Good - Minor Improvements Needed",average:"Average - Preparation Recommended",needs_work:"Needs Work - More Practice Required"};function ZH(){var M,_;const{sessionId:n}=mg(),e=di(),t=ns(),[i,r]=B.useState(null),[s,a]=B.useState(!0),[o,l]=B.useState(!1),[h,f]=B.useState(null);B.useEffect(()=>{(async()=>{if(!n){f("No session ID provided"),a(!1);return}try{const S=await vM.get(n);if(S.success&&S.report){r(S.report),wM(n,S.report),a(!1);return}}catch{console.log("Report not found, generating...")}try{l(!0);const S=await vM.generate(n);if(S.success&&S.report)r(S.report),wM(n,S.report);else throw new Error(S.message||"Failed to generate report")}catch(S){f(S.message||"Failed to load report")}finally{a(!1),l(!1)}})()},[n]);const p=v=>v>=85?"score-excellent":v>=70?"score-good":v>=55?"score-average":"score-poor",m=v=>{const S=((i==null?void 0:i.target_role)||"Interview").replace(/[^a-zA-Z0-9]/g,"_"),A=new Date((i==null?void 0:i.generated_at)||Date.now()).toISOString().split("T")[0];return`AI_${S}_${A}_${v}.pdf`},g=()=>{var N,T,P,L,R,b;if(!i)return;const v=`
<!DOCTYPE html>
<html>
<head>
    <title>Interview Summary Report</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; padding: 40px; max-width: 800px; margin: 0 auto; }
        h1 { color: #1e293b; border-bottom: 2px solid #3b82f6; padding-bottom: 10px; }
        h2 { color: #334155; margin-top: 30px; }
        .score-box { background: linear-gradient(135deg, #3b82f6, #8b5cf6); color: white; padding: 30px; border-radius: 12px; text-align: center; margin: 20px 0; }
        .score-value { font-size: 48px; font-weight: bold; }
        .score-label { font-size: 14px; opacity: 0.9; }
        .grade { font-size: 24px; margin-top: 10px; }
        .section { margin: 20px 0; padding: 15px; background: #f8fafc; border-radius: 8px; }
        .strength { color: #059669; }
        .weakness { color: #dc2626; }
        ul { padding-left: 20px; }
        li { margin: 8px 0; }
        .footer { margin-top: 40px; padding-top: 20px; border-top: 1px solid #e2e8f0; font-size: 12px; color: #64748b; }
    </style>
</head>
<body>
    <h1> Interview Performance Report</h1>
    <p><strong>Role:</strong> ${i.target_role||"Interview"}</p>
    <p><strong>Date:</strong> ${new Date(i.generated_at).toLocaleDateString()}</p>
    
    <div class="score-box">
        <div class="score-value">${((N=i.readiness)==null?void 0:N.score)||0}</div>
        <div class="score-label">Readiness Score / 100</div>
        <div class="grade">Grade: ${((T=i.readiness)==null?void 0:T.grade)||"N/A"}</div>
    </div>

    ${i.executive_summary?`<div class="section"><h2> Executive Summary</h2><p>${i.executive_summary}</p></div>`:""}
    
    ${((P=i.strengths)==null?void 0:P.length)>0?`
    <div class="section">
        <h2 class="strength"> Key Strengths</h2>
        <ul>
            ${i.strengths.map(D=>`<li><strong>${D.area}:</strong> ${D.description}</li>`).join("")}
        </ul>
    </div>
    `:""}
    
    ${((L=i.weaknesses)==null?void 0:L.length)>0?`
    <div class="section">
        <h2 class="weakness"> Areas for Improvement</h2>
        <ul>
            ${i.weaknesses.map(D=>`<li><strong>${D.area}:</strong> ${D.description}${D.suggestion?` <em>(Tip: ${D.suggestion})</em>`:""}</li>`).join("")}
        </ul>
    </div>
    `:""}

    ${((b=(R=i.improvements)==null?void 0:R.areas)==null?void 0:b.length)>0?`
    <div class="section">
        <h2> Priority Improvement Areas</h2>
        <ul>
            ${i.improvements.areas.map(D=>`<li><strong>${D.area}</strong> (${D.priority}): ${D.action}</li>`).join("")}
        </ul>
    </div>
    `:""}

    <div class="footer">
        <p>Generated by AI Interviewer Pro Max</p>
        <p>${i.disclaimer||"This report is generated by AI and is for practice purposes only."}</p>
    </div>
</body>
</html>`,S=new Blob([v],{type:"text/html"}),A=URL.createObjectURL(S),E=document.createElement("a");E.href=A,E.download=m("Summary").replace(".pdf",".html"),document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(A)},y=()=>{var P,L,R,b;if(!i)return;const v=((P=i.skills)==null?void 0:P.categories)||{},S=((L=i.readiness)==null?void 0:L.breakdown)||{},A=`
<!DOCTYPE html>
<html>
<head>
    <title>Interview Score Report</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; padding: 40px; max-width: 800px; margin: 0 auto; }
        h1 { color: #1e293b; border-bottom: 2px solid #3b82f6; padding-bottom: 10px; }
        h2 { color: #334155; margin-top: 30px; }
        .score-box { background: linear-gradient(135deg, #3b82f6, #8b5cf6); color: white; padding: 30px; border-radius: 12px; text-align: center; margin: 20px 0; }
        .score-value { font-size: 64px; font-weight: bold; }
        .score-label { font-size: 14px; opacity: 0.9; }
        .grade { font-size: 28px; margin-top: 10px; background: rgba(255,255,255,0.2); padding: 8px 16px; border-radius: 4px; display: inline-block; }
        .breakdown { margin: 20px 0; }
        .breakdown-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #e2e8f0; }
        .breakdown-label { font-weight: 500; }
        .breakdown-value { font-weight: bold; }
        .category-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0; }
        .category-card { background: #f8fafc; padding: 20px; border-radius: 8px; text-align: center; }
        .category-score { font-size: 32px; font-weight: bold; color: #3b82f6; }
        .category-label { font-size: 14px; color: #64748b; margin-top: 5px; }
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 20px 0; }
        .stat-card { background: #f1f5f9; padding: 15px; border-radius: 8px; text-align: center; }
        .stat-value { font-size: 24px; font-weight: bold; color: #1e293b; }
        .stat-label { font-size: 12px; color: #64748b; }
        .footer { margin-top: 40px; padding-top: 20px; border-top: 1px solid #e2e8f0; font-size: 12px; color: #64748b; }
    </style>
</head>
<body>
    <h1> Interview Score Report</h1>
    <p><strong>Role:</strong> ${i.target_role||"Interview"}</p>
    <p><strong>Date:</strong> ${new Date(i.generated_at).toLocaleDateString()}</p>
    
    <div class="score-box">
        <div class="score-value">${((R=i.readiness)==null?void 0:R.score)||0}</div>
        <div class="score-label">READINESS SCORE / 100</div>
        <div class="grade">${((b=i.readiness)==null?void 0:b.grade)||"N/A"}</div>
    </div>

    ${Object.keys(S).length>0?`
    <h2>Score Breakdown</h2>
    <div class="breakdown">
        ${Object.entries(S).map(([D,X])=>`
        <div class="breakdown-row">
            <span class="breakdown-label">${D.charAt(0).toUpperCase()+D.slice(1)}</span>
            <span class="breakdown-value">${Math.round(X)}%</span>
        </div>
        `).join("")}
    </div>
    `:""}

    ${Object.keys(v).length>0?`
    <h2>Performance by Category</h2>
    <div class="category-grid">
        ${Object.entries(v).map(([D,X])=>`
        <div class="category-card">
            <div class="category-score">${X.toFixed(1)}</div>
            <div class="category-label">${D.charAt(0).toUpperCase()+D.slice(1)}</div>
        </div>
        `).join("")}
    </div>
    `:""}

    ${i.statistics?`
    <h2>Interview Statistics</h2>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">${i.statistics.total_questions||0}</div>
            <div class="stat-label">Total Questions</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">${i.statistics.answered||0}</div>
            <div class="stat-label">Answered</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">${i.statistics.skipped||0}</div>
            <div class="stat-label">Skipped</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">${i.statistics.duration_minutes||0}m</div>
            <div class="stat-label">Duration</div>
        </div>
    </div>
    `:""}

    <div class="footer">
        <p>Generated by AI Interviewer Pro Max</p>
        <p>Session ID: ${n}</p>
    </div>
</body>
</html>`,E=new Blob([A],{type:"text/html"}),N=URL.createObjectURL(E),T=document.createElement("a");T.href=N,T.download=m("Score_Report").replace(".pdf",".html"),document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(N)};return s?c.jsxs("div",{className:"report-container",children:[c.jsx(Yn,{user:t}),c.jsx("main",{className:"report-main loading",children:c.jsxs("div",{className:"loading-content",children:[c.jsx("div",{className:"spinner"}),c.jsx("h2",{children:o?"Generating Your Report...":"Loading Report..."}),o&&c.jsx("p",{children:"Analyzing your performance and calculating scores"})]})})]}):h||!i?c.jsxs("div",{className:"report-container",children:[c.jsx(Yn,{user:t}),c.jsx("main",{className:"report-main error",children:c.jsxs("div",{className:"error-panel",children:[c.jsx("h2",{children:" Report Unavailable"}),c.jsx("p",{children:h||"Unable to load report"}),c.jsx("button",{className:"btn-primary",onClick:()=>e("/dashboard"),children:"Return to Dashboard"})]})})]}):c.jsxs("div",{className:"report-container",children:[c.jsx(Yn,{user:t}),c.jsxs("main",{className:"report-main",children:[c.jsx("div",{className:"report-header",children:c.jsxs("div",{className:"report-title",children:[c.jsx("h1",{children:" Interview Performance Report"}),c.jsx("p",{className:"report-role",children:i.target_role||"Interview"}),c.jsxs("p",{className:"report-date",children:["Generated: ",new Date(i.generated_at).toLocaleDateString()]})]})}),c.jsxs("section",{className:"readiness-hero",children:[c.jsxs("div",{className:"readiness-score-container",children:[c.jsxs("div",{className:`readiness-score-circle ${p(i.readiness.score)}`,children:[c.jsx("span",{className:"score-value",children:i.readiness.score}),c.jsx("span",{className:"score-label",children:"/ 100"})]}),c.jsxs("div",{className:"readiness-grade",children:[c.jsx("span",{className:`grade-badge ${qH[i.readiness.grade]}`,children:i.readiness.grade}),c.jsx("p",{className:"readiness-level",children:QH[i.readiness.level]})]})]}),i.readiness.breakdown&&c.jsxs("div",{className:"score-breakdown",children:[c.jsx("h3",{children:"Score Breakdown"}),c.jsx("div",{className:"breakdown-bars",children:Object.entries(i.readiness.breakdown).map(([v,S])=>c.jsxs("div",{className:"breakdown-item",children:[c.jsxs("div",{className:"breakdown-label",children:[c.jsx("span",{children:v.charAt(0).toUpperCase()+v.slice(1)}),c.jsxs("span",{children:[Math.round(S),"%"]})]}),c.jsx("div",{className:"breakdown-bar",children:c.jsx("div",{className:"breakdown-fill",style:{width:`${S}%`}})})]},v))})]}),i.readiness.explanation&&c.jsx("p",{className:"score-explanation",children:i.readiness.explanation})]}),i.executive_summary&&c.jsxs("section",{className:"report-section executive-summary",children:[c.jsx("h2",{children:" Executive Summary"}),c.jsx("p",{children:i.executive_summary}),i.recommendation&&c.jsxs("div",{className:"recommendation",children:[c.jsx("strong",{children:"Recommendation:"})," ",i.recommendation]})]}),c.jsxs("div",{className:"strengths-weaknesses-grid",children:[i.strengths&&i.strengths.length>0&&c.jsxs("section",{className:"report-section strengths-section",children:[c.jsx("h2",{children:" Key Strengths"}),c.jsx("ul",{className:"insight-list",children:i.strengths.map((v,S)=>c.jsxs("li",{className:"insight-item strength",children:[c.jsx("div",{className:"insight-area",children:v.area}),c.jsx("p",{className:"insight-description",children:v.description}),v.evidence&&c.jsx("p",{className:"insight-evidence",children:v.evidence})]},S))})]}),i.weaknesses&&i.weaknesses.length>0&&c.jsxs("section",{className:"report-section weaknesses-section",children:[c.jsx("h2",{children:" Areas for Improvement"}),c.jsx("ul",{className:"insight-list",children:i.weaknesses.map((v,S)=>c.jsxs("li",{className:"insight-item weakness",children:[c.jsx("div",{className:"insight-area",children:v.area}),c.jsx("p",{className:"insight-description",children:v.description}),v.suggestion&&c.jsxs("p",{className:"insight-suggestion",children:[c.jsx("strong",{children:"Tip:"})," ",v.suggestion]})]},S))})]})]}),((M=i.skills)==null?void 0:M.categories)&&Object.keys(i.skills.categories).length>0&&c.jsxs("section",{className:"report-section category-scores",children:[c.jsx("h2",{children:" Performance by Category"}),c.jsx("div",{className:"category-grid",children:Object.entries(i.skills.categories).map(([v,S])=>c.jsxs("div",{className:"category-card",children:[c.jsx("div",{className:"category-score",children:c.jsx("span",{className:`score-circle-sm ${S>=7?"good":S>=5?"average":"poor"}`,children:S.toFixed(1)})}),c.jsx("div",{className:"category-label",children:v.charAt(0).toUpperCase()+v.slice(1)})]},v))})]}),((_=i.behavioral)==null?void 0:_.summary)&&c.jsxs("section",{className:"report-section behavioral-section",children:[c.jsx("h2",{children:" Communication Insights"}),c.jsx("p",{className:"behavioral-summary",children:i.behavioral.summary}),c.jsxs("div",{className:"behavioral-metrics",children:[i.behavioral.emotional_pattern&&c.jsxs("div",{className:"metric-badge",children:[c.jsx("span",{className:"metric-label",children:"Tone:"}),c.jsx("span",{className:"metric-value capitalize",children:i.behavioral.emotional_pattern})]}),i.behavioral.confidence_trend&&c.jsxs("div",{className:"metric-badge",children:[c.jsx("span",{className:"metric-label",children:"Confidence:"}),c.jsx("span",{className:"metric-value capitalize",children:i.behavioral.confidence_trend})]})]}),c.jsx("p",{className:"behavioral-disclaimer",children:"* Based on text-based inference from language patterns only. Not real emotion detection."})]}),i.improvements&&c.jsxs("section",{className:"report-section improvements-section",children:[c.jsx("h2",{children:" Next Steps"}),i.improvements.areas&&i.improvements.areas.length>0&&c.jsxs("div",{className:"improvement-areas",children:[c.jsx("h3",{children:"Priority Areas"}),i.improvements.areas.map((v,S)=>c.jsxs("div",{className:`improvement-card priority-${v.priority}`,children:[c.jsxs("div",{className:"improvement-header",children:[c.jsx("span",{className:"improvement-title",children:v.area}),c.jsx("span",{className:`priority-badge ${v.priority}`,children:v.priority})]}),c.jsx("p",{className:"improvement-action",children:v.action})]},S))]}),i.improvements.topics&&i.improvements.topics.length>0&&c.jsxs("div",{className:"improvement-list",children:[c.jsx("h3",{children:" Topics to Review"}),c.jsx("ul",{children:i.improvements.topics.map((v,S)=>c.jsx("li",{children:v},S))})]}),i.improvements.practice&&i.improvements.practice.length>0&&c.jsxs("div",{className:"improvement-list",children:[c.jsx("h3",{children:" Practice Suggestions"}),c.jsx("ul",{children:i.improvements.practice.map((v,S)=>c.jsx("li",{children:v},S))})]})]}),i.statistics&&c.jsxs("section",{className:"report-section stats-section",children:[c.jsx("h2",{children:" Interview Statistics"}),c.jsxs("div",{className:"stats-grid",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("span",{className:"stat-value",children:i.statistics.total_questions}),c.jsx("span",{className:"stat-label",children:"Total Questions"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("span",{className:"stat-value",children:i.statistics.answered}),c.jsx("span",{className:"stat-label",children:"Answered"})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("span",{className:"stat-value",children:i.statistics.skipped}),c.jsx("span",{className:"stat-label",children:"Skipped"})]}),i.statistics.duration_minutes&&c.jsxs("div",{className:"stat-card",children:[c.jsxs("span",{className:"stat-value",children:[i.statistics.duration_minutes,"m"]}),c.jsx("span",{className:"stat-label",children:"Duration"})]})]})]}),c.jsx("section",{className:"report-disclaimer",children:c.jsx("p",{children:i.disclaimer})}),c.jsxs("div",{className:"report-actions",children:[c.jsx("button",{className:"btn-secondary",onClick:g,children:" Download Summary PDF"}),c.jsx("button",{className:"btn-secondary",onClick:y,children:" Download Score Report"}),c.jsx("button",{className:"btn-secondary",onClick:()=>e("/history"),children:"View All Reports"}),c.jsx("button",{className:"btn-primary",onClick:()=>e("/interview-prep"),children:"Start New Interview"})]})]})]})}const $H={high:"priority-high",medium:"priority-medium",low:"priority-low"},e5={easy:"difficulty-easy",medium:"difficulty-medium",hard:"difficulty-hard"};function t5(){var p,m,g,y,M,_,v,S,A,E,N;const{sessionId:n}=mg(),e=di(),t=ns(),[i,r]=B.useState(null),[s,a]=B.useState(!0),[o,l]=B.useState(!1),[h,f]=B.useState(null);return B.useEffect(()=>{(async()=>{if(!n){f("No session ID provided"),a(!1);return}try{const P=await yM.get(n);if(P.success&&P.roadmap){r(P.roadmap),a(!1);return}}catch{console.log("Roadmap not found, generating...")}try{l(!0);const P=await yM.generate(n);if(P.success&&P.roadmap)r(P.roadmap);else throw new Error(P.message||"Failed to generate roadmap")}catch(P){f(P.message||"Failed to load roadmap")}finally{a(!1),l(!1)}})()},[n]),s?c.jsxs("div",{className:"roadmap-container",children:[c.jsx(Yn,{user:t}),c.jsx("main",{className:"roadmap-loading",children:c.jsxs("div",{className:"loading-card",children:[c.jsx(Lr,{size:48,className:"spin"}),c.jsx("h2",{children:o?"Creating Your Roadmap...":"Loading Roadmap..."}),o&&c.jsx("p",{children:"Analyzing your performance and building a personalized plan"})]})})]}):h||!i?c.jsxs("div",{className:"roadmap-container",children:[c.jsx(Yn,{user:t}),c.jsx("main",{className:"roadmap-loading",children:c.jsxs("div",{className:"error-card",children:[c.jsx(ni,{size:48}),c.jsx("h2",{children:"Roadmap Unavailable"}),c.jsx("p",{children:h||"Unable to load roadmap"}),c.jsx("button",{className:"btn btn-primary",onClick:()=>e("/dashboard"),children:"Return to Dashboard"})]})})]}):c.jsxs("div",{className:"roadmap-container",children:[c.jsx(Yn,{user:t}),c.jsxs("main",{className:"roadmap-main",children:[c.jsxs("header",{className:"roadmap-header",children:[c.jsx("div",{className:"header-icon",children:c.jsx(ND,{size:40})}),c.jsxs("div",{className:"header-content",children:[c.jsx("h1",{children:"Your Career Roadmap"}),c.jsx("p",{className:"roadmap-role",children:((p=i.context)==null?void 0:p.target_role)||"Career Plan"}),((m=i.timeline)==null?void 0:m.total_weeks)&&c.jsxs("div",{className:"duration-badge",children:[c.jsx(Yc,{size:16}),c.jsxs("span",{children:[i.timeline.total_weeks," Week Plan"]})]})]})]}),((g=i.summary)==null?void 0:g.executive)&&c.jsxs("section",{className:"roadmap-card summary-card",children:[c.jsxs("div",{className:"card-header",children:[c.jsx(Pr,{size:24}),c.jsx("h2",{children:"Your Personalized Plan"})]}),c.jsx("p",{className:"summary-text",children:i.summary.executive}),i.summary.key_actions&&i.summary.key_actions.length>0&&c.jsxs("div",{className:"key-actions",children:[c.jsxs("h3",{children:[c.jsx(Nr,{size:18}),"Start Here"]}),c.jsx("ol",{className:"action-list",children:i.summary.key_actions.map((T,P)=>c.jsxs("li",{children:[c.jsx("span",{className:"action-number",children:P+1}),c.jsx("span",{className:"action-text",children:T})]},P))})]})]}),((y=i.timeline)==null?void 0:y.phases)&&i.timeline.phases.length>0&&c.jsxs("section",{className:"roadmap-card timeline-card",children:[c.jsxs("div",{className:"card-header",children:[c.jsx($d,{size:24}),c.jsx("h2",{children:"Timeline"})]}),c.jsx("div",{className:"phases-timeline",children:i.timeline.phases.map((T,P)=>c.jsxs("div",{className:"phase-item",children:[c.jsx("div",{className:"phase-marker",children:c.jsx("span",{className:"phase-number",children:T.phase})}),c.jsxs("div",{className:"phase-content",children:[c.jsxs("div",{className:"phase-header",children:[c.jsx("h3",{children:T.name}),c.jsxs("span",{className:"phase-weeks",children:["Weeks ",T.weeks]})]}),c.jsx("ul",{className:"phase-focus",children:T.focus.map((L,R)=>c.jsxs("li",{children:[c.jsx(ea,{size:14}),L]},R))})]})]},P))})]}),((M=i.skill_gaps)==null?void 0:M.gaps)&&i.skill_gaps.gaps.length>0&&c.jsxs("section",{className:"roadmap-card",children:[c.jsxs("div",{className:"card-header",children:[c.jsx(Pr,{size:24}),c.jsx("h2",{children:"Skill Gaps to Address"})]}),c.jsx("div",{className:"gaps-grid",children:i.skill_gaps.gaps.map((T,P)=>c.jsxs("div",{className:"gap-card",children:[c.jsxs("div",{className:"gap-header",children:[c.jsx("span",{className:"gap-skill",children:T.skill}),c.jsx("span",{className:`priority-badge ${$H[T.priority]}`,children:T.priority})]}),c.jsxs("div",{className:"gap-levels",children:[c.jsx("span",{className:"level current",children:T.current_level}),c.jsx(oR,{size:16}),c.jsx("span",{className:"level target",children:T.target_level})]})]},P))})]}),((_=i.learning)==null?void 0:_.topics)&&i.learning.topics.length>0&&c.jsxs("section",{className:"roadmap-card",children:[c.jsxs("div",{className:"card-header",children:[c.jsx(gx,{size:24}),c.jsx("h2",{children:"Learning Path"})]}),c.jsx("div",{className:"learning-timeline",children:i.learning.topics.map((T,P)=>c.jsxs("div",{className:"learning-item",children:[c.jsx("div",{className:"learning-order",children:c.jsx("span",{children:T.order})}),c.jsxs("div",{className:"learning-content",children:[c.jsx("h3",{children:T.topic}),c.jsx("p",{children:T.description}),c.jsx("div",{className:"learning-meta",children:c.jsxs("span",{className:"duration",children:[c.jsx(Yc,{size:14}),T.duration_weeks," week",T.duration_weeks>1?"s":""]})}),T.resources&&T.resources.length>0&&c.jsxs("div",{className:"resources",children:[c.jsx("strong",{children:"Resources:"}),c.jsx("ul",{children:T.resources.map((L,R)=>c.jsx("li",{children:L},R))})]})]})]},P))})]}),((v=i.projects)==null?void 0:v.recommended)&&i.projects.recommended.length>0&&c.jsxs("section",{className:"roadmap-card",children:[c.jsxs("div",{className:"card-header",children:[c.jsx($s,{size:24}),c.jsx("h2",{children:"Projects to Build"})]}),c.jsx("div",{className:"projects-grid",children:i.projects.recommended.map((T,P)=>c.jsxs("div",{className:"project-card",children:[c.jsx("h3",{children:T.title}),c.jsx("p",{children:T.description}),c.jsxs("div",{className:"project-meta",children:[c.jsx("span",{className:`difficulty-badge ${e5[T.difficulty]}`,children:T.difficulty}),c.jsxs("span",{className:"duration",children:[c.jsx(Yc,{size:14}),T.duration_weeks," week",T.duration_weeks>1?"s":""]})]}),T.skills_covered&&T.skills_covered.length>0&&c.jsx("div",{className:"skill-tags",children:T.skills_covered.map((L,R)=>c.jsx("span",{className:"skill-tag",children:L},R))})]},P))})]}),i.practice&&c.jsxs("section",{className:"roadmap-card",children:[c.jsxs("div",{className:"card-header",children:[c.jsx(vx,{size:24}),c.jsx("h2",{children:"Practice Strategy"})]}),((S=i.practice.strategy)==null?void 0:S.daily_routine)&&c.jsxs("div",{className:"practice-block",children:[c.jsxs("h3",{children:[c.jsx($d,{size:18}),"Daily Routine"]}),c.jsx("p",{children:i.practice.strategy.daily_routine})]}),((A=i.practice.strategy)==null?void 0:A.weekly_goals)&&i.practice.strategy.weekly_goals.length>0&&c.jsxs("div",{className:"practice-block",children:[c.jsxs("h3",{children:[c.jsx(Pr,{size:18}),"Weekly Goals"]}),c.jsx("ul",{className:"practice-list",children:i.practice.strategy.weekly_goals.map((T,P)=>c.jsxs("li",{children:[c.jsx(Xn,{size:16}),T]},P))})]}),i.practice.interview_tips&&i.practice.interview_tips.length>0&&c.jsxs("div",{className:"practice-block tips",children:[c.jsxs("h3",{children:[c.jsx(vx,{size:18}),"Interview Tips"]}),c.jsx("ul",{className:"practice-list",children:i.practice.interview_tips.map((T,P)=>c.jsxs("li",{children:[c.jsx(Nr,{size:16}),T]},P))})]})]}),((E=i.summary)==null?void 0:E.success_metrics)&&i.summary.success_metrics.length>0&&c.jsxs("section",{className:"roadmap-card",children:[c.jsxs("div",{className:"card-header",children:[c.jsx(cl,{size:24}),c.jsx("h2",{children:"How to Measure Progress"})]}),c.jsx("ul",{className:"metrics-list",children:i.summary.success_metrics.map((T,P)=>c.jsxs("li",{children:[c.jsx(Xn,{size:18}),c.jsx("span",{children:T})]},P))})]}),((N=i.timeline)==null?void 0:N.milestones)&&i.timeline.milestones.length>0&&c.jsxs("section",{className:"roadmap-card milestones-card",children:[c.jsxs("div",{className:"card-header",children:[c.jsx(_M,{size:24}),c.jsx("h2",{children:"Milestones"})]}),c.jsx("div",{className:"milestones-timeline",children:i.timeline.milestones.map((T,P)=>c.jsxs("div",{className:"milestone-item",children:[c.jsxs("div",{className:"milestone-marker",children:[c.jsx(_M,{size:16}),c.jsxs("span",{children:["Week ",T.week]})]}),c.jsxs("div",{className:"milestone-content",children:[c.jsx("h4",{children:T.milestone}),T.deliverables&&T.deliverables.length>0&&c.jsx("ul",{className:"deliverables",children:T.deliverables.map((L,R)=>c.jsxs("li",{children:[c.jsx(Xn,{size:14}),L]},R))})]})]},P))})]}),c.jsx("section",{className:"roadmap-disclaimer",children:c.jsx("p",{children:i.disclaimer})}),c.jsxs("div",{className:"roadmap-actions",children:[c.jsx("button",{className:"btn btn-secondary",onClick:()=>e(`/report/${n}`),children:"View Interview Report"}),c.jsxs("button",{className:"btn btn-primary",onClick:()=>e("/interview-prep"),children:[c.jsx(Nr,{size:18}),"Practice Again"]})]})]})]})}function n5({onUploadSuccess:n,onUploadError:e,disabled:t=!1}){const[i,r]=B.useState(!1),[s,a]=B.useState(!1),[o,l]=B.useState(""),[h,f]=B.useState(null),[p,m]=B.useState(!1),g=B.useRef(null),y=["pdf","docx"],M=10,_=D=>{if(!D)return"No file selected";const X=D.name.toLowerCase().split(".").pop();if(!y.includes(X))return`Invalid file type: .${X}. Only PDF and DOCX files are allowed.`;const $=D.size/(1024*1024);return $>M?`File too large: ${$.toFixed(1)}MB. Maximum size is ${M}MB.`:null},v=D=>{l(""),m(!1);const X=_(D);if(X){l(X),f(null);return}f(D)},S=D=>{var $;const X=($=D.target.files)==null?void 0:$[0];X&&v(X)},A=D=>{D.preventDefault(),D.stopPropagation(),!t&&!s&&r(!0)},E=D=>{D.preventDefault(),D.stopPropagation(),r(!1)},N=D=>{D.preventDefault(),D.stopPropagation()},T=D=>{var $;if(D.preventDefault(),D.stopPropagation(),r(!1),t||s)return;const X=($=D.dataTransfer.files)==null?void 0:$[0];X&&v(X)},P=()=>{!t&&!s&&g.current&&g.current.click()},L=async()=>{if(!(!h||s||t)){a(!0),l("");try{const D=await Sl.upload(h);if(D.success)f(null),m(!0),n&&n(D.resume),setTimeout(()=>m(!1),3e3);else throw new Error(D.message||"Upload failed")}catch(D){const X=D.message||"Failed to upload resume. Please try again.";l(X),e&&e(X)}finally{a(!1)}}},R=()=>{f(null),l(""),m(!1),g.current&&(g.current.value="")},b=D=>D<1024?`${D} B`:D<1024*1024?`${(D/1024).toFixed(1)} KB`:`${(D/(1024*1024)).toFixed(1)} MB`;return c.jsxs("div",{className:"resume-upload-premium",children:[c.jsx("input",{ref:g,type:"file",accept:".pdf,.docx",onChange:S,style:{display:"none"},disabled:t||s}),c.jsx("div",{className:`upload-dropzone-premium ${i?"dragging":""} ${t?"disabled":""} ${s?"uploading":""} ${h?"has-file":""}`,onDragEnter:A,onDragLeave:E,onDragOver:N,onDrop:T,onClick:h?void 0:P,role:"button",tabIndex:0,onKeyPress:D=>D.key==="Enter"&&!h&&P(),children:h?c.jsxs("div",{className:"selected-file-premium",children:[c.jsx("div",{className:"file-icon-wrapper",children:c.jsx(br,{size:28})}),c.jsxs("div",{className:"file-details",children:[c.jsx("p",{className:"file-name",children:h.name}),c.jsx("p",{className:"file-size",children:b(h.size)})]}),c.jsx("button",{type:"button",className:"remove-file-btn",onClick:D=>{D.stopPropagation(),R()},"aria-label":"Remove file",disabled:s,children:c.jsx(vR,{size:18})})]}):c.jsxs("div",{className:"dropzone-content",children:[c.jsx("div",{className:"upload-icon-wrapper",children:c.jsx(au,{size:32})}),c.jsxs("p",{className:"upload-title",children:[c.jsx("strong",{children:"Click to upload"})," or drag and drop"]}),c.jsxs("p",{className:"upload-subtitle",children:["PDF or DOCX (max ",M,"MB)"]})]})}),o&&c.jsxs("div",{className:"upload-message error",role:"alert",children:[c.jsx(ni,{size:16}),c.jsx("span",{children:o})]}),p&&c.jsxs("div",{className:"upload-message success",children:[c.jsx(Xn,{size:16}),c.jsx("span",{children:"Resume uploaded successfully!"})]}),h&&c.jsx("button",{type:"button",className:"btn btn-primary btn-lg upload-btn-premium",onClick:L,disabled:s||t,children:s?c.jsxs(c.Fragment,{children:[c.jsx(bD,{size:18,className:"spin"}),c.jsx("span",{children:"Uploading..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(au,{size:18}),c.jsx("span",{children:"Upload Resume"})]})})]})}function i5({resumes:n,selectedResumeId:e,onSelect:t,onDelete:i,loading:r=!1}){const[s,a]=B.useState(null),o=async p=>{if(window.confirm(`Delete "${p.filename}"? This cannot be undone.`)){a(p.id);try{await Sl.delete(p.id),i&&i(p.id)}catch(m){console.error("Failed to delete resume:",m),alert("Failed to delete resume. Please try again.")}finally{a(null)}}},l=p=>p<1024?`${p} B`:p<1024*1024?`${(p/1024).toFixed(1)} KB`:`${(p/(1024*1024)).toFixed(1)} MB`,h=p=>p?new Date(p).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",f=p=>{switch(p){case"success":return c.jsx("span",{className:"status-badge success",children:" Parsed"});case"pending":return c.jsx("span",{className:"status-badge pending",children:" Processing"});case"failed":return c.jsx("span",{className:"status-badge failed",children:" Failed"});default:return null}};return r?c.jsxs("div",{className:"resume-list-loading",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Loading resumes..."})]}):!n||n.length===0?c.jsxs("div",{className:"resume-list-empty",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsx("p",{children:"No resumes uploaded yet"}),c.jsx("p",{className:"hint",children:"Upload your resume to get personalized interview questions"})]}):c.jsx("div",{className:"resume-list",children:n.map(p=>c.jsxs("div",{className:`resume-item ${e===p.id?"selected":""}`,onClick:()=>t&&t(p),role:"button",tabIndex:0,onKeyPress:m=>m.key==="Enter"&&t&&t(p),children:[c.jsx("div",{className:"resume-icon",children:p.file_type==="pdf"?"":""}),c.jsxs("div",{className:"resume-info",children:[c.jsxs("div",{className:"resume-header",children:[c.jsx("span",{className:"resume-name",children:p.filename}),f(p.is_parsed)]}),c.jsxs("div",{className:"resume-meta",children:[c.jsx("span",{children:l(p.file_size)}),c.jsx("span",{className:"separator",children:""}),c.jsx("span",{children:h(p.created_at)})]})]}),e===p.id&&c.jsx("div",{className:"selected-indicator",children:""}),c.jsx("button",{type:"button",className:"delete-button",onClick:m=>{m.stopPropagation(),o(p)},disabled:s===p.id,"aria-label":`Delete ${p.filename}`,children:s===p.id?"...":""})]},p.id))})}function RC({result:n,loading:e=!1,error:t=null}){var a,o,l,h,f,p;if(e)return c.jsx("div",{className:"ats-result loading",children:c.jsxs("div",{className:"ats-loading",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Analyzing your resume..."}),c.jsx("p",{className:"loading-hint",children:"This may take a few seconds"})]})});if(t)return c.jsx("div",{className:"ats-result error",children:c.jsxs("div",{className:"ats-error",children:[c.jsx("span",{className:"error-icon",children:""}),c.jsx("p",{children:t})]})});if(!n)return null;const i=m=>m>=80?"excellent":m>=60?"good":m>=40?"moderate":"poor",r=m=>m>=85?"Excellent":m>=70?"Good":m>=55?"Moderate":m>=40?"Needs Work":"Low",s=m=>{switch(m==null?void 0:m.toLowerCase()){case"high":return"impact-high";case"medium":return"impact-medium";case"low":return"impact-low";default:return"impact-medium"}};return c.jsxs("div",{className:"ats-result",children:[c.jsx("div",{className:"ats-header",children:c.jsxs("div",{className:"ats-score-container",children:[c.jsxs("div",{className:`ats-score-circle ${i(n.overall_score)}`,children:[c.jsx("span",{className:"score-value",children:n.overall_score}),c.jsx("span",{className:"score-label",children:"ATS Score"})]}),c.jsxs("div",{className:"ats-score-info",children:[c.jsx("h3",{children:r(n.overall_score)}),c.jsxs("p",{className:"target-role",children:["For: ",n.target_role]}),n.analysis_source==="mock"&&c.jsx("span",{className:"mock-badge",children:"Demo Mode"})]})]})}),n.summary&&c.jsx("div",{className:"ats-summary",children:c.jsx("p",{children:n.summary})}),c.jsxs("div",{className:"ats-section",children:[c.jsx("h4",{children:" Score Breakdown"}),c.jsx("div",{className:"score-breakdown",children:Object.entries(n.breakdown||{}).map(([m,g])=>c.jsxs("div",{className:"breakdown-item",children:[c.jsx("div",{className:"breakdown-label",children:m.replace(/_/g," ").replace(/\b\w/g,y=>y.toUpperCase())}),c.jsx("div",{className:"breakdown-bar-container",children:c.jsx("div",{className:`breakdown-bar ${i(g)}`,style:{width:`${g}%`}})}),c.jsxs("div",{className:"breakdown-value",children:[g,"%"]})]},m))})]}),((a=n.skills_extracted)==null?void 0:a.length)>0&&c.jsxs("div",{className:"ats-section",children:[c.jsxs("h4",{children:[" Skills Detected (",n.skills_extracted.length,")"]}),c.jsx("div",{className:"skills-list",children:n.skills_extracted.map((m,g)=>c.jsx("span",{className:`skill-tag ${m.category||"general"}`,title:`${m.proficiency||"Unknown"} proficiency`,children:m.name},g))})]}),c.jsxs("div",{className:"ats-keywords-section",children:[((o=n.matched_keywords)==null?void 0:o.length)>0&&c.jsxs("div",{className:"keywords-column",children:[c.jsx("h4",{children:" Matched Keywords"}),c.jsx("ul",{className:"keywords-list matched",children:n.matched_keywords.map((m,g)=>c.jsx("li",{children:m},g))})]}),((l=n.missing_keywords)==null?void 0:l.length)>0&&c.jsxs("div",{className:"keywords-column",children:[c.jsx("h4",{children:" Missing Keywords"}),c.jsx("ul",{className:"keywords-list missing",children:n.missing_keywords.map((m,g)=>c.jsx("li",{children:m},g))})]})]}),((h=n.strength_areas)==null?void 0:h.length)>0&&c.jsxs("div",{className:"ats-section",children:[c.jsx("h4",{children:" Strengths"}),c.jsx("ul",{className:"insights-list strengths",children:n.strength_areas.map((m,g)=>c.jsxs("li",{children:[c.jsx("strong",{children:m.area}),c.jsx("span",{children:m.description})]},g))})]}),((f=n.weak_areas)==null?void 0:f.length)>0&&c.jsxs("div",{className:"ats-section",children:[c.jsx("h4",{children:" Areas to Improve"}),c.jsx("ul",{className:"insights-list weaknesses",children:n.weak_areas.map((m,g)=>c.jsxs("li",{children:[c.jsx("strong",{children:m.area}),c.jsx("span",{children:m.description}),m.suggestion&&c.jsxs("em",{className:"suggestion",children:[" ",m.suggestion]})]},g))})]}),((p=n.recommendations)==null?void 0:p.length)>0&&c.jsxs("div",{className:"ats-section",children:[c.jsx("h4",{children:" Recommendations"}),c.jsx("div",{className:"recommendations-list",children:n.recommendations.map((m,g)=>c.jsxs("div",{className:"recommendation-item",children:[c.jsxs("div",{className:"rec-header",children:[c.jsx("span",{className:"rec-area",children:m.area}),c.jsxs("span",{className:`impact-badge ${s(m.impact)}`,children:[m.impact||"medium"," impact"]})]}),c.jsx("p",{className:"rec-suggestion",children:m.suggestion})]},g))})]})]})}function r5({resume:n,onAnalysisComplete:e,initialResult:t=null}){const[i,r]=B.useState(""),[s,a]=B.useState(""),[o,l]=B.useState(!1),[h,f]=B.useState(t),[p,m]=B.useState(null),[g,y]=B.useState(!1);B.useEffect(()=>{f(null),r(""),m(null)},[n==null?void 0:n.id]);const M=S=>{S!==i&&(f(null),m(null)),r(S)},_=async()=>{if(!i.trim()){m("Please enter a target job role");return}if(!(n!=null&&n.id)){m("No resume selected");return}l(!0),m(null);try{const S=await dD.analyze(n.id,i.trim(),s.trim()||null);if(S.success&&S.result)f(S.result),e&&e(S.result);else throw new Error(S.message||"Analysis failed")}catch(S){m(S.message||"Failed to analyze resume. Please try again.")}finally{l(!1)}},v=["Software Engineer","Frontend Developer","Backend Developer","Full Stack Developer","Data Scientist","Product Manager","DevOps Engineer","UI/UX Designer"];return c.jsxs("div",{className:"ats-analyzer",children:[c.jsxs("div",{className:"ats-header-section",children:[c.jsx("div",{className:"ats-header-icon",children:c.jsx("span",{children:""})}),c.jsxs("div",{className:"ats-header-content",children:[c.jsx("h2",{className:"ats-header-title",children:"ATS Resume Analysis"}),c.jsx("p",{className:"ats-header-description",children:"Get AI-powered insights on how well your resume matches the target role"})]})]}),c.jsxs("div",{className:"ats-form-card",children:[c.jsx("div",{className:"ats-form-header",children:c.jsxs("div",{className:"form-step-badge",children:[c.jsx("span",{className:"step-number",children:"1"}),c.jsx("span",{className:"step-label",children:"Configure Analysis"})]})}),c.jsxs("div",{className:"ats-form-group",children:[c.jsxs("label",{htmlFor:"targetRole",className:"ats-label",children:[c.jsx("span",{className:"label-icon",children:""}),"Target Job Role"]}),c.jsx("input",{type:"text",id:"targetRole",value:i,onChange:S=>M(S.target.value),placeholder:"e.g., Software Engineer, Product Manager",disabled:o,className:"ats-input"}),c.jsxs("div",{className:"ats-role-suggestions",children:[c.jsx("span",{className:"suggestions-label",children:"Quick select:"}),c.jsx("div",{className:"suggestions-grid",children:v.map(S=>c.jsx("button",{type:"button",className:`ats-suggestion-chip ${i===S?"active":""}`,onClick:()=>M(S),disabled:o,children:S},S))})]})]}),c.jsxs("button",{type:"button",className:"ats-toggle-advanced",onClick:()=>y(!g),children:[c.jsx("span",{className:"toggle-icon",children:g?"":""}),c.jsx("span",{children:"Advanced Options"})]}),g&&c.jsx("div",{className:"ats-advanced-panel",children:c.jsxs("div",{className:"ats-form-group",children:[c.jsxs("label",{htmlFor:"targetDescription",className:"ats-label",children:[c.jsx("span",{className:"label-icon",children:""}),"Job Description (Optional)"]}),c.jsx("textarea",{id:"targetDescription",value:s,onChange:S=>a(S.target.value),placeholder:"Paste the full job description for more accurate keyword matching and scoring...",rows:5,disabled:o,className:"ats-textarea"}),c.jsx("p",{className:"ats-form-hint",children:" Adding a job description improves match accuracy by 40%"})]})}),p&&c.jsxs("div",{className:"ats-error-message",children:[c.jsx("span",{className:"error-icon",children:""}),c.jsx("span",{children:p})]}),c.jsx("button",{type:"button",className:"ats-analyze-button",onClick:_,disabled:o||!n,children:o?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"button-spinner"}),c.jsx("span",{children:"Analyzing Resume..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"button-icon",children:""}),c.jsx("span",{children:h?"Re-Analyze Resume":"Analyze Resume"})]})}),!n&&c.jsxs("div",{className:"ats-no-resume-hint",children:[c.jsx("span",{className:"hint-icon",children:""}),c.jsx("span",{children:"Upload a resume first to enable analysis"})]})]}),o&&c.jsx("div",{className:"ats-results-section",children:c.jsx(RC,{result:null,loading:!0,error:null})}),h&&!o&&c.jsxs("div",{className:"ats-results-section",children:[c.jsx("div",{className:"results-header",children:c.jsxs("div",{className:"results-badge",children:[c.jsx("span",{className:"badge-icon",children:""}),c.jsx("span",{children:"Analysis Complete"})]})}),c.jsx(RC,{result:h,loading:!1,error:null})]}),!h&&!o&&n&&c.jsxs("div",{className:"ats-empty-state-card",children:[c.jsxs("div",{className:"empty-state-illustration",children:[c.jsx("span",{className:"illustration-icon",children:""}),c.jsxs("div",{className:"illustration-lines",children:[c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{})]})]}),c.jsx("h3",{children:"Ready to Analyze"}),c.jsx("p",{children:"Enter a target role and click analyze to check your resume's ATS compatibility score"}),c.jsxs("ul",{className:"feature-highlights",children:[c.jsxs("li",{children:[c.jsx("span",{className:"feature-icon",children:""}),"Keyword matching analysis"]}),c.jsxs("li",{children:[c.jsx("span",{className:"feature-icon",children:""}),"Skills gap identification"]}),c.jsxs("li",{children:[c.jsx("span",{className:"feature-icon",children:""}),"Actionable recommendations"]})]})]})]})}function s5(){const n=di(),[e,t]=B.useState(!0),[i,r]=B.useState([]),[s,a]=B.useState(null),[o,l]=B.useState(null),[h,f]=B.useState(""),[p,m]=B.useState("upload"),g=ns(),y=B.useCallback(async()=>{var N;try{t(!0);const T=await Sl.getAll();T.success&&(r(T.resumes||[]),((N=T.resumes)==null?void 0:N.length)>0&&!s&&a(T.resumes[0]))}catch{l("Failed to load resumes. Please try again.")}finally{t(!1)}},[]);B.useEffect(()=>{y()},[y]);const M=N=>{r(T=>[N,...T]),a(N),f("Resume uploaded successfully!"),setTimeout(()=>f(""),3e3)},_=N=>{l(N),setTimeout(()=>l(""),5e3)},v=N=>{r(T=>T.filter(P=>P.id!==N)),(s==null?void 0:s.id)===N&&a(i.length>1?i.find(T=>T.id!==N):null),f("Resume deleted successfully!"),setTimeout(()=>f(""),3e3)},S=N=>a(N),A=N=>{f(`ATS Analysis complete! Score: ${N.overall_score}/100`),setTimeout(()=>f(""),5e3)},E=()=>{s&&n("/interview-prep",{state:{resumeId:s.id}})};return c.jsxs("div",{className:"resumes-container",children:[c.jsx(Yn,{user:g}),c.jsxs("main",{className:"resumes-main",children:[c.jsxs("section",{className:"page-header",children:[c.jsxs("div",{className:"header-content",children:[c.jsxs("h1",{children:[c.jsx(br,{size:32,style:{marginRight:"12px",color:"var(--primary)"}}),"My Resumes"]}),c.jsx("p",{children:"Upload, analyze, and manage your resumes for personalized interviews"})]}),s&&c.jsxs("button",{className:"btn btn-primary btn-lg",onClick:E,children:[c.jsx(Pr,{size:18}),"Start Interview"]})]}),h&&c.jsxs("div",{className:"success-banner",children:[c.jsx(Xn,{size:16}),c.jsx("span",{children:h})]}),o&&c.jsxs("div",{className:"error-banner",children:[c.jsxs("span",{children:[" ",o]}),c.jsx("button",{onClick:()=>l(null),children:""})]}),c.jsxs("div",{className:"tab-navigation",children:[c.jsxs("button",{className:`tab-button ${p==="upload"?"active":""}`,onClick:()=>m("upload"),children:[c.jsx(au,{size:16,style:{marginRight:"6px"}}),"Upload & Manage"]}),c.jsxs("button",{className:`tab-button ${p==="analyze"?"active":""}`,onClick:()=>m("analyze"),disabled:i.length===0,children:[c.jsx(mx,{size:16,style:{marginRight:"6px"}}),"ATS Analysis"]})]}),p==="upload"?c.jsxs("div",{className:"resumes-grid",children:[c.jsxs("section",{className:"upload-section",children:[c.jsxs("h2",{children:[c.jsx(au,{size:20,style:{marginRight:"8px"}}),"Upload New Resume"]}),c.jsx(n5,{onUploadSuccess:M,onUploadError:_})]}),c.jsxs("section",{className:"list-section",children:[c.jsxs("h2",{children:[c.jsx(br,{size:20,style:{marginRight:"8px"}}),"Your Resumes (",i.length,")"]}),c.jsx(i5,{resumes:i,selectedResumeId:s==null?void 0:s.id,onSelect:S,onDelete:v,loading:e})]})]}):c.jsxs("div",{className:"ats-tab-content",children:[c.jsxs("div",{className:"ats-resume-selector",children:[c.jsx("label",{children:"Select Resume to Analyze:"}),c.jsx("select",{value:(s==null?void 0:s.id)||"",onChange:N=>{const T=i.find(P=>P.id===N.target.value);a(T)},children:i.map(N=>c.jsxs("option",{value:N.id,children:[N.filename," (",N.is_parsed==="success"?" Parsed":"",")"]},N.id))})]}),c.jsx(r5,{resume:s,onAnalysisComplete:A})]}),c.jsxs("section",{className:"help-section",children:[c.jsxs("h3",{children:[c.jsx(vx,{size:20,style:{marginRight:"8px",color:"var(--warning)"}}),"Pro Tips"]}),c.jsxs("ul",{children:[c.jsx("li",{children:"Upload your resume to get personalized interview questions based on your experience"}),c.jsx("li",{children:"Use ATS Analysis to check how well your resume matches job requirements"}),c.jsx("li",{children:"Supported formats: PDF and DOCX (max 10MB)"}),c.jsx("li",{children:"Your resume is securely stored and only accessible by you"})]})]})]})]})}function a5(){var S,A,E;const n=di(),e=ns(),[t,i]=B.useState(!0),[r,s]=B.useState(null),[a,o]=B.useState(null),[l,h]=B.useState(30);B.useEffect(()=>{(async()=>{try{i(!0),s(null);const T=await pD.getDashboard(l);if(T.success)o(T);else throw new Error(T.message||"Failed to load analytics")}catch(T){s(T.message||"Failed to load analytics data")}finally{i(!1)}})()},[l]);const f=(N,T)=>N==="improving"?{icon:c.jsx(eh,{size:20}),text:`+${T}%`,className:"trend-up"}:N==="declining"?{icon:c.jsx(mR,{size:20}),text:`${T}%`,className:"trend-down"}:N==="stable"?{icon:c.jsx(oR,{size:20}),text:"Stable",className:"trend-stable"}:{icon:c.jsx(Nr,{size:20}),text:"Start practicing!",className:"trend-none"},p=N=>new Date(N).toLocaleDateString("en-US",{month:"short",day:"numeric"}),m=N=>N>=80?"score-excellent":N>=60?"score-good":N>=40?"score-fair":"score-needs-work",g=()=>{var T;const N=((T=a==null?void 0:a.progress_summary)==null?void 0:T.time_series)||[];return N.length===0?c.jsxs("div",{className:"chart-empty",children:[c.jsx(ul,{size:48}),c.jsx("p",{children:"Complete more interviews to see your progress chart!"})]}):c.jsx("div",{className:"progress-chart",children:c.jsx("div",{className:"chart-bars",children:N.map((P,L)=>c.jsxs("div",{className:"chart-bar-container",children:[c.jsx("div",{className:`chart-bar ${P.score?"has-data":"no-data"}`,style:{height:P.score?`${P.score/100*100}%`:"5%"},children:P.score&&c.jsx("span",{className:"bar-value",children:P.score})}),c.jsx("span",{className:"bar-label",children:P.label})]},L))})})},y=(N,T,P)=>!N||N.length===0?c.jsxs("div",{className:"skill-section",children:[c.jsxs("div",{className:"skill-section-header",children:[P,c.jsx("h4",{children:T})]}),c.jsx("p",{className:"no-data-text",children:"No data yet"})]}):c.jsxs("div",{className:"skill-section",children:[c.jsxs("div",{className:"skill-section-header",children:[P,c.jsx("h4",{children:T})]}),c.jsx("div",{className:"skill-bars",children:N.map((L,R)=>c.jsxs("div",{className:"skill-bar-item",children:[c.jsxs("div",{className:"skill-info",children:[c.jsx("span",{className:"skill-name",children:L.skill}),c.jsxs("span",{className:`skill-score ${m(L.average_score)}`,children:[L.average_score,"%"]})]}),c.jsx("div",{className:"skill-bar",children:c.jsx("div",{className:`skill-bar-fill ${m(L.average_score)}`,style:{width:`${L.average_score}%`}})})]},R))})]}),M=()=>{var P;const N=((P=a==null?void 0:a.question_types)==null?void 0:P.breakdown)||[];if(N.length===0)return c.jsxs("div",{className:"chart-empty",children:[c.jsx($f,{size:48}),c.jsx("p",{children:"Answer more questions to see your breakdown!"})]});const T={technical:c.jsx($s,{size:24}),behavioral:c.jsx(UD,{size:24}),situational:c.jsx(Pr,{size:24}),hr:c.jsx(gx,{size:24})};return c.jsx("div",{className:"question-type-grid",children:N.map((L,R)=>c.jsxs("div",{className:"question-type-card",children:[c.jsx("div",{className:"type-icon",children:T[L.type]||c.jsx($f,{size:24})}),c.jsxs("div",{className:"type-info",children:[c.jsx("span",{className:"type-label",children:L.label}),c.jsxs("span",{className:`type-score ${m(L.average_score)}`,children:[L.average_score,"%"]}),c.jsxs("span",{className:"type-count",children:[L.count," questions"]})]})]},R))})};if(t)return c.jsxs("div",{className:"analytics-container",children:[c.jsx(Yn,{user:e}),c.jsx("main",{className:"analytics-loading",children:c.jsxs("div",{className:"loading-card",children:[c.jsx(Lr,{size:48,className:"spin"}),c.jsx("h2",{children:"Loading Analytics"}),c.jsx("p",{children:"Crunching your numbers..."})]})})]});if(r)return c.jsxs("div",{className:"analytics-container",children:[c.jsx(Yn,{user:e}),c.jsx("main",{className:"analytics-loading",children:c.jsxs("div",{className:"error-card",children:[c.jsx(ni,{size:48}),c.jsx("h2",{children:"Something went wrong"}),c.jsx("p",{children:r}),c.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"Try Again"})]})})]});const _=(a==null?void 0:a.overview)||{},v=f(_.trend,_.trend_percent);return c.jsxs("div",{className:"analytics-container",children:[c.jsx(Yn,{user:e}),c.jsxs("main",{className:"analytics-main",children:[c.jsxs("header",{className:"analytics-header",children:[c.jsxs("div",{className:"header-content",children:[c.jsx("div",{className:"header-icon",children:c.jsx(ul,{size:32})}),c.jsxs("div",{children:[c.jsx("h1",{children:"Analytics Dashboard"}),c.jsx("p",{children:"Track your interview preparation progress"})]})]}),c.jsx("div",{className:"header-actions",children:c.jsxs("select",{value:l,onChange:N=>h(Number(N.target.value)),className:"form-select",children:[c.jsx("option",{value:7,children:"Last 7 days"}),c.jsx("option",{value:30,children:"Last 30 days"}),c.jsx("option",{value:90,children:"Last 90 days"}),c.jsx("option",{value:365,children:"Last year"})]})})]}),c.jsx("section",{className:"overview-section",children:c.jsxs("div",{className:"stats-grid analytics-stats",children:[c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-icon-wrapper",children:c.jsx(Pr,{size:24})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("span",{className:"stat-value",children:_.total_interviews||0}),c.jsx("span",{className:"stat-label",children:"Total Interviews"})]})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-icon-wrapper success",children:c.jsx(Xn,{size:24})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("span",{className:"stat-value",children:_.completed_interviews||0}),c.jsx("span",{className:"stat-label",children:"Completed"}),c.jsxs("span",{className:"stat-sub",children:[_.completion_rate||0,"% rate"]})]})]}),c.jsxs("div",{className:"stat-card highlight",children:[c.jsx("div",{className:"stat-icon-wrapper primary",children:c.jsx(cl,{size:24})}),c.jsxs("div",{className:"stat-content",children:[c.jsxs("span",{className:"stat-value gradient-text",children:[_.average_score||0,"%"]}),c.jsx("span",{className:"stat-label",children:"Average Score"})]})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:`stat-icon-wrapper ${v.className}`,children:v.icon}),c.jsxs("div",{className:"stat-content",children:[c.jsx("span",{className:`stat-value ${v.className}`,children:v.text}),c.jsx("span",{className:"stat-label",children:"Trend"})]})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-icon-wrapper",children:c.jsx($f,{size:24})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("span",{className:"stat-value",children:_.total_questions_answered||0}),c.jsx("span",{className:"stat-label",children:"Questions Answered"})]})]}),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-icon-wrapper warning",children:c.jsx(CD,{size:24})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("span",{className:"stat-value",children:_.recent_activity_count||0}),c.jsx("span",{className:"stat-label",children:"This Week"})]})]})]})}),c.jsxs("section",{className:"analytics-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx(eh,{size:24}),c.jsxs("div",{children:[c.jsx("h2",{children:"Score Progress"}),c.jsx("p",{children:"Your performance over time"})]})]}),c.jsxs("div",{className:"chart-card",children:[g(),((S=a==null?void 0:a.progress_summary)==null?void 0:S.improvement_points)!==0&&c.jsx("div",{className:`improvement-badge ${a.progress_summary.improvement_points>0?"up":"down"}`,children:a.progress_summary.improvement_points>0?c.jsxs(c.Fragment,{children:[c.jsx(Nr,{size:16}),"You've improved by ",a.progress_summary.improvement_points," points!"]}):"Keep practicing to improve your scores"})]})]}),c.jsxs("section",{className:"analytics-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx(cl,{size:24}),c.jsxs("div",{children:[c.jsx("h2",{children:"Skill Performance"}),c.jsx("p",{children:"Your strengths and areas for improvement"})]})]}),c.jsxs("div",{className:"skills-grid",children:[c.jsx("div",{className:"skill-card",children:y((A=a==null?void 0:a.skill_summary)==null?void 0:A.strengths,"Your Strengths",c.jsx(cl,{size:20,className:"text-success"}))}),c.jsx("div",{className:"skill-card",children:y((E=a==null?void 0:a.skill_summary)==null?void 0:E.weaknesses,"Focus Areas",c.jsx(gx,{size:20,className:"text-warning"}))})]})]}),c.jsxs("section",{className:"analytics-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx($f,{size:24}),c.jsxs("div",{children:[c.jsx("h2",{children:"Question Type Breakdown"}),c.jsx("p",{children:"Performance by question category"})]})]}),c.jsx("div",{className:"chart-card",children:M()})]}),c.jsxs("section",{className:"analytics-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx($s,{size:24}),c.jsxs("div",{children:[c.jsx("h2",{children:"Recent Interviews"}),c.jsx("p",{children:"Your latest practice sessions"})]})]}),((a==null?void 0:a.recent_interviews)||[]).length===0?c.jsxs("div",{className:"empty-state-card",children:[c.jsx(Pr,{size:48}),c.jsx("h3",{children:"No interviews yet"}),c.jsx("p",{children:"Complete your first interview to see results here"}),c.jsx("button",{className:"btn btn-primary",onClick:()=>n("/interview-prep"),children:"Start Your First Interview"})]}):c.jsx("div",{className:"recent-interviews-grid",children:a.recent_interviews.map((N,T)=>c.jsxs("div",{className:"recent-interview-card",onClick:()=>n(`/report/${N.id}`),children:[c.jsxs("div",{className:"interview-header",children:[c.jsx("span",{className:"interview-role",children:N.target_role}),c.jsx("span",{className:"interview-date",children:p(N.date)})]}),c.jsxs("div",{className:"interview-meta",children:[c.jsx("span",{className:"meta-badge",children:N.session_type}),c.jsx("span",{className:"meta-badge",children:N.difficulty}),c.jsxs("span",{className:"meta-badge",children:[N.questions_count," Qs"]})]}),c.jsx("div",{className:"interview-score",children:N.score!==null?c.jsxs("span",{className:`score-badge ${m(N.score)}`,children:[N.score,"%"]}):c.jsx("span",{className:"score-badge pending",children:"Pending"})})]},T))})]}),c.jsx("section",{className:"disclaimer-section",children:c.jsx("p",{children:(a==null?void 0:a.disclaimer)||"Analytics are based on your interview history and provide insights for improvement. They do not predict actual job interview outcomes."})}),c.jsx("section",{className:"cta-section",children:c.jsxs("button",{className:"btn btn-primary btn-lg",onClick:()=>n("/interview-prep"),children:[c.jsx(Nr,{size:20}),"Start New Interview"]})})]})]})}const xA=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",o5=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",l5=n=>n?`${Math.floor(n/60)} min`:"N/A",_A=n=>n>=80?"#10b981":n>=60?"#f59e0b":"#ef4444",c5=n=>n>=80?"Excellent":n>=60?"Good":n>=40?"Fair":"Needs Work";function u5({activeSection:n,onSectionChange:e,user:t}){var r;const i=[{id:"overview",label:"Overview",icon:ou},{id:"resumes",label:"Resumes",icon:br},{id:"interviews",label:"Interview History",icon:$s},{id:"analytics",label:"Analytics",icon:ul}];return c.jsxs("aside",{className:"profile-sidebar",children:[c.jsxs("div",{className:"sidebar-header",children:[c.jsx("div",{className:"user-avatar-large",children:((r=t==null?void 0:t.name)==null?void 0:r.charAt(0).toUpperCase())||"U"}),c.jsx("h3",{className:"user-name",children:(t==null?void 0:t.name)||"User"}),c.jsx("p",{className:"user-email",children:(t==null?void 0:t.email)||""})]}),c.jsx("nav",{className:"sidebar-nav",children:i.map(s=>{const a=s.icon;return c.jsxs("button",{className:`nav-item ${n===s.id?"active":""}`,onClick:()=>e(s.id),children:[c.jsx(a,{size:18}),c.jsx("span",{children:s.label}),c.jsx(ea,{size:16,className:"nav-arrow"})]},s.id)})}),c.jsx("div",{className:"sidebar-footer",children:c.jsxs("div",{className:"member-badge",children:[c.jsx(pR,{size:16}),c.jsxs("span",{children:["Member since ",xA(t==null?void 0:t.created_at)]})]})})]})}function NC({user:n,stats:e}){return c.jsxs("div",{className:"profile-section",children:[c.jsxs("h2",{className:"section-title",children:[c.jsx(ou,{size:24}),"Profile Overview"]}),c.jsxs("div",{className:"overview-grid",children:[c.jsxs("div",{className:"info-card",children:[c.jsx("h4",{children:"Personal Information"}),c.jsxs("div",{className:"info-row",children:[c.jsx(ou,{size:16}),c.jsx("span",{className:"info-label",children:"Name"}),c.jsx("span",{className:"info-value",children:(n==null?void 0:n.name)||"Not set"})]}),c.jsxs("div",{className:"info-row",children:[c.jsx(dR,{size:16}),c.jsx("span",{className:"info-label",children:"Email"}),c.jsx("span",{className:"info-value",children:(n==null?void 0:n.email)||"Not set"})]}),c.jsxs("div",{className:"info-row",children:[c.jsx($d,{size:16}),c.jsx("span",{className:"info-label",children:"Joined"}),c.jsx("span",{className:"info-value",children:xA(n==null?void 0:n.created_at)})]})]}),c.jsxs("div",{className:"stats-card",children:[c.jsx("h4",{children:"Quick Stats"}),c.jsxs("div",{className:"stats-grid",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-number",children:(e==null?void 0:e.total_interviews)||0}),c.jsx("span",{className:"stat-label",children:"Interviews"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-number",children:(e==null?void 0:e.completed_interviews)||0}),c.jsx("span",{className:"stat-label",children:"Completed"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsxs("span",{className:"stat-number",style:{color:_A((e==null?void 0:e.average_score)||0)},children:[(e==null?void 0:e.average_score)||0,"%"]}),c.jsx("span",{className:"stat-label",children:"Avg Score"})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-number",children:(e==null?void 0:e.total_resumes)||0}),c.jsx("span",{className:"stat-label",children:"Resumes"})]})]})]})]})]})}function d5({resumes:n,loading:e,onUpload:t,onDelete:i,onStartInterview:r}){const s=di();return e?c.jsxs("div",{className:"profile-section",children:[c.jsxs("h2",{className:"section-title",children:[c.jsx(br,{size:24}),"My Resumes"]}),c.jsxs("div",{className:"loading-state",children:[c.jsx(Lr,{size:32,className:"spin"}),c.jsx("p",{children:"Loading resumes..."})]})]}):c.jsxs("div",{className:"profile-section",children:[c.jsxs("div",{className:"section-header-row",children:[c.jsxs("h2",{className:"section-title",children:[c.jsx(br,{size:24}),"My Resumes"]}),c.jsxs("button",{className:"btn btn-primary",onClick:()=>s("/interview-prep"),children:[c.jsx(au,{size:16}),"Upload New Resume"]})]}),!n||n.length===0?c.jsxs("div",{className:"empty-state-card",children:[c.jsx(br,{size:48}),c.jsx("h3",{children:"No resumes uploaded"}),c.jsx("p",{children:"Upload your resume to get personalized interview preparation"}),c.jsx("button",{className:"btn btn-primary",onClick:()=>s("/interview-prep"),children:"Upload Resume"})]}):c.jsx("div",{className:"resume-list",children:n.map(a=>c.jsxs("div",{className:"resume-card",children:[c.jsx("div",{className:"resume-icon",children:c.jsx(br,{size:24})}),c.jsxs("div",{className:"resume-info",children:[c.jsx("h4",{className:"resume-name",children:a.filename||"Resume"}),c.jsxs("div",{className:"resume-meta",children:[c.jsxs("span",{className:"meta-item",children:[c.jsx($d,{size:14}),xA(a.created_at||a.uploaded_at)]}),c.jsx("span",{className:`status-badge ${a.is_parsed==="success"?"success":"pending"}`,children:a.is_parsed==="success"?"Parsed":"Processing"})]})]}),c.jsxs("div",{className:"resume-actions",children:[c.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>r(a.id),children:[c.jsx(hR,{size:14}),"Start Interview"]}),c.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>i(a.id),children:c.jsx(FD,{size:14})})]})]},a.id))})]})}function h5({interviews:n,loading:e}){const t=di();return e?c.jsxs("div",{className:"profile-section",children:[c.jsxs("h2",{className:"section-title",children:[c.jsx($s,{size:24}),"Interview History"]}),c.jsxs("div",{className:"loading-state",children:[c.jsx(Lr,{size:32,className:"spin"}),c.jsx("p",{children:"Loading interview history..."})]})]}):c.jsxs("div",{className:"profile-section",children:[c.jsxs("h2",{className:"section-title",children:[c.jsx($s,{size:24}),"Interview History"]}),!n||n.length===0?c.jsxs("div",{className:"empty-state-card",children:[c.jsx($s,{size:48}),c.jsx("h3",{children:"No interviews yet"}),c.jsx("p",{children:"Complete your first mock interview to see your history here"}),c.jsx("button",{className:"btn btn-primary",onClick:()=>t("/interview-prep"),children:"Start First Interview"})]}):c.jsx("div",{className:"interview-list",children:n.map(i=>c.jsxs("div",{className:"interview-card",children:[c.jsxs("div",{className:"interview-header",children:[c.jsxs("div",{className:"interview-title",children:[c.jsx("h4",{children:i.target_role||i.job_role||"Interview Session"}),c.jsx("span",{className:"interview-date",children:o5(i.created_at)})]}),c.jsx("div",{className:"interview-score",style:{color:_A(i.score||0)},children:i.score!==null&&i.score!==void 0?c.jsxs(c.Fragment,{children:[c.jsxs("span",{className:"score-value",children:[Math.round(i.score),"%"]}),c.jsx("span",{className:"score-label",children:c5(i.score)})]}):c.jsx("span",{className:"score-pending",children:"Pending"})})]}),c.jsx("div",{className:"interview-details",children:c.jsxs("div",{className:"detail-row",children:[c.jsxs("span",{className:"detail-item",children:[c.jsx(Pr,{size:14}),i.session_type||"Mixed"]}),c.jsxs("span",{className:"detail-item",children:[c.jsx(cl,{size:14}),i.difficulty||"Medium"]}),c.jsxs("span",{className:"detail-item",children:[c.jsx(Yc,{size:14}),l5(i.duration)]}),c.jsx("span",{className:`status-badge ${i.status==="completed"?"success":"info"}`,children:i.status||"In Progress"})]})}),i.status==="completed"&&c.jsxs("div",{className:"interview-summary",children:[i.strengths&&i.strengths.length>0&&c.jsxs("div",{className:"summary-section",children:[c.jsxs("h5",{children:[c.jsx(_x,{size:14})," Strengths"]}),c.jsx("div",{className:"tags",children:i.strengths.slice(0,3).map((r,s)=>c.jsx("span",{className:"tag success",children:typeof r=="string"?r:r.skill||r.area},s))})]}),i.weaknesses&&i.weaknesses.length>0&&c.jsxs("div",{className:"summary-section",children:[c.jsxs("h5",{children:[c.jsx(ni,{size:14})," Areas to Improve"]}),c.jsx("div",{className:"tags",children:i.weaknesses.slice(0,3).map((r,s)=>c.jsx("span",{className:"tag warning",children:typeof r=="string"?r:r.skill||r.area},s))})]})]}),c.jsxs("div",{className:"interview-actions",children:[c.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>t(`/report/${i.id}`),children:[c.jsx(Kc,{size:14}),"View Report"]}),c.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>{window.print()},children:[c.jsx(cR,{size:14}),"Download PDF"]}),i.has_recording&&c.jsxs("button",{className:"btn btn-ghost btn-sm",children:[c.jsx(gR,{size:14}),"Replay"]})]})]},i.id))})]})}function f5({analytics:n,loading:e}){const t=di();return e?c.jsxs("div",{className:"profile-section",children:[c.jsxs("h2",{className:"section-title",children:[c.jsx(ul,{size:24}),"Performance Analytics"]}),c.jsxs("div",{className:"loading-state",children:[c.jsx(Lr,{size:32,className:"spin"}),c.jsx("p",{children:"Loading analytics..."})]})]}):c.jsxs("div",{className:"profile-section",children:[c.jsxs("div",{className:"section-header-row",children:[c.jsxs("h2",{className:"section-title",children:[c.jsx(ul,{size:24}),"Performance Analytics"]}),c.jsxs("button",{className:"btn btn-ghost",onClick:()=>t("/analytics"),children:["View Full Dashboard",c.jsx(ea,{size:16})]})]}),!n||n.total_interviews===0?c.jsxs("div",{className:"empty-state-card",children:[c.jsx(ul,{size:48}),c.jsx("h3",{children:"No analytics data yet"}),c.jsx("p",{children:"Complete interviews to see your performance analytics"})]}):c.jsx("div",{className:"analytics-overview",children:c.jsxs("div",{className:"analytics-grid",children:[c.jsxs("div",{className:"analytics-card highlight",children:[c.jsxs("div",{className:"analytics-value",style:{color:_A(n.average_score||0)},children:[n.average_score||0,"%"]}),c.jsx("div",{className:"analytics-label",children:"Average Score"}),n.trend&&c.jsx("div",{className:`trend ${n.trend}`,children:n.trend==="improving"?c.jsxs(c.Fragment,{children:[c.jsx(eh,{size:14})," Improving"]}):n.trend==="declining"?c.jsxs(c.Fragment,{children:[c.jsx(mR,{size:14})," Declining"]}):"Stable"})]}),c.jsxs("div",{className:"analytics-card",children:[c.jsx("div",{className:"analytics-value",children:n.completed_interviews||0}),c.jsx("div",{className:"analytics-label",children:"Completed Interviews"})]}),c.jsxs("div",{className:"analytics-card",children:[c.jsxs("div",{className:"analytics-value",children:[n.completion_rate||0,"%"]}),c.jsx("div",{className:"analytics-label",children:"Completion Rate"})]}),c.jsxs("div",{className:"analytics-card",children:[c.jsxs("div",{className:"analytics-value",children:[n.best_score||0,"%"]}),c.jsx("div",{className:"analytics-label",children:"Best Score"})]})]})})]})}function p5(){const n=di(),e=ns(),[t,i]=B.useState("overview"),[r,s]=B.useState(!0),[a,o]=B.useState(null),[l,h]=B.useState([]),[f,p]=B.useState([]),[m,g]=B.useState(null),[y,M]=B.useState({total_interviews:0,completed_interviews:0,average_score:0,total_resumes:0});B.useEffect(()=>{(async()=>{try{s(!0),o(null);const E=await JD();g(E.analytics),p(E.interviews),h(E.resumes),M(CM(E.analytics,E.resumes.length))}catch(E){console.error("Failed to load profile:",E),o("Failed to load profile data");const N=so(),T=th();p(N),g(T),M(CM(T,0))}finally{s(!1)}})()},[]);const _=async A=>{if(window.confirm("Are you sure you want to delete this resume?"))try{await Sl.delete(A),h(E=>E.filter(N=>N.id!==A))}catch(E){console.error("Failed to delete resume:",E)}},v=A=>{n("/interview-prep",{state:{resumeId:A}})},S=()=>{switch(t){case"overview":return c.jsx(NC,{user:e,stats:y});case"resumes":return c.jsx(d5,{resumes:l,loading:r,onDelete:_,onStartInterview:v});case"interviews":return c.jsx(h5,{interviews:f,loading:r});case"analytics":return c.jsx(f5,{analytics:m==null?void 0:m.overview,loading:r});default:return c.jsx(NC,{user:e,stats:y})}};return c.jsxs("div",{className:"profile-container",children:[c.jsx(Yn,{user:e}),c.jsxs("main",{className:"profile-main",children:[c.jsx(u5,{activeSection:t,onSectionChange:i,user:e}),c.jsxs("div",{className:"profile-content",children:[a&&c.jsxs("div",{className:"error-banner",children:[c.jsx(ni,{size:16}),c.jsx("span",{children:a}),c.jsx("button",{onClick:()=>o(null),children:""})]}),S()]})]})]})}function m5(){const[n,e]=B.useState(!1),[t,i]=B.useState(.5),[r,s]=B.useState("dark"),[a,o]=B.useState(!0),[l,h]=B.useState([{time:new Date,message:"Page initialized",type:"info"}]);B.useEffect(()=>{const E=console.log,N=console.warn,T=console.error,P=(L,R)=>{h(b=>[{time:new Date,message:L,type:R},...b.slice(0,49)])};return console.log=(...L)=>{E(...L);const R=L.map(b=>typeof b=="string"?b:JSON.stringify(b)).join(" ");(R.includes("[Avatar]")||R.includes("[GLBAvatar]")||R.includes("[EyeContact]")||R.includes("[useFrame]"))&&P(R,"info")},console.warn=(...L)=>{N(...L),P(L.join(" "),"warn")},console.error=(...L)=>{T(...L),P(L.join(" "),"error")},P("Console logging attached","info"),()=>{console.log=E,console.warn=N,console.error=T}},[]),B.useEffect(()=>{document.body.style.background=r==="dark"?"#0d0d1a":"#f0f4f8",document.body.style.color=r==="dark"?"white":"#1a1a2e"},[r]);const f=()=>{e(!n),o(n)},p=()=>{s(r==="dark"?"light":"dark")},m={display:"flex",flexDirection:"column",height:"100vh",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif"},g={padding:"16px",background:r==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)",display:"flex",gap:"16px",flexWrap:"wrap",alignItems:"center",borderBottom:`1px solid ${r==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}`},y={display:"flex",flexDirection:"column",gap:"4px"},M={fontSize:"12px",color:r==="dark"?"#888":"#666"},_=E=>({padding:"8px 16px",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",transition:"all 0.2s",background:E==="speaking"?"#22c55e":E==="silent"?"#3b82f6":"#8b5cf6",color:"white"}),v={flex:1,position:"relative",minHeight:"400px"},S={padding:"16px",background:r==="dark"?"rgba(0, 0, 0, 0.3)":"rgba(0, 0, 0, 0.05)",maxHeight:"200px",overflowY:"auto",fontFamily:"monospace",fontSize:"12px"},A=E=>E==="error"?"#f87171":E==="warn"?"#fbbf24":r==="dark"?"#60a5fa":"#2563eb";return c.jsxs("div",{style:m,children:[c.jsxs("div",{style:g,children:[c.jsx("h2",{style:{margin:0,fontSize:"18px"},children:" Avatar Test Page"}),c.jsxs("div",{style:y,children:[c.jsx("label",{style:M,children:"Speaking State"}),c.jsx("button",{onClick:f,style:_(n?"speaking":"silent"),children:n?" Stop Speaking":" Start Speaking"})]}),c.jsxs("div",{style:y,children:[c.jsxs("label",{style:M,children:["Audio Level: ",t.toFixed(2)]}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:t,onChange:E=>i(parseFloat(E.target.value)),style:{width:"150px"}})]}),c.jsxs("div",{style:y,children:[c.jsx("label",{style:M,children:"Theme"}),c.jsx("button",{onClick:p,style:_("theme"),children:r==="dark"?" Switch to Light":" Switch to Dark"})]}),c.jsxs("div",{style:y,children:[c.jsx("label",{style:M,children:"Listening"}),c.jsx("button",{onClick:()=>o(!a),style:{..._("silent"),background:a?"#22c55e":"#6b7280"},children:a?" Listening":" Not Listening"})]})]}),c.jsx("div",{style:v,children:c.jsx(yA,{speaking:n,audioLevel:t,enabled:!0,theme:r,listening:a,enableWebcam:!1})}),c.jsxs("div",{style:S,children:[c.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px",color:r==="dark"?"#fff":"#000"},children:" Console Logs"}),l.map((E,N)=>c.jsxs("div",{style:{padding:"2px 0",borderBottom:`1px solid ${r==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}`,color:A(E.type)},children:["[",E.time.toLocaleTimeString(),"] ",E.message]},N))]})]})}function Gr({children:n}){const e=mo(),[t,i]=B.useState(!0),[r,s]=B.useState(!1),[a,o]=B.useState(!1);return B.useEffect(()=>{let l=!0;return(async()=>{if(!rR()){l&&(s(!1),i(!1));return}try{const f=await ys.verifyToken();if(!l)return;s(f),f||As()}catch(f){if(!l)return;f.message.includes("Unable to connect")||f.message.includes("Backend is unreachable")||f.message.includes("Failed to fetch")?(console.error("[ProtectedRoute] Backend unreachable:",f.message),o(!0)):(console.warn("[ProtectedRoute] Token verification failed:",f.message),As()),s(!1)}l&&i(!1)})(),()=>{l=!1}},[]),t?c.jsx("div",{className:"loading-container",children:c.jsxs("div",{className:"loading-content",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{className:"loading-text",children:"Verifying authentication..."})]})}):a?c.jsx("div",{className:"loading-container",children:c.jsxs("div",{className:"loading-content error-content",children:[c.jsx("div",{className:"error-icon",children:""}),c.jsx("h2",{className:"error-title",children:"Unable to Connect"}),c.jsx("p",{className:"error-text",children:"Cannot reach the server. Please ensure the backend is running."}),c.jsx("button",{className:"retry-button",onClick:()=>window.location.reload(),children:"Retry"}),c.jsx("button",{className:"login-button",onClick:()=>{As(),window.location.href="/login"},children:"Go to Login"})]})}):r?n:c.jsx(dx,{to:"/login",state:{from:e},replace:!0})}function g5(){return c.jsx(yD,{children:c.jsx(vD,{children:c.jsx(lD,{children:c.jsxs(sD,{children:[c.jsx(si,{path:"/login",element:c.jsx(zD,{})}),c.jsx(si,{path:"/signup",element:c.jsx(GD,{})}),c.jsx(si,{path:"/avatar-test",element:c.jsx(m5,{})}),c.jsx(si,{path:"/dashboard",element:c.jsx(Gr,{children:c.jsx(YD,{})})}),c.jsx(si,{path:"/select-domain",element:c.jsx(Gr,{children:c.jsx(qD,{})})}),c.jsx(si,{path:"/profile",element:c.jsx(Gr,{children:c.jsx(p5,{})})}),c.jsx(si,{path:"/interview-old",element:c.jsx(Gr,{children:c.jsx(TH,{})})}),c.jsx(si,{path:"/interview",element:c.jsx(Gr,{children:c.jsx(bC,{})})}),c.jsx(si,{path:"/interview/:sessionId",element:c.jsx(Gr,{children:c.jsx(bC,{})})}),c.jsx(si,{path:"/interview-prep",element:c.jsx(Gr,{children:c.jsx(KH,{})})}),c.jsx(si,{path:"/report/:sessionId",element:c.jsx(Gr,{children:c.jsx(ZH,{})})}),c.jsx(si,{path:"/resumes",element:c.jsx(Gr,{children:c.jsx(s5,{})})}),c.jsx(si,{path:"/roadmap/:sessionId",element:c.jsx(Gr,{children:c.jsx(t5,{})})}),c.jsx(si,{path:"/analytics",element:c.jsx(Gr,{children:c.jsx(a5,{})})}),c.jsx(si,{path:"/",element:c.jsx(dx,{to:"/dashboard",replace:!0})}),c.jsx(si,{path:"*",element:c.jsx(dx,{to:"/dashboard",replace:!0})})]})})})})}class v5 extends S_.Component{constructor(t){super(t);Hu(this,"handleReload",()=>{window.location.reload()});Hu(this,"handleGoHome",()=>{window.location.href="/"});Hu(this,"handleClearAndReload",()=>{try{localStorage.removeItem("ai_interviewer_token"),localStorage.removeItem("ai_interviewer_user")}catch(t){console.warn("Could not clear localStorage:",t)}window.location.href="/login"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,i){console.error("[ErrorBoundary] Caught error:",t),console.error("[ErrorBoundary] Error info:",i),this.setState({errorInfo:i})}render(){return this.state.hasError?c.jsx("div",{className:"error-boundary-container",children:c.jsxs("div",{className:"error-boundary-content",children:[c.jsx("div",{className:"error-boundary-icon",children:""}),c.jsx("h1",{className:"error-boundary-title",children:"Something went wrong"}),c.jsx("p",{className:"error-boundary-message",children:"We apologize for the inconvenience. An unexpected error occurred."}),this.state.error&&c.jsxs("details",{className:"error-boundary-details",open:!0,children:[c.jsx("summary",{children:"Error Details (Development Only)"}),c.jsx("pre",{children:this.state.error.toString()}),this.state.errorInfo&&c.jsx("pre",{children:this.state.errorInfo.componentStack})]}),c.jsxs("div",{className:"error-boundary-actions",children:[c.jsx("button",{className:"error-boundary-btn primary",onClick:this.handleReload,children:"Try Again"}),c.jsx("button",{className:"error-boundary-btn secondary",onClick:this.handleGoHome,children:"Go to Home"}),c.jsx("button",{className:"error-boundary-btn ghost",onClick:this.handleClearAndReload,children:"Clear Session & Login"})]}),c.jsx("p",{className:"error-boundary-hint",children:"If this problem persists, please try refreshing the page or clearing your browser cache."})]})}):this.props.children}}cD();window.onerror=function(n,e,t,i,r){return console.error("[Global Error]",n,e,t,i,r),!1};window.onunhandledrejection=function(n){console.error("[Unhandled Promise Rejection]",n.reason)};const PC=document.getElementById("root");PC?vy.createRoot(PC).render(c.jsx(S_.StrictMode,{children:c.jsx(v5,{children:c.jsx(g5,{})})})):document.body.innerHTML=`
        <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; font-family: system-ui, sans-serif; background: #f5f5f5;">
            <div style="text-align: center; padding: 2rem;">
                <h1 style="color: #333;">Application Error</h1>
                <p style="color: #666;">Could not mount the application. Please refresh the page.</p>
                <button onclick="window.location.reload()" style="padding: 0.75rem 1.5rem; background: #6366f1; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem;">
                    Refresh Page
                </button>
            </div>
        </div>
    `;export{x5 as c};
